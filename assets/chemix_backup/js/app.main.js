/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["zUnb","vendors~main~svg","vendors~main","main~svg"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "+GPU":
/*!*********************************!*\
  !*** ./src/api/auth/storage.ts ***!
  \*********************************/
/*! exports provided: storeToken, retrieveToken, clearToken */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storeToken", function() { return storeToken; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retrieveToken", function() { return retrieveToken; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearToken", function() { return clearToken; });
var KEY_JWT_TOKEN = "jwtToken";
function storeToken(token) {
    if (isLocalStorageAllowed()) {
        localStorage.setItem(KEY_JWT_TOKEN, token);
    }
}
function retrieveToken() {
    if (!isLocalStorageAllowed())
        return null;
    return localStorage.getItem(KEY_JWT_TOKEN);
}
function clearToken() {
    if (isLocalStorageAllowed()) {
        localStorage.removeItem(KEY_JWT_TOKEN);
    }
}
function isLocalStorageAllowed() {
    try {
        if (localStorage)
            return true;
    }
    catch (e) {
        return false;
    }
    return false;
}


/***/ }),

/***/ "+M27":
/*!**********************************!*\
  !*** ./src/components/radio.tsx ***!
  \**********************************/
/*! exports provided: Radio */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Radio", function() { return Radio; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tiers/context */ "tya1");
// Component for group of radios.


/** Renders a group of radios. */
var Radio = function (props) {
    var tiers = react__WEBPACK_IMPORTED_MODULE_0__["useContext"](tiers_context__WEBPACK_IMPORTED_MODULE_1__["TierContext"]);
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null, props.options.map(function (optionProps) {
        var value = optionProps.value, label = optionProps.label;
        var id = props.id + "_" + value;
        var allowSelection = tiers.allow(optionProps) || (props.allowSelectingTierLockedOptions);
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { key: value, className: "custom-control custom-radio" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("input", { type: "radio", key: value + "_radio", id: id, value: value, disabled: !allowSelection, checked: props.value == value, name: props.id, className: "custom-control-input", onChange: function (e) { return props.onChange(props.value, e.target.value); } }),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("label", { key: value + "_label", htmlFor: id, className: "custom-control-label", onClick: !allowSelection ? function () { return tiers.popup(id); } : function () { } },
                label,
                tiers.badge(optionProps, "ml-1")));
    }));
};


/***/ }),

/***/ "+bDL":
/*!*****************************************!*\
  !*** ./src/components/combo_slider.tsx ***!
  \*****************************************/
/*! exports provided: ComboSlider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComboSlider", function() { return ComboSlider; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./slider */ "9EA3");
// Hacky wraper for jquery slider pips.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var ComboSlider = /** @class */ (function (_super) {
    __extends(ComboSlider, _super);
    function ComboSlider(props) {
        var _this = _super.call(this, props) || this;
        _this.onSlideStart = function () {
            var _a;
            (_a = _this.props.onStart) === null || _a === void 0 ? void 0 : _a.call(null);
        };
        // Called when slider changed by sliding
        _this.onSlideChange = function (value) {
            _this.setState({ inputText: _this.inputText(value) });
            _this.props.onChange(value);
        };
        // Called when slider changed by setting a value.
        _this.onSlideEnd = function (initialValue, value) {
            _this.setState({ value: value, inputText: _this.inputText(value) });
            _this.props.onEnd(initialValue, value);
        };
        _this.state = { value: props.initialValue, inputText: _this.inputText(props.initialValue) };
        return _this;
    }
    /** Calculates input value to show in the input field. */
    ComboSlider.prototype.inputText = function (value) {
        if (this.props.unit === "%") {
            return Math.round(value * 100).toString();
        }
        return value.toString();
    };
    ComboSlider.prototype.componentDidUpdate = function (prevProps, prevState) {
        if (prevProps.initialValue != this.props.initialValue) {
            if (prevState.value != this.props.initialValue) {
                this.setState({
                    value: this.props.initialValue,
                    inputText: this.inputText(this.props.initialValue)
                });
            }
        }
    };
    /** Handle change when the input is typed into. */
    ComboSlider.prototype.onInputChange = function (event) {
        var value = event.target.value;
        this.setState({ inputText: value });
    };
    /** Handle change when the input loses focus. */
    ComboSlider.prototype.onInputBlur = function (event) {
        var _a;
        var value = event.target.value;
        var convertedValue = +value;
        if (isNaN(convertedValue)) {
            // Invalid value, reset back to original value and return.
            this.setState({ inputText: this.props.initialValue.toString() });
            return;
        }
        // Special handling based on unit.
        if (this.props.unit === "%") {
            convertedValue = convertedValue / 100;
        }
        // Clamp the value to range.
        convertedValue = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["clamp"])(convertedValue, this.props.min, this.props.max);
        // Round it to expected steps.
        convertedValue = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["quantize"])(convertedValue, this.props.min, (_a = this.props.step) !== null && _a !== void 0 ? _a : 1);
        // Invoke callback.
        this.props.onEnd(this.props.initialValue, convertedValue);
        // Set value for input.
        this.setState({ inputText: this.inputText(convertedValue) });
    };
    ComboSlider.prototype.render = function () {
        var _this = this;
        var comboClass = this.props.unit ? "combo-3" : "combo-2";
        return react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react__WEBPACK_IMPORTED_MODULE_2__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_slider__WEBPACK_IMPORTED_MODULE_3__["Slider"], { key: "slider", initialValue: this.state.value, min: this.props.min, max: this.props.max, step: this.props.step, pipsStep: this.props.pipsStep, formatLabel: this.props.formatLabel, onChange: this.onSlideChange, onStart: this.onSlideStart, onEnd: this.onSlideEnd, extraClass: "combo " + comboClass }),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("input", { key: "input", className: "slider-input ui-input " + comboClass, value: this.state.inputText, onChange: function (e) { return _this.onInputChange(e); }, onBlur: function (e) { return _this.onInputBlur(e); }, onKeyDown: function (e) { if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_1__["Keys"].ENTER)
                    Object(keyboard__WEBPACK_IMPORTED_MODULE_1__["focusMainApp"])(); } }),
            this.props.unit ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("span", { className: "slider-input-unit" }, this.props.unit) : undefined);
    };
    return ComboSlider;
}(react__WEBPACK_IMPORTED_MODULE_2__["Component"]));



/***/ }),

/***/ "+g11":
/*!***************************************************************!*\
  !*** ./src/apparatus/library/transportation/schlenk_lines.ts ***!
  \***************************************************************/
/*! exports provided: SchlenkLines */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchlenkLines", function() { return SchlenkLines; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/common/tap */ "ndDi");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_5__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







var MANOMETER_OFFSET = 250;
var SchlenkLines = /** @class */ (function () {
    function SchlenkLines() {
    }
    SchlenkLines.prototype.render = function (appearance) {
        var snaps = [];
        var portGaps = 100;
        var portOffset = 80;
        var ports = +appearance.ports;
        var topPipeworks = pipeworks(80, ports, portGaps, portOffset, 10, true, true);
        tubify(topPipeworks, Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"));
        snaps.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(topPipeworks.bounds.left, 0), facing: -90 }, { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(topPipeworks.bounds.right, 0), facing: 90 });
        var bottomPipeworks = pipeworks(40, ports, portGaps, portOffset, -10, true, false);
        tubify(bottomPipeworks, Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"));
        bottomPipeworks.position.y += 40;
        bottomPipeworks.position.x += 36;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([topPipeworks, bottomPipeworks]);
        if (appearance.coldTrap) {
            var coldTrap = createColdTrap();
            coldTrap.position.x -= 100;
            coldTrap.position.y += 40;
            graphic.addChild(coldTrap);
            // Place at the end of the outlet tube. Compute this from the position of the cold
            // trap's outlet tube (see inside createColdTrap() and then add the position shift above.)
            snaps.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-230, 40), facing: 180 });
        }
        else {
            snaps.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(bottomPipeworks.bounds.left, 40), facing: -90 });
        }
        // Add taps and outlets.
        for (var i = 0; i < ports; i++) {
            var tap = apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].create(appearance["tap" + (i + 1)]);
            tap.position.x = portOffset + i * portGaps + 18;
            tap.position.y = 78;
            var outlet = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 50]], [[0, 0]], [[8, 0]], [[8, 50]]));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(outlet);
            outlet.position.x = tap.position.x;
            outlet.position.y = 115;
            graphic.addChild(outlet);
            graphic.addChild(tap);
            snaps.push({ type: "connectable", at: outlet.bounds.bottomCenter, facing: 180 });
        }
        // Manometer
        if (appearance.manometer) {
            var manometerTube = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(MANOMETER_OFFSET, 31), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(MANOMETER_OFFSET, -30));
            manometerTube.strokeWidth = 8;
            var manometerGroup = new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([manometerTube]);
            tubify(manometerGroup, Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"));
            var manometerGraphic = manometer(appearance.reading);
            manometerGraphic.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(MANOMETER_OFFSET, -45);
            graphic.addChildren([manometerGroup, manometerGraphic]);
        }
        return {
            graphic: graphic,
            hitShape: graphic.strokeBounds.toShape(),
            snapping: snaps,
        };
    };
    SchlenkLines.properties = {
        label: "Schlenk Lines",
        canContainLiquids: false,
        defaultAppearance: {
            reading: "0.001",
            manometer: true,
            coldTrap: true,
            ports: "4",
            tap1: 1.0, tap2: 1.0, tap3: 1.0, tap4: 1.0, tap5: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "toggle-buttons", key: "ports", label: "Number of ports",
                size: "text",
                options: [
                    { label: "3", icon: "", value: "3" },
                    { label: "4", icon: "", value: "4" },
                    { label: "5", icon: "", value: "5" },
                ]
            },
            {
                spec: "checkbox", key: "coldTrap", label: "Cold Trap", subLabel: "Show"
            },
            {
                spec: "checkbox", key: "manometer", label: "Manometer", subLabel: "Show"
            },
            {
                spec: "text", key: "reading", label: "Reading",
                maxLength: 5,
                visible: function (a) { return a.manometer; }
            },
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpecFor("tap1", "Tap 1"),
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpecFor("tap2", "Tap 2"),
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpecFor("tap3", "Tap 3"),
            __assign(__assign({}, apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpecFor("tap4", "Tap 4")), { visible: function (a) { return +a.ports >= 4; } }),
            __assign(__assign({}, apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpecFor("tap5", "Tap 5")), { visible: function (a) { return +a.ports >= 5; } }),
        ],
    };
    return SchlenkLines;
}());

function pipeworks(length, outlets, outletGaps, outletOffset, bend, leftEnd, rightEnd) {
    var end = (outlets - 1) * outletGaps + outletOffset * 2;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]();
    var topPipe = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(end, 0));
    topPipe.strokeCap = "round";
    topPipe.strokeWidth = 18;
    graphic.addChild(topPipe);
    for (var i = 0; i < outlets; i++) {
        var x = outletOffset + i * outletGaps;
        var outlet = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[x, 0]], [[x, length - Math.abs(bend)]], [[x + bend, length], [-bend, 0]]));
        outlet.strokeWidth = 5;
        graphic.addChild(outlet);
    }
    if (leftEnd) {
        var end1 = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-20, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0)).withStroke(8, "white");
        graphic.addChild(end1);
    }
    if (rightEnd) {
        var end2 = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(end, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(end + 20, 0)).withStroke(8, "white");
        graphic.addChild(end2);
    }
    return graphic;
}
/**
 * Creates tubes by adding for each child a new child.
 * The original child is turned into the outlines,
 * while the latter child is the empty inside.
 */
function tubify(group, thickness) {
    var count = group.children.length;
    for (var i = 0; i < count; i++) {
        var child = group.children[i];
        var clone = child.clone();
        child.strokeWidth = clone.strokeWidth + thickness * 2;
        child.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke;
        clone.strokeColor = "white";
        group.addChild(clone);
    }
}
function manometer(reading) {
    var casing = paper__WEBPACK_IMPORTED_MODULE_5__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 60, 40, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 4.0);
    casing
        .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box(Object(color__WEBPACK_IMPORTED_MODULE_4__["hsl"])(0, 0, 90)))
        .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), Object(color__WEBPACK_IMPORTED_MODULE_4__["hsl"])(0, 0, 30).string());
    var screen = paper__WEBPACK_IMPORTED_MODULE_5__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 7, 46, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2);
    screen.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#777777");
    var display = new paper__WEBPACK_IMPORTED_MODULE_5__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 25),
        content: reading,
        fillColor: 'black',
        fontFamily: 'sans-serif',
        fontSize: 15,
        justification: "center",
    });
    return new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([casing, screen, display]);
}
function createColdTrap() {
    var container = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[120, 6]], [[20, 6]], [[20, 20], , [0, 20]], [[35, 60], [0, -20]], [[35, 220], , [0, 60]], [[-35, 220], [0, 60]], [[-35, 60], , [0, -20]], [[-20, 20], [0, 20]], [[-20, -20], , [0, -30]], [[20, -20], [0, -30]], [[20, -6]], [[120, -6]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(container);
    var tubePath = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 180]], [[0, -90]], [[-130, -90]], [[-130, 0]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(tubePath.segments[2], 30);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(tubePath.segments[1], 30);
    tubePath.strokeWidth = 8;
    var outletTube = new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([tubePath, new paper__WEBPACK_IMPORTED_MODULE_5__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-65, -90), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-65, -20)).withStroke(4, "black")]);
    tubify(outletTube, Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"));
    var tap = apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].create(0.0);
    tap.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-65, -65);
    return new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([container, outletTube, tap]);
}


/***/ }),

/***/ "+l7M":
/*!****************************************************!*\
  !*** ./src/apparatus/library/decorative/mirror.ts ***!
  \****************************************************/
/*! exports provided: Mirror */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mirror", function() { return Mirror; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "fdqv");



var Mirror = /** @class */ (function () {
    function Mirror() {
    }
    Mirror.prototype.render = function (appearance) {
        var height = appearance.size;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        for (var y = 0; y < height - 6; y += 10) {
            graphic.addChild(hashSymbol.value.place(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, y)));
        }
        var line = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, height)).withStroke("thick");
        line.strokeCap = "square";
        graphic.addChild(line);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    Mirror.properties = {
        label: "Mirror",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            size: 250,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 50, max: 1000, unit: "mm",
            }
        ],
    };
    return Mirror;
}());

var hashSymbol = new utils__WEBPACK_IMPORTED_MODULE_2__["Lazy"](function () {
    var hash = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(8, 8)).withStroke("thin", "#666666");
    hash.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
    return new paper__WEBPACK_IMPORTED_MODULE_1__["Symbol"](hash, false);
});


/***/ }),

/***/ "+pHq":
/*!****************************!*\
  !*** ./src/layout/app.tsx ***!
  \****************************/
/*! exports provided: App, ConnectedApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "App", function() { return App; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectedApp", function() { return ConnectedApp; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_auth_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/auth/storage */ "+GPU");
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_selection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/selection */ "xa7k");
/* harmony import */ var file_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! file/api */ "TDnk");
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var layout_editor_editor_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! layout/editor/editor_container */ "EvGu");
/* harmony import */ var layout_sidebar_tabbed_sidebar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! layout/sidebar/tabbed_sidebar */ "3kc6");
/* harmony import */ var layout_top_bar_extras__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! layout/top_bar/extras */ "4eva");
/* harmony import */ var layout_top_bar_top_bar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! layout/top_bar/top_bar */ "OTzt");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var panel_property_panel_adapter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! panel/property_panel_adapter */ "uU7G");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-redux */ "/MKj");
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var tiers_promo__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! tiers/promo */ "ka5u");
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! view/tooltips */ "6T3+");
/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../api/api */ "3kYy");
/* harmony import */ var _apparatus_common__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../apparatus/common */ "rTtD");
/* harmony import */ var _file_open_modal__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../file/open_modal */ "oQwc");
/* harmony import */ var _modals_welcome__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./modals/welcome */ "Ej3j");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




























var DELAY_SUPPORT_SERVICE_LOAD_MS = 500;
var SENTRY_REPORT_DIALOG_OPTIONS = {
    title: "Oops! Chemix has unexpectedly crashed.",
    subtitle: "We're sorry about this, our team has been notified. Please help us by providing additional information.",
    labelComments: "Please describe in as much detail the last steps you took before the error happened:",
};
/** Top-level App component. */
var App = /** @class */ (function (_super) {
    __extends(App, _super);
    function App(props) {
        var _this = _super.call(this, props) || this;
        /** Reference to the editor container. Needed for image export. */
        _this.editorContainerRef = react__WEBPACK_IMPORTED_MODULE_14__["createRef"]();
        /** Reference to the Chemix Plus about modal. */
        _this.aboutPlusModalRef = react__WEBPACK_IMPORTED_MODULE_14__["createRef"]();
        /** Reference to the File open modal. */
        _this.fileOpenModalRef = react__WEBPACK_IMPORTED_MODULE_14__["createRef"]();
        /** Reference to Welcome modal. Can be null. */
        _this.welcomeModalRef = react__WEBPACK_IMPORTED_MODULE_14__["createRef"]();
        _this.render = function () {
            if (_this.state.hasError) {
                return react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("div", { key: "error", className: "error-bar" },
                    react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("i", { className: "fa fa-dizzy fa-2x mr-2" }),
                    "Oops! Unfortunately Chemix has crashed.",
                    react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("div", { className: "d-inline-block" },
                        react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("button", { type: "button", className: "btn btn-outline-light mx-1", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])('CrashBar', 'SentryUserReport'); _sentry_react__WEBPACK_IMPORTED_MODULE_0__["showReportDialog"](__assign({ eventId: _this.state.errorId }, SENTRY_REPORT_DIALOG_OPTIONS)); } }, "Report crash"),
                        react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("button", { type: "button", className: "btn btn-outline-light mx-1", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])('CrashBar', 'OpenChat'); support_beacon__WEBPACK_IMPORTED_MODULE_18__["Bcn"].ask(); } }, "Chat to us"),
                        react__WEBPACK_IMPORTED_MODULE_14__["createElement"]("button", { type: "button", className: "btn btn-outline-light mx-1", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])('CrashBar', 'Reload'); window.location.reload(); } }, "Reload Chemix")));
            }
            return react__WEBPACK_IMPORTED_MODULE_14__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_19__["TierContext"].Provider, { value: new tiers_context__WEBPACK_IMPORTED_MODULE_19__["LoggedInTierContextValue"](_this.props.tier, function (label) { return _this.popup(label); }) },
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](layout_top_bar_top_bar__WEBPACK_IMPORTED_MODULE_11__["TopBar"], { key: "topBar", tool: _this.props.tool, auth: _this.props.auth, file: _this, cloudDiagramTitle: _this.props.cloudDiagramTitle }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](layout_editor_editor_container__WEBPACK_IMPORTED_MODULE_8__["EditorContainer"], __assign({ key: "editorContainer", ref: _this.editorContainerRef }, _this.props)),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](panel_property_panel_adapter__WEBPACK_IMPORTED_MODULE_13__["PropertyPanelAdapter"], { key: "PropertyPanelAdapter", selected: _this.props.selected, app: _this.editorContainerRef.current, theme: _this.props.theme }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](layout_sidebar_tabbed_sidebar__WEBPACK_IMPORTED_MODULE_9__["TabbedSidebar"], { key: "Sidebar" }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](layout_top_bar_extras__WEBPACK_IMPORTED_MODULE_10__["ScreenTooSmallWarning"], { key: "smallScreenWarning", onPricingClick: function () { return _this.popup("BlockingScreen"); } }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](tiers_promo__WEBPACK_IMPORTED_MODULE_20__["PlusPromoModal"], { key: "aboutPlusModal", auth: _this.props.auth, ref: _this.aboutPlusModalRef }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](_file_open_modal__WEBPACK_IMPORTED_MODULE_24__["FileOpenModal"], { auth: _this.props.auth, ref: _this.fileOpenModalRef }),
                react__WEBPACK_IMPORTED_MODULE_14__["createElement"](_modals_welcome__WEBPACK_IMPORTED_MODULE_25__["WelcomeModal"], { ref: _this.welcomeModalRef }));
        };
        _this.state = { hasError: false };
        return _this;
    }
    App.prototype.componentDidMount = function () {
        // Set up tooltips after everything has been rendered.
        Object(view_tooltips__WEBPACK_IMPORTED_MODULE_21__["setUpQTip"])();
        Object(view_tooltips__WEBPACK_IMPORTED_MODULE_21__["setUpQTip"])("#rotation-handle", 1000, true);
        // Set up keyboard short cuts.
        Object(keyboard__WEBPACK_IMPORTED_MODULE_7__["setUpKeyboard"])();
        // Hide the loading message.
        $("#loading-message").addClass("loaded");
        // Load support service (Beacon).
        support_beacon__WEBPACK_IMPORTED_MODULE_18__["Bcn"].init();
        setTimeout(function () { return support_beacon__WEBPACK_IMPORTED_MODULE_18__["Bcn"].load(); }, DELAY_SUPPORT_SERVICE_LOAD_MS);
        // If there is a stored token, trigger a fetch to see
        // if it is still valid. If it is, set up a session
        // from it.
        this.maybeRestoreAuthSession();
        // Animate in the app. This is done by a CSS transition,
        // by adding the "loaded" class.
        $("#app").addClass("loaded");
        // Return focus to app after remodal dialog closes.
        $(document).on('closed', '.remodal', function (e) {
            Object(keyboard__WEBPACK_IMPORTED_MODULE_7__["focusMainApp"])();
        });
        // Trigger welcome screen if not yet triggered.
        if (this.welcomeModalRef.current) {
            Object(_modals_welcome__WEBPACK_IMPORTED_MODULE_25__["maybeShowWelcome"])(this.welcomeModalRef.current);
        }
        // Handle hash url.
        this.handleUrlHash();
        // Load Twitter widgets.
        var twitterScript = document.createElement("script");
        twitterScript.src = "https://platform.twitter.com/widgets.js";
        twitterScript.async = true;
        document.body.appendChild(twitterScript);
    };
    App.prototype.componentDidUpdate = function (prevProps) {
        // Update theme.
        if (prevProps.theme.strokeThickness != this.props.theme.strokeThickness) {
            Object(_apparatus_common__WEBPACK_IMPORTED_MODULE_23__["setGloballyStrokeThicknessTheme"])(this.props.theme.strokeThickness);
            // Force re-render every component.
            for (var _i = 0, _a = this.props.items; _i < _a.length; _i++) {
                var item = _a[_i];
                Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_3__["disposeMarkSymbol"])();
                var component = this.editorContainerRef.current.getApparatusComponent(item.id);
                component === null || component === void 0 ? void 0 : component.forceCompleteRerender();
                component === null || component === void 0 ? void 0 : component.forceUpdate();
            }
        }
    };
    App.prototype.exportImages = function () {
        // This is bit hacky, we expose the export image methods on
        // the editor container so that we can call into its
        // child editor canvas.
        return this.editorContainerRef.current.exportImages();
    };
    App.prototype.maybeRestoreAuthSession = function () {
        var token = Object(api_auth_storage__WEBPACK_IMPORTED_MODULE_2__["retrieveToken"])();
        if (!token) {
            Object(log__WEBPACK_IMPORTED_MODULE_12__["clog"])("No token found to restore session from.");
            return;
        }
        Object(_api_api__WEBPACK_IMPORTED_MODULE_22__["callApi"])("reauth", "GET", token, undefined, {
            success: function (response) {
                if (response.type == "success") {
                    store_store__WEBPACK_IMPORTED_MODULE_17__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_16__["logIn"])({
                        provider: response.provider,
                        jwtToken: response.jwt,
                        user: response.user,
                        // This should presumably be false.
                        firstTimeLogin: response.firstTimeLogin,
                        tier: response.tier,
                    }));
                }
                else {
                    Object(api_auth_storage__WEBPACK_IMPORTED_MODULE_2__["clearToken"])();
                    Object(log__WEBPACK_IMPORTED_MODULE_12__["clog"])("Auth not restored from stored token.");
                }
            },
            generic: function () {
                // On error, clear the token.
                Object(api_auth_storage__WEBPACK_IMPORTED_MODULE_2__["clearToken"])();
            }
        });
    };
    App.prototype.saveToCloud = function (params) {
        var _this = this;
        var _a;
        var auth = store_store__WEBPACK_IMPORTED_MODULE_17__["appStore"].getState().auth;
        if (auth.state !== "logged_in")
            return;
        if (store_store__WEBPACK_IMPORTED_MODULE_17__["default"].items().length == 0 && store_store__WEBPACK_IMPORTED_MODULE_17__["default"].arrows().length == 0) {
            toastr.warning("Cannot save an empty diagram");
            return;
        }
        // Extract thumbnail and current document data.
        var thumbnail = this.editorContainerRef.current.exportThumbnail();
        file_api__WEBPACK_IMPORTED_MODULE_6__["CloudFiles"].save(auth, thumbnail, (_a = params === null || params === void 0 ? void 0 : params.forceNew) !== null && _a !== void 0 ? _a : false, {
            onDiagramsLimitExceeded: function () { return _this.fetchDiagramsFromCloud(); }
        });
        command_command__WEBPACK_IMPORTED_MODULE_4__["commandProcessor"].markClean();
    };
    App.prototype.fetchDiagramsFromCloud = function () {
        var modal = this.fileOpenModalRef.current;
        modal.open();
        modal.refresh();
    };
    // Tier Handler interface.
    App.prototype.popup = function (analyticsLabel) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("PromoPopup", analyticsLabel !== null && analyticsLabel !== void 0 ? analyticsLabel : "");
        this.aboutPlusModalRef.current.triggerOpen(analyticsLabel);
    };
    App.prototype.handleUrlHash = function () {
        if (window.location.hash == "#pricing") {
            this.popup("UrlHash");
            // Clear hash.
            window.history.pushState("", document.title, window.location.pathname + window.location.search);
        }
    };
    // Error handling.
    App.getDerivedStateFromError = function () {
        return { hasError: true };
    };
    App.prototype.componentDidCatch = function (error, errorInfo) {
        var _this = this;
        // Report to Sentry: https://docs.sentry.io/platforms/javascript/react/
        _sentry_react__WEBPACK_IMPORTED_MODULE_0__["withScope"](function (scope) {
            scope.setExtra("componentStack", errorInfo.componentStack);
            scope.setExtra("store", Object(store_store__WEBPACK_IMPORTED_MODULE_17__["extractDebugInfoFromStore"])());
            scope.setTag("fatalcrash", "yes");
            _sentry_react__WEBPACK_IMPORTED_MODULE_0__["addBreadcrumb"]({ category: "app", level: _sentry_react__WEBPACK_IMPORTED_MODULE_0__["Severity"].Fatal, message: "Error captured at error boundary" });
            var eventId = _sentry_react__WEBPACK_IMPORTED_MODULE_0__["captureException"](error);
            // Only set the errorId once.
            if (!_this.state.errorId) {
                _this.setState({ errorId: eventId });
                _sentry_react__WEBPACK_IMPORTED_MODULE_0__["showReportDialog"](__assign({ eventId: eventId }, SENTRY_REPORT_DIALOG_OPTIONS));
            }
        });
    };
    return App;
}(react__WEBPACK_IMPORTED_MODULE_14__["Component"]));

// React-Redux.
/** Converts the Redux state to App component's props. */
var mapStateToProps = function (store, _) {
    var _a;
    var selectedItems = store.items.filter(function (item) { return item.selected; });
    var selectedArrows = store.arrows.filter(function (arrow) { return arrow.selected; });
    return {
        zoom: store.zoom,
        items: store.items,
        arrows: store.arrows,
        selected: new editing_selection__WEBPACK_IMPORTED_MODULE_5__["Selected"](selectedItems, selectedArrows),
        tool: store.tool,
        auth: store.auth,
        tier: store.tier,
        cloudDiagramTitle: (_a = store.currentCloudDiagram) === null || _a === void 0 ? void 0 : _a.title,
        theme: store.theme,
    };
};
/** Container Component for App. */
var ConnectedApp = Object(react_redux__WEBPACK_IMPORTED_MODULE_15__["connect"])(mapStateToProps)(App);


/***/ }),

/***/ "+vqO":
/*!*****************************************!*\
  !*** ./src/apparatus/library/tripod.ts ***!
  \*****************************************/
/*! exports provided: Tripod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tripod", function() { return Tripod; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Tripod = /** @class */ (function () {
    function Tripod() {
    }
    Tripod.prototype.render = function (appearance) {
        var height = appearance.height;
        var width = appearance.width;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, height]], [[0, height - 5], [0, 5]], [[0, 5]], [[5, 0], [-5, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic, width / 2);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.strokeBounds);
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                graphic.placeable(),
                graphic.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    Tripod.properties = {
        label: "Tripod",
        canContainLiquids: false,
        defaultAppearance: {
            width: 120,
            height: 190,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 70, max: 180
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 30, max: 250
            }
        ],
    };
    return Tripod;
}());



/***/ }),

/***/ "///F":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/measurement/hydrometer.ts ***!
  \*********************************************************/
/*! exports provided: Hydrometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hydrometer", function() { return Hydrometer; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Hydrometer = /** @class */ (function () {
    function Hydrometer() {
    }
    Hydrometer.prototype.render = function (appearance) {
        var glass = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[5, -140], [0, -7]], [[5, 0], , [0, 5]], [[10, 10], [0, -5]], [[10, 70], , [0, 14]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(glass);
        glass.closePath();
        var ballast = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[10, 60], [0, -2]], [[10, 70], , [0, 14]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(ballast);
        ballast.close();
        var outline = glass.clone();
        // Style everything.
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(outline);
        glass.fillColor = "#ffffffaa";
        ballast.fillColor = "#555555";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([glass, ballast, outline]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(3, 0), -140, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -5), 4.0);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Hydrometer.properties = {
        label: "Hydrometer",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Hydrometer;
}());



/***/ }),

/***/ "/2cN":
/*!********************************!*\
  !*** ./src/apparatus/debug.ts ***!
  \********************************/
/*! exports provided: drawPivotAndCenter, drawCircle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawPivotAndCenter", function() { return drawPivotAndCenter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawCircle", function() { return drawCircle; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vars */ "nHh6");


function drawPivotAndCenter(group, color, size) {
    if (size === void 0) { size = 5.0; }
    if (!vars__WEBPACK_IMPORTED_MODULE_1__["Debug"].CENTERS)
        return;
    var center = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Circle(new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](0, 0), size);
    center.fillColor = color;
    group.addChild(center);
    var pivotRect = new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](group.pivot, new paper__WEBPACK_IMPORTED_MODULE_0__["Size"](size * 2, size * 2));
    var pivot = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(pivotRect);
    pivot.fillColor = color;
    group.addChild(pivot);
}
function drawCircle(point, color) {
    var circle = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Circle(point, 5);
    circle.fillColor = color;
}


/***/ }),

/***/ "/DYk":
/*!********************************!*\
  !*** ./src/tiers/promo_ui.tsx ***!
  \********************************/
/*! exports provided: Tick, Info, InfoLink, BeaconLink */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tick", function() { return Tick; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Info", function() { return Info; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InfoLink", function() { return InfoLink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BeaconLink", function() { return BeaconLink; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
// Shared ui elements for Promo popup

var Tick = function () { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-check" })); };
var Info = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "info_chip fa fa-info-circle ml-1", title: props.hint })); };
var InfoLink = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: props.link, target: "_blank" },
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"](Info, { hint: props.hint }))); };
var BeaconLink = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { className: "info_chip fa fa-info-circle ml-1", "data-beacon-article-sidebar": props.article, title: props.hint })); };


/***/ }),

/***/ "/GBr":
/*!******************************!*\
  !*** ./src/store/actions.ts ***!
  \******************************/
/*! exports provided: addItems, addItemsAtIndices, updateAppearance, updateItemsAppearance, updateAppearanceProperties, updateItemsAppearanceProperties, removeItems, removeFromGroup, addToGroup, setItemsRotation, generic, switchTool, eraseItems, replace, setCloudDiagram, setThemeStrokeThickness, _TESTONLY_resetState, logIn, logOut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addItems", function() { return addItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addItemsAtIndices", function() { return addItemsAtIndices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateAppearance", function() { return updateAppearance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateItemsAppearance", function() { return updateItemsAppearance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateAppearanceProperties", function() { return updateAppearanceProperties; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateItemsAppearanceProperties", function() { return updateItemsAppearanceProperties; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeItems", function() { return removeItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeFromGroup", function() { return removeFromGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addToGroup", function() { return addToGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setItemsRotation", function() { return setItemsRotation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generic", function() { return generic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "switchTool", function() { return switchTool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "eraseItems", function() { return eraseItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replace", function() { return replace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setCloudDiagram", function() { return setCloudDiagram; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setThemeStrokeThickness", function() { return setThemeStrokeThickness; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_TESTONLY_resetState", function() { return _TESTONLY_resetState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logIn", function() { return logIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logOut", function() { return logOut; });
/* harmony import */ var typesafe_actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! typesafe-actions */ "hkBr");
/* harmony import */ var typesafe_actions__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__);
// The App's possible actions to modify the store.

// Following tutorials:
//  - https://github.com/piotrwitek/typesafe-actions#behold-the-mighty-tutorial
//  - https://github.com/piotrwitek/react-redux-typescript-guide
// Actions
// 1. Define an action here.
// 2. Define how it's resolved in terms of modifying the store, in reducer
var addItems = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/ADD_ITEM", function (resolve) {
    return function (data) { return resolve(data); };
});
var addItemsAtIndices = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/ADD_ITEMS_AT_INDEX", function (resolve) {
    return function (data) { return resolve(data); };
});
/** Updates the appearance by modifying a single property. */
var updateAppearance = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/UPDATE_APPEARANCE", function (resolve) {
    return function (id, key, value) { return resolve({ id: id, key: key, value: value }); };
});
/** Updates appearance by modifying a single property of multiple items of the same type. */
var updateItemsAppearance = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/UPDATE_APPEARANCE_MULTI_ITEMS", function (resolve) {
    return function (key, values) {
        var idsToValuesMap = {};
        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {
            var value = values_1[_i];
            idsToValuesMap[value.id.id] = value.value;
        }
        return resolve({ key: key, idsToValuesMap: idsToValuesMap });
    };
});
/**
 * Updates the appearance by modifying multiple properties of a single item. Works on Apparatus only.
 */
var updateAppearanceProperties = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/UPDATE_APPEARANCE_PROPS", function (resolve) {
    return function (id, props) { return resolve({ id: id, props: props }); };
});
/** Updates the appearance of multiple properties of apparatus of the same type. Works on apparatus only. */
var updateItemsAppearanceProperties = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/UPDATE_APPEARANCE_PROPS_MULTI_ITEMS", function (resolve) {
    return function (ids, props) { return resolve({ ids: ids, props: props }); };
});
var removeItems = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/REMOVE_ITEMS", function (resolve) {
    return function (ids) { return resolve({ ids: ids }); };
});
var removeFromGroup = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/REMOVE_FROM_GROUP", function (resolve) {
    return function (data) { return resolve(data); };
});
var addToGroup = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/ADD_TO_GROUP", function (resolve) {
    return function (data) { return resolve(data); };
});
/**
 * Note this only rotates apparatus, not arrows. It takes in an unsorted
 * dictionary of apparatus ID numbers desired rotation values.
 */
var setItemsRotation = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/SET_ITEMS_ROTATION", function (resolve) {
    return function (rotations) { return resolve({ rotations: rotations }); };
});
var generic = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/GENERIC", function (resolve) {
    return function (name, actionFn) { return resolve({ name: name, actionFn: actionFn }); };
});
/** Switch the current active tool. */
var switchTool = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/SWITCH_TOOL", function (resolve) {
    return function (tool) { return resolve(tool); };
});
/**
 * Erases items and arrows.
 * TODO: This is needed because refs stored in editor canvas
 * are based on ID only but not type. This means the same ID
 * could be reused for a different apparatus type, so the
 * refs are now pointing to old objects.
 */
var eraseItems = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/CLEAR_ALL", function (resolve) {
    return function () { return resolve(); };
});
// File-related operations.
/** Replace current state with given document. */
var replace = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/REPLACE", function (resolve) {
    return function (diagram, isTemplate) { return resolve({ diagram: diagram, isTemplate: isTemplate }); };
});
/** Sets cloud information about current diagram, or resets it to null. */
var setCloudDiagram = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createStandardAction"])("chemix/SET_CLOUD_DIAGRAM")();
/** Updates the current theme thickness. */
var setThemeStrokeThickness = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createStandardAction"])("chemix/SET_THEME_STROKE")();
/** Resets state completely, should only be used for tests. */
var _TESTONLY_resetState = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("chemix/TEST_ONLY_RESET_STATE", function (resolve) {
    return function (state) { return resolve(state); };
});
// Auth actions.
var logIn = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("user/LOG_IN", function (resolve) {
    return function (data) { return resolve(data); };
});
var logOut = Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_0__["createAction"])("user/LOG_OUT", function (resolve) {
    return function () { return resolve(); };
});


/***/ }),

/***/ "/OBm":
/*!****************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/microplates.ts ***!
  \****************************************************************/
/*! exports provided: Microplate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Microplate", function() { return Microplate; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var LABEL_COLOR = "#333333";
var Microplate = /** @class */ (function () {
    function Microplate() {
    }
    Microplate.prototype.render = function (appearance) {
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        var snapping = { type: "spotting_tile", at: [] };
        graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-15, -15, 123, 87, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_LEFT), 4.0)
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke)
            .withFill("white"));
        for (var j = 0; j < 8; j++) {
            var y = j * 9;
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
                point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-9, y + 2),
                content: String.fromCharCode(65 + j),
                fillColor: LABEL_COLOR,
                fontFamily: 'sans-serif',
                fontSize: 5,
                justification: "center",
            }));
            for (var i = 0; i < 12; i++) {
                var x = i * 9;
                if (j === 0) {
                    graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
                        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, -7),
                        content: (i + 1),
                        fillColor: LABEL_COLOR,
                        fontFamily: 'sans-serif',
                        fontSize: 5,
                        justification: "center",
                    }));
                }
                var circle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, y), 4).withStroke("thinner", "#666666");
                graphic.addChild(circle);
                if (appearance.zoomed) {
                    snapping.at.push(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x * 4, y * 4));
                }
            }
        }
        if (appearance.zoomed) {
            graphic.scale(4.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping,
        };
    };
    Microplate.properties = {
        label: "Microplate",
        canContainLiquids: false,
        defaultAppearance: {
            zoomed: false
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "zoomed", label: "Zoomed" }
        ],
    };
    return Microplate;
}());



/***/ }),

/***/ "/V77":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/biology/organic/agar.ts ***!
  \*******************************************************/
/*! exports provided: Agar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Agar", function() { return Agar; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var DEFAULT_DIFFUSION_COLOUR = "#eacdd2";
var Agar = /** @class */ (function () {
    function Agar() {
    }
    Agar.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height, color = appearance.color, diffused = appearance.diffused, diffusion = appearance.diffusion, diffusionColor = appearance.diffusionColor;
        var core = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, width, height)).withFill(color);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([core]);
        // Distance of blending
        var blend;
        var gradient;
        if (diffused) {
            blend = Math.min(height, width) * diffusion * 0.5;
            gradient = [[diffusionColor, 0.6], [diffusionColor + "00", 1.0]];
        }
        else {
            blend = 5;
            gradient = [["#ffffff40", 0.0], ["#ffffff00", 1.0]];
        }
        var top = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, width, blend)).withGradientFill("down", gradient);
        var right = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(width, 0, blend, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_RIGHT)).withGradientFill("left", gradient);
        var bottom = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, height, width, blend, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].BOTTOM_LEFT)).withGradientFill("up", gradient);
        var left = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, blend, height)).withGradientFill("right", gradient);
        graphic.addChildren([top, right, bottom, left]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(15).toShape()
        };
    };
    Agar.properties = {
        label: "Agar cube",
        canContainLiquids: false,
        defaultAppearance: {
            width: 40,
            height: 40,
            color: "#b21f2a",
            diffused: false,
            diffusion: 0.2,
            diffusionColor: DEFAULT_DIFFUSION_COLOUR,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 15, max: 80, unit: "mm"
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 15, max: 80, unit: "mm"
            },
            {
                spec: "color", key: "color", label: "Colour",
            },
            {
                spec: "checkbox", key: "diffused", label: "Diffused",
            },
            {
                spec: "slider", key: "diffusion", label: "Diffusion amount",
                min: 0.1, max: 0.9, step: 0.01, unit: "%",
                visible: function (a) { return a.diffused; }
            },
            {
                spec: "color", key: "diffusionColor", label: "Diffusion colour",
                visible: function (a) { return a.diffused; }
            },
        ],
    };
    return Agar;
}());



/***/ }),

/***/ "/dpX":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/heating/calorimetry_cup.ts ***!
  \**********************************************************/
/*! exports provided: CalorimetryCup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CalorimetryCup", function() { return CalorimetryCup; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "UCWy");



var styrofoamGradient = [
    ["#999999", 0.0],
    ["#bbbbbb", 0.1],
    ["#bbbbbb", 0.9],
    ["#888888", 1.0],
];
var CalorimetryCup = /** @class */ (function () {
    function CalorimetryCup() {
    }
    CalorimetryCup.prototype.render = function (appearance) {
        var size = appearance.size;
        var radius = size / 4 + 10; // original size is 120, bottom radius 25
        var cup = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[radius + 1, 12]], [[radius + 2, 0]], [[radius, 0]], [[radius - 15, size]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(cup);
        var liquidMask = cup.clone();
        cup.strokeWidth = 3.0;
        cup.setGradientStroke("right", styrofoamGradient);
        var cupOutline = cup.clone();
        cupOutline.strokeWidth = 5.0;
        cupOutline.strokeColor = "#666666";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([cupOutline, cup]);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                graphic.placeable(),
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -2), diameter: (radius) * 2, facing: 0 },
            ]
        };
    };
    CalorimetryCup.properties = {
        label: "Calorimetry cup",
        canContainLiquids: true,
        defaultAppearance: {
            size: 120
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Height",
                min: 60, max: 150, unit: "mm"
            }
        ],
    };
    return CalorimetryCup;
}());



/***/ }),

/***/ "/nic":
/*!***************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/water_bath.ts ***!
  \***************************************************************/
/*! exports provided: WaterBath */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WaterBath", function() { return WaterBath; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var WaterBath = /** @class */ (function () {
    function WaterBath() {
    }
    WaterBath.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height;
        var box = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[width, 0]], [[width, height]], [[0, height]]));
        box.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(box.segments[3], 10.0);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(box.segments[2], 10.0);
        var liquidSpace = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[10, -20]], [[width - 90, -20]], [[width - 90, height - 20]], [[10, height - 20]]));
        liquidSpace.closePath();
        var container = box.subtract(liquidSpace);
        box.remove();
        var panel = createPanel();
        panel.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width - 45, height - 50);
        container
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#666666")
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box("#cccccc".color()));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([container, panel]);
        return {
            graphic: graphic,
            liquidMask: liquidSpace,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                {
                    type: "placeable_surface",
                    start: liquidSpace.strokeBounds.bottomLeft,
                    end: liquidSpace.strokeBounds.bottomRight,
                },
                container.placeable(),
            ]
        };
    };
    WaterBath.properties = {
        label: "Water bath",
        canContainLiquids: true,
        defaultAppearance: {
            width: 490,
            height: 180,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 280, max: 600
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 120, max: 240
            },
        ],
    };
    return WaterBath;
}());

function createPanel() {
    var outside = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 70, 45), 4)
        .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#888888")
        .withFill("#f2f2f2");
    var lcd = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(10, 10, 50, 10))
        .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#578596")
        .withFill("#88c4db");
    var button1 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(10, 25, 10, 10), 2)
        .withFill("#7a7a7a");
    var button2 = button1.clone();
    button2.position.x += 15;
    var button3 = button1.clone();
    button3.position.x += 30;
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([outside, lcd, button1, button2, button3]);
}


/***/ }),

/***/ "0A45":
/*!*******************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/choice_chamber.ts ***!
  \*******************************************************************/
/*! exports provided: ChoiceChamber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChoiceChamber", function() { return ChoiceChamber; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


/**
 * https://www.timstar.co.uk/en120975-timstar-choice-chamber.html
 */
var ChoiceChamber = /** @class */ (function () {
    function ChoiceChamber() {
    }
    ChoiceChamber.prototype.render = function (appearance) {
        var outline = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 100);
        var vertical = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -100), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 100));
        var horizontal = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-100, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(100, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([outline, vertical, horizontal]).withStroke("default");
        if (appearance.darkHalf) {
            graphic.insertChild(0, new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Arc(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -100), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-100, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 100)).close().withFill("#444444"));
        }
        if (appearance.lid) {
            var lid = new paper__WEBPACK_IMPORTED_MODULE_1__["CompoundPath"]([]);
            lid.fillRule = "evenodd";
            lid.addChild(new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 102));
            lid.addChild(new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 20));
            lid.withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].glassEdge)
                .withGradientFill("right-down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedGradients"].glass);
            graphic.addChild(lid);
        }
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    ChoiceChamber.properties = {
        label: "Choice Chamber",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            lid: true,
            darkHalf: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 2, step: 0.01, unit: "%"
            },
            {
                spec: "checkbox-group", label: "Options", checkboxes: [
                    { key: "lid", label: "Add lid" },
                    { key: "darkHalf", label: "Half-dark" },
                ]
            }
        ],
    };
    return ChoiceChamber;
}());



/***/ }),

/***/ "0J4H":
/*!****************************************!*\
  !*** ./src/components/colorpicker.tsx ***!
  \****************************************/
/*! exports provided: BOOTSTRAP_COLORPICKER_CSS_SELECTOR, DEFAULT_SWATCHES, ColorPicker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOOTSTRAP_COLORPICKER_CSS_SELECTOR", function() { return BOOTSTRAP_COLORPICKER_CSS_SELECTOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_SWATCHES", function() { return DEFAULT_SWATCHES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorPicker", function() { return ColorPicker; });
/* harmony import */ var components_combo_slider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/combo_slider */ "+bDL");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
// Wrapper for Bootstrap color picker 3.1.2


/** CSS class to locate the element that is used to set up the color picker. */
var BOOTSTRAP_COLORPICKER_CSS_SELECTOR = ".ui-colorpicker2 .colorpicker-element";
var DEFAULT_SWATCHES = {
    'Blue': '#80cce6',
    'Red': '#e33d4d',
    'Green': '#3ac433',
    'Yellow': '#d7d725',
    'Gray': '#a0a0a0',
    'Purple': '#ca57a4',
};
var ColorPicker = /** @class */ (function (_super) {
    __extends(ColorPicker, _super);
    function ColorPicker(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = { value: props.value };
        _this.swatches = props.swatches || DEFAULT_SWATCHES;
        return _this;
    }
    ColorPicker.prototype.componentDidMount = function () {
        var jqElement = $(this.ref.current);
        var self = this;
        // 1. If adding any event handlers, make sure to remove them
        //    in componentWillUnmount
        // 2. When invoking callbacks with color values, remember convert
        //    color values to lower case, so that colors can be compared.
        jqElement
            .val(this.props.value)
            .colorpicker({
            color: this.state.value,
            popover: {
                placement: "left",
                boundary: "window",
            },
            extensions: [
                {
                    name: 'swatches',
                    options: {
                        colors: this.swatches,
                        nameAsValues: true,
                    }
                },
                { name: "manualinput" },
                { name: "extrabuttons" },
            ],
        })
            .on('colorpickerChange', function (e) {
            if (e.color) {
                var color = e.color.toString().toLowerCase();
                self.setState({ value: color });
                self.props.onColorChange(color);
            }
        })
            .on('colorpickerHide', function (e) {
            if (e.color) {
                var color = e.color.toString().toLowerCase();
                self.setState({ value: color });
                self.props.onColorEnd(color);
            }
        });
    };
    ColorPicker.prototype.componentDidUpdate = function (prevProps, prevState) {
        // Only update on props changes.
        if (prevProps.value != this.props.value) {
            var jqElement = $(this.ref.current);
            jqElement.colorpicker('setValue', this.props.value);
        }
    };
    ColorPicker.prototype.componentWillUnmount = function () {
        var jqElement = $(this.ref.current);
        var color = jqElement.colorpicker('getValue');
        if (color) {
            this.props.onColorEnd(color.toString().toLowerCase());
        }
        // Hide & Remove event handlers.
        jqElement.off('colorpickerChange');
        jqElement.off('colorpickerHide');
        jqElement.colorpicker('hide');
    };
    ColorPicker.prototype.renderOld = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ui-colorpicker" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { ref: this.ref, style: { "borderRightColor": this.state.value } }));
    };
    ColorPicker.prototype.maybeMapValueToSwatchName = function () {
        var value = this.state.value;
        for (var name_1 in this.swatches) {
            if (this.swatches[name_1] == value) {
                return name_1;
            }
        }
        return value;
    };
    ColorPicker.prototype.render = function () {
        var _a, _b;
        var opacity = this.props.opacity;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ui-colorpicker2" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: this.ref },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "colorpicker-input-addon", style: { "backgroundColor": this.state.value } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { className: "d-none" })),
            opacity == undefined
                ? this.maybeMapValueToSwatchName()
                : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_combo_slider__WEBPACK_IMPORTED_MODULE_0__["ComboSlider"], { key: "opacitySlider", min: ((_a = opacity.range) !== null && _a !== void 0 ? _a : [0, 1])[0], max: ((_b = opacity.range) !== null && _b !== void 0 ? _b : [0, 1])[1], step: 0.01, unit: "%", initialValue: opacity.value, onChange: opacity.onChange, onEnd: opacity.onEnd }));
    };
    return ColorPicker;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "0awj":
/*!************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/scalpel.ts ***!
  \************************************************************/
/*! exports provided: Scalpel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scalpel", function() { return Scalpel; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var Scalpel = /** @class */ (function () {
    function Scalpel() {
    }
    Scalpel.prototype.render = function (appearance) {
        var handle = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[169, -3], [-13, 0], [10, 0]], [[169, 14], [9, 0], [-22, 0]], [[63, 10]], [[55, -1]]));
        handle.withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#eeeeee".color()))
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#cccccc");
        handle.closePath();
        var blade = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[1, 1], [2, 8], [5, -3]], [[60, 0]], [[63, 6]], [[57, 9], , [-5, -2]], [[40, 10], [4, -2], [-20, 0]], [[15, 10]]));
        blade.closePath();
        blade.fillColor = new paper__WEBPACK_IMPORTED_MODULE_3__["Color"](new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"](apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#dddddd".color(), 3)), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(40, 40));
        blade.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#aaaaaa");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([blade, handle]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Scalpel.properties = {
        label: "Scalpel",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Scalpel;
}());



/***/ }),

/***/ "0iBZ":
/*!********************************************************!*\
  !*** ./src/apparatus/library/biology/organic/shoot.ts ***!
  \********************************************************/
/*! exports provided: Shoot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Shoot", function() { return Shoot; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var Shoot = /** @class */ (function () {
    function Shoot() {
    }
    Shoot.prototype.render = function (appearance) {
        var height = appearance.height, bend = appearance.bend;
        var cap = appearance.cut ? "butt" : "round";
        var base = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0], , [0, -height * 0.7]], [[0, -height]]));
        var pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -0.6 * height);
        base.segments[1].point = base.segments[1].point.rotate(bend, pivot);
        base.strokeWidth = 20;
        base.strokeCap = cap;
        var highlight = base.clone();
        highlight.position.x -= 5;
        if (appearance.cut && bend < 0) {
            var delta = pivot.subtract(base.segments[1].point).normalize();
            highlight.segments[1].point = highlight.segments[1].point.add(delta.multiply(5));
        }
        base.strokeColor = "#90bb79";
        highlight.strokeWidth = 6;
        highlight.strokeColor = "#b4d3a3";
        highlight.strokeCap = cap;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([base, highlight]);
        return {
            graphic: graphic,
            hitShape: graphic.strokeBounds.expand(10).toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)
        };
    };
    Shoot.properties = {
        label: "Straight shoot",
        canContainLiquids: false,
        defaultAppearance: {
            bend: 0,
            height: 150,
            cut: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 50, max: 180, unit: "mm"
            },
            {
                spec: "slider", key: "bend", label: "Bending",
                min: -40, max: 40
            },
            {
                spec: "checkbox", key: "cut", label: "Slice cap"
            }
        ],
    };
    return Shoot;
}());



/***/ }),

/***/ "10Ty":
/*!***************************************************!*\
  !*** ./src/apparatus/library/measure/ph_probe.ts ***!
  \***************************************************/
/*! exports provided: PhProbe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhProbe", function() { return PhProbe; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var PhProbe = /** @class */ (function () {
    function PhProbe() {
        this.drivers = [
            {
                type: "rectangle",
                minX: -150, maxX: 150,
                minY: 0, maxY: 200,
                toAppearance: function (p) { return ({ probeX: p.x, probeY: p.y }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.probeX, a.probeY); },
                scale: 1.0,
            }
        ];
    }
    PhProbe.prototype.render = function (appearance) {
        var probeOffsetX = appearance.probeX;
        var probeOffsetY = appearance.probeY;
        // Create a reader
        var casing = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 60, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 4);
        casing.fillColor = "#dddddd";
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(casing);
        var screen = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 7, 46, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 2);
        screen.strokeWidth = 2.0;
        screen.strokeColor = "#777777";
        screen.fillColor = "white";
        var button = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-10, 80), 7);
        button.fillColor = "#54b347";
        button.strokeWidth = 2.0;
        button.strokeColor = "#498241";
        var button2 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(10, 80), 7);
        button2.fillColor = "#54b347";
        button2.strokeWidth = 2.0;
        button2.strokeColor = "#498241";
        var display = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 25),
            content: appearance.reading,
            fillColor: 'black',
            fontFamily: 'sans-serif',
            fontSize: 15,
            justification: "center",
        });
        var phLabel = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-20, 50),
            content: "pH",
            fillColor: "#888888",
            fontFamily: 'sans-serif',
            fontSize: 14,
            justification: "left",
        });
        var reader = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([casing, screen, display, phLabel, button, button2]);
        // Create the probe
        var probeRod = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["CenterR"])(0, 60, 10, 120));
        probeRod.setGradientFill("right", [["#cccccc", 0.0], ["#aaaaaa", 1.0]]);
        var probeTop = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["CenterR"])(0, 15, 15, 30));
        probeTop.fillColor = "#333333";
        var probe = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([probeRod, probeTop]);
        probe.position = probe.position.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(probeOffsetX, probeOffsetY));
        // Create the wire.
        var wire = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 100], undefined, [0, 50]], // Connects to the casing.
        [[probeOffsetX, probeOffsetY], [0, -50]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(wire);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([reader, probe, wire]);
        var hitShapes = [
            probe.bounds.toShape(),
            reader.bounds.toShape(),
        ];
        return {
            graphic: graphic, hitShape: hitShapes, pivot: casing.bounds.center,
        };
    };
    PhProbe.convertToLatest = function (old) {
        if (!old.x) {
            old.probeX = old.position == "right" ? 150 : -150;
            old.probeY = 100;
        }
        return old;
    };
    PhProbe.properties = {
        label: "pH Probe",
        canContainLiquids: false,
        defaultAppearance: {
            reading: "7.0",
            probeX: 150,
            probeY: 100,
        },
        appearanceSpecs: [
            {
                spec: "text", key: "reading", label: "Reading",
                numbersOnly: true, maxLength: 5,
            },
        ],
    };
    return PhProbe;
}());



/***/ }),

/***/ "11Wx":
/*!**********************************!*\
  !*** ./src/tiers/promo_plus.tsx ***!
  \**********************************/
/*! exports provided: PlansGrid, BoostFeatureList, Disclaimer, Item */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlansGrid", function() { return PlansGrid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoostFeatureList", function() { return BoostFeatureList; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Disclaimer", function() { return Disclaimer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Item", function() { return Item; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/api */ "3kYy");
/* harmony import */ var api_auth_reauth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/auth/reauth */ "e6DQ");
/* harmony import */ var components_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! components/button */ "hhmX");
/* harmony import */ var components_select__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! components/select */ "w7zt");
/* harmony import */ var components_slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! components/slider */ "9EA3");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var tiers_currency__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! tiers/currency */ "bQBo");
/* harmony import */ var tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! tiers/promo_ui */ "/DYk");
/* harmony import */ var _apparatus_specList__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../apparatus/specList */ "OsNy");
/* harmony import */ var _promo__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./promo */ "ka5u");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();















var TRIAL_DAYS = 7;
var SUPPORTED_CURRENCIES = ["gbp", "usd", "eur", "aud", "sgd", "mxn", "cop"];
var BillingSwitcher = /** @class */ (function (_super) {
    __extends(BillingSwitcher, _super);
    function BillingSwitcher() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return BillingSwitcher;
}(components_button__WEBPACK_IMPORTED_MODULE_3__["HorizontalButtonsSwitcher"]));
var PlansGrid = /** @class */ (function (_super) {
    __extends(PlansGrid, _super);
    function PlansGrid(props) {
        var _this = _super.call(this, props) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"](react__WEBPACK_IMPORTED_MODULE_7__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "text-center mx-2 mb-3" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-inline-block mb-2" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "Currency: "),
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](components_select__WEBPACK_IMPORTED_MODULE_4__["Select"], { id: "currency_selector", key: "currency_selector", value: _this.getCurrency(), extraClass: "w-auto d-inline ml-1 mr-4", onSelectChange: function (_, current) { return _this.setState({ currency: current }); }, options: SUPPORTED_CURRENCIES.map(function (c) { return ({ value: c, label: Object(tiers_currency__WEBPACK_IMPORTED_MODULE_10__["currencyLabel"])(c) }); }) })),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-inline-block mb-2" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "Billing: "),
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](BillingSwitcher, { className: "d-inline-block ml-1", onSwitch: function (b) { return _this.setState({ billing: b }); }, defaultValue: _this.state.billing, extraClass: "narrower", options: [
                            { value: "month", icon: "", buttonLabel: "Monthly" },
                            { value: "year", icon: "", buttonLabel: "Yearly" },
                        ] }))),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "row mx-2" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](PlanSelector, { onCheckout: function (p) { return _this.props.onCheckout(p, _this.getCurrency(), _this.state.billing); }, onUpdateSchoolPlan: _this.props.onUpdateSchoolPlan, signedIn: _this.props.signedIn, billing: _this.state.billing, currency: _this.getCurrency() })))); };
        _this.state = { billing: "year", showTable: true };
        var self = _this;
        _this.checkoutMessageHandler = function (ev) {
            // Filter any messages that are not from our API,
            // don't relate to this provider or while
            // the button is not active.
            if (ev.origin != api_api__WEBPACK_IMPORTED_MODULE_1__["BACKEND_API"])
                return;
            var response = ev.data;
            self.onReceiveCheckoutSuccessMessage(response);
        };
        window.addEventListener("message", _this.checkoutMessageHandler, true);
        return _this;
    }
    PlansGrid.prototype.onReceiveCheckoutSuccessMessage = function (message) {
        var _a;
        if (message.type == "checkout_success") {
            Object(api_auth_reauth__WEBPACK_IMPORTED_MODULE_2__["reauthFromCurrentLogin"])();
            toastr.success("You can now enjoy full features of Chemix!", "Congratulations! You are now a " + ((_a = message.tier) === null || _a === void 0 ? void 0 : _a.capitalise()) + " user!");
            this.props.onClose();
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Checkout", "Success");
            if (this.props.analyticsTag) {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Checkout-AnalyticsTag", this.props.analyticsTag);
            }
        }
        else if (message.type == "checkout_error") {
            toastr.error("Please click on 'My Account' and select 'Refresh Purchase'. If issues persist, email support@chemix.org.", "Failed to complete purchase.");
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Checkout", "Error");
        }
    };
    PlansGrid.prototype.getCurrency = function () {
        var _a, _b;
        return (_b = (_a = this.state.currency) !== null && _a !== void 0 ? _a : this.props.defaultCurrency) !== null && _b !== void 0 ? _b : "usd";
    };
    return PlansGrid;
}(react__WEBPACK_IMPORTED_MODULE_7__["Component"]));

var ExportHighQuality = function () {
    return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "image" },
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "High"),
        " image quality",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__["BeaconLink"], { hint: "4MP (Up to 2400x1600). <br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].IMAGE_QUALITY }));
};
var BoostFeatureList = function () { return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](react__WEBPACK_IMPORTED_MODULE_7__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "arrow-left" },
        "Everything included in ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "Start")),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _promo__WEBPACK_IMPORTED_MODULE_13__["ITEM_CUSTOMISATIONS"]),
        " extra item customisations"),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
        "Easily write formulas, units and symbols with ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "ChemText"),
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__["BeaconLink"], { hint: "When writing text, automatically convert H2SO4 to H\u2082SO\u2084. <br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].CHEMTEXT })),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "More text style options"),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
        "Add up to ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _promo__WEBPACK_IMPORTED_MODULE_13__["MAX_BOOST_DIAGRAM_LAYERS"]),
        " liquid layers"),
    flags__WEBPACK_IMPORTED_MODULE_6__["default"].isNewTemplatesEnabled ? react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "More diagram templates") : undefined,
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Download as SVG"),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
        "Permission for publishing and commercial use",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__["BeaconLink"], { hint: "Allows mass and commerical distribution of material containing diagrams made with Chemix.<br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].LICENSE })),
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "No social widgets")); };
function mapSliderValueToStudents(value) {
    var students = 200;
    students += Math.min(value, 30) * 10;
    value -= 30;
    if (value <= 0)
        return students;
    students += Math.min(value, 30) * 50;
    value -= 30;
    if (value <= 0)
        return students;
    students += value * 100;
    return students;
}
// Computes the total number of diagrams for a school of given student size.
// Derived from https://docs.google.com/spreadsheets/d/1LNK9C4RMyJNWCBTed5ByMtxC3DTq-7JqrJyCvslwzLo/edit#gid=2014288311
function diagramLimit(students) {
    var diagrams = Math.log((students + 1150) / 100) / Math.LN10 * 7000 - 7500 + students * 2;
    return diagrams.round(-2);
}
var PlanSelector = function (props) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(30), sliderValue = _a[0], setSliderValue = _a[1]; // 30 is equivalent to 500 students.
    var students = mapSliderValueToStudents(sliderValue);
    var maxDiagrams = diagramLimit(students);
    react__WEBPACK_IMPORTED_MODULE_7__["useEffect"](function () {
        props.onUpdateSchoolPlan({ students: students, maxDiagrams: maxDiagrams });
    }, [students, maxDiagrams]);
    return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_9__["TierContext"].Consumer, null, function (tiers) { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"](react__WEBPACK_IMPORTED_MODULE_7__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Plan, null,
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "plan-header" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("h3", null,
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", { className: "fa fa-vial mr-2" }),
                    "Start"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Price, { currency: props.currency, billing: props.billing }),
                "Create great lab diagrams. ",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                "Available for everyone.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                "Free forever.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](SignInButton, { currentTier: tiers.tier, signedIn: props.signedIn, onCheckout: props.onCheckout }),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("ul", { className: "fa-ul feature-list" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "flask" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _apparatus_specList__WEBPACK_IMPORTED_MODULE_12__["releasedAndFreeItemsCount"]),
                    " available apparatus"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "image" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "Low"),
                    " image quality",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__["BeaconLink"], { hint: "0.5MP (Up to 800x600). <br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].IMAGE_QUALITY })),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "infinity fas" }, "Unlimited image exports"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "cloud" },
                    "Store ",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "3"),
                    " diagrams in Cloud"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Download as JPG"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Download as PNG"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Transparent PNG"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
                    "For educational use",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_11__["BeaconLink"], { hint: "You can use Chemix diagrams in your teaching materials and student handouts distributed in a limited setting, such as a class.<br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].LICENSE })))),
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Plan, { extraClass: "boost" },
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "plan-header" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("h3", null,
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", { className: "fa fa-bolt mr-2" }),
                    "Boost"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Price, { price: PRICES["boost"][props.currency][props.billing], currency: props.currency, billing: props.billing }),
                "Unlock all features.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                "For teachers and students.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                TRIAL_DAYS,
                "-day trial. Billed ",
                props.billing,
                "ly.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](DiscountTag, { billing: props.billing })),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](SignInButton, { tier: "boost", currentTier: tiers.tier, signedIn: props.signedIn, onCheckout: props.onCheckout }),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("ul", { className: "fa-ul feature-list" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "flask" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _apparatus_specList__WEBPACK_IMPORTED_MODULE_12__["releasedItemsCount"]),
                    " available apparatus"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](ExportHighQuality, null),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "infinity fas" }, "Unlimited image exports"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "cloud" },
                    "Store ",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _promo__WEBPACK_IMPORTED_MODULE_13__["BOOST_TOTAL_DIAGRAMS"]),
                    " diagrams in Cloud"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](BoostFeatureList, null))),
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Plan, { extraClass: "school" },
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "plan-header" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("h3", null,
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", { className: "fa fa-university mr-2" }),
                    "Schools"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Price, { price: schoolPricing(students, props.currency, props.billing), currency: props.currency, billing: props.billing }),
                "For teachers and students",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                "in schools and districts.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
                "Estimate for ",
                students,
                " students.",
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "mt-3 mr-1" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](components_slider__WEBPACK_IMPORTED_MODULE_5__["Slider"], { min: 0, max: 90, step: 1, pipsStep: 30, initialValue: sliderValue, onChange: function (value) { return setSliderValue(value); }, onEnd: function (_, final) { return setSliderValue(final); } })),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](DiscountTag, { billing: props.billing })),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "p-2" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-block ui-button", onClick: function () { return sendEmail(students); } }, "Request a quote")),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("ul", { className: "fa-ul feature-list" },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "flask" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, _apparatus_specList__WEBPACK_IMPORTED_MODULE_12__["releasedItemsCount"]),
                    " available apparatus"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](ExportHighQuality, null),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "infinity fas" }, "Unlimited image exports"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "cloud" },
                    "Store ",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, maxDiagrams),
                    " diagrams in Cloud"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, { icon: "arrow-left" },
                    "Everything included in ",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, "Boost")),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null,
                    "Access for ",
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("b", null, students),
                    " students"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Access for teachers included"),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](Item, null, "Sign in using school email"))))); });
};
var DiscountTag = function (props) { return (props.billing == "year"
    ? react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("span", { className: "discount-tag" }, "Save 20%")
    : null); };
var sendEmail = function (estimateStudents) {
    support_beacon__WEBPACK_IMPORTED_MODULE_8__["Bcn"].openSchoolEnquiry(estimateStudents);
    // window.open("mailto:info@chemix.org?subject=Chemix: School subscription&body=Please fill in these details. We will get back to you as soon as possible. %0D%0AYour name: %0D%0AContact email: %0D%0ASchool name: %0D%0ANumber of students (estimate):%20" + estimateStudents)
};
var SignInButton = function (props) {
    if (!props.signedIn) {
        // If the user is not signed in, they are automatically on the basic tier.
        if (!props.tier)
            return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](YourCurrentPlan, null);
        return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](SignInToUpgrade, null);
    }
    if ((!props.tier && !props.currentTier) || props.tier === props.currentTier) {
        return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](YourCurrentPlan, null);
    }
    else if (props.tier === "boost" && !props.currentTier) {
        return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](UpgradeButton, { tier: "boost", onClick: function () { return props.onCheckout("boost"); } });
    }
    else if (props.tier === "plus" && !props.currentTier) {
        return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](UpgradeButton, { tier: "plus", onClick: function () { return props.onCheckout("plus"); } });
    }
    else {
        return react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "invisible" },
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](YourCurrentPlan, null));
    }
};
var YourCurrentPlan = function () { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "py-2 px-3 text-center" },
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-block ui-button-inactive" }, "Your current plan."))); };
var SignInToUpgrade = function () { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "mt-auto py-2 px-3" },
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-block ui-button", "data-toggle": "collapse", "data-target": "#promoSignInSection", onClick: function () {
            return $('.remodal-is-opened').animate({
                scrollTop: $("#promoSignInSection").position().top - 300
            }, 700);
        } }, "Sign in to upgrade"))); };
var UPGRADE_BUTTON_TIMEOUT_MS = 4000;
/**
 * Upgrade button. Is unclickable for few seconds after being clicked,
 * showing a spinner.
 */
var UpgradeButton = function (props) {
    var _a = react__WEBPACK_IMPORTED_MODULE_7__["useState"](false), pending = _a[0], setPending = _a[1];
    function onClick() {
        if (pending)
            return;
        props.onClick();
        setPending(true);
        setTimeout(function () { setPending(false); }, UPGRADE_BUTTON_TIMEOUT_MS);
    }
    return react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "mt-auto p-2" },
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "d-block ui-button", onClick: onClick },
            "\u00A0",
            pending ?
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", { className: "fas fa-lg fa-circle-notch fa-spin" }) :
                "Upgrade to " + props.tier.capitalise(),
            "\u00A0"));
};
var _Plan = function (props) { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "col-12 col-sm-6 col-md-4 mb-3 px-1" },
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "plan d-flex flex-column " + props.extraClass }, props.children))); };
var Plan = react__WEBPACK_IMPORTED_MODULE_7__["memo"](_Plan);
var Price = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("span", { className: "price" },
        props.from ? react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("sub", null, "from") : null,
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("sup", null, Object(tiers_currency__WEBPACK_IMPORTED_MODULE_10__["currencySymbol"])(props.currency)),
        ((_a = props.price) !== null && _a !== void 0 ? _a : 0).toLocaleFixed(2),
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("sub", null, "/mo")));
};
var Disclaimer = function () { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("p", { className: "text-muted text-center" },
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", null,
        "Cancel anytime. Learn more about ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("a", { "data-beacon-article-modal": support_beacon__WEBPACK_IMPORTED_MODULE_8__["Articles"].SUBSCRIPTIONS, href: "#" }, "subscriptions"),
        ". ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("br", null),
        "By upgrading, you agree to our ",
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("a", { href: "http://help.chemix.org/article/tos", target: "_blank" }, "Terms and Conditions.")))); };
var Item = function (props) { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("li", null,
    react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("span", { className: "fa-li" },
        react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("i", { className: "fa fa-" + (props.icon || "check") })),
    props.children)); };
var PRICES = {
    boost: {
        gbp: { month: 2.99, year: 2.39 },
        eur: { month: 3.49, year: 2.79 },
        usd: { month: 3.49, year: 2.79 },
        aud: { month: 4.99, year: 3.99 },
        sgd: { month: 4.49, year: 3.59 },
        mxn: { month: 49, year: 39 },
        cop: { month: 8999, year: 7199 },
    },
};
// From https://docs.google.com/spreadsheets/d/1LNK9C4RMyJNWCBTed5ByMtxC3DTq-7JqrJyCvslwzLo/edit#gid=1712682288
var SCHOOL_DISCOUNTS_BREAKS = [
    [100, -150],
    [200, -10],
    [500, 10],
    [1000, 30],
    [2000, 50],
    [5000, 55],
    [10000, 60],
    [20000, 65],
];
function schoolPricing(students, currency, period) {
    var baseMonthlyPrice = PRICES["boost"][currency]["month"];
    var pricePerUser = (baseMonthlyPrice / 20).round(4);
    var totalPrice = 0;
    var previousBreak = 0;
    for (var _i = 0, SCHOOL_DISCOUNTS_BREAKS_1 = SCHOOL_DISCOUNTS_BREAKS; _i < SCHOOL_DISCOUNTS_BREAKS_1.length; _i++) {
        var breaks = SCHOOL_DISCOUNTS_BREAKS_1[_i];
        var currentBreak = breaks[0], discount = breaks[1];
        // Max students in this band.
        var maxStudents = currentBreak - previousBreak;
        totalPrice += Math.min(maxStudents, students) * pricePerUser * (1 - discount / 100);
        students -= maxStudents;
        if (students <= 0)
            break;
        previousBreak = currentBreak;
    }
    totalPrice /= 12;
    if (period == "month") {
        totalPrice *= 1.25;
    }
    return totalPrice.round(schoolPricingDecimalPlaces(currency));
}
function schoolPricingDecimalPlaces(currency) {
    switch (currency) {
        case "mxn": return 0;
        case "cop": return -2;
        default: return 2;
    }
}


/***/ }),

/***/ "129a":
/*!*************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/tweezers.ts ***!
  \*************************************************************/
/*! exports provided: Tweezers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tweezers", function() { return Tweezers; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var Tweezers = /** @class */ (function () {
    function Tweezers() {
    }
    Tweezers.prototype.render = function (appearance) {
        if (appearance.style == "3d") {
            return render3d(appearance);
        }
        else {
            return renderSimple(appearance);
        }
    };
    Tweezers.properties = {
        label: "Tweezers",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            style: "3d",
            opening: 0.5
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "style", label: "Style",
                options: [
                    { value: "3d", label: "Default" },
                    { value: "simple", label: "Simple" },
                ],
            },
            {
                spec: "slider", key: "opening", label: "Opening",
                min: 0.0, max: 1.0, step: 0.1,
            },
        ],
    };
    return Tweezers;
}());

function render3d(appearance) {
    var top = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[16, -9], [-10, 2], [10, -2]], [[40, -8], [-3, 2]], [[45, -11]], [[154, -10], , [9, 0]], [[155, 1], [8, 0]], [[44, -2], , [-10, 0]], [[17, -5], [10, 0], [-7, 0]]));
    top.closePath();
    var bottom = top.clone();
    top.withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#aaaaaa".color(), 5))
        .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#999999");
    bottom.fillColor = "#666666";
    bottom.shear(-0.08 * appearance.opening, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(155, -5));
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([bottom, top]);
    return {
        graphic: graphic,
        hitShape: graphic.bounds.expand(10).toShape()
    };
}
function renderSimple(appearance) {
    var oneSide = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-120, 0], , [5, -13]], [[0, 0], [-120, -7]]));
    var otherSide = oneSide.clone();
    var pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
    otherSide.scale(1.0, -1.0, pivot);
    var angle = 5 * appearance.opening + 1;
    oneSide.rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
    otherSide.rotate(-angle, pivot);
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([oneSide, otherSide]);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
    return {
        graphic: graphic,
        hitShape: graphic.bounds.expand(10).toShape()
    };
}


/***/ }),

/***/ "13Da":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/accessories/microscope.ts ***!
  \*********************************************************/
/*! exports provided: Microscope */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Microscope", function() { return Microscope; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





var LIGHT_OUTLINE = Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(0, 0, 40).string();
var LIGHT_CYLINDER = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 3, 80));
var LIGHT_GRADIENT = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 3, 80));
var DARK_CYLINDER = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 2, 30));
var METAL = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 8, 70), 10);
var Microscope = /** @class */ (function () {
    function Microscope() {
    }
    Microscope.prototype.render = function (appearance) {
        var body = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[6, -30]], [[56, -25], , [19, 15]], [[113, 100], [6, -60], [-7, 80]], [[27, 206], [43, -12]], [[30, 142]], [[84, 91], [-2, 61], [2, -54]], [[9, 36], [37, 0]]));
        body.closePath();
        body.withGradientFill("left", LIGHT_GRADIENT)
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), LIGHT_OUTLINE);
        var leg = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[57, 145], [-20, 3], [20, -3]], [[103, 231], [-30, -53]], [[47, 239]]));
        leg.closePath();
        leg.withGradientFill("left", LIGHT_GRADIENT)
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), LIGHT_OUTLINE);
        var base = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-80, 225, 200, 20), 5)
            .withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#cccccc".color(), 30))
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), LIGHT_OUTLINE);
        var ocularCase = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 35, 90, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
            .withGradientFill("right", LIGHT_CYLINDER)
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), LIGHT_OUTLINE);
        var ocularViewtube = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -10, 25, 150, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
            .withGradientFill("right", DARK_CYLINDER);
        var ocularTurret = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-10, 60, 54, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0)
            .withGradientFill("right", DARK_CYLINDER);
        ocularTurret.rotate(10);
        var lens = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(2, 65, 18, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", METAL);
        lens.rotate(-5);
        var lens2 = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-22, 60, 18, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", METAL);
        lens2.rotate(20, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-22, 60));
        var ocular = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([ocularViewtube, lens, lens2, ocularTurret, ocularCase]);
        ocular.rotate(5, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var stage = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-10, 132, 120, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0)
            .withGradientFill("right", DARK_CYLINDER);
        // .withStroke(strokeWidth("default"), DARK_OUTLINE)
        var lightInlet = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-10, 143, 30, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", DARK_CYLINDER);
        // .withStroke(strokeWidth("default"), DARK_OUTLINE)
        var lightHolder = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-10, 190, 40, 8))
            .withGradientFill("right", DARK_CYLINDER);
        // .withStroke(strokeWidth("default"), DARK_OUTLINE)
        var light = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-15, 180, 20, 20))
            .withGradientFill("right", LIGHT_CYLINDER)
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), LIGHT_OUTLINE);
        light.rotate(-5);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([light, lightHolder, body, leg, base, ocular, stage, lightInlet]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                base.placeable(),
                stage.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    Microscope.properties = {
        label: "Microscope",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Microscope;
}());



/***/ }),

/***/ "13yt":
/*!******************************************************************!*\
  !*** ./src/apparatus/library/measurement/triple_beam_balance.ts ***!
  \******************************************************************/
/*! exports provided: TripleBeamBalance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TripleBeamBalance", function() { return TripleBeamBalance; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var OUTLINE = "#8C847F";
/**
 * https://www.youtube.com/watch?v=BAf6HoVK6JI
 * https://www.ourweigh.co.uk/mechanical-balances/TBB2610T.html?gclid=Cj0KCQiAkuP9BRCkARIsAKGLE8VCz7xsk1Y2EBnukCDJ5z60JKoC9wxaY7sg_YSDZI4ipA6s-Ai9vYkaAtHyEALw_wcB
 * https://www.analytics-shop.com/gb/oh80252052-gb.html?utm_source=google_shopping&utm_medium=cpc&gclid=Cj0KCQiAkuP9BRCkARIsAKGLE8WP2n9EjbjIT_n1M-0A0CCU82JB9BtMBpQht3DY1xyRmEiqzzvwAHoaAg-sEALw_wcB
 * https://us.ohaus.com/Ohaus/media/assets/images/product/main-product-fully-labeled.png
 *
 * Dimensions: https://www.amazon.co.uk/Ohaus-Mechanical-Balance-Capacity-Readability/dp/B0051W8YBE
 * - 45.21 x 16.26 x 17.02 cm
 * - Weighing plate: 14.3cm
 */
var TripleBeamBalance = /** @class */ (function () {
    function TripleBeamBalance() {
    }
    TripleBeamBalance.prototype.render = function (appearance) {
        var magnifyBeam = appearance.magnifyBeam;
        var base = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-115, 48]], // Start
        [[-48, 48]], [[-24, 36]], // Pivot base
        [[10, 36]], [[18, 95]], // Midsection
        [[277, 97]], [[277, -30]], [[312, -29]], [[327, 80]], [[336, 101]], [[335, 120]], [[-144, 120]], [[-128, 100]])).close().withGradientFill("right", [
            ["#BCB7AE", 0.03],
            ["#C3BEB6", 0.07],
            ["#BCB7AE", 0.09],
            ["#B5B1A8", 0.091],
            ["#B5B1A8", 0.139],
            ["#C5C2BC", 0.14],
            ["#C5C2BC", 0.26],
            ["#D2D1CD", 0.261],
            ["#D2D1CD", 0.29],
            ["#CCCBC6", 0.3],
            ["#CCCBC6", 0.9],
            ["#B8B3AA", 1.0],
        ]).withStroke("default", OUTLINE);
        var support = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[24, 6], , [-37, 0]], [[-24, 17], [20, 0]], [[-106, 17]], // Left edge.
        [[-106, 0]], [[-64, 0], , [30, 0]], [[19, -17], [-63, -1]], [[21, -9]], [[213, -9]], [[213, -14]], [[261, -14]], [[275, -7]], [[262, 0]], [[213, 0]], [[213, -5]], [[22, -5]])).close().withFill("#777777");
        var startX = magnifyBeam ? 20 : 25;
        var startY = magnifyBeam ? -40 : -30;
        var stepY = magnifyBeam ? 25 : 15;
        var beam1 = this.beam(25, 0, 10, 10, appearance.tens, magnifyBeam);
        beam1.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(startX, startY);
        var beam2 = this.beam(35, 10, 100, 5, appearance.hundreds, magnifyBeam);
        beam2.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(startX, startY + stepY);
        var beam3 = this.beam(15, 20, 1, 10, appearance.units, magnifyBeam);
        beam3.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(startX, startY + stepY * 2);
        var tiltShift = -Math.sin(appearance.tilt.toRadians()) * 72;
        var plate = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 140, 10), 2.0)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#cccccc".color()))
            .withStroke("thin", "#888888");
        plate.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-72, -28 + tiltShift);
        var zeroKnobScrew = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-106, 9, 10, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_RIGHT)).withFill("#aaaaaa");
        var zeroKnob = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-116, 9, 8, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_RIGHT)).withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#999999".color()));
        var poise = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([support, beam1, beam2, beam3, zeroKnobScrew, zeroKnob]);
        poise.rotate(appearance.tilt, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var fixedPiston = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-70, 50, 8, 60, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER)).withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#666666".color()));
        var movablePiston = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-70, 0, 8, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER)).withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#666666".color()));
        var column1 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-70, 40, 15, 42, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER)).withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#aaaaaa".color()));
        var column2 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 37, 15, 40, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER)).withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#aaaaaa".color()));
        movablePiston.position.y += tiltShift;
        column1.position.y += tiltShift;
        var pointBg = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(282, -7, 11, 40, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER)).withFill("#ffffff");
        var point = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, -20]], [[10, -20]], [[3, -1]], [[1, -1]])).close().withFill("#222222");
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorY"])(point);
        point.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(282, -7);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            poise,
            fixedPiston,
            movablePiston,
            column1,
            column2,
            plate,
            base,
            pointBg,
            point,
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["softShade"])("edge", "default", base.segments[0].point, base.segments[1].point, OUTLINE + "60", 5.0),
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["softShade"])("edge", "default", base.segments[3].point, base.segments[4].point, "#ffffff80", 6.0)
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: base.bounds.center,
            snapping: [
                base.placeable(),
                plate.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    TripleBeamBalance.prototype.beam = function (riderSize, extraSize, step, multiple, value, magnify) {
        var beamSize = (magnify ? 220 : 190) + extraSize;
        var riderOffset = riderSize / 2;
        var riderRange = beamSize - riderSize;
        var max = step * multiple;
        // No need to add riderOffset, since position is taken at center.
        var riderX = (value / max) * riderRange;
        var beamHeight = magnify ? 21 : 15;
        var beam = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, beamSize, beamHeight)).withFill("#ffffff").withStroke(1.0, "black");
        var group = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([beam]);
        // Labels.
        for (var i = 0; i <= multiple; i++) {
            var value_1 = i * step;
            group.addChild(new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
                point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(riderOffset + (value_1 / max) * riderRange, magnify ? 18 : 13),
                content: value_1.toString(),
                fillColor: "black",
                fontFamily: 'sans-serif',
                fontSize: magnify ? 9 : 7,
                justification: "center",
            }));
        }
        // Add rider.
        var riderHeight = magnify ? 7 : 5;
        var rider = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, -1]], [[riderSize, -1]], [[riderSize, riderHeight]], [[0, riderHeight]])).close().withFill("#bbbbbb").withStroke(1.0, "#777777");
        var highlight = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[riderSize / 2 - 2, -1]], [[riderSize / 2, riderHeight - 1]])).withStroke(1.0, "#888888");
        var highlight2 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[riderSize / 2, riderHeight - 1]], [[riderSize / 2 + 2, -1]
        ])).withStroke(1.0, "#cccccc");
        var riderGroup = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([rider, highlight, highlight2]);
        riderGroup.position.x += riderX;
        group.addChild(riderGroup);
        group.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
        return group;
    };
    TripleBeamBalance.properties = {
        label: "Triple Beam Balance",
        canContainLiquids: false,
        defaultAppearance: {
            hundreds: 200,
            tens: 40,
            units: 1.1,
            tilt: 0,
            magnifyBeam: false,
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "magnifyBeam", label: "Beams", subLabel: "Magnify" },
            {
                spec: "slider", key: "hundreds", label: "Hundreds",
                min: 0, max: 500, step: 100, unit: "g"
            },
            {
                spec: "slider", key: "tens", label: "Tens",
                min: 0, max: 100, step: 10, unit: "g"
            },
            {
                spec: "slider", key: "units", label: "Units",
                min: 0, max: 10, step: 0.1, unit: "g"
            },
            {
                spec: "slider", key: "tilt", label: "Tilt",
                min: -4, max: 4, step: 0.1,
            },
        ],
    };
    return TripleBeamBalance;
}());



/***/ }),

/***/ "1HjL":
/*!*************************************************!*\
  !*** ./src/apparatus/library/physics/raybox.ts ***!
  \*************************************************/
/*! exports provided: RayBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RayBox", function() { return RayBox; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SLIT_PLATE_COLOR = "#555555";
var RayBox = /** @class */ (function () {
    function RayBox() {
    }
    RayBox.prototype.render = function (appearance) {
        var slits = appearance.slits;
        var slitGap = 10;
        var box = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[30, 0]], [[30, -80]], [[35, -80]], [[35, 60]])).withStroke("default").withFill("#444444").close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(box);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([box]);
        if (slits !== "none") {
            var slitPlate = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]([]).withStroke("default", SLIT_PLATE_COLOR);
            slitPlate.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-30, -65));
            for (var i = 0; i < slits; i++) {
                var dx = ((slits - 1) / -2 + i) * slitGap;
                slitPlate.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(dx - 1, -65));
                slitPlate.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, 0));
            }
            slitPlate.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(30, -65));
            graphic.insertChild(0, slitPlate);
        }
        var rayThickness = 2.0;
        var rayLength = 200;
        if (appearance.light === "front") {
            // First draw the glow.
            if (slits === "none") {
                graphic.insertChild(0, paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 60, 200, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER)).withGradientFill("up", [["#da1414aa", 0.5], ["#ff000000", 1.0]]));
            }
            else {
                graphic.insertChild(0, paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 60, 65, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER)).setRadialGradientFill([["#da1414aa", 0.5], ["#da141440", 1.0]], Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(30, -65)));
                // Draw rays
                for (var i = 0; i < slits; i++) {
                    var dx = ((slits - 1) / -2 + i) * slitGap;
                    graphic.insertChild(0, new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(dx, -64), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(dx, -(64 + rayLength))).withStroke(rayThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].ray));
                }
            }
        }
        return {
            graphic: graphic,
            pivot: box.bounds.center,
            hitShape: box.bounds.toShape()
        };
    };
    RayBox.properties = {
        label: "Ray Box",
        canContainLiquids: false,
        defaultAppearance: {
            light: "off",
            slits: "none"
        },
        appearanceSpecs: [
            {
                spec: "toggle-buttons",
                size: "text",
                label: "Light",
                key: "light",
                options: [
                    { value: "off", label: "Off", icon: "" },
                    { value: "front", label: "On", icon: "" },
                ]
            },
            {
                spec: "toggle-buttons",
                size: "text",
                label: "Slits",
                key: "slits",
                options: [
                    { value: "none", label: "None", icon: "" },
                    { value: 1, label: "1", icon: "" },
                    { value: 3, label: "3", icon: "" },
                ]
            },
        ],
    };
    return RayBox;
}());



/***/ }),

/***/ "1Ljk":
/*!********************************************************!*\
  !*** ./src/apparatus/library/container/weight_boat.ts ***!
  \********************************************************/
/*! exports provided: WeightBoat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeightBoat", function() { return WeightBoat; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var WeightBoat = /** @class */ (function () {
    function WeightBoat() {
    }
    WeightBoat.prototype.render = function (appearance) {
        var size = appearance.size;
        var lipSize = 7;
        var height = 15 + size * 0.15;
        var baseSize = size - height * 0.8;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[size / 2 + lipSize, 0]], [[size / 2, 0]], [[baseSize / 2, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        if (appearance.spout) {
            graphic.segments[2].point.x -= height * 0.8;
            if (graphic.segments[2].point.x < 10) {
                graphic.segments[2].point.x = 10;
            }
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(graphic.segments[3], 3);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(graphic.segments[2], 3);
        var liquidMask = graphic.clone();
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: graphic.placeable(),
        };
    };
    WeightBoat.properties = {
        label: "Weight boat",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            size: 60,
            spout: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 45, max: 140, unit: "mm",
            },
            { spec: "checkbox", key: "spout", label: "Spout" }
        ],
    };
    return WeightBoat;
}());



/***/ }),

/***/ "1SsU":
/*!***************************************************!*\
  !*** ./src/apparatus/library/decorative/beads.ts ***!
  \***************************************************/
/*! exports provided: Beads */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Beads", function() { return Beads; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! random/random */ "PJ3I");




var Beads = /** @class */ (function () {
    function Beads() {
    }
    Beads.prototype.render = function (appearance) {
        var boundDiameter = appearance.boundDiameter, color = appearance.color;
        var outlineColor = color.color().ladd(-10).hex();
        var radius = 5;
        var boundRadius = boundDiameter / 2;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        var step = 15;
        var r = new random_random__WEBPACK_IMPORTED_MODULE_3__["Random"]();
        for (var x = -boundRadius; x < boundRadius; x += step) {
            for (var y = -boundRadius; y < boundRadius; y += step) {
                var position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, y).add(r.randomUnitVector(step / 3));
                if (position.length > boundRadius)
                    continue;
                var bacteria = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(position, radius);
                bacteria.withFill(color).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), outlineColor);
                graphic.addChild(bacteria);
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0)
        };
    };
    Beads.properties = {
        label: "Beads",
        canContainLiquids: false,
        defaultAppearance: {
            boundDiameter: 100,
            color: "#72b52f"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "boundDiameter", label: "Contained within",
                min: 25, max: 150, unit: "mm"
            },
            {
                spec: "color", key: "color", label: "Colour",
            }
        ],
    };
    return Beads;
}());



/***/ }),

/***/ "1guU":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/container/cell_flask.ts ***!
  \*******************************************************/
/*! exports provided: CellCultureFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CellCultureFlask", function() { return CellCultureFlask; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var CellCultureFlask = /** @class */ (function () {
    function CellCultureFlask() {
    }
    CellCultureFlask.prototype.render = function (appearance) {
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[135, -1]], [[137, 5]], [[151, 0]], [[156, 19]], [[128, 30]], [[0, 30]])).close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(bottle);
        var liquidMask = bottle.clone();
        var cap = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(155, 9, 28, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER)).withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#2b4fc3".color()));
        cap.rotate(70);
        var fold1 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[80, 4]], [[76, 24]])).withStroke("thinner", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].glassFold);
        var fold2 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[135, 9]], [[130, 24]])).withStroke("thinner", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].glassFold);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([bottle, cap, fold1, fold2]);
        graphic.scale(appearance.scale);
        liquidMask.scale(appearance.scale, graphic.bounds.center);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: bottle.placeable(),
        };
    };
    CellCultureFlask.properties = {
        label: "Cell Culture Flask",
        canContainLiquids: true,
        defaultAppearance: {
            scale: 1.0
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Size",
                min: 0.6, max: 1.4, step: 0.01, unit: "%"
            }
        ],
    };
    return CellCultureFlask;
}());



/***/ }),

/***/ "1wdg":
/*!***************************************!*\
  !*** ./src/components/text_input.tsx ***!
  \***************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var components_text_replacements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/text_replacements */ "lJ/s");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
// Wraper around <input type="text" />
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var TextInput = /** @class */ (function (_super) {
    __extends(TextInput, _super);
    function TextInput(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { value: _this.state.text, type: _this.props.numbersOnly ? "number" : "text", maxLength: _this.props.maxLength, className: "ui-input", onFocus: function (e) { var _a; return (_a = _this.props.onFocus) === null || _a === void 0 ? void 0 : _a.call(null); }, onChange: function (e) { return _this.onChange(e); }, onBlur: function (e) { return _this.onBlur(e); }, onKeyPress: function (e) { return _this.onKeyPress(e); }, onKeyDown: function (e) { return _this.onKeyDown(e); }, placeholder: _this.props.placeholder, ref: _this.ref })); };
        _this.state = { text: _this.props.text };
        return _this;
    }
    TextInput.prototype.componentWillUnmount = function () {
        this.props.onEnd(this.props.text, this.state.text);
    };
    TextInput.prototype.onChange = function (event) {
        var value = event.target.value;
        this.setState({ text: event.target.value });
        this.props.onChange(value);
    };
    TextInput.prototype.onKeyPress = function (event) {
        if (this.props.enableReplacements === true)
            components_text_replacements__WEBPACK_IMPORTED_MODULE_0__["TextReplacements"].onKeyPress(this, event);
    };
    TextInput.prototype.onKeyDown = function (event) {
        if (this.props.enableReplacements === true)
            components_text_replacements__WEBPACK_IMPORTED_MODULE_0__["TextReplacements"].onKeyDown(this, event);
    };
    TextInput.prototype.manuallySetText = function (newText, newCursorPosition) {
        var _this = this;
        this.setState({ text: newText }, function () { return _this.ref.current.setSelectionRange(newCursorPosition, newCursorPosition); });
        this.props.onChange(newText);
    };
    TextInput.prototype.onBlur = function (event) {
        this.props.onEnd(this.props.text, this.state.text);
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "20ot":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/accessories/faucet.ts ***!
  \*****************************************************/
/*! exports provided: Faucet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Faucet", function() { return Faucet; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var Faucet = /** @class */ (function () {
    function Faucet() {
    }
    Faucet.prototype.render = function (appearance) {
        var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-70, 40]], [[-70, 25], , [0, -22]], [[-35, -10], [-22, 0]], [[40, -10]], [[40, 10]], [[-35, 10], , [-8, 0]], [[-50, 25], [0, -8]], [[-50, 40]])).close().withFill("#dddddd");
        var spoutPosition = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-60, 40);
        var bulge = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 35, 36, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER), 2.0).withFill("#cccccc");
        var handleAxle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, -44, 6, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 3.0).withFill("#999999");
        var handle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, -36, 50, 8, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER), 2.0).withFill("#cccccc");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["createOutlinedGroup"])("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke, body, bulge),
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["createOutlinedGroup"])("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke, handleAxle, handle),
        ]);
        if (appearance.showStream) {
            var streamWidth = appearance.streamStrength, streamLength = appearance.streamLength, bend = appearance.streamBend;
            var water = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[streamWidth / 2 + streamLength * bend, streamLength]], [[streamWidth / 2, 0], [0, streamLength / 2]], [[-streamWidth / 2, 0], , [0, streamLength / 2]], [[-streamWidth / 2 + streamLength * bend, streamLength]]));
            water.position.x += spoutPosition.x;
            water.position.y += spoutPosition.y;
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setLiquidStyle"])(water, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquid);
            graphic.insertChild(0, water);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)
        };
    };
    Faucet.properties = {
        label: "Tap / Faucet",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            showStream: true,
            streamLength: 120,
            streamStrength: 8,
            streamBend: 0.0,
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "showStream", label: "Water flow", subLabel: "Show" },
            {
                spec: "slider", key: "streamStrength", label: "Flow Strength",
                min: 3, max: 18,
                visible: function (a) { return a.showStream; }
            },
            {
                spec: "slider", key: "streamLength", label: "Flow Size",
                min: 10, max: 300,
                visible: function (a) { return a.showStream; }
            },
            {
                spec: "slider", key: "streamBend", label: "Flow Bend",
                min: -0.5, max: 0.5, step: 0.05,
                visible: function (a) { return a.showStream; }
            }
        ],
    };
    return Faucet;
}());



/***/ }),

/***/ "2UKY":
/*!*****************************!*\
  !*** ./src/tiers/badge.tsx ***!
  \*****************************/
/*! exports provided: Badge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Badge", function() { return Badge; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! view/tooltips */ "6T3+");


/**
 * Shows the badge to indicate this feature requires an upgrade.
 * Showing the promo popup must be handled by the parent.
 */
var Badge = function (props) {
    var _a, _b;
    var tier = props.tier;
    var ref = react__WEBPACK_IMPORTED_MODULE_0__["createRef"]();
    if ((_a = props.showHint) !== null && _a !== void 0 ? _a : true) {
        react__WEBPACK_IMPORTED_MODULE_0__["useEffect"](function () {
            Object(view_tooltips__WEBPACK_IMPORTED_MODULE_1__["setUpQTip"])(ref.current);
        }, []);
    }
    var icon = tier == "boost" ? "fa-bolt" : "fa-star";
    // Could also use fa-certificate.
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { ref: ref, className: (_b = "upgrade-badge fa-stack " + props.extraClass) !== null && _b !== void 0 ? _b : "", title: "Upgrade to use this feature." },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fal fa-badge fa-stack-2x boost-text-gradient" }),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas " + icon + " fa-stack-1x icon-inside boost-text-gradient" }));
};


/***/ }),

/***/ "2iOx":
/*!******************************!*\
  !*** ./src/file/diagram.tsx ***!
  \******************************/
/*! exports provided: DiagramFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagramFile", function() { return DiagramFile; });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ "b/SL");
/* harmony import */ var file_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! file/api */ "TDnk");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
// UI representation for a single diagram file.




var DiagramFile = function (props) {
    function openFile() {
        Object(file_api__WEBPACK_IMPORTED_MODULE_1__["openDiagram"])(props.diagram, /*isTemplate*/ false);
        props.onOpen(props.diagram.id);
    }
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "col-12 col-sm-4 col-md-3 col-lg-2 mb-2 pr-2" },
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "thumbnail mb-1" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](ActionMenu, __assign({}, props)),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("img", { src: props.diagram.thumbnail, className: "img-thumbnail", onClick: openFile })),
        props.diagram.title,
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("br", null),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("small", { className: "text-muted" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-clock" }),
            " ",
            Object(date_fns__WEBPACK_IMPORTED_MODULE_0__["formatDistance"])(props.diagram.modified, props.now),
            " ago"));
};
var ActionMenu = function (props) {
    function deleteFile() {
        var loggedIn = store_store__WEBPACK_IMPORTED_MODULE_3__["default"].loggedInState();
        if (!loggedIn)
            return;
        var diagram = props.diagram;
        if (!confirm("Are you sure you want to delete diagram \"" + diagram.title + "\"?")) {
            return;
        }
        file_api__WEBPACK_IMPORTED_MODULE_1__["CloudFiles"].remove(loggedIn, diagram, props.onDelete);
    }
    function renameFile() {
        var loggedIn = store_store__WEBPACK_IMPORTED_MODULE_3__["default"].loggedInState();
        if (!loggedIn)
            return;
        var title = prompt("Enter a new name for your diagram", props.diagram.title);
        if (title === null)
            return;
        file_api__WEBPACK_IMPORTED_MODULE_1__["CloudFiles"].rename(loggedIn, props.diagram, title, props.onRename);
    }
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "text-white overlayButton" },
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("button", { type: "button", className: "btn btn-sm btn-outline-secondary", "data-toggle": "dropdown" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-ellipsis-h" })),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "dropdown-menu bg-dark text-white", "aria-labelledby": "dropdownMenuButton" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](ActionMenuItem, { icon: "fa-pencil-alt", title: "Rename", onClick: renameFile }),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](ActionMenuItem, { icon: "fa-trash", title: "Delete", onClick: deleteFile, css: "text-danger" })));
};
var ActionMenuItem = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { className: (_a = "dropdown-item bg-dark text-white " + props.css) !== null && _a !== void 0 ? _a : "", onClick: props.onClick },
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-fw mr-2 " + props.icon }),
        props.title));
};


/***/ }),

/***/ "2lH5":
/*!***************************************************!*\
  !*** ./src/apparatus/library/measurement/tape.ts ***!
  \***************************************************/
/*! exports provided: TapeMeasure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TapeMeasure", function() { return TapeMeasure; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var TapeMeasure = /** @class */ (function () {
    function TapeMeasure() {
    }
    TapeMeasure.prototype.render = function (appearance) {
        var cmlength = appearance.length;
        var length = cmlength * 10;
        var tape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-5, 0, length + 5, 25));
        tape.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#8c6d2e")
            .withFill("#f9cb01");
        var tapeEnd = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(length + 7, 5, 20, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_RIGHT), 2)
            .withFill("#222222");
        var casing = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-71, -3, 70, 31), 2.0);
        casing.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#333333")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box("#444444".color()));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([tape]);
        // Add markings
        var mark = 1;
        var markX = length - 10;
        while (markX > 0) {
            var color = mark % 10 == 0 ? "red" : "black";
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(markX, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(markX, 10)).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), color));
            markX -= 10;
            mark += 1;
        }
        graphic.addChild(tapeEnd);
        graphic.addChild(casing);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: casing.bounds.center,
        };
    };
    TapeMeasure.properties = {
        label: "Tape measure",
        canContainLiquids: false,
        defaultAppearance: {
            length: 30,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 0, max: 90, unit: "cm"
            }
        ],
    };
    return TapeMeasure;
}());



/***/ }),

/***/ "30Lh":
/*!********************************************************!*\
  !*** ./src/apparatus/library/accessories/sellotape.ts ***!
  \********************************************************/
/*! exports provided: Sellotape */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sellotape", function() { return Sellotape; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var COLOR = "#9edef0";
var Sellotape = /** @class */ (function () {
    function Sellotape() {
    }
    Sellotape.prototype.render = function (appearance) {
        var width = appearance.width, length = appearance.length;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([]);
        graphic.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(length / 2, 0));
        var alternate = false;
        for (var y = 3; y <= width; y += 3) {
            graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(alternate ? 3 : -3, 3));
            alternate = !alternate;
        }
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])((alternate ? 1 : -1) * width % 3, width % 3));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        graphic.close()
            .withStroke("thinner", COLOR)
            .withGradientFill("right-down", [
            ["#e1f6fc80", 0.3],
            ["#ffffff80", 0.5],
            ["#e1f6fc80", 0.7],
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape(),
        };
    };
    Sellotape.properties = {
        label: "Adhesive Tape",
        canContainLiquids: true,
        defaultAppearance: {
            width: 12,
            length: 100,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 10, max: 30,
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 25, max: 120
            },
        ],
    };
    return Sellotape;
}());



/***/ }),

/***/ "3DAD":
/*!******************************************!*\
  !*** ./src/apparatus/library/burette.ts ***!
  \******************************************/
/*! exports provided: Burette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Burette", function() { return Burette; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_tap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/tap */ "ndDi");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




var Burette = /** @class */ (function () {
    function Burette() {
    }
    Burette.prototype.render = function (appearance) {
        var size = appearance.size;
        var glass = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, size], undefined, [0, 10]], [[appearance.diameter / 2 - 5, size + 15]], [[appearance.diameter / 2 - 5, size + 70]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(glass, appearance.diameter / 2);
        var liquidMask = glass.clone();
        if (_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].isClosed(appearance.tapOpening) && appearance.emptyJet) {
            liquidMask.segments[3].point = liquidMask.segments[5].point;
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(glass);
        var glassWalls = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(glass, 5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(glassWalls);
        var stopCock = Object(_common_tap__WEBPACK_IMPORTED_MODULE_3__["createTap"])(appearance.tapOpening);
        stopCock.position.x += appearance.diameter / 2;
        stopCock.position.y = size + 20;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([glassWalls, stopCock]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(appearance.diameter - 4, size + 15), 8, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["markerSpacing"] * 2));
        var hitShapes = [
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(glass.bounds),
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(stopCock.bounds)
        ];
        return { graphic: graphic, hitShape: hitShapes, liquidMask: liquidMask };
    };
    Burette.properties = {
        label: "Burette",
        canContainLiquids: true,
        defaultAppearance: __assign(__assign({ size: 250, diameter: 24 }, _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].defaultAppearance), { emptyJet: true }),
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 150, max: 600,
            },
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 18, max: 24, step: 0.1,
            },
            _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpec,
            {
                spec: "checkbox", key: "emptyJet", label: "Empty jet",
                visible: function (a) { return _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].isClosed(a.tapOpening); },
            },
        ],
    };
    return Burette;
}());



/***/ }),

/***/ "3Tcl":
/*!********************!*\
  !*** ./src/log.ts ***!
  \********************/
/*! exports provided: clog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clog", function() { return clog; });
function clog() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    console
        .log.apply(console, arguments);
}


/***/ }),

/***/ "3hX5":
/*!************************************************!*\
  !*** ./src/apparatus/library/spotting_tile.ts ***!
  \************************************************/
/*! exports provided: SpottingTile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpottingTile", function() { return SpottingTile; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var SpottingTile = /** @class */ (function () {
    function SpottingTile() {
    }
    SpottingTile.prototype.render = function (appearance) {
        var wellDiameter = 20 * appearance.scale;
        var gap = 5 * appearance.scale;
        var shadowOffset = 5 * appearance.scale;
        var margin = 10 * appearance.scale;
        var rounded = 3 * appearance.scale;
        var x, y;
        switch (appearance.size) {
            case "six":
                x = 3;
                y = 2;
                break;
            case "sixteen":
                x = 4;
                y = 4;
                break;
            case "twelve":
            default:
                x = 4;
                y = 3;
                break;
        }
        // Create tray.
        var tray = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-margin - wellDiameter / 2, -margin - wellDiameter / 2, x * wellDiameter + (x - 1) * gap + 2 * margin, y * wellDiameter + (y - 1) * gap + 2 * margin), rounded);
        tray.fillColor = "#e0e0e0";
        tray.strokeColor = "#aaaaaa";
        tray.strokeWidth = 2.0;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([tray]);
        // Gradient for the wells.
        var wellGradient = new paper__WEBPACK_IMPORTED_MODULE_1__["Gradient"]([["#f3f3f3", 0.3], ["#bbbbbb", 1.0]], true);
        var snapPoints = [];
        // Create wells.
        for (var i = 0; i < x; i++) {
            for (var j = 0; j < y; j++) {
                var well = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), wellDiameter / 2);
                well.fillColor = new paper__WEBPACK_IMPORTED_MODULE_1__["Color"](wellGradient, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, shadowOffset), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, wellDiameter * 1.2));
                var x_1 = i * (wellDiameter + gap);
                var y_1 = j * (wellDiameter + gap);
                well.position.set(x_1, y_1);
                graphic.addChild(well);
                snapPoints.push(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x_1, y_1 + 1));
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: {
                type: "spotting_tile",
                at: snapPoints
            }
        };
    };
    SpottingTile.properties = {
        label: "Spotting Tile",
        canContainLiquids: false,
        defaultAppearance: {
            size: "twelve",
            scale: 1.5,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "size", label: "Wells", options: [
                    { value: "six", label: "6" },
                    { value: "twelve", label: "12" },
                    { value: "sixteen", label: "16", tier: "boost" },
                ]
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 2.0, step: 0.05, unit: "%",
            },
        ],
    };
    return SpottingTile;
}());



/***/ }),

/***/ "3kYy":
/*!************************!*\
  !*** ./src/api/api.ts ***!
  \************************/
/*! exports provided: BACKEND_API, callApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BACKEND_API", function() { return BACKEND_API; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callApi", function() { return callApi; });
/* harmony import */ var api_querystringlite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/querystringlite */ "bAC0");
/* harmony import */ var api_specialErrorHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/specialErrorHandler */ "qTbH");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vars */ "nHh6");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};



var BACKEND_API = vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].isDev ? "http://localhost:3000" : "https://chemixapp.appspot.com";
/**
 * Helper method to call the API. It's a thin wrapper around fetch, adding:
 *  - type safety for request and response types
 *  - conversion of request data into stringified URL for GET methods
 */
function callApi(path, method, auth, request, handlers) {
    var _this = this;
    if (auth === void 0) { auth = null; }
    var headers = {};
    headers["Content-Type"] = "application/json";
    if (auth) {
        if (typeof auth === "string") {
            headers["Authorization"] = "Bearer " + auth;
        }
        else if (auth.state == "logged_in") {
            var jwtToken = auth.jwtToken;
            headers["Authorization"] = "Bearer " + jwtToken;
        }
    }
    var fetchOptions = {
        headers: headers,
        method: method,
    };
    // Add request data, depending on method.
    if (method == "GET") {
        // Stringify
        path += '?' + api_querystringlite__WEBPACK_IMPORTED_MODULE_0__["querystring"].stringify(request);
    }
    else {
        fetchOptions["body"] = JSON.stringify(request);
    }
    fetch(BACKEND_API + '/' + path, fetchOptions)
        .then(function (r) { return __awaiter(_this, void 0, void 0, function () {
        var parsedJson, handled, errorJson;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, r.json()];
                case 1:
                    parsedJson = _a.sent();
                    if (r.status == 200) {
                        handlers.success(parsedJson);
                    }
                    else {
                        handled = void 0;
                        if (Object(api_specialErrorHandler__WEBPACK_IMPORTED_MODULE_1__["isSpecialError"])(parsedJson) && handlers.special) {
                            handled = handlers.special(parsedJson);
                        }
                        else if (handlers.common) {
                            errorJson = parsedJson;
                            handlers.common(errorJson.error);
                            handled = true;
                        }
                        else {
                            handled = false;
                        }
                        if (!handled) {
                            if (handlers.generic) {
                                handlers.generic();
                            }
                            else {
                                console.error("Unhandled error: ", parsedJson);
                                toastr.error("Unknown error making request.");
                            }
                        }
                    }
                    // Invoke final callback if specified.
                    if (handlers.finally)
                        handlers.finally();
                    return [2 /*return*/, parsedJson];
            }
        });
    }); })
        .catch(function (e) {
        console.error(e);
        if (handlers.generic) {
            handlers.generic();
        }
        else {
            toastr.error(e, "Error making request.");
        }
        if (handlers.finally)
            handlers.finally();
    });
}


/***/ }),

/***/ "3kc6":
/*!***********************************************!*\
  !*** ./src/layout/sidebar/tabbed_sidebar.tsx ***!
  \***********************************************/
/*! exports provided: TabbedSidebar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabbedSidebar", function() { return TabbedSidebar; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_specs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/specs */ "nDAO");
/* harmony import */ var components_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/icon */ "oh6M");
/* harmony import */ var components_searchbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! components/searchbox */ "VVZF");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var layout_sidebar_sidebar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! layout/sidebar/sidebar */ "O70j");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! view/tooltips */ "6T3+");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();








/** Component that displays the sidebar on the left. */
var TabbedSidebar = /** @class */ (function (_super) {
    __extends(TabbedSidebar, _super);
    function TabbedSidebar(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            currentTab: "chemistry",
            searchTerm: ""
        };
        return _this;
    }
    TabbedSidebar.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("div", { id: "sidebar" },
            react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("div", { id: "apparatus-search" },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](components_searchbox__WEBPACK_IMPORTED_MODULE_3__["SearchBox"], { value: this.state.searchTerm, onChange: function (v) { return _this.setState({ searchTerm: v }); }, onBlur: function (v) { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SearchApparatus", v); }, placeholder: "Search apparatus", tooltip: Object(view_tooltips__WEBPACK_IMPORTED_MODULE_7__["formatTooltip"])("Search for apparatus and items", [{ key: "F", ctrl: true }]), throttleMs: 100 })),
            react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("div", { className: "sidebar-tab-header" }, this.tabName),
            react__WEBPACK_IMPORTED_MODULE_6__["createElement"](layout_sidebar_sidebar__WEBPACK_IMPORTED_MODULE_5__["ApparatusList"], { key: "sideBar", searchTerm: this.state.searchTerm, module: this.state.currentTab, onSwitchModule: function (m) { return _this.setState({ searchTerm: "", currentTab: m }); } }),
            react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("div", { className: "sidebar-tabs" },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("span", { className: "line" }),
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("ul", { "data-simplebar": true },
                    this.tab("chemistry"),
                    this.tab("measurement"),
                    this.tab("heating"),
                    this.tab("biology"),
                    flags__WEBPACK_IMPORTED_MODULE_4__["default"].isPhysicsEnabled ? this.tab("physics", true) : null,
                    this.tab("distillation"),
                    this.tab("various"),
                    this.tab("shapes"))));
    };
    TabbedSidebar.prototype.tab = function (module, beta) {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Tab, { active: !this.isInSearchMode && this.state.currentTab == module, hint: Object(apparatus_specs__WEBPACK_IMPORTED_MODULE_1__["moduleDisplayName"])(module), icon: Object(apparatus_specs__WEBPACK_IMPORTED_MODULE_1__["moduleDisplayIcon"])(module), key: module, onClick: function () { return _this.switchTab(module); }, beta: beta });
    };
    TabbedSidebar.prototype.switchTab = function (module) {
        this.setState({ currentTab: module, searchTerm: "" });
    };
    Object.defineProperty(TabbedSidebar.prototype, "tabName", {
        get: function () {
            return this.isInSearchMode ? "Search Results" : Object(apparatus_specs__WEBPACK_IMPORTED_MODULE_1__["moduleDisplayName"])(this.state.currentTab);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabbedSidebar.prototype, "isInSearchMode", {
        get: function () {
            return this.state.searchTerm.length > 0;
        },
        enumerable: false,
        configurable: true
    });
    return TabbedSidebar;
}(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));

var Tab = function (props) { return (react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("li", { "data-qtipopts": "vertical", className: props.active ? "active" : "", onClick: props.onClick },
    react__WEBPACK_IMPORTED_MODULE_6__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_2__["Icon"], { name: props.icon, fullWidth: false }),
    props.hint,
    props.beta === true ? react__WEBPACK_IMPORTED_MODULE_6__["createElement"]("div", { className: "badge badge-info ml-1" }, "BETA") : undefined)); };


/***/ }),

/***/ "3lL+":
/*!*************************************************!*\
  !*** ./src/apparatus/library/live_apparatus.ts ***!
  \*************************************************/
/*! exports provided: LiveEditApparatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LiveEditApparatus", function() { return LiveEditApparatus; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



/**
 * This is a special type of apparatus, used for development only!
 * It does not represent any specific apparatus, instead it
 * allows its own path segments to be edited live. This is useful
 * when trying to draw new apparatus, speeds up the process by
 * allowing the developer to see the path as the path is edited.
 *
 * Note that when specifying the path segments,
 * only numbers can be used, variables cannot be used.
 */
var LiveEditApparatus = /** @class */ (function () {
    function LiveEditApparatus() {
    }
    LiveEditApparatus.prototype.render = function (appearance) {
        var isValid = false;
        try {
            var rawSegmentsString = appearance.segments;
            // Remove newlines, then surround with brackets to create an array.
            var segmentsString = "[" + rawSegmentsString.replace("\n", "") + "]";
            var evalSegments = eval(segmentsString);
            var segments_2 = evalSegments;
            // Validate each segment.
            for (var _i = 0, segments_1 = segments_2; _i < segments_1.length; _i++) {
                var segment = segments_1[_i];
                if (segment.length < 1 || segment.length > 3) {
                    throw new Error("Contains invalid segment");
                }
                // Validate each point.
                for (var _a = 0, segment_1 = segment; _a < segment_1.length; _a++) {
                    var point = segment_1[_a];
                    if (point !== undefined && point.length != 2) {
                        throw new Error("Segment contains invalid point");
                    }
                }
            }
            isValid = true;
            this.lastValidSegments = segments_2;
        }
        catch (_b) {
            // Input is invalid.
        }
        var segments = this.lastValidSegments;
        var path = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](segments);
        if (appearance.strokeThickness != "none") {
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])(appearance.strokeThickness, path);
        }
        if (appearance.mirrored) {
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(path);
        }
        if (appearance.closed) {
            path.fillColor = "#dddddd80";
            path.closePath();
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([path]);
        if (appearance.xray) {
            // Show the path and control points in yellow.
            path.fullySelected = true;
            path.selectedColor = "#deb018";
        }
        if (appearance.highlightFirstAndSecond) {
            // Mark first and second points.
            if (segments.length >= 2) {
                var marker = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(segments[0][0][0], segments[0][0][1]), 6.5);
                marker.fillColor = "black";
                graphic.addChild(marker);
            }
            if (segments.length >= 3) {
                var marker = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(segments[1][0][0], segments[1][0][1]), 5.0);
                marker.fillColor = "black";
                graphic.addChild(marker);
            }
        }
        // Draw center.
        graphic.addChild(paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), 2).withFill("green"));
        if (!isValid) {
            graphic.strokeColor = "red";
        }
        var hitShape = graphic.bounds.toShape();
        return {
            graphic: graphic,
            hitShape: hitShape,
            pivot: appearance.lockPivot ? Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0) : undefined
        };
    };
    LiveEditApparatus.properties = {
        label: "Live-Edit",
        canContainLiquids: false,
        defaultAppearance: {
            segments: "[[0, 0]],\n[[100, 0]],\n[[100, 100]],\n[[0, 100]]",
            closed: true,
            mirrored: false,
            xray: true,
            highlightFirstAndSecond: false,
            strokeThickness: "default",
            lockPivot: true,
        },
        appearanceSpecs: [
            {
                spec: "textarea", key: "segments", label: "Segments",
            },
            {
                spec: "checkbox-group", label: "Options", checkboxes: [
                    { key: "closed", label: "Close path" },
                    { key: "mirrored", label: "Mirrored", },
                    { key: "xray", label: "Show X-ray" },
                    { key: "highlightFirstAndSecond", label: "Highlight 1st and 2nd points" },
                    { key: "lockPivot", label: "Lock Pivot" },
                ]
            },
            {
                spec: "radio", key: "strokeThickness", label: "Stroke thickness",
                options: [
                    { value: "default", label: "Default" },
                    { value: "thin", label: "Thin" },
                    { value: "none", label: "None" },
                ],
            }
        ],
    };
    return LiveEditApparatus;
}());



/***/ }),

/***/ "3pNw":
/*!**************************!*\
  !*** ./src/ext/array.ts ***!
  \**************************/
/*! exports provided: Arrays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Arrays", function() { return Arrays; });
var Arrays;
(function (Arrays) {
    function includes(arr, item) {
        return arr.indexOf(item) > -1;
    }
    Arrays.includes = includes;
    function maybeExtend(arr, condition, item) {
        if (condition) {
            arr.push(item);
        }
        return arr;
    }
    Arrays.maybeExtend = maybeExtend;
    function shallowStrictEquals(a, b) {
        return a.length === b.length &&
            a.every(function (val, index) { return val == b[index]; });
    }
    Arrays.shallowStrictEquals = shallowStrictEquals;
})(Arrays || (Arrays = {}));


/***/ }),

/***/ "4df5":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/electrical/ammeter.ts ***!
  \*****************************************************/
/*! exports provided: SimpleAmmeter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleAmmeter", function() { return SimpleAmmeter; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SimpleAmmeter = /** @class */ (function () {
    function SimpleAmmeter() {
        this.textStyler = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["StyledTextCreator"]({
            fontFamily: "sans-serif",
            fillColor: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke
        });
    }
    SimpleAmmeter.prototype.render = function (appearance) {
        var circle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), appearance.size / 2)
            .withStroke("default").withFill("white");
        var text = this.textStyler.create("A", Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, appearance.size * 0.35 * 0.7), { fontSize: appearance.size * 0.7 });
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([circle, text]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    SimpleAmmeter.properties = {
        label: "Ammeter (Symbol)",
        canContainLiquids: false,
        defaultAppearance: {
            size: 60
        },
        appearanceSpecs: [],
    };
    return SimpleAmmeter;
}());



/***/ }),

/***/ "4eva":
/*!***************************************!*\
  !*** ./src/layout/top_bar/extras.tsx ***!
  \***************************************/
/*! exports provided: Logo, SocialWidgets, ScreenTooSmallWarning */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logo", function() { return Logo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialWidgets", function() { return SocialWidgets; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScreenTooSmallWarning", function() { return ScreenTooSmallWarning; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! support/beacon */ "JuZC");


/** Clickable Chemix Logo. */
var Logo = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { key: "logo_wrapper", id: "logo" },
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("img", { key: "logo", src: "./images/192.png", height: 48, width: 48, onClick: function () { return props.onClick(); }, title: "About Chemix" }))); };
/** Social links. */
var SocialWidgets = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { id: "socialWidgets", style: { display: props.visible ? "inline-block" : "none" } },
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("iframe", { id: "fbWidget", src: "https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fchemix.org%2F&width=150&layout=button_count&colorscheme=dark& action=like&size=small&show_faces=true&share=true&height=21&appId", width: 150, height: 21, style: { border: "none", overflow: "hidden" }, key: "fbWidget", scrolling: "no" }),
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "https://twitter.com/ChemixLab?ref_src=twsrc%5Etfw", className: "twitter-follow-button", key: "twitterWidget", "data-show-count": "true", "data-show-screen-name": "false" }))); };
/**
 * Screen-too-small warning.
 */
var ScreenTooSmallWarning = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { id: "screen-too-small" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-stack fa-2x d-block mx-auto mb-2" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fal fa-desktop fa-stack-2x" }),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fal fa-arrows-alt-h fa-stack-1x fa-lg mt-n2" })),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("br", null),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h3", null, "Chemix requires a screen at least 650px\u00A0wide."),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "my-4 mx-auto", style: { width: "100%", maxWidth: "400px" } },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("ul", { className: "fa-ul text-left" },
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-li" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas fa-desktop" })),
                    "Use a larger screen (tablet, laptop or computer)"),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-li" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas fa-mobile-android-alt fa-rotate-90" })),
                    "Rotate your device to landscape"),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-li" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas fa-info-circle" })),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "#", "data-beacon-article": support_beacon__WEBPACK_IMPORTED_MODULE_1__["Articles"].ABOUT }, "Learn more about Chemix")),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-li" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas fa-dollar-sign" })),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "#pricing", onClick: props.onPricingClick }, "See pricing")),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "fa-li" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fas fa-question-circle" })),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "#", "data-beacon-article": support_beacon__WEBPACK_IMPORTED_MODULE_1__["Articles"].SCREEN_TOO_SMALL }, "Why is a wide screen needed?")))));
};


/***/ }),

/***/ "4gVM":
/*!******************************************************!*\
  !*** ./src/apparatus/library/metallic/steel_wool.ts ***!
  \******************************************************/
/*! exports provided: SteelWool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SteelWool", function() { return SteelWool; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var SteelWool = /** @class */ (function () {
    function SteelWool() {
    }
    SteelWool.prototype.render = function (appearance) {
        var scale = appearance.scale, squish = appearance.squish;
        var wire1 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[16.5, 13.9], , [16.0, 11.0]], [[38.5, 24.9], [-1.0, 0.0], [0.0, 0.0]], [[12.5, 29.9], [11.2, 4.8], [-3.3, -1.4]], [[21.5, 4.9], [-6.8, 5.2], [9.3, -7.1]], [[31.5, 22.9], [9.6, -10.9], [-5.0, 5.7]], [[14.5, 20.9], [2.1, -0.9], [-2.9, 1.2]], [[30.5, 33.9], [-16.5, 1.1], [13.0, -0.8]], [[33.5, 10.9], [12.0, -1.8], [-26.5, 4.0]], [[1.5, 26.9], [5.3, 1.1], [-2.8, -0.6]], [[17.5, 19.9], [-12.0, -0.3], [19.0, 0.5]], [[44.5, 12.9], [1.2, 5.0], [-1.5, -6.2]], [[17.5, 23.9], [10.0, -6.8], [-1.9, 1.3]], [[27.5, 15.9], [-11.2, 3.1], [5.8, -1.6]], [[44.5, 14.9], [-5.3, 4.7], [3.1, -2.8]], [[35.5, 10.9], [6.7, -5.3], [-15.3, 12.0]], [[21.5, 29.9], [0.7, 1.2], [-2.0, -3.6]], [[22.5, 9.9], [-8.2, 0.9], [4.4, -0.5]], [[26.5, 29.9], [1.4, -1.4], [-0.7, 0.7]], [[23.5, 12.9], [-3.9, 11.4], [3.7, -10.8]], [[39.5, 19.9], [4.0, -13.6], [-3.0, 10.2]], [[11.5, 17.9], [7.2, 12.2], [-3.7, -6.3]], [[10.5, 6.9], [-2.8, 0.0], [11.3, 0.0]], [[36.5, 29.9], [-5.6, 1.5], [9.9, -2.7]], [[41.5, 7.9], [4.9, 6.4], [-3.3, -4.3]], [[12.5, 28.9], [8.8, -7.2], [-1.7, 1.4]], [[18.5, 19.9], [-6.5, 4.3], [7.5, -4.9]], [[43.5, 11.9], [-6.6, 5.5], [4.5, -3.7]], [[27.5, 14.9], [11.5, -13.5], [-7.0, 8.2]], [[17.5, 34.9], [2.0, -7.0], [0.0, 0.0]], [[17.5, 19.9], [0.0, 5.0]])).withStroke(1.5, "#777777");
        var wire2 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[27.5, 13.6], , [-9.0, 15.0]], [[12.5, 35.6], [2.6, -1.1], [-5.5, 2.3]], [[20.5, 19.6], [-14.9, 5.3], [12.3, -4.4]], [[45.5, 19.6], [-4.2, 4.2], [0.7, -0.7]], [[34.5, 13.6], [9.5, 0.0], [-12.6, 0.0]], [[12.5, 34.6], [1.0, -6.0], [0.0, 0.0]], [[14.5, 32.6], [-1.0, 0.2], [5.3, -1.0]], [[34.5, 28.6], [-4.4, 5.8], [5.4, -7.2]], [[26.5, 9.6], [3.2, 0.1], [-4.1, -0.2]], [[26.5, 29.6], [-8.4, -3.9], [9.1, 4.2]], [[35.5, 16.6], [5.0, 5.7], [-3.8, -4.4]], [[20.5, 31.6], [-4.2, -7.9], [3.4, 6.4]], [[33.5, 25.6], [2.6, 7.6], [-5.0, -14.7]], [[15.5, 13.6], [1.5, -1.3], [-7.9, 6.5]], [[30.5, 38.6], [-10.6, 3.5], [4.2, -1.4]], [[24.5, 13.6], [3.4, 2.6], [-6.4, -4.9]], [[8.5, 27.6], [-7.4, -14.2], [5.6, 10.8]], [[36.5, 32.6], [-1.6, 3.9], [1.1, -2.8]], [[23.5, 21.6], [11.4, -0.7], [-10.8, 0.6]], [[17.5, 34.6], [-4.9, -1.0], [4.0, 0.8]], [[25.5, 28.6], [-1.2, 1.9], [2.6, -4.3]], [[34.5, 29.6], [-0.7, -6.4], [-1.1, -7.0]], [[41.5, 14.6], [-6.3, 1.3], [7.1, -1.4]], [[49.5, 31.6], [5.4, -4.9], [-3.7, 3.5]], [[40.5, 25.6], [0.3, 4.1], [-1.1, -13.0]], [[53.5, 9.6], [-5.6, -5.8], [8.3, 8.7]], [[39.5, 40.6], [3.0, -3.0]])).withStroke(1.5, "#999999bb");
        wire2.rotate(-20);
        wire2.position.x -= 5;
        wire2.position.y -= 2;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([wire1, wire2]);
        graphic.rotate(20);
        switch (appearance.state) {
            case "normal": break;
            case "burning":
                wire2.setRadialGradientStroke([["#F7CA6Cbb", 0.15], ["#F4D76Abb", 0.6], ["#7B6D6Dbb", 1.0]]);
                var glow = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(wire1.bounds.center, 22.0).setRadialGradientFill([["#feee8dff", 0.0], ["#f1990d80", 0.5], ["#f9e57b00", 1.0]]);
                glow.enableScalableGradient();
                glow.scale(1.2, 1.0);
                glow.blendMode = "lighten";
                graphic.addChild(glow);
                break;
            case "burnt":
                wire1.strokeColor = "#333333";
                wire2.strokeColor = "#222222bb";
        }
        graphic.scale(scale, scale * (1 - squish));
        // const bounds = graphic.bounds.clone().expand(-20)
        // const r = new Random()
        // for (var i = 0; i < 15; i++) {
        //     const p = r.randomInBounds(bounds)
        //     const spark = Shape.Circle(p, 5.0)
        //     spark.setRadialGradientFill([["white", 0.0],["#e7c924ff", 0.4], ["#f1990d00", 1.0]])
        //     spark.blendMode = "hard-light"
        //     graphic.addChild(spark)
        // }
        // wire1.strokeColor = new Color(
        //     new Gradient([["#ffffe2", 0.0], ["#fcaf3a", 0.5],["#777777", 0.9]], true),
        //     wire1.bounds.center,
        //     wire1.bounds.rightCenter,
        // )
        // wire2.strokeColor = new Color(
        //     new Gradient([["#fff99ebb", 0.0], ["#999999bb", 1.0]], true),
        //     wire2.bounds.center,
        //     wire2.bounds.rightCenter,
        // )
        // const spark = Shape.Circle(P(25, 25), 20.0)
        // spark.setRadialGradientFill([["white", 0.0],["#e7c924ff", 0.4], ["#ffd37a00", 1.0]])
        // spark.blendMode = "overlay"
        // spark.opacity = 0.3
        // graphic.addChild(spark)
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape(),
            pivot: wire1.bounds.center,
        };
    };
    SteelWool.properties = {
        label: "Steel Wool",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            squish: 0.0,
            state: "normal"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Size",
                min: 0.75, max: 1.5, step: 0.01, unit: "%"
            },
            {
                spec: "slider", key: "squish", label: "Squish",
                min: 0.0, max: 0.5, step: 0.01, unit: "%"
            },
            {
                spec: "radio", key: "state", label: "",
                options: [
                    { value: "normal", label: "Normal" },
                    { value: "burning", label: "Burning" },
                    { value: "burnt", label: "Burnt" },
                ],
            }
        ],
    };
    return SteelWool;
}());



/***/ }),

/***/ "4poY":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/accessories/joint_clip.ts ***!
  \*********************************************************/
/*! exports provided: PlasticJointClip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlasticJointClip", function() { return PlasticJointClip; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


/** Thickness of the connecting band. */
var BAND_THICKNESS = 6;
/**
 * A plastic joint clip, also known as Keck clip.
 * See http://www.sciencemadness.org/smwiki/index.php/Keck_clip
 */
var PlasticJointClip = /** @class */ (function () {
    function PlasticJointClip() {
    }
    PlasticJointClip.prototype.render = function (appearance) {
        // Diameter of top ring.
        var topDiameter = appearance.diameter;
        // Diameter of bottom ring.
        var bottomDiameter = appearance.diameter + 5;
        // Distance between the rings.
        var distanceApart = 15;
        // Thickness of each ring.
        var ringThickness = 8;
        var color = baseColor(appearance.color);
        // Create the rings.
        var topRing = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, topDiameter, ringThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER), 2.0);
        var bottomRing = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, distanceApart, bottomDiameter, ringThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER), 2.0);
        setRingGradient(topRing, color);
        setRingGradient(bottomRing, color);
        // Create the connecting bands.
        var bandLeft = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-topDiameter / 2, 0], , [-10, 0]], [[-bottomDiameter / 2, distanceApart], [-8, 0]]));
        setBandGradient(bandLeft, color);
        var bandMiddle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[0, distanceApart]]));
        setBandGradient(bandMiddle, color);
        bandMiddle.strokeCap = "square";
        var bandRight = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[topDiameter / 2, 0], , [10, 0]], [[bottomDiameter / 2, distanceApart], [8, 0]]));
        setBandGradient(bandRight, color);
        // Assemble together.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([topRing, bottomRing, bandLeft, bandRight, bandMiddle]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    PlasticJointClip.properties = {
        label: "Plastic Joint Clip",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: 30,
            color: "red"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 20, max: 50
            },
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "red", label: "Red" },
                    { value: "green", label: "Green", tier: "boost" },
                    { value: "blue", label: "Blue", tier: "boost" },
                    { value: "yellow", label: "Yellow", tier: "boost" },
                    { value: "white", label: "White", tier: "boost" },
                ],
            }
        ],
    };
    return PlasticJointClip;
}());

function baseColor(input) {
    switch (input) {
        case "red": return "#de5a4e";
        case "green": return "#32a852";
        case "blue": return "#2266d4";
        case "yellow": return "#e0d836";
        case "white": return "#dddddd";
    }
}
function setRingGradient(item, color) {
    var darkerColor = color.color().darken(0.15).hex();
    var outlineColor = color.color().darken(0.4).hex();
    item.setGradientFill("right", [[darkerColor, 0.0], [color, 0.5], [darkerColor, 1.0]]);
    item.withStroke("thinner", outlineColor);
}
function setBandGradient(item, color) {
    var darkColor = color.color().darken(0.2).hex();
    var darkerColor = color.color().darken(0.4).hex();
    item.setGradientStroke("down", [[darkColor, 0.0], [darkerColor, 1.0]]);
    item.strokeCap = "butt";
    item.strokeWidth = BAND_THICKNESS;
}


/***/ }),

/***/ "5ByY":
/*!******************************************************!*\
  !*** ./src/apparatus/library/physics/light_gates.ts ***!
  \******************************************************/
/*! exports provided: LightGate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LightGate", function() { return LightGate; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var LightGate = /** @class */ (function () {
    function LightGate() {
    }
    LightGate.prototype.render = function (appearance) {
        var color = appearance.color;
        var darker = appearance.color.color().darken(0.3).hex();
        var side = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 8, 120)).withFill(darker);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(side.segments[1], 2.0);
        var side2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(20, 0, 8, 120)).withFill(darker);
        var front = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[7, 0]], [[35, 0]], [[35, 120]], [[27, 120]], [[27, 20]], [[15, 20]], [[15, 120]], [[7, 120]])).close().withFill(color);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(front.segments[1], 2.0);
        var gate = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["createOutlinedGroup"])("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke, side, side2, front);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([gate]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    LightGate.properties = {
        label: "Light Gate",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            color: "#666666"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "#666666", label: "Black" },
                    { value: "#cccccc", label: "White" },
                ],
            }
        ],
    };
    return LightGate;
}());



/***/ }),

/***/ "5IfQ":
/*!************************************!*\
  !*** ./src/panel/propertyPanel.ts ***!
  \************************************/
/*! exports provided: sectionsForMultipleItems */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sectionsForMultipleItems", function() { return sectionsForMultipleItems; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editing/arrange/align */ "GiT7");
/* harmony import */ var editing_arrange_distribute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/arrange/distribute */ "nErs");
/* harmony import */ var editing_grouping_operations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/grouping/operations */ "VqZE");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! panel/apparatus_panel_ui */ "GzMk");
/* harmony import */ var panel_ordering_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! panel/ordering_ui */ "uKu+");
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};








function sectionsForMultipleItems(selected, app) {
    var elements = [];
    if ((selected.standaloneObjectsCount + selected.groupsCount) > 1) {
        elements.push.apply(elements, createAlignAndDistributeIcons(selected, app));
    }
    // Reordering should happen on items only, on the uncategorised items
    // so that items in groups, can be moved to.
    if ((selected.standaloneObjectsCount + selected.groupsCount) > 0) {
        elements.push(Object(panel_ordering_ui__WEBPACK_IMPORTED_MODULE_7__["createOrderingButtons"])(selected.items.map(function (i) { return i.id; })));
    }
    if (selected.shouldAllowGrouping || selected.shouldAllowUngrouping) {
        if (selected.shouldAllowGrouping) {
            elements.push({
                spec: "button",
                key: "groupObjects",
                label: "Grouping",
                buttonLabel: "Group objects",
                icon: "object-group",
                onClick: function () {
                    var command = selected.createGroupObjectsCommand();
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Grouping", "Group");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                }
            });
        }
        if (selected.shouldAllowUngrouping) {
            elements.push({
                spec: "button",
                key: "ungroupObjects",
                label: "Grouping",
                buttonLabel: "Ungroup objects",
                icon: "object-ungroup",
                onClick: function () {
                    var command = selected.createUngroupObjectsCommand();
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Grouping", "Ungroup");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                }
            });
        }
    }
    return {
        title: selected.displayString,
        icon: "mouse-pointer",
        tabs: __spreadArrays([
            {
                type: "tools",
                sections: [
                    {
                        header: "Tools",
                        icon: "wrench",
                        hideHeaderIfFirst: true,
                        elements: elements,
                    },
                ],
            }
        ], (flags__WEBPACK_IMPORTED_MODULE_5__["default"].isEditingMultipleItemsOfSameTypeEnabled && selected.isItemsWithLiquidOnly ? [
            {
                type: "liquid",
                colorDot: selected.getConsistentItemsLiquidColor(),
                sections: [
                    {
                        header: "Liquid",
                        icon: "tint",
                        hideHeaderIfFirst: true,
                        elements: Object(panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_6__["createSingleLayerLiquidPropsSection"])(selected.items, app)
                    }
                ]
            }
        ] : []))
    };
}
function createAlignAndDistributeIcons(selected, app) {
    // Align is only supported for items and arrows and groups.
    // If an arrow is inside a group, the arrow will be ignored for purposes of alignment.
    var itemComponents = selected.standaloneItems.map(function (i) { return app.getObjectComponent(i.id); });
    var arrowComponents = selected.standaloneArrows.map(function (a) { return app.getObjectComponent(a.id); });
    var groupAlignables = selected.rootGroups.map(function (g) { return new AlignableGroup(g, app); });
    var alignables = __spreadArrays(itemComponents, arrowComponents, groupAlignables);
    return [{
            spec: "horizontal-icon-buttons",
            label: "Align",
            key: "HorizontalAlign",
            buttons: [
                {
                    buttonLabel: "Align left edges", icon: "chemicons-align-left",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].align(alignables, "left");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "left");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Align horizontal center", icon: "chemicons-align-v-center",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].alignCenters(alignables, "x");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "horizontal-centers");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Align right edges", icon: "chemicons-align-right",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].align(alignables, "right");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "right");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                }
            ]
        }, {
            spec: "horizontal-icon-buttons",
            label: "",
            key: "VerticalAlign",
            buttons: [
                {
                    buttonLabel: "Align top edges", icon: "chemicons-align-top",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].align(alignables, "top");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "top");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Align vertical centers", icon: "chemicons-align-h-center",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].alignCenters(alignables, "y");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "vertical-centers");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Align bottom edges", icon: "chemicons-align-bottom",
                    onClick: function () {
                        var commands = editing_arrange_align__WEBPACK_IMPORTED_MODULE_2__["Align"].align(alignables, "bottom");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "bottom");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                }
            ]
        }, {
            spec: "horizontal-icon-buttons",
            label: "Distribute",
            key: "Distribute",
            buttons: [
                {
                    buttonLabel: "Distribute centers horizontally", icon: "chemicons-distribute-h-center",
                    onClick: function () {
                        var commands = editing_arrange_distribute__WEBPACK_IMPORTED_MODULE_3__["Distribute"].distributeCenters(alignables, "x");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "distribute-horizontal-centers");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Distribute horizontal gaps", icon: "chemicons-distribute-h-gap",
                    onClick: function () {
                        var commands = editing_arrange_distribute__WEBPACK_IMPORTED_MODULE_3__["Distribute"].distributeGaps(alignables, "x");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "distribute-horizontal-gaps");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Distribute centers vertically", icon: "chemicons-distribute-v-center",
                    onClick: function () {
                        var commands = editing_arrange_distribute__WEBPACK_IMPORTED_MODULE_3__["Distribute"].distributeCenters(alignables, "y");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "distribute-vertical-centers");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
                {
                    buttonLabel: "Distribute vertical gaps", icon: "chemicons-distribute-v-gap",
                    onClick: function () {
                        var commands = editing_arrange_distribute__WEBPACK_IMPORTED_MODULE_3__["Distribute"].distributeGaps(alignables, "y");
                        if (commands) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("AlignItems", "distribute-vertical-gaps");
                            command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"](commands));
                        }
                    }
                },
            ]
        }];
}
/** Provides Alignable implementation for a group. */
var AlignableGroup = /** @class */ (function () {
    function AlignableGroup(group, app) {
        this.group = group;
        this.app = app;
    }
    Object.defineProperty(AlignableGroup.prototype, "alignmentBounds", {
        get: function () {
            var _this = this;
            // Retrieve objects. Only select apparatus items.
            var childIds = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_4__["getDescendantIDs"])(this.group).filter(function (i) { return i.type === "apparatus"; });
            var allBounds = childIds.map(function (id) { return _this.app.getObjectComponent(id); }).map(function (c) { return c.bounds; });
            // Merge all bounds.
            var bounds = allBounds[0];
            for (var _i = 0, allBounds_1 = allBounds; _i < allBounds_1.length; _i++) {
                var bound = allBounds_1[_i];
                bounds.united(bound);
            }
            return bounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AlignableGroup.prototype, "id", {
        get: function () {
            return this.group.id;
        },
        enumerable: false,
        configurable: true
    });
    return AlignableGroup;
}());


/***/ }),

/***/ "5kh9":
/*!****************************************************!*\
  !*** ./src/apparatus/library/decorative/camera.ts ***!
  \****************************************************/
/*! exports provided: Camera, VideoCamera */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Camera", function() { return Camera; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VideoCamera", function() { return VideoCamera; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




function getColours(a) {
    switch (a.color) {
        case "black": return { fill: "#444444".color(), stroke: "#333333" };
        case "white": return { fill: "#eeeeee".color(), stroke: "#666666" };
    }
}
var Camera = /** @class */ (function () {
    function Camera() {
    }
    Camera.prototype.render = function (appearance) {
        var _a = getColours(appearance), fill = _a.fill, stroke = _a.stroke;
        var body = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[5, -60]], [[10, -50]], [[22, -50]], [[22, 50]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(body);
        body.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCornersIndividual"])(body, {
            0: 2.0,
            2: 3.0,
            3: 3.0,
            4: 3.0,
            5: 3.0,
            7: 2.0,
        });
        body.withStroke("default", stroke)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box(fill, { delta: 4 }));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(22, 5, 50, 60, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_LEFT), 2.0)
                .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(fill, 2))
                .withStroke("default", stroke),
            body,
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Camera.properties = {
        label: "Camera",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            color: "black"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "black", label: "Black" },
                    { value: "white", label: "White", tier: "boost" },
                ],
            }
        ],
    };
    return Camera;
}());

var VideoCamera = /** @class */ (function () {
    function VideoCamera() {
    }
    VideoCamera.prototype.render = function (appearance) {
        var _a = getColours(appearance), fill = _a.fill, stroke = _a.stroke;
        var out = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[140, 20]], [[180, 10]], [[180, 70]], [[140, 60]])).withStroke("default", stroke)
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(fill, 3));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            out,
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 15, 12, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_RIGHT), 2.0)
                .withFill(stroke),
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 140, 80), 2.0)
                .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box(fill, { delta: 6 }))
                .withStroke("default", stroke),
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(125, 15), 5.0)
                .withStroke("thinner", "#fc5c51")
                .withFill("#eb4034")
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    VideoCamera.properties = {
        label: "Video Camera",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: Camera.properties.defaultAppearance,
        appearanceSpecs: Camera.properties.appearanceSpecs,
    };
    return VideoCamera;
}());



/***/ }),

/***/ "5m1n":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/metallic/nichrome_loops.ts ***!
  \**********************************************************/
/*! exports provided: NichromeLoop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NichromeLoop", function() { return NichromeLoop; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





var NichromeLoop = /** @class */ (function () {
    function NichromeLoop() {
    }
    NichromeLoop.prototype.render = function (appearance) {
        var loop = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 80]], [[-0.5, 15], , [0, -5]], [[5, 5], [0, 4], [0, -3]], [[0, 0], [3, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(loop);
        loop.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].mediumMetal);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([loop]);
        if (appearance.handle) {
            var handle = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 80, 10, 140, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 3.0)
                .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(39, 65, 64)))
                .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(39, 45, 40).string());
            graphic.addChild(handle);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(20).toShape(),
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 80)
        };
    };
    NichromeLoop.properties = {
        label: "Nichrome Loop",
        canContainLiquids: false,
        defaultAppearance: {
            handle: true
        },
        appearanceSpecs: [
            {
                spec: "checkbox", key: "handle", label: "Handle", subLabel: "Show"
            }
        ],
    };
    return NichromeLoop;
}());



/***/ }),

/***/ "65HY":
/*!*********************************!*\
  !*** ./src/arrows/component.ts ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var editing_handle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/handle */ "9nbt");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var text_parse__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! text/parse */ "YKxB");
/* harmony import */ var text_render__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! text/render */ "w91z");
/* harmony import */ var types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! types */ "p21n");
/* harmony import */ var _editing_interaction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../editing/interaction */ "hXn/");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();











/**
 * React component to draw an arrow, accompanied by a text label.
 * The "start" is one extremity and where the label is placed.
 * The "end" is the other, and is where the arrow head is placed.
 */
var ArrowComponent = /** @class */ (function (_super) {
    __extends(ArrowComponent, _super);
    function ArrowComponent(props) {
        var _this = _super.call(this, props) || this;
        /** Text cache. */
        _this.textCache = {
            mode: "basic",
            input: "",
            result: { segments: [] }
        };
        var start = new paper__WEBPACK_IMPORTED_MODULE_4__["Point"](props.start);
        _this.advancedText = text_render__WEBPACK_IMPORTED_MODULE_8__["AdvancedText"].withInteraction(Object(_editing_interaction__WEBPACK_IMPORTED_MODULE_10__["SelectAndMove"])(_this));
        _this.textStyle = {
            fontFamily: "sans-serif",
            fontSize: _this.props.fontSize,
            textAlign: _this.props.textAlign,
            fillColor: "black",
        };
        _this.line = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"]([start, start]);
        _this.line.strokeWidth = 3.0;
        _this.line.selectedColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].selectionGreen;
        _this.hittableLine = new (Object(_editing_interaction__WEBPACK_IMPORTED_MODULE_10__["Interactable"])(paper__WEBPACK_IMPORTED_MODULE_4__["Path"], Object(_editing_interaction__WEBPACK_IMPORTED_MODULE_10__["SelectAndMove"])(_this)))([start, start]);
        _this.hittableLine.strokeWidth = 20.0;
        _this.hittableLine.strokeColor = "#ffffff20";
        _this.arrowHead = _this.createArrowHead();
        _this.arrowHead.applyMatrix = false;
        // Create an interaction handler for adjusting the head.
        _this.arrowHeadHint = Object(editing_handle__WEBPACK_IMPORTED_MODULE_3__["createInteractionHandleFor"])(Object(_editing_interaction__WEBPACK_IMPORTED_MODULE_10__["Adjustable"])({
            setDelta: function (delta) {
                _this.setState({ end: _this.editArrowHead(props, delta) });
            },
            onEnd: function (delta) {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::{driver}_head");
                return new arrows_command__WEBPACK_IMPORTED_MODULE_2__["UpdateArrowProperties"]([{
                        id: _this.id,
                        value: { start: _this.props.start, end: _this.editArrowHead(props, delta) },
                        previousValue: { start: _this.props.start, end: _this.props.end },
                    }]);
            },
        }));
        // Create an interaction handler for adjusting the tail.
        _this.arrowTailHint = Object(editing_handle__WEBPACK_IMPORTED_MODULE_3__["createInteractionHandleFor"])(Object(_editing_interaction__WEBPACK_IMPORTED_MODULE_10__["Adjustable"])({
            setDelta: function (delta) {
                _this.setState({ start: _this.editArrowTail(props, delta) });
            },
            onEnd: function (delta) {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::{driver}_start");
                return new arrows_command__WEBPACK_IMPORTED_MODULE_2__["UpdateArrowProperties"]([{
                        id: _this.id,
                        value: { start: _this.editArrowTail(props, delta), end: _this.props.end },
                        previousValue: { start: _this.props.start, end: _this.props.end },
                    }]);
            },
        }));
        _this.state = {
            start: _this.props.start,
            end: _this.props.end,
            label: _this.props.label,
            fontSize: _this.props.fontSize,
            textColor: _this.props.textColor,
            arrowThickness: _this.props.arrowThickness,
        };
        return _this;
    }
    ArrowComponent.prototype.editArrowHead = function (props, delta) {
        var deltaVectorPosition = Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.end, delta);
        if (paper__WEBPACK_IMPORTED_MODULE_4__["Key"].modifiers.shift) {
            var arrowStartPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.start);
            var arrowEndPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.end, delta));
            var deltaVector = arrowEndPoint.subtract(arrowStartPoint);
            var angle = deltaVector.angle;
            var roundedAngle = ((angle / 45).round()) * 45;
            deltaVector.angle = roundedAngle;
            deltaVectorPosition = Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.start, deltaVector);
        }
        return deltaVectorPosition;
    };
    ArrowComponent.prototype.editArrowTail = function (props, delta) {
        var deltaVectorPosition = Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.start, delta);
        if (paper__WEBPACK_IMPORTED_MODULE_4__["Key"].modifiers.shift) {
            var arrowStartPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.start, delta));
            var arrowEndPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.end);
            var deltaVector = arrowStartPoint.subtract(arrowEndPoint);
            var angle = deltaVector.angle;
            var roundedAngle = ((angle / 45).round()) * 45;
            deltaVector.angle = roundedAngle;
            deltaVectorPosition = Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.end, deltaVector);
        }
        return deltaVectorPosition;
    };
    Object.defineProperty(ArrowComponent.prototype, "currentPosition", {
        get: function () {
            return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.end).add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.start)).divide(2.0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "bounds", {
        get: function () {
            if (this.props.showArrow) {
                return this.line.bounds.unite(this.advancedText.bounds);
            }
            // Without arrow, only the text forms the bounding box.
            return this.advancedText.bounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "alignmentBounds", {
        get: function () {
            var _a;
            // For alignment, only use the text's bounds.
            // Use the special alignment bounds, which ignore the subscript etc.
            // Fallback on normal bounds, sometimes alignmentBounds can be undefined for some reason?
            // https://sentry.io/share/issue/2c94edea5df7495f8ed74e31c23bf496/
            return (_a = this.advancedText.alignmentBounds) !== null && _a !== void 0 ? _a : this.advancedText.bounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "parentGroup", {
        get: function () {
            return this.props.parentGroup;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "id", {
        get: function () {
            return this.props.id;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "isSelected", {
        get: function () {
            return this.props.selected;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ArrowComponent.prototype, "currentRotation", {
        get: function () {
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    ArrowComponent.prototype.setPositionDelta = function (delta) {
        this.setState({
            start: Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.start, delta),
            end: Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(this.props.end, delta)
        });
    };
    ArrowComponent.prototype.setRotationDelta = function (delta, pivot) {
        var newStart = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.start).rotate(delta, pivot);
        var newEnd = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.props.end).rotate(delta, pivot);
        this.setState({
            start: newStart,
            end: newEnd,
        });
    };
    ArrowComponent.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {
        this.setState({
            start: nextProps.start,
            end: nextProps.end,
            label: nextProps.label,
            fontSize: nextProps.fontSize,
            textColor: nextProps.textColor,
            arrowThickness: nextProps.arrowThickness,
        });
    };
    ArrowComponent.prototype.componentWillUnmount = function () {
        // Remove all paper elements.
        this.arrowHead.remove();
        this.line.remove();
        this.hittableLine.remove();
        this.advancedText.remove();
        this.arrowHeadHint.remove();
        this.arrowTailHint.remove();
    };
    ArrowComponent.prototype.render = function () {
        var start = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.state.start);
        var end = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pp"])(this.state.end);
        // Displacement vector, points from start to end.
        var vector = end.subtract(start);
        this.line.segments[0].point = start;
        // Shorten the end by a bit so it does not overlap the arrow head.
        var lineLength = Math.max(0, vector.length - 10.0);
        this.line.segments[1].point = start.add(vector.normalize().multiply(lineLength));
        // Copy the segments over to the hittable line.
        this.hittableLine.segments[0].point = this.line.segments[0].point;
        this.hittableLine.segments[1].point = this.line.segments[1].point;
        this.arrowHead.position = end;
        this.arrowHead.rotation = vector.angle;
        this.arrowHead.scaling.x = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["clamp"])(vector.length / 20.0, 0.1, 1.0);
        // Set color.
        var arrowColor = "black";
        this.line.strokeColor = arrowColor;
        this.arrowHead.fillColor = arrowColor;
        // Set text colour.
        var textColor = this.state.textColor;
        this.textStyle.fillColor = textColor;
        // Set alignment.
        this.textStyle.textAlign = this.props.textAlign;
        // Selection outline.
        this.advancedText.container.selected = this.isSelected;
        // Update label text. This needs to be done first before we update its position.
        // Note: Since this relies on setting the style, it needs to be called
        // after the line that sets up the text color.
        this.textStyle.fontSize = this.state.fontSize * 2;
        this.textStyle.fontFamily = this.props.fontFamily;
        var formattedText = getFormattedText(this.textCache, this.state.label, this.props.isChemMarkEnabled);
        this.advancedText.setText(formattedText, this.textStyle);
        // Place the text at the start of the arrow.
        // Note: This has to happen *after* setText.
        this.advancedText.setPosition(start.x, start.y);
        this.adjustLabel(vector.angle);
        if (this.props.endStyle == "none") {
            this.arrowHead.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].transparent;
        }
        // Set thickness.
        this.line.strokeWidth = this.state.arrowThickness;
        this.hittableLine.strokeWidth = this.state.arrowThickness + 17.0;
        var arrowScale = this.state.arrowThickness / 3.0;
        this.arrowHead.scaling = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(arrowScale, arrowScale);
        // Adjust hint. Only show it when the arrow is selected.
        this.arrowHeadHint.position = end;
        this.arrowHeadHint.visible = this.props.showAdjustables;
        this.arrowTailHint.position = start;
        this.arrowTailHint.visible = this.props.showAdjustables;
        // Show/Hide arrow.
        if (this.props.showArrow) {
            this.line.visible = true;
            this.hittableLine.visible = true;
            this.arrowHead.visible = true;
        }
        else {
            this.line.visible = false;
            this.hittableLine.visible = false;
            this.arrowHead.visible = false;
            this.arrowHeadHint.visible = false;
            this.arrowTailHint.visible = false;
        }
        return null;
    };
    // Adjust the label's properties based on the arrow's angle,
    // so that it does not overlap the arrow.
    ArrowComponent.prototype.adjustLabel = function (angle) {
        // Add some padding around the label.
        var bounds = this.advancedText.bounds.expand(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(20, 8));
        var vector = intersectCenterRayWithBox(bounds.width, bounds.height, angle);
        this.advancedText.container.position.x -= vector.x;
        this.advancedText.container.position.y -= vector.y;
    };
    // Draw an arrow, pointing to the right.
    ArrowComponent.prototype.createArrowHead = function () {
        var path = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -8]], [[0, 8]], [[20, 0]]));
        path.pivot = path.segments[2].point;
        path.closePath();
        return path;
    };
    return ArrowComponent;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));
/* harmony default export */ __webpack_exports__["default"] = (ArrowComponent);
/**
 * Returns the formatted text to render.
 */
function getFormattedText(cache, text, isChemMarkEnabled) {
    if (!isChemMarkEnabled) {
        // Check the cache.
        if (cache.mode != "basic" || cache.input != text) {
            cache.mode = "basic";
            cache.input = text;
            cache.result = text_parse__WEBPACK_IMPORTED_MODULE_7__["ChemMark"].parseBasic(text);
        }
        return cache.result;
    }
    if (!store_store__WEBPACK_IMPORTED_MODULE_6__["appStore"].getState().tier) {
        if (cache.mode != "cmlimited" || cache.input != text) {
            cache.mode = "cmlimited";
            cache.input = text;
            cache.result = text_parse__WEBPACK_IMPORTED_MODULE_7__["ChemMark"].parseSmartLimited(text);
        }
        return cache.result;
    }
    if (cache.mode != "cm" || cache.input != text) {
        cache.mode = "cm";
        cache.input = text;
        cache.result = text_parse__WEBPACK_IMPORTED_MODULE_7__["ChemMark"].parseSmart(text);
    }
    return cache.result;
}
/**
 * Computes the vector from the center of a box to its edge.
 * Used to position the text box at the end of an arrow
 * @param angle Angle in degrees, range = [-180, 180]
 */
function intersectCenterRayWithBox(width, height, angleDeg) {
    // Assuming fixed x, compute what y would be.
    var candidateX = (angleDeg >= -90 && angleDeg <= 90) ? width / 2 : -width / 2;
    var candidateY = Math.tan(angleDeg.toRadians()) * candidateX;
    // If resulting y is within the box, the intersection occurs on the left or right side.
    if (candidateY <= height / 2 && candidateY >= -height / 2) {
        return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(candidateX, candidateY);
    }
    // Otherwise it occurs on the top or bottom side.
    var y = (angleDeg >= 0) ? height / 2 : -height / 2;
    var x = y / Math.tan(angleDeg.toRadians());
    return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, y);
}


/***/ }),

/***/ "6Bwk":
/*!**************************************************!*\
  !*** ./src/apparatus/library/shapes/triangle.ts ***!
  \**************************************************/
/*! exports provided: Triangle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Triangle", function() { return Triangle; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Triangle = /** @class */ (function () {
    function Triangle() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 8, maxX: 250,
                minY: 8, maxY: 250,
                toAppearance: function (p) { return ({
                    width: p.x * 2,
                    height: p.y * 2
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width / 2, a.height / 2); },
                scale: 1.0,
            }
        ];
    }
    Triangle.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height;
        var apexPosition = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(appearance.apex * width / 2, -height / 2);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[apexPosition.x, apexPosition.y]], [[width / 2, height / 2]], [[-width / 2, height / 2]]));
        graphic.close();
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic)
        };
    };
    Triangle.properties = {
        label: "Triangle",
        canContainLiquids: false,
        defaultAppearance: __assign({ width: 200, height: 200, apex: 0 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "slider", key: "apex", label: "Apex position",
                min: -1, max: 1, step: 0.01,
            }
        ]),
    };
    return Triangle;
}());



/***/ }),

/***/ "6F/f":
/*!******************************************!*\
  !*** ./src/components/propertyPanel.tsx ***!
  \******************************************/
/*! exports provided: isReactElement, PropertyPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isReactElement", function() { return isReactElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyPanel", function() { return PropertyPanel; });
/* harmony import */ var components_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/button */ "hhmX");
/* harmony import */ var components_colorpicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/colorpicker */ "0J4H");
/* harmony import */ var components_combo_slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/combo_slider */ "+bDL");
/* harmony import */ var components_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! components/icon */ "oh6M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! view/tooltips */ "6T3+");
/* harmony import */ var _checkbox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./checkbox */ "P2PJ");
/* harmony import */ var _radio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./radio */ "+M27");
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./select */ "w7zt");
/* harmony import */ var _text_area__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./text_area */ "sl+6");
/* harmony import */ var _text_input__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./text_input */ "1wdg");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};













function icon(tabType) {
    switch (tabType) {
        case "text-style": return "paint-roller";
        case "property": return "sliders-h";
        case "liquid": return "tint";
        case "text": return "i-cursor";
        case "tools": return "wrench";
        case "theme": return "paint-brush";
    }
}
function display(tabType) {
    switch (tabType) {
        case "property": return "Properties";
        case "text-style": return "Style";
        case "liquid": return "Liquid";
        case "text": return "Text";
        case "tools": return "Tools";
        case "theme": return "Theme";
    }
}
function isReactElement(props) {
    return props.spec === undefined;
}
var PropertyPanel = /** @class */ (function (_super) {
    __extends(PropertyPanel, _super);
    function PropertyPanel(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_4__["createRef"]();
        _this.render = function () {
            // If no tabs are specified, render nothing.
            if (_this.props.tabs.length === 0)
                return null;
            var currentTabType = _this.state.currentTab;
            var currentTab = _this.props.tabs.filter(function (t) { return t.type === currentTabType; })[0];
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_5__["TierContext"].Consumer, null, function (tiers) { return (react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { id: "property-panel", ref: _this.ref, "data-simplebar": true },
                react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "content-container" },
                    react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "property-panel-header" },
                        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("h2", null,
                            react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("i", { className: "fa fa-" + _this.props.icon + " mr-hem" }),
                            _this.props.title),
                        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "property-panel-tabs" }, _this.props.tabs.map(function (t) {
                            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("button", { className: t.type === _this.state.currentTab ? "active" : "", onClick: function (_) { return _this.setState({ currentTab: t.type }); }, key: t.type },
                                react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", null,
                                    react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("i", { className: "fa fa-" + icon(t.type) + " mr-1" }),
                                    display(t.type),
                                    t.colorDot ? react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("span", { className: "color-dot", style: { background: t.colorDot } }) : null));
                        }))),
                    _this.createElements(currentTab, tiers)))); });
        };
        _this.state = { currentTab: props.tabs.length > 0 ? props.tabs[0].type : "property" };
        return _this;
    }
    PropertyPanel.getDerivedStateFromProps = function (props, currentState) {
        // Check if the current panel exists in the props. If not, reset to first tab.
        var hasTab = props.tabs.filter(function (t) { return t.type === currentState.currentTab; }).length > 0;
        if (hasTab) {
            return currentState;
        }
        return { currentTab: props.tabs[0].type };
    };
    PropertyPanel.prototype.createElements = function (tab, tiers) {
        // Flat list of react children.
        var elements = [];
        var isFirstHeader = true;
        for (var _i = 0, _a = tab.sections; _i < _a.length; _i++) {
            var section = _a[_i];
            // Skip sections with no elements, but only if it's not the first header.
            if (section.elements.length == 0)
                continue;
            // Header. Hide uf this is the first section and the section requests to hide it.
            var header = isFirstHeader && section.hideHeaderIfFirst === true
                ? null
                : react__WEBPACK_IMPORTED_MODULE_4__["createElement"](SectionHeader, __assign({ key: "header_" + section.header }, section));
            // Create the elements.
            var propertyElements = section.elements.map(function (element) {
                // Special case: if it's a ReactElement, just return it.
                if (isReactElement(element)) {
                    return [element];
                }
                var els = [];
                var key = "label_" + element.key;
                if (element.spec == "header") {
                    els.push(createElement(element));
                }
                else if (!tiers.allow(element) && !(element.spec === "checkbox-group")) {
                    // Locked item. Show a label with a badge.
                    // Clicking opens a pop up.
                    els.push(react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "flex-group", key: key },
                        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { key: key, className: "label" }, element.label),
                        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("a", { className: "unlock", href: "#", onClick: function (e) { e.preventDefault(); tiers.popup("PP:" + key); } },
                            tiers.badge(element),
                            " Unlock")));
                }
                else {
                    var wideClass = (element.spec == "checkbox-group") && element.wideLabel ? "wide" : "";
                    els.push(react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "flex-group", key: key },
                        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { key: key, className: "label " + wideClass }, element.label),
                        createElement(element)));
                }
                return els;
            });
            elements.push.apply(elements, __spreadArrays([header], propertyElements));
            isFirstHeader = false;
        }
        return elements;
    };
    PropertyPanel.prototype.componentDidUpdate = function () {
        Object(view_tooltips__WEBPACK_IMPORTED_MODULE_6__["setUpQTip"])(this.ref.current);
    };
    return PropertyPanel;
}(react__WEBPACK_IMPORTED_MODULE_4__["Component"]));

var createElement = function (props) {
    switch (props.spec) {
        case "slider":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_combo_slider__WEBPACK_IMPORTED_MODULE_2__["ComboSlider"], __assign({}, props));
        case "radio":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_radio__WEBPACK_IMPORTED_MODULE_8__["Radio"], __assign({}, props)));
        case "select":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_select__WEBPACK_IMPORTED_MODULE_9__["Select"], __assign({}, props));
        case "text":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_text_input__WEBPACK_IMPORTED_MODULE_11__["TextInput"], __assign({}, props));
        case "color":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_colorpicker__WEBPACK_IMPORTED_MODULE_1__["ColorPicker"], __assign({}, props));
        case "button":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["Button"], __assign({}, props));
        case "horizontal-icon-buttons":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["HorizontalIconButtons"], __assign({}, props));
        case "toggle-horizontal-buttons":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["ToggleHorizontalButtons"], __assign({}, props));
        case "vertical-buttons":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["VerticalButtons"], __assign({}, props));
        case "textarea":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_text_area__WEBPACK_IMPORTED_MODULE_10__["TextAreaInput"], __assign({}, props));
        case "checkbox-group":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_checkbox__WEBPACK_IMPORTED_MODULE_7__["LabelledCheckboxGroup"], __assign({}, props));
        case "header":
            return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](SectionHeader, __assign({}, props));
    }
};
var SectionHeader = function (props) { return (react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("h3", null,
    react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_3__["Icon"], { spacing: true, name: props.icon, fullWidth: true }),
    props.header)); };


/***/ }),

/***/ "6K3b":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/metallic/hoffman_clamp.ts ***!
  \*********************************************************/
/*! exports provided: HoffmanClamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HoffmanClamp", function() { return HoffmanClamp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var metalGradient = apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].cylinderMetal;
var bracketMetalGradient = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#aaaaaa".color(), -20);
var softMetalGradient = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#aaaaaa".color(), -10);
var HoffmanClamp = /** @class */ (function () {
    function HoffmanClamp() {
    }
    HoffmanClamp.prototype.render = function (appearance) {
        var graphic = (function () {
            switch (appearance.view) {
                case "front": return frontView;
                case "side": return sideView;
            }
        })()(appearance);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 5),
        };
    };
    HoffmanClamp.properties = {
        label: "Hoffman Clamp",
        canContainLiquids: false,
        defaultAppearance: {
            view: "front",
            clamping: 0.5,
            size: 30,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "side", label: "Side" },
                    { value: "front", label: "Front" },
                ],
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 25, max: 50, step: 0.1, unit: "mm"
            },
            {
                spec: "slider", key: "clamping", label: "Clamping",
                min: 0.0, max: 1.0, step: 0.01, unit: "%",
            },
        ],
    };
    return HoffmanClamp;
}());

function createScrew(height) {
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
        paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height - 5, 8, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER)).withGradientFill("right", metalGradient),
        paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -5, 20, 8, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER), 2.0).withGradientFill("right", metalGradient),
    ]);
}
function frontView(appearance) {
    var height = appearance.size;
    var halfWidth = height / 3 * 2;
    var slide = (height - 10) * (1 - appearance.clamping);
    var bracket = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-halfWidth, height]], [[-halfWidth, 0]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bracket);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(bracket.segments[2], 3);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(bracket.segments[1], 3);
    bracket.strokeWidth = 5.0;
    bracket.setGradientStroke("right-down", bracketMetalGradient);
    var bottom = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height, halfWidth * 2 + 10, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0).withGradientFill("down", softMetalGradient);
    var slidingPart = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height - 5 - slide, halfWidth * 2 + 10, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0).withGradientFill("down", softMetalGradient);
    var screw = createScrew(height);
    screw.position.y -= slide;
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([screw, bracket, bottom, slidingPart]);
}
function sideView(appearance) {
    var height = appearance.size;
    var slide = (height - 10) * (1 - appearance.clamping);
    var bracket = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 16, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0);
    bracket.setGradientFill("right-down", bracketMetalGradient);
    var bottom = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height, 18, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0).withGradientFill("down", softMetalGradient);
    var slidingPart = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height - 5 - slide, 18, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0).withGradientFill("down", softMetalGradient);
    var screw = createScrew(height);
    screw.position.y -= slide;
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([screw, bracket, bottom, slidingPart]);
}


/***/ }),

/***/ "6T3+":
/*!******************************!*\
  !*** ./src/view/tooltips.ts ***!
  \******************************/
/*! exports provided: setUpQTip, formatTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setUpQTip", function() { return setUpQTip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatTooltip", function() { return formatTooltip; });
/* harmony import */ var _keyboard_shortucts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keyboard_shortucts */ "ZPUE");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

// Helper methods related to tooltips.
/**
 * Sets up tooltips using QTip, which is the library used to
 * display the tooltips.
 */
function setUpQTip(el, delay, force) {
    if (el === void 0) { el = "body"; }
    if (delay === void 0) { delay = 16; }
    if (force === void 0) { force = false; }
    var defaultQtipOptions = {
        style: {
            classes: "qtip-tipsy",
            tip: {
                corner: true,
                width: 16,
                height: 8,
            }
        },
        hide: {
            event: "unfocus mouseleave",
        },
        show: {
            delay: delay,
            effect: false,
        },
        position: {
            effect: false,
            my: 'top center',
            at: 'bottom center',
            viewport: $(window),
            adjust: {
                method: 'flip'
            },
        },
    };
    var verticalQtipOptions = __assign(__assign({}, defaultQtipOptions), { position: {
            effect: false,
            my: 'center left',
            at: 'center right',
            viewport: $(window),
            adjust: {
                method: 'flip'
            },
        } });
    $(el).find('[title]').qtip(defaultQtipOptions);
    if ($(el).attr("title") || force) {
        $(el).qtip(defaultQtipOptions);
    }
    ;
    $(el).find('[data-qtipopts="vertical"]').qtip(verticalQtipOptions);
}
/** Formats a tooltip content so that it looks nice. */
function formatTooltip(text, shortcuts) {
    var content = text;
    if (shortcuts && shortcuts.length > 0) {
        content += '<div class="shortcut">Shortcut: ' + _keyboard_shortucts__WEBPACK_IMPORTED_MODULE_0__["formatShortcuts"].apply(void 0, shortcuts) + "</div>";
    }
    return content;
}


/***/ }),

/***/ "6enR":
/*!*****************************************!*\
  !*** ./src/apparatus/library/borked.ts ***!
  \*****************************************/
/*! exports provided: Borked */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Borked", function() { return Borked; });
/** Deliberately broken apparatus. */
var Borked = /** @class */ (function () {
    function Borked() {
    }
    Borked.prototype.render = function (appearance) {
        return {
            graphic: undefined,
            hitShape: undefined
        };
    };
    Borked.properties = {
        label: "Borked",
        canContainLiquids: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Borked;
}());



/***/ }),

/***/ "7vmD":
/*!**********************!*\
  !*** ./src/tools.ts ***!
  \**********************/
/*! exports provided: toolCursors, selectTool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toolCursors", function() { return toolCursors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectTool", function() { return selectTool; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var _store_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./store/actions */ "/GBr");



/** Returns the CSS cursor name that should be used for each tool. */
function toolCursors(tool) {
    switch (tool) {
        case "select": return "auto";
        case "pan": return "move";
        case "arrow": return "url(" + textBase64 + "), crosshair";
        case "freehand": return "url(" + pencilBase64 + ") 5 5, crosshair";
        case "pathedit": return "crosshair";
    }
}
/** Switches the current active tool. */
function selectTool(tool, interaction) {
    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Toolbox: " + tool, interaction);
    store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(_store_actions__WEBPACK_IMPORTED_MODULE_2__["switchTool"])(tool));
}
var pencilBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAGYktHRAD/AP8A/6C9p5MAAAEpSURBVFhH7ZRBagJBEEV7H8g6ERJMsvQQ8U4eJN7IZJNTJERBIZcQ/U+moGm6dRZVs+oPD50W+r+pnjH19FRyavAn5iI8tXJjEomylNyLb2ESzyIsNQGyEEfB2q8IkyiLCWWU/ouDCJUwgbvLVUpPgjLW9uJd7IbrEAnb/Esw9p/h2uAZWIowiVdhm9uZl1BaSri+HblEi1LC/e1Agk3L4pzwSbDZ2EmYLJ/uxzFmEvnb4S7BZrck+D10EmMkmMRq+O4uQMZIgJXDRri+HWx67cHMy02WyYT9WeWwVpYb/KM+CLeUEhSyVis31sI1JmF3zphb5eAuQJCwO+esa8WA5KMIy6eoFQPlSIaGCeTPhLEVb2KScJf5M4DQi5g0nPPHwIyFnp52UjoDlvrZbV1lPrwAAAAASUVORK5CYII=";
var textBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAvVBMVEUAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTQ/BeAAAAPnRSTlMAAAECCAkQERYZGx8hIiMkJScoKiwtLzIzNDU2Nzg5Ojs8PUBETmFvcnl6mqy3zM3O1tfY3N3h5urs8PT6/GYLJh4AAADLSURBVHjadc7XEoJADAXQYO9iRbChYu+95/8/yxtcB3TW+5JyZidLLCEjiOp9oAAC9/demsKJDGIC6PhxOoZy5iwAewPPLuv9DeW6Xa0OzDkDaxzgu4PaBnio0QvnBQzAghAH4Eiz5KL63HMkcxNgSTPmnAI3LrMNaEiT2CQUkB8LYNM7X1CXGzqoAlo6qADapBKGEqCjAxPQ1UEB4P6Dng7KgL4Oav9u2ICmDoYAT61jAVRnO8Buav68mPAn828wO5VMMpW3Wl6dJC/vOCLvpGT5yQAAAABJRU5ErkJggg==";


/***/ }),

/***/ "83yG":
/*!**********************************************!*\
  !*** ./src/apparatus/library/heating/peg.ts ***!
  \**********************************************/
/*! exports provided: Peg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Peg", function() { return Peg; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

/**
 * Peg drawn according to https://edulab.com/product/test-tube-holder-peg-type-pk10/.
 * Default size is 18cm.
 */
var Peg = /** @class */ (function () {
    function Peg() {
    }
    Peg.isBoostRequiredForAppearance = function (a) {
        return a.view === "top";
    };
    Peg.prototype.render = function (appearance) {
        var graphic = svgs[appearance.view]();
        graphic.scale(appearance.length / 18, 1.0);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Peg.properties = {
        label: "Test Tube Holder Peg",
        canContainLiquids: false,
        defaultAppearance: {
            view: "side",
            length: 20
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "top", label: "Top view", tier: "boost" },
                    { value: "side", label: "Side view" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 18, max: 25, unit: "cm",
            }
        ],
    };
    return Peg;
}());

var svgs = {
    "top": apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].Peg.top,
    "side": apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].Peg.side,
};


/***/ }),

/***/ "8QbX":
/*!*****************************************!*\
  !*** ./src/apparatus/library/retort.ts ***!
  \*****************************************/
/*! exports provided: RetortStand */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RetortStand", function() { return RetortStand; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var RetortStand = /** @class */ (function () {
    function RetortStand() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 0, maxX: 0,
                minY: -600, maxY: -350,
                fromAppearance: function (a) { return Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -a.height); },
                toAppearance: function (p) { return ({ height: -p.y }); },
                scale: 1.0,
            }
        ];
    }
    RetortStand.prototype.render = function (appearance) {
        var baseWidth = appearance.direction != "front" ? 200 : 125;
        var rodOffset = 40;
        var height = appearance.height;
        var baseHeight = 15;
        var _a = Object(_draw__WEBPACK_IMPORTED_MODULE_1__["metalRod"])(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -height)), rod = _a[0], rodHighlight = _a[1];
        var base = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[baseWidth / 2, 0]], [[0, 0]], [[0, baseHeight]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(base.segments[1], 5.0);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(base, baseWidth / 2);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(base);
        switch (appearance.direction) {
            case "front":
                base.position.x -= baseWidth / 2;
                break;
            case "left":
                base.position.x += (rodOffset - baseWidth);
                break;
            case "right":
                base.position.x -= rodOffset;
        }
        base.setGradientFill("down", _common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].metal);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([rod, rodHighlight, base]);
        var hitShapes = [
            // Covers the rod.
            paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](-20, -height, 40, height)),
            // Covers the base.
            paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(base.bounds),
        ];
        return {
            graphic: graphic,
            hitShape: hitShapes,
            pivot: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
            snapping: [
                {
                    type: "attachable_on",
                    start: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
                    end: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -height)
                },
                graphic.placeable(),
                base.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    RetortStand.properties = {
        label: "Retort stand",
        canContainLiquids: false,
        defaultAppearance: {
            direction: "right",
            height: 450,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "direction", label: "Direction",
                options: [
                    { value: "left", label: "Facing left" },
                    { value: "front", label: "Facing front/back" },
                    { value: "right", label: "Facing right" },
                ]
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 350, max: 600
            }
        ],
    };
    return RetortStand;
}());



/***/ }),

/***/ "8hKs":
/*!************************!*\
  !*** ./src/version.ts ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("3.33.3");


/***/ }),

/***/ "8yGs":
/*!*******************************************!*\
  !*** ./src/apparatus/library/crucible.ts ***!
  \*******************************************/
/*! exports provided: Crucible, CrucileCover */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Crucible", function() { return Crucible; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CrucileCover", function() { return CrucileCover; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var Crucible = /** @class */ (function () {
    function Crucible() {
    }
    Crucible.prototype.render = function (appearance) {
        var width = appearance.diameter;
        var height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[width / 5, height], [-width / 5, 0]], [[width / 2, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic, width / 2);
        var liquidMask = graphic.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            snapping: graphic.placeable()
        };
    };
    Crucible.properties = {
        label: "Crucible",
        canContainLiquids: true,
        defaultAppearance: {
            diameter: 39, height: 43
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 25, max: 70,
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 35, max: 70,
            }
        ],
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.3, color: "#aaaaaa" })
    };
    return Crucible;
}());

var CrucileCover = /** @class */ (function () {
    function CrucileCover() {
    }
    CrucileCover.prototype.render = function (appearance) {
        var width = appearance.diameter;
        var cover = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, 5], undefined, [0, -3]], [[0, 0]], [[width / 2, -5], [-width / 4, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(cover, width / 2);
        var handle = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, -10), 5);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([cover, handle]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    CrucileCover.properties = {
        label: "Crucible Cover",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: Crucible.properties.defaultAppearance.diameter
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 25, max: 70,
            },
        ],
    };
    return CrucileCover;
}());



/***/ }),

/***/ "97DK":
/*!**************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/petri_top.ts ***!
  \**************************************************************/
/*! exports provided: PetriTop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PetriTop", function() { return PetriTop; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var PetriTop = /** @class */ (function () {
    function PetriTop() {
    }
    PetriTop.prototype.render = function (appearance) {
        var dish = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), appearance.diameter / 2);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(dish);
        dish.fillColor = appearance.color.color().alpha(appearance.opacity).string();
        var graphic = dish;
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    PetriTop.properties = {
        label: "Petri Dish (Top view)",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: 100,
            color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].color,
            opacity: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].alpha
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 35, max: 150, step: 5, unit: "mm",
            },
            {
                spec: "color", key: "color", label: "Contents colour",
            },
            {
                spec: "slider", key: "opacity", label: "Contents opacity",
                min: 0.2, max: 0.9, step: 0.01, unit: "%",
            }
        ],
    };
    return PetriTop;
}());



/***/ }),

/***/ "9EA3":
/*!***********************************!*\
  !*** ./src/components/slider.tsx ***!
  \***********************************/
/*! exports provided: Slider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Slider", function() { return Slider; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
// Hacky wraper for jquery slider pips.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var Slider = /** @class */ (function (_super) {
    __extends(Slider, _super);
    function Slider(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_0__["createRef"]();
        _this.suspendUpdates = false;
        _this.state = { value: props.initialValue };
        return _this;
    }
    // Called when slider changed by setting a value.
    Slider.prototype.onChange = function (value) {
        if (this.suspendUpdates)
            return;
        if (this.state.value == value)
            return;
        this.props.onEnd(this.props.initialValue, value);
        this.setState({ value: value });
    };
    Slider.prototype.onSlideStart = function (_) {
        var _a;
        if (this.suspendUpdates)
            return;
        (_a = this.props.onStart) === null || _a === void 0 ? void 0 : _a.call(null);
    };
    // Called when slider changed by sliding
    Slider.prototype.onSlide = function (value) {
        if (this.suspendUpdates)
            return;
        this.props.onChange(value);
    };
    /** Called when the user has stopped interacting with slider by sliding. */
    Slider.prototype.onSlideStop = function (value) {
        if (this.suspendUpdates)
            return;
        // Component could have died, check that state is valid.
        if (this.state) {
            this.setState({ value: value });
            this.props.onEnd(this.props.initialValue, value);
        }
    };
    Slider.prototype.componentDidUpdate = function (prevProps, prevState) {
        if (prevProps.initialValue != this.props.initialValue) {
            if (prevState.value != this.props.initialValue) {
                // Props updated externally. Update current state but don't invoke any callbacks.
                this.setState({
                    value: this.props.initialValue
                });
                // Update the slider.
                this.suspendUpdates = true;
                var slider = $(this.ref.current);
                slider.slider({ value: this.props.initialValue });
                this.suspendUpdates = false;
            }
        }
    };
    Slider.prototype.componentDidMount = function () {
        // Unfortunately pips does not have typedefs so without cast to <any>
        // the rest would not compile.
        var slider = $(this.ref.current);
        // jQuery will override this in components
        var self = this;
        this.setState({ value: this.props.initialValue });
        slider.slider({
            min: this.props.min,
            max: this.props.max,
            range: "min",
            value: this.props.initialValue,
            step: this.props.step || 1.0,
            animate: "fast"
            // orientation: "vertical"
            // }).slider("float", {
            //     formatLabel: this.props.formatLabel || (v => v)
        }).on("slidechange", function (_, ui) {
            self.onChange(ui.value);
        }).on("slidestart", function (_, ui) {
            self.onSlideStart(ui.value);
        }).on("slide", function (_, ui) {
            self.onSlide(ui.value);
        }).on("slidestop", function (_, ui) {
            self.onSlideStop(ui.value);
        });
        if (this.props.pipsStep) {
            slider.slider("pips", {
                first: false,
                last: false,
                rest: "pip",
                step: this.props.pipsStep,
            });
        }
    };
    Slider.prototype.componentWillUnmount = function () {
        // Permanently suspend updates.
        this.suspendUpdates = true;
        var slider = $(this.ref.current);
        slider.off("slidestart");
        slider.off("slidechange");
        slider.off("slide");
        slider.off("slidestop");
    };
    Slider.prototype.render = function () {
        var _a;
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "slider " + ((_a = this.props.extraClass) !== null && _a !== void 0 ? _a : ""), ref: this.ref });
    };
    return Slider;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]));



/***/ }),

/***/ "9dkF":
/*!************************************************************!*\
  !*** ./src/apparatus/library/devices/spectrophotometer.ts ***!
  \************************************************************/
/*! exports provided: Spectrophotometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spectrophotometer", function() { return Spectrophotometer; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



/**
 * https://www.youtube.com/watch?v=JzNe-Bk2shQ
 */
var Spectrophotometer = /** @class */ (function () {
    function Spectrophotometer() {
    }
    Spectrophotometer.prototype.render = function (appearance) {
        var outerColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].deviceGrey.color();
        var outer = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], // 0
        [[110, 0]], // 1 - Start well
        [[110, 100]], [[185, 100]], [[185, 0]], // 4 - End well
        [[200, 0]], [[200, 110]], [[0, 110]])).close().withStroke("default")
            .withGradientFill("down", [
            [outerColor.hex(), 0.62],
            [outerColor.ladd(-10).hex(), 0.68],
            [outerColor.ladd(-20).hex(), 1.0]
        ]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCornersIndividual"])(outer, { 0: 8, 2: 5, 3: 5, 5: 8, 6: 8, 7: 8 });
        var screenCase = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(10, 10, 90, 50), 5.0)
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].devicePanel.stroke)
            .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].devicePanel.fill);
        var screen = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(15, 15, 40, 27), 3.0)
            .withStroke(2.0, "white").withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lcdScreen);
        var dpad = this.dpad();
        dpad.position.x = 77;
        dpad.position.y = 30;
        dpad.rotate(45);
        var textAbs = new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, 27),
            content: appearance.absorbance,
            fillColor: "black",
            fontFamily: 'sans-serif',
            fontWeight: 'bold',
            fontSize: 10,
            justification: "right",
        });
        var textWavelength = new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, 37),
            content: appearance.wavelength + " nm",
            fillColor: "black",
            fontFamily: 'sans-serif',
            fontWeight: 'bold',
            fontSize: 8,
            justification: "right",
        });
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([outer, screenCase, screen, dpad, textAbs, textWavelength]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            watermark: screen.bounds.bottomRight.add([5, 5]),
            snapping: [
                outer.placeable(),
                { type: "placeable_surface", start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(110, 100), end: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(185, 100) }
            ]
        };
    };
    Spectrophotometer.prototype.dpad = function () {
        var button = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 9, 9), 2.0).withFill("white");
        var button2 = button.clone();
        var button3 = button.clone();
        var button4 = button.clone();
        button2.position.x += 12;
        button3.position.y += 12;
        button4.position.x += 12;
        button4.position.y += 12;
        return new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([button, button2, button3, button4]);
    };
    Spectrophotometer.properties = {
        label: "Spectrophotometer",
        canContainLiquids: false,
        defaultAppearance: {
            wavelength: "540",
            absorbance: "0.042",
        },
        appearanceSpecs: [
            { spec: "text", key: "absorbance", label: "Absorbance", maxLength: 5 },
            { spec: "text", key: "wavelength", label: "Wavelength", maxLength: 4, numbersOnly: true }
        ],
    };
    return Spectrophotometer;
}());



/***/ }),

/***/ "9dog":
/*!*****************************************!*\
  !*** ./src/editing/snapping/compute.ts ***!
  \*****************************************/
/*! exports provided: precomputeSnapping, evaluatePrecomputedSnappings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "precomputeSnapping", function() { return precomputeSnapping; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "evaluatePrecomputedSnappings", function() { return evaluatePrecomputedSnappings; });
/* harmony import */ var editing_snapping_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! editing/snapping/type */ "p/3Y");
/* harmony import */ var math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! math */ "KHCx");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


/** Allowed tolerance of rotation differences to allow a placeable to be snapped onto a surface. */
var PLACEABLE_SURFACE_ROTATION_TOLERANCE = 5.0;
/** Allowed tolerance in angle difference for 2 connectables to snap to each other. */
var CONNECTABLE_ROTATION_TOLERANCE = 15.0;
/** Precomputes snapping information */
function precomputeSnapping(selected, all) {
    var _a;
    var precomputed = [];
    // First categorise the currently selected apparatus by snap type.
    var placeables = [];
    var attachables = [];
    var connectables = [];
    var spottingTilePlaceable = [];
    var tlcSpots = [];
    var pluggables = [];
    for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {
        var a = selected_1[_i];
        for (var _b = 0, _c = a.globalSnapping; _b < _c.length; _b++) {
            var snapping = _c[_b];
            if (snapping.type == "placeable") {
                placeables.push({ snapping: snapping, rotation: a.props.rotation + ((_a = snapping.facing) !== null && _a !== void 0 ? _a : 0) });
            }
            else if (snapping.type == "attachable") {
                attachables.push(snapping);
            }
            else if (snapping.type == "connectable") {
                // Modify the "facing" attribute to take into account the rotation.
                var adjustedFacing = (a.props.rotation + snapping.facing + 360) % 360;
                connectables.push(__assign(__assign({}, snapping), { facing: adjustedFacing }));
            }
            else if (snapping.type == "spotting_tile_placeable") {
                spottingTilePlaceable.push(__assign({}, snapping));
            }
            else if (snapping.type == "tlc_spot") {
                tlcSpots.push(snapping);
            }
            else if (snapping.type == "pluggable") {
                pluggables.push({ id: a.id, snapping: snapping });
            }
            a.setState({
                visualiseSnapping: ["placeable", "attachable", "connectable", "spotting_tile_placeable", "tlc_spot", "pluggable"]
            });
        }
    }
    // Sort remaining items by type, depending on the snap types
    // of currently selected apparatus, e.g. find "placeable_surface"
    // for "placeable" items, but only if there are currently selected
    // items with snap type "placeable".
    for (var _d = 0, all_1 = all; _d < all_1.length; _d++) {
        var other = all_1[_d];
        if (other.isSelected)
            continue;
        var snapTypeMask = {};
        for (var _e = 0, _f = other.globalSnapping; _e < _f.length; _e++) {
            var snapping = _f[_e];
            if (placeables.length > 0 && snapping.type === "placeable_surface") {
                for (var _g = 0, placeables_1 = placeables; _g < placeables_1.length; _g++) {
                    var placeable = placeables_1[_g];
                    // Rotation of the placeable surface.
                    var surfaceRotation = other.props.rotation + editing_snapping_type__WEBPACK_IMPORTED_MODULE_0__["Snap"].getFacing(snapping);
                    if (Object(math__WEBPACK_IMPORTED_MODULE_1__["areRotationsClose"])(placeable.rotation, surfaceRotation, PLACEABLE_SURFACE_ROTATION_TOLERANCE)) {
                        var potentialSnapping = precomputePlaceable(placeable.snapping, snapping);
                        if (potentialSnapping) {
                            precomputed.push(potentialSnapping);
                            snapTypeMask.placeable_surface = true;
                        }
                    }
                }
            }
            if (attachables.length > 0 && snapping.type === "attachable_on") {
                for (var _h = 0, attachables_1 = attachables; _h < attachables_1.length; _h++) {
                    var attachable = attachables_1[_h];
                    precomputed.push(precomputePointToLine(attachable, snapping));
                    snapTypeMask.attachable_on = true;
                }
            }
            if (connectables.length > 0 && snapping.type === "connectable") {
                // For connectables, evaluate them on the spot.
                var otherAngle = (other.props.rotation + snapping.facing + 540) % 360; // 540 = 360 + 180. Additioal 360 because modulo can return negative.
                for (var _j = 0, connectables_1 = connectables; _j < connectables_1.length; _j++) {
                    var connectable = connectables_1[_j];
                    if (Object(math__WEBPACK_IMPORTED_MODULE_1__["areRotationsClose"])(connectable.facing, otherAngle, CONNECTABLE_ROTATION_TOLERANCE)) {
                        precomputed.push({ type: "point_to_point", delta: snapping.at.subtract(connectable.at) });
                        snapTypeMask.connectable = true;
                    }
                }
            }
            if (spottingTilePlaceable.length > 0 && snapping.type === "spotting_tile") {
                var _loop_1 = function (placeable) {
                    var snaps = snapping.at.map(function (at) { return ({ type: "point_to_point", delta: at.subtract(placeable.at) }); });
                    precomputed.push.apply(precomputed, snaps);
                };
                for (var _k = 0, spottingTilePlaceable_1 = spottingTilePlaceable; _k < spottingTilePlaceable_1.length; _k++) {
                    var placeable = spottingTilePlaceable_1[_k];
                    _loop_1(placeable);
                }
                snapTypeMask.spotting_tile = true;
            }
            if (tlcSpots.length > 0 && snapping.type === "tlc_plate") {
                for (var _l = 0, tlcSpots_1 = tlcSpots; _l < tlcSpots_1.length; _l++) {
                    var spot = tlcSpots_1[_l];
                    precomputed.push(precomputePointToLine(spot, snapping));
                }
                snapTypeMask.tlc_plate = true;
            }
            if (pluggables.length > 0 && snapping.type === "neck") {
                for (var _m = 0, pluggables_1 = pluggables; _m < pluggables_1.length; _m++) {
                    var pluggable = pluggables_1[_m];
                    // Check rotation of neck.
                    var neckRotation = other.props.rotation + snapping.facing;
                    precomputed.push({
                        type: "point_to_point",
                        delta: snapping.top.subtract(pluggable.snapping.at),
                        // Also set the appearance specs on the pluggable.
                        appearanceChange: {
                            id: pluggable.id,
                            partialSpecs: pluggable.snapping.requestDiameter(snapping.diameter),
                            rotation: neckRotation,
                        }
                    });
                    snapTypeMask.neck = true;
                }
            }
        }
        var snapTypeFilter = editing_snapping_type__WEBPACK_IMPORTED_MODULE_0__["Snap"].typeFilterFrom(snapTypeMask);
        if (snapTypeFilter.length > 0) {
            other.setState({ visualiseSnapping: snapTypeFilter });
        }
    }
    return precomputed;
}
function precomputePlaceable(placeable, surface) {
    // Compute start and end positions in Move Space.
    var start = surface.start.subtract(placeable.at);
    var end = surface.end.subtract(placeable.at);
    var surfaceVector = end.subtract(start);
    return {
        type: "point_to_line",
        start: start,
        surfaceVector: surfaceVector,
        surfaceVectorNorm: surfaceVector.normalize()
    };
}
function precomputePointToLine(attachable, on) {
    // Compute start and end positions in Move Space.
    var start = on.start.subtract(attachable.at);
    var end = on.end.subtract(attachable.at);
    var surfaceVector = end.subtract(start);
    return {
        type: "point_to_line",
        start: start,
        surfaceVector: surfaceVector,
        surfaceVectorNorm: surfaceVector.normalize()
    };
}
/**
 * Evaluates an array of precomputed snappings and returns the vector it should snap to
 * or returns undefined if the point should not be snapped.
 */
function evaluatePrecomputedSnappings(rawDeltaVector, snappings, snapDistance) {
    for (var _i = 0, snappings_1 = snappings; _i < snappings_1.length; _i++) {
        var snapping = snappings_1[_i];
        switch (snapping.type) {
            case "point_to_line":
                var fromStartToDelta = rawDeltaVector.subtract(snapping.start);
                var project = fromStartToDelta.dot(snapping.surfaceVectorNorm);
                // Allow overhang by snapDistance.
                if (project < 0 && project > -snapDistance) {
                    project = 0;
                }
                else if (project > snapping.surfaceVector.length && project - snapDistance < snapping.surfaceVector.length) {
                    project = snapping.surfaceVector.length;
                }
                // Check the projection lies on the surface vector.
                if (project >= 0 && project <= snapping.surfaceVector.length) {
                    // Compute the nearest point on line.
                    var nearestPoint = snapping.start.add(snapping.surfaceVectorNorm.multiply(project));
                    // Measure the distance.
                    if (rawDeltaVector.isClose(nearestPoint, snapDistance)) {
                        return { delta: nearestPoint };
                    }
                }
                break;
            case "point_to_point":
                if (rawDeltaVector.isClose(snapping.delta, snapDistance)) {
                    return { delta: snapping.delta, appearanceChange: snapping.appearanceChange };
                }
                break;
        }
    }
    return;
}


/***/ }),

/***/ "9ift":
/*!********************************************************!*\
  !*** ./src/apparatus/library/accessories/tlc_plate.ts ***!
  \********************************************************/
/*! exports provided: TLCPlate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TLCPlate", function() { return TLCPlate; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var TLCPlate = /** @class */ (function () {
    function TLCPlate() {
    }
    TLCPlate.isBoostRequiredForAppearance = function (appearance) {
        return appearance.lanes >= 4;
    };
    TLCPlate.prototype.render = function (appearance) {
        var zoom = appearance.view == "zoom" ? 4 : 1;
        var baselineOffset = appearance.view == "zoom" ? 40 : 15;
        var maxFrontOffset = appearance.view == "zoom" ? 25 : 10;
        var spots = appearance.lanes;
        var widthPerSpot = 15 * zoom;
        var height = appearance.height * zoom;
        var totalWidth = spots * widthPerSpot;
        var frontOffset = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["lerp"])(height, maxFrontOffset, appearance.solventFrontAdvance);
        var plate = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, totalWidth, height));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(plate);
        plate.fillColor = "#f2f2f2";
        var baseline = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, height - baselineOffset), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(totalWidth - 2, height - baselineOffset));
        baseline.withStroke(2.0, "#888888");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([plate, baseline]);
        if (appearance.solventFront) {
            var solventFront = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, frontOffset), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(totalWidth - 2, frontOffset));
            solventFront.withStroke(3.0, "#c1dcfb");
            // const soak = new Path.Rectangle(R(2, frontOffset, totalWidth - 4, height - frontOffset))
            // soak.fillColor = "#c1dcfb40"
            graphic.addChild(solventFront);
        }
        // Compute the snapping lines.
        var snapping = [];
        if (appearance.view == "zoom") {
            for (var i = 0; i < spots; i++) {
                var x = (i + 0.5) * widthPerSpot;
                snapping.push({ type: "tlc_plate", start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, height - baselineOffset), end: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, frontOffset) });
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping
        };
    };
    TLCPlate.properties = {
        label: "Chromatography paper",
        canContainLiquids: false,
        defaultAppearance: {
            view: "zoom",
            height: 80,
            lanes: 1,
            solventFront: true,
            solventFrontAdvance: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "view", label: "View size",
                options: [
                    { value: "real", label: "Real size" },
                    { value: "zoom", label: "Zoomed" },
                ],
            },
            {
                spec: "slider", key: "height", label: "Size",
                min: 60, max: 120, unit: "mm"
            },
            {
                spec: "slider", key: "lanes", label: "Lanes",
                min: 1, max: 8, pipsStep: 1,
            },
            {
                spec: "checkbox", key: "solventFront", label: "Solvent front", subLabel: "Show",
            },
            {
                spec: "slider", key: "solventFrontAdvance", label: "Solvent front distance",
                min: 0.0, max: 1.0, step: 0.01, unit: "%", tier: "boost",
                visible: function (a) { return a.solventFront; }
            }
        ],
    };
    return TLCPlate;
}());



/***/ }),

/***/ "9nbt":
/*!*******************************!*\
  !*** ./src/editing/handle.ts ***!
  \*******************************/
/*! exports provided: createInteractionHandleFor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createInteractionHandleFor", function() { return createInteractionHandleFor; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var editing_interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/interaction */ "hXn/");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



/**
 * Creates an interactable handle (a golden diamond) that can be dragged,
 * to adjust a property.
 */
function createInteractionHandleFor(interaction) {
    var handleKlass = Object(editing_interaction__WEBPACK_IMPORTED_MODULE_1__["Interactable"])(paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle, interaction);
    var handle = new handleKlass(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 12, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER));
    handle.rotate(45);
    handle.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["UIColors"].hintFill;
    handle.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["UIColors"].hintOutline;
    handle.strokeWidth = 3.0;
    return handle;
}


/***/ }),

/***/ "9xfh":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/accessories/ph_paper.ts ***!
  \*******************************************************/
/*! exports provided: PhPaper, PhPaperPack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhPaper", function() { return PhPaper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhPaperPack", function() { return PhPaperPack; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var DEFAULT_YELLOW = "#f5c50a";
var PH_COLORS_1 = [
    "#cb3b53",
    "#dc4949",
    "#e04d2f",
    "#d56d47",
    "#d18c34",
    "#d29d23",
    "#b39541",
    "#757a3b",
    "#3e5248",
    "#30323c",
    "#343242",
    "#393157",
    "#352342",
    "#3f254b",
];
var PhPaper = /** @class */ (function () {
    function PhPaper() {
    }
    PhPaper.prototype.render = function (appearance) {
        var dipped = appearance.dipped, ph = appearance.ph, scale = appearance.scale, length = appearance.length;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 15, length));
        if (dipped) {
            var phColor = PH_COLORS_1[ph - 1].color();
            var front = 1 - appearance.front;
            graphic.withGradientFill("down", [
                [DEFAULT_YELLOW, front],
                [phColor.ladd(-10).string(), front + 0.01],
                [phColor.ladd(5).string(), front + 0.05],
                [phColor.string(), front + 0.1],
            ]);
        }
        else {
            graphic.withFill(DEFAULT_YELLOW);
        }
        graphic.scale(scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(15).toShape()
        };
    };
    PhPaper.properties = {
        label: "pH Paper Strip",
        canContainLiquids: false,
        defaultAppearance: {
            dipped: false,
            ph: 5,
            front: 0.4,
            length: 70,
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 30, max: 100, unit: "mm",
            },
            { spec: "checkbox", key: "dipped", label: "Dipped" },
            {
                spec: "slider", key: "ph", label: "pH",
                min: 1, max: 14, step: 1,
                visible: function (a) { return a.dipped; }
            },
            {
                spec: "slider", key: "front", label: "Front distance",
                min: 0.2, max: 0.7, step: 0.01, unit: "%",
                visible: function (a) { return a.dipped; }
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 3.0, step: 0.1, unit: "%",
            }
        ],
    };
    return PhPaper;
}());

var PhPaperPack = /** @class */ (function () {
    function PhPaperPack() {
    }
    PhPaperPack.prototype.render = function (appearance) {
        switch (appearance.type) {
            case "roll": return this.renderRoll(appearance);
            case "book": return this.renderBook(appearance);
        }
    };
    PhPaperPack.prototype.renderBook = function (appearance) {
        var scale = appearance.scale, showLabels = appearance.showLabels;
        var outsideCase = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 148, 45, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0)
            .close()
            .withDefaultStyle()
            .withGradientFill("right", [["#999999", 0.0], ["#eeeeee", 0.08]]);
        var innerFlap = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-74, 2]], [[-64, 5]], [[-5, 5]])).close().withDefaultStyle()
            .withGradientFill("right", [["#eeeeee", 0.14], ["#dddddd", 0.15]]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorY"])(innerFlap, 45 / 2);
        var innerPaper1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 7, 20, 14, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_RIGHT)).withFill(DEFAULT_YELLOW);
        var innerPaper2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 24, 20, 14, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_RIGHT)).withFill(DEFAULT_YELLOW);
        var xStep = 60 / 7;
        var sampleHeight = 16;
        var sample = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 1, xStep - 1, sampleHeight)).withFill(PH_COLORS_1[0]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([outsideCase, innerPaper1, innerPaper2, innerFlap, sample]);
        for (var i = 0; i < 14; i++) {
            var x = Math.floor(i / 2) * xStep + 15;
            var dy = (i % 2 == 0) ? 0 : 45 - 2 - sampleHeight;
            var ty = (i % 2 == 0) ? 20 : 27;
            // Label
            if (showLabels) {
                graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
                    point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, ty),
                    content: (i + 1).toString(),
                    fillColor: "black",
                    fontFamily: 'sans-serif',
                    fontSize: 3,
                    justification: "center",
                }));
            }
            if (i > 0) {
                var cloneSample = sample.clone().withFill(PH_COLORS_1[i]);
                cloneSample.position.x = x;
                cloneSample.position.y += dy;
                graphic.addChild(cloneSample);
            }
            else {
                sample.position.x = x;
            }
        }
        graphic.scale(scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    PhPaperPack.prototype.renderRoll = function (appearance) {
        var scale = appearance.scale, showLabels = appearance.showLabels;
        var outsideCase = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), 30.0)
            .withDefaultStyle();
        outsideCase.setRadialGradientFill([
            ["#f0f0f0", 0.3],
            ["#eeeeee", 0.9],
            ["#bbbbbb", 1.0],
        ]);
        var angleStep = 360 / 14;
        var sample = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
            Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0.0, -27.0).rotate(angleStep / 2 - 2), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-2, -1.3)),
            Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0.0, -16.0).rotate(angleStep / 2 - 2))
        ]).withFill(PH_COLORS_1[0]).close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(sample);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([outsideCase, sample]);
        for (var i = 0; i < 14; i++) {
            // Label
            if (showLabels) {
                graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
                    point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -13).rotate(angleStep * i).add([0, 1.2]),
                    content: (i + 1).toString(),
                    fillColor: "black",
                    fontFamily: 'sans-serif',
                    fontSize: 3,
                    justification: "center",
                }));
            }
            if (i > 0) {
                var cloneSample = sample.clone().withFill(PH_COLORS_1[i]);
                cloneSample.rotate(angleStep * i, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                graphic.addChild(cloneSample);
            }
        }
        graphic.scale(scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    PhPaperPack.properties = {
        label: "pH Paper Pack",
        canContainLiquids: false,
        defaultAppearance: {
            type: "roll",
            scale: 1.0,
            showLabels: false,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "roll", label: "Roll" },
                    { value: "book", label: "Booklet" },
                ],
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 3.0, step: 0.1, unit: "%"
            },
            { spec: "checkbox", key: "showLabels", label: "Show pH labels" }
        ],
    };
    return PhPaperPack;
}());



/***/ }),

/***/ "A2/w":
/*!**********************************!*\
  !*** ./src/editing/clipboard.ts ***!
  \**********************************/
/*! exports provided: DELTA, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DELTA", function() { return DELTA; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_grouping_commands__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/grouping/commands */ "lY6V");
/* harmony import */ var editing_grouping_operations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/grouping/operations */ "VqZE");
/* harmony import */ var ext_array__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ext/array */ "3pNw");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! types */ "p21n");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};










/** Distance to paste each copy from the previous. */
var DELTA = 50;
/** Handles clipboard operations for apparatus and other items. */
var Clipboard = /** @class */ (function () {
    function Clipboard() {
        var _this = this;
        /**
         * The contents of the clipboard, i.e. what to create when pasting.
         */
        this.contents = {
            apparatusNotInGroup: [],
            arrowsNotInGroup: [],
            groups: []
        };
        // Number of DELTA steps to paste the new items from the original.
        this.deltaSteps = 0;
        this.createApparatusData = function (a) {
            return __assign(__assign({}, a), { id: store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].mint("apparatus"), x: a.x + DELTA * _this.deltaSteps, y: a.y + DELTA * _this.deltaSteps, parentGroup: undefined });
        };
        this.createArrow = function (a) {
            return __assign(__assign({}, a), { id: store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].mint("arrow"), start: Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(a.start, { x: DELTA * _this.deltaSteps, y: DELTA * _this.deltaSteps }), end: Object(types__WEBPACK_IMPORTED_MODULE_9__["add"])(a.end, { x: DELTA * _this.deltaSteps, y: DELTA * _this.deltaSteps }), parentGroup: undefined });
        };
    }
    /**
     * Inspects the current store state and stores selected items in the clipboard
     * Returns true if there were selected items, false otherwise.
     */
    Clipboard.prototype.fillContentsFromStore = function () {
        if (store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedArrows().length + store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedItems().length == 0)
            return false;
        var newContents = {
            apparatusNotInGroup: [],
            arrowsNotInGroup: [],
            groups: []
        };
        // Track groups already added.
        var alreadyAddedRootGroupIds = [];
        for (var _i = 0, _a = store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedItems(); _i < _a.length; _i++) {
            var apparatus = _a[_i];
            if (apparatus.parentGroup) {
                var rootGroup = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_5__["getRootGroup"])(apparatus.parentGroup);
                if (!ext_array__WEBPACK_IMPORTED_MODULE_6__["Arrays"].includes(alreadyAddedRootGroupIds, rootGroup.id)) {
                    newContents.groups.push(this.templatizeGroup(rootGroup));
                    alreadyAddedRootGroupIds.push(rootGroup.id);
                }
            }
            else {
                newContents.apparatusNotInGroup.push(apparatus);
            }
        }
        for (var _b = 0, _c = store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedArrows(); _b < _c.length; _b++) {
            var arrow = _c[_b];
            if (arrow.parentGroup) {
                var rootGroup = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_5__["getRootGroup"])(arrow.parentGroup);
                if (!ext_array__WEBPACK_IMPORTED_MODULE_6__["Arrays"].includes(alreadyAddedRootGroupIds, rootGroup.id)) {
                    newContents.groups.push(this.templatizeGroup(rootGroup));
                    alreadyAddedRootGroupIds.push(rootGroup.id);
                }
            }
            else {
                newContents.arrowsNotInGroup.push(arrow);
            }
        }
        this.contents = newContents;
        return true;
    };
    /** Turn a group into a templated group. */
    Clipboard.prototype.templatizeGroup = function (group) {
        var _this = this;
        return {
            items: group.items.map(function (childId) {
                var idf = store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].matching(childId);
                switch (childId.type) {
                    case "apparatus":
                        return { type: "apparatus", data: store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedItems().filter(idf)[0] };
                    case "arrow":
                        return { type: "arrow", data: store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedArrows().filter(idf)[0] };
                    case "group":
                        return { type: "group", data: _this.templatizeGroup(store_store__WEBPACK_IMPORTED_MODULE_8__["default"].groups().filter(idf)[0]) };
                }
            })
        };
    };
    Clipboard.prototype.cut = function () {
        if (!this.fillContentsFromStore())
            return;
        this.deltaSteps = 0;
        command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_3__["Sequence"]([
            new command_basic__WEBPACK_IMPORTED_MODULE_2__["DeleteApparatus"](store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedItems()),
            new arrows_command__WEBPACK_IMPORTED_MODULE_1__["DeleteArrows"](store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedArrows()),
        ]));
    };
    Clipboard.prototype.copy = function () {
        if (!this.fillContentsFromStore())
            return;
        this.deltaSteps = 1;
    };
    Clipboard.prototype.paste = function () {
        var _this = this;
        command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_3__["Sequence"](__spreadArrays([
            new command_basic__WEBPACK_IMPORTED_MODULE_2__["AddApparatus"](this.contents.apparatusNotInGroup.map(this.createApparatusData)),
            new arrows_command__WEBPACK_IMPORTED_MODULE_1__["AddArrow"](this.contents.arrowsNotInGroup.map(this.createArrow))
        ], flatten(this.contents.groups.map(function (g) { return _this.createPasteCommandsForGroup(g); })), [
            // Deselect currently selected items
            new command_basic__WEBPACK_IMPORTED_MODULE_2__["Deselect"](__spreadArrays(store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedItems().map(function (a) { return a.id; }), store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedArrows().map(function (a) { return a.id; }))),
        ])));
        this.deltaSteps++;
    };
    Clipboard.prototype.createPasteCommandsForGroup = function (group, groupId) {
        var commands = [];
        var childIds = [];
        for (var _i = 0, _a = group.items; _i < _a.length; _i++) {
            var child = _a[_i];
            switch (child.type) {
                case "apparatus":
                    var apparatus = this.createApparatusData(child.data);
                    childIds.push(apparatus.id);
                    commands.push(new command_basic__WEBPACK_IMPORTED_MODULE_2__["AddApparatus"]([apparatus]));
                    break;
                case "arrow":
                    var arrow = this.createArrow(child.data);
                    childIds.push(arrow.id);
                    commands.push(new arrows_command__WEBPACK_IMPORTED_MODULE_1__["AddArrow"]([arrow]));
                    break;
                case "group":
                    var childGroupId = store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].mint("group");
                    childIds.push(childGroupId);
                    commands.push.apply(commands, this.createPasteCommandsForGroup(child.data, childGroupId));
                    break;
            }
        }
        commands.push(new editing_grouping_commands__WEBPACK_IMPORTED_MODULE_4__["GroupObjects"](childIds, groupId));
        return commands;
    };
    return Clipboard;
}());
function flatten(commands) {
    return commands.reduce(function (acc, els) { acc.push.apply(acc, els); return acc; }, []);
}
/** Clipboard that also logs events to Google Analytics. */
var LoggingClipboard = /** @class */ (function () {
    function LoggingClipboard() {
        this.clipboard = new Clipboard();
    }
    LoggingClipboard.prototype.cut = function (source) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Cut", source);
        this.clipboard.cut();
    };
    LoggingClipboard.prototype.copy = function (source) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Copy", source);
        this.clipboard.copy();
    };
    LoggingClipboard.prototype.paste = function (source) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Paste", source);
        this.clipboard.paste();
    };
    return LoggingClipboard;
}());
/* harmony default export */ __webpack_exports__["default"] = (new LoggingClipboard());


/***/ }),

/***/ "A5Ua":
/*!***********************!*\
  !*** ./src/ext/js.ts ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
String.prototype.formattedAsDate = function () {
    var date = new Date(this);
    return date.formattedAsDate();
};
String.prototype.capitalise = function () {
    return this.charAt(0).toUpperCase() + this.substring(1);
};
String.prototype.last = function (n) {
    n = Math.min(n, this.length);
    if (n == 1)
        return this.charAt(this.length - 1);
    return this.substr(this.length - n);
};
String.prototype.first = function (n) {
    n = Math.min(n, this.length);
    if (n == 1)
        return this.charAt(0);
    return this.substr(0, n);
};
String.prototype.replaceLast = function (n, append) {
    return this.substr(0, this.length - n) + append;
};
String.prototype.displaySpecial = function () {
    return this[0] === "_" ? this.substring(5) : this.toString();
};
String.prototype.if = function (condition) {
    return condition ? this : "";
};
Date.prototype.formattedAsDate = function () {
    return this.toLocaleString();
};
Number.prototype.toRadians = function () {
    return this * Math.PI / 180;
};
Number.prototype.toDegrees = function () {
    return this * 180 / Math.PI;
};
Number.prototype.round = function (decimals) {
    if (decimals === void 0) { decimals = 0; }
    if (decimals == 0)
        return Math.round(this);
    var factor = Math.pow(10, decimals);
    return Math.round((this + 0.000001) * factor) / factor;
};
Number.prototype.toLocaleFixed = function (places) {
    return this.toLocaleString(undefined, { minimumFractionDigits: places, maximumFractionDigits: places });
};



/***/ }),

/***/ "AAbs":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/biology/organic/bacteria.ts ***!
  \***********************************************************/
/*! exports provided: Bacteria */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bacteria", function() { return Bacteria; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! random/random */ "PJ3I");




var Bacteria = /** @class */ (function () {
    function Bacteria() {
    }
    Bacteria.prototype.render = function (appearance) {
        var size = appearance.size;
        var color = appearance.color;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        var bounds;
        if (appearance.clipped) {
            var shape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), size / 2);
            graphic.addChild(shape);
            graphic.clipped = true;
            bounds = shape.bounds;
        }
        else {
            bounds = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, size, size, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER);
        }
        var step = 7;
        var r = new random_random__WEBPACK_IMPORTED_MODULE_3__["Random"]();
        var r2 = new random_random__WEBPACK_IMPORTED_MODULE_3__["Random"]();
        for (var x = bounds.left; x < bounds.right; x += step) {
            for (var y = bounds.top; y < bounds.bottom; y += step) {
                var size_1 = r.randomBetween(3, 7);
                var offset = r.randomUnitVector(step / 2);
                if (r2.randomBetween(0, 1) > appearance.density)
                    continue;
                var bacteria = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, y).add(offset), size_1);
                bacteria.setRadialGradientFill(apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].fade(color.color(), { offset: 0.3, finalAlpha: 0.3 }));
                graphic.addChild(bacteria);
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0)
        };
    };
    Bacteria.properties = {
        label: "Bacteria culture",
        canContainLiquids: false,
        defaultAppearance: {
            size: 45,
            density: 0.5,
            clipped: false,
            clipShape: "circle",
            color: "#cccccc"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 35, max: 150, unit: "mm"
            },
            {
                spec: "slider", key: "density", label: "Culture density",
                min: 0.05, max: 0.95, step: 0.01, unit: "%",
            },
            {
                spec: "checkbox", key: "clipped", label: "Clip to circle"
            },
            {
                spec: "color", key: "color", label: "Colour",
            }
        ],
    };
    return Bacteria;
}());



/***/ }),

/***/ "ATPK":
/*!********************************************!*\
  !*** ./src/apparatus/library/hot_plate.ts ***!
  \********************************************/
/*! exports provided: HotPlate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HotPlate", function() { return HotPlate; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");



var HotPlate = /** @class */ (function () {
    function HotPlate() {
    }
    HotPlate.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].hotPlate();
        graphic.scale(2.0 * appearance.scale, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        graphic.children[0].children[3].strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        graphic.children[0].children[6].strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                graphic.topEdgeAsPlaceableSurface(),
                graphic.placeable()
            ]
        };
    };
    HotPlate.properties = {
        label: "Hot Plate",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.8, max: 1.75, step: 0.01
            }
        ],
    };
    return HotPlate;
}());



/***/ }),

/***/ "AWwk":
/*!******************************************************!*\
  !*** ./src/apparatus/library/measurement/vernier.ts ***!
  \******************************************************/
/*! exports provided: VernierCaliper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VernierCaliper", function() { return VernierCaliper; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var metal = apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lightMetal.color());
var VernierCaliper = /** @class */ (function () {
    function VernierCaliper() {
    }
    VernierCaliper.prototype.render = function (appearance) {
        // Note the caliper is initially drawn at 2x.
        var cms = appearance.cms, inches = appearance.inches;
        var mainBody = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -48]], [[15, 0], [1, -43]], [[415, 0]], [[415, 34]], [[0, 34]], [[0, 128], , [-23, 0]], [[-38, 41], [17, 62]], [[-38, -10]], [[0, -10]])).close()
            .withStroke("default")
            .withGradientFill("right-down", metal);
        var inchSlider = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -47]], [[0, -10]], [[110, -10]], [[110, -2]], [[-10, -2], [20, 0], [-8, -33]])).close()
            .withStroke("default")
            .withGradientFill("right-down", metal);
        inchSlider.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0);
        inchSlider.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(inches * 25.4 * 2, 0);
        var cmSlider = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[110, 0]], [[110, 19]], [[40, 19], [20, 1], [-13, 0]], [[0, 93], [27, -5]])).close()
            .withStroke("default")
            .withGradientFill("right-down", metal);
        cmSlider.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0);
        cmSlider.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(cms * 10 * 2, 34);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([inchSlider, mainBody, cmSlider]);
        graphic.scale(0.5 * appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    VernierCaliper.properties = {
        label: "Vernier Caliper",
        canContainLiquids: false,
        defaultAppearance: {
            inches: 1,
            cms: 3,
            scale: 1
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Size",
                min: 1, max: 2, step: 0.1, unit: "x"
            },
            {
                spec: "header", header: "Sliders", icon: "sliders-h",
            },
            {
                spec: "slider", key: "inches", label: "Inches",
                min: 0, max: 5.5, step: 0.1, unit: "in"
            },
            {
                spec: "slider", key: "cms", label: "Centimetres",
                min: 0, max: 15, step: 0.1, unit: "cm"
            }
        ],
    };
    return VernierCaliper;
}());



/***/ }),

/***/ "AZ3F":
/*!***********************************!*\
  !*** ./src/freehand/apparatus.ts ***!
  \***********************************/
/*! exports provided: FreehandDrawing */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FreehandDrawing", function() { return FreehandDrawing; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var FreehandDrawing = /** @class */ (function () {
    function FreehandDrawing() {
    }
    FreehandDrawing.prototype.render = function (appearance) {
        var path = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"].apply(void 0, appearance.points));
        var graphic;
        switch (appearance.drawStyle) {
            case "stroke":
                graphic = renderStroke(path, appearance);
                break;
            case "shape":
                graphic = renderShape(path, appearance);
                break;
            case "tube":
                graphic = renderTube(path, appearance);
                break;
        }
        var snapping = [];
        if (appearance.drawStyle == "tube") {
            var p1 = appearance.points[0];
            var vec1Out = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(p1[2][0], p1[2][1]);
            snapping.push({
                type: "connectable",
                at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(p1[0][0], p1[0][1]),
                facing: vec1Out.angle - 90,
            });
            var pN = appearance.points[appearance.points.length - 1];
            var vecNOut = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(pN[1][0], pN[1][1]);
            snapping.push({
                type: "connectable",
                at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(pN[0][0], pN[0][1]),
                facing: vecNOut.angle - 90,
            });
        }
        return {
            graphic: graphic,
            hitShape: graphic.strokeBounds.toShape(),
            snapping: snapping,
        };
    };
    FreehandDrawing.properties = {
        label: "Freehand drawing",
        canContainLiquids: false,
        defaultAppearance: {
            points: [],
            drawStyle: "stroke",
            strokeColor: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke,
            strokeWidth: 4.0,
            tubeWidth: 10.0,
            tubeWallThickness: 4.0,
        },
        appearanceSpecs: [
            // {
            //     spec: "radio", key: "drawStyle", label: "Draw Style",
            //     options: [
            //         { value: "stroke", label: "Drawing" },
            //         { value: "tube", label: "Tube" },
            //         { value: "shape", label: "Shape" },
            //     ],
            // },
            {
                spec: "toggle-buttons", key: "drawStyle", label: "Draw Style",
                options: [
                    { value: "stroke", label: "Drawing", icon: "signature" },
                    { value: "shape", label: "Shape", icon: "draw-polygon" },
                    { value: "tube", label: "Tube", icon: "check-double fa-flip-horizontal" },
                ],
                size: "large",
            },
            {
                spec: "slider", key: "strokeWidth", label: "Stroke width",
                min: 1.0, max: 20.0, step: 0.05,
                visible: function (a) { return a.drawStyle == "shape" || a.drawStyle == "stroke"; },
            },
            {
                spec: "slider", key: "tubeWidth", label: "Tube width",
                min: 6.0, max: 20.0, step: 0.05,
                visible: function (a) { return a.drawStyle == "tube"; }
            },
            {
                spec: "slider", key: "tubeWallThickness", label: "Tube wall thickness",
                min: 1.0, max: 6.0, step: 0.05,
                visible: function (a) { return a.drawStyle == "tube"; }
            },
        ],
    };
    return FreehandDrawing;
}());

function renderStroke(path, appearance) {
    path.strokeColor = appearance.strokeColor;
    path.strokeWidth = appearance.strokeWidth;
    return path;
}
function renderShape(path, appearance) {
    path.closePath();
    path.strokeColor = appearance.strokeColor;
    path.strokeWidth = appearance.strokeWidth;
    path.fillColor = "red";
    return path;
}
function renderTube(path, appearance) {
    path.strokeColor = appearance.strokeColor;
    path.strokeWidth = appearance.tubeWidth + appearance.tubeWallThickness * 2;
    var inside = path.clone();
    inside.strokeColor = "white";
    inside.strokeWidth = appearance.tubeWidth;
    return new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([path, inside]);
}


/***/ }),

/***/ "AqD8":
/*!*********************************************!*\
  !*** ./src/apparatus/library/wire_gauze.ts ***!
  \*********************************************/
/*! exports provided: WireGauze */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WireGauze", function() { return WireGauze; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var WireGauze = /** @class */ (function () {
    function WireGauze() {
    }
    WireGauze.prototype.render = function (appearance) {
        switch (appearance.view) {
            case "side":
                return sideView(appearance);
            case "top":
                return topView(appearance);
        }
    };
    WireGauze.properties = {
        label: "Wire Gauze",
        canContainLiquids: false,
        defaultAppearance: {
            size: 100,
            view: "side",
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 50, max: 150, step: 10, unit: "mm"
            },
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "top", label: "From the top" },
                    { value: "side", label: "From the side" }
                ]
            }
        ],
    };
    return WireGauze;
}());

function sideView(appearance) {
    var squiggle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0], undefined, [5, 9]], [[10, 0], [-5, -9], [5, 9]]));
    squiggle.strokeWidth = 2.5;
    squiggle.strokeColor = "#5c6c84";
    var count = appearance.size / 10;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([squiggle]);
    for (var i = 2; i < count; i++) {
        squiggle.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[i * 10, 0], [-5, -9], [5, 9]]));
    }
    return {
        graphic: graphic,
        hitShape: graphic.strokeBounds.expand(10).toShape(),
        snapping: [{
                type: "placeable",
                at: graphic.bounds.bottomCenter.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 5)),
            }, {
                type: "placeable_surface",
                start: graphic.bounds.topLeft.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -5)),
                end: graphic.bounds.topRight.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -5))
            }]
    };
}
function topView(appearance) {
    var line = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, appearance.size, 2.0));
    line.fillColor = "#5c6c84";
    var lineSymbol = new paper__WEBPACK_IMPORTED_MODULE_1__["Symbol"](line, true);
    var count = appearance.size / 10;
    var offset = appearance.size / 2 + 5;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
    for (var i = 1; i < count + 1; i++) {
        graphic.addChild(lineSymbol.place(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 10 * i - offset)));
        var orthogonalPlaced = lineSymbol.place(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(i * 10 - offset, 0));
        orthogonalPlaced.rotate(90);
        graphic.addChild(orthogonalPlaced);
    }
    var pad = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(graphic.bounds.center, appearance.size / 3);
    pad.fillColor = "#dbcfbaee";
    graphic.addChild(pad);
    var hitShape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(graphic.strokeBounds.expand(10));
    return { graphic: graphic, hitShape: hitShape };
}


/***/ }),

/***/ "BIaz":
/*!***********************************************!*\
  !*** ./src/apparatus/library/raster_image.ts ***!
  \***********************************************/
/*! exports provided: RasterImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RasterImage", function() { return RasterImage; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



/** Loads a raster image. Currently used only for development. */
var RasterImage = /** @class */ (function () {
    function RasterImage() {
        this.loadedUrl = "";
        this.hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 10, 10));
    }
    RasterImage.prototype.render = function (appearance) {
        var _this = this;
        var _a;
        if (appearance.source == "") {
            var dummy = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 100, 100));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(dummy);
            return {
                graphic: dummy,
                hitShape: dummy.clone()
            };
        }
        var raster;
        if (appearance.source != this.loadedUrl) {
            (_a = this.currentRaster) === null || _a === void 0 ? void 0 : _a.remove();
            raster = new paper__WEBPACK_IMPORTED_MODULE_2__["Raster"](appearance.source);
            raster.onLoad = function () {
                _this.hitShape.bounds = raster.bounds;
            };
            this.currentRaster = raster;
            this.loadedUrl = appearance.source;
        }
        else {
            raster = this.currentRaster;
        }
        raster.scaling = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(appearance.size, appearance.size);
        return {
            graphic: raster,
            hitShape: this.hitShape,
        };
    };
    RasterImage.properties = {
        label: "Image",
        canContainLiquids: false,
        defaultAppearance: {
            source: "",
            size: 1,
        },
        appearanceSpecs: [
            {
                spec: "text", key: "source", label: "Image URL",
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 0.25, max: 2.0, step: 0.005,
            }
        ],
    };
    return RasterImage;
}());



/***/ }),

/***/ "BhwB":
/*!**************************************************!*\
  !*** ./src/apparatus/library/devices/hofmann.ts ***!
  \**************************************************/
/*! exports provided: Hofmann */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hofmann", function() { return Hofmann; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common/tap */ "ndDi");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var Hofmann = /** @class */ (function () {
    function Hofmann() {
    }
    Hofmann.prototype.render = function (appearance) {
        var shape = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])(
        // Start at the top.
        [[10, -410]], [[10, -400], , [15, 7]], [[30, -375], [0, -9], [0, 22]], [[5, -345]], [[5, -8]], 
        // Burette on one side.
        [[70, -8]], [[70, -280], , [0, -15]], [[80, -310]], [[80, -350]], // Peak
        [[90, -350]], [[90, -310]], [[100, -280], [0, -15]], [[100, 50]], [[70, 50]], [[70, 8]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        shape.closePath();
        var customLiquidMask = shape.clone();
        var leftLiquidHeight = -10 - appearance.leftLevel * 300;
        var middleLiquidHeight = -10 - appearance.waterLevel * 400;
        var rightLiquidHeight = -10 - appearance.rightLevel * 300;
        var liquid = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])(
        // Left column.
        [[-100, leftLiquidHeight]], [[-70, leftLiquidHeight]], 
        // Middle column.
        [[-40, middleLiquidHeight]], [[40, middleLiquidHeight]], 
        // Right column.
        [[70, rightLiquidHeight]], [[100, rightLiquidHeight]], 
        // Fixed bottom level.
        [[100, 50]], [[-100, 50]]));
        liquid.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].defaultLiquid + "4D";
        liquid.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].defaultLiquid);
        var liquidGroup = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([customLiquidMask, liquid]);
        liquidGroup.clipped = true;
        var glassWalls = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 9, 13, 17, 21);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(glassWalls);
        var tap1 = apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].create(appearance.rightTap, true).withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(85, -310));
        tap1.rotation = 180;
        var tap2 = apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].create(appearance.leftTap, true).withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-85, -310));
        tap2.rotation = 180;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([liquidGroup, glassWalls, tap1, tap2]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: glassWalls.bounds.center,
        };
    };
    Hofmann.properties = {
        label: "Hoffman Voltameter",
        canContainLiquids: false,
        defaultAppearance: {
            leftTap: 1.0,
            rightTap: 1.0,
            leftLevel: 0.75,
            rightLevel: 0.5,
            waterLevel: 0.9,
        },
        appearanceSpecs: [
            { spec: "slider", key: "leftLevel", label: "Left water level", min: 0.0, max: 1.0, step: 0.01, unit: "%" },
            { spec: "slider", key: "waterLevel", label: "Middle water level", min: 0.0, max: 1.0, step: 0.01, unit: "%" },
            { spec: "slider", key: "rightLevel", label: "Right water level", min: 0.0, max: 1.0, step: 0.01, unit: "%" },
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].appearanceSpecFor("leftTap", "Left tap"),
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].appearanceSpecFor("rightTap", "Right tap"),
        ],
    };
    return Hofmann;
}());



/***/ }),

/***/ "BoMl":
/*!****************************************!*\
  !*** ./src/apparatus/library/clamp.ts ***!
  \****************************************/
/*! exports provided: Clamp, FrontClamp, createBolt, Ring */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Clamp", function() { return Clamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FrontClamp", function() { return FrontClamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createBolt", function() { return createBolt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ring", function() { return Ring; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../draw */ "hHoh");





var CLAMP_LENGTH = 180;
var clampSizeProp = {
    spec: "slider", key: "clampSize", label: "Clamp size",
    min: 30, max: 130
};
var clampColorProp = {
    spec: "radio", key: "clampColor", label: "Material",
    options: [
        { value: "metal", label: "Metal" },
        { value: "blue", label: "Blue rubber" },
    ]
};
/**
 * https://imgaz1.staticbg.com/thumb/large/oaupload/banggood/images/65/38/1992bd64-406b-476d-bb34-b6d63962c28d.JPG.webp
 */
var Clamp = /** @class */ (function () {
    function Clamp() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 20, maxX: CLAMP_LENGTH + 20,
                minY: -20, maxY: -20,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.shift * CLAMP_LENGTH + 20, -20); },
                toAppearance: function (p) { return ({ shift: (p.x - 20) / CLAMP_LENGTH }); },
                scale: 1.0,
            }
        ];
    }
    Clamp.prototype.render = function (appearance) {
        var length = CLAMP_LENGTH;
        var handleThickness = 15;
        var handleWidth = appearance.clampSize;
        // Create the bolt.
        var bolt = createBolt();
        // Create the rod and the handler.
        var _a = Object(_draw__WEBPACK_IMPORTED_MODULE_3__["metalRod"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(length, 0)), rod = _a[0], rodHighlight = _a[1];
        var handleR = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(length, -handleThickness / 2, handleWidth, handleThickness);
        var handle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(handleR, 4.0);
        setHandleColor(handle, appearance.clampColor);
        var handleHighlight = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(6, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(handleWidth - 6, 0));
        handleHighlight.position.x += length;
        handleHighlight.position.y -= handleThickness / 2 - 3;
        handleHighlight.strokeWidth = 3.0;
        handleHighlight.strokeColor = "#ffffff40";
        handleHighlight.strokeCap = "round";
        // Move the rod.
        var shiftable = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([rod, rodHighlight, handle, handleHighlight]);
        shiftable.position.x -= Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["lerp"])(0.95, 0, appearance.shift) * length;
        // Assemble and compute hit shape.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([shiftable, bolt]);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return {
            graphic: graphic,
            hitShape: hitShape,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0),
            snapping: { type: "attachable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0) }
        };
    };
    Clamp.properties = {
        label: "Retort clamp",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            shift: 0.8,
            clampSize: 45,
            clampColor: "blue"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "shift", label: "Shift",
                min: 0, max: 1, step: 0.01
            },
            clampSizeProp,
            clampColorProp,
        ],
    };
    return Clamp;
}());

var FrontClamp = /** @class */ (function () {
    function FrontClamp() {
    }
    FrontClamp.prototype.render = function (appearance) {
        var clampSize = appearance.clampSize, clampColor = appearance.clampColor;
        // Clamp.
        var back = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, clampSize, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER), 5.0)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].reflected(["#888888", 0.0], ["#666666", 0.25], ["#444444", 0.4]));
        var reflection = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-clampSize / 2 + 5, -2), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(clampSize / 2 - 5, -2))
            .withStroke(2.0, "#ffffff30");
        var left = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-clampSize / 2, 0), 7.0);
        var right = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(clampSize / 2, 0), 7.0);
        setHandleColorForFront(left, clampColor);
        setHandleColorForFront(right, clampColor);
        // Bolt (side view).
        var bolt = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-5, 0, 8, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT), 2.0);
        bolt.withStroke("thin", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke)
            .withGradientFill("down", [["#888888", 0.0], ["#666666", 0.2], [apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal, 1.0]]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bolt, back, reflection, left, right]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(15).toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0),
            snapping: { type: "attachable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0) }
        };
    };
    FrontClamp.properties = {
        label: "Retort clamp (Front view)",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            clampSize: 45,
            clampColor: "blue"
        },
        appearanceSpecs: [
            clampSizeProp,
            clampColorProp,
        ],
    };
    return FrontClamp;
}());

function createBolt() {
    var steps = 7;
    var stepAngle = 360 / steps;
    var segmentA = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -10), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-1, 2), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, -1));
    var segmentB = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -10).rotate(stepAngle / 2, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0)), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-2, -1).rotate(stepAngle / 2), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(1, 2).rotate(stepAngle / 2));
    var bolt = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]();
    for (var i = 0; i < steps; i++) {
        segmentA = segmentA.clone();
        rotateSegment(segmentA, stepAngle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        segmentB = segmentB.clone();
        rotateSegment(segmentB, stepAngle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        bolt.addSegments([segmentA, segmentB]);
    }
    bolt.closePath();
    bolt.withStroke("thin", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke);
    bolt.setRadialGradientFill([
        ["#555555", 0.4],
        [apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal, 0.5],
        ["#666666", 0.6],
        [apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal, 0.7],
        ["#666666", 0.95],
    ], Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
    return bolt;
}
function rotateSegment(segment, angle, pivot) {
    segment.point = segment.point.rotate(angle, pivot);
    if (segment.handleIn)
        segment.handleIn = segment.handleIn.rotate(angle);
    if (segment.handleOut)
        segment.handleOut = segment.handleOut.rotate(angle);
}
var Ring = /** @class */ (function () {
    function Ring() {
    }
    Ring.prototype.render = function (appearance) {
        var length = 180;
        var ringWidth = appearance.ringSize;
        var ringHeight = 5.0 + ringWidth * 0.15;
        // Create the bolt.
        var bolt = createBolt();
        // Create the rod.
        var _a = Object(_draw__WEBPACK_IMPORTED_MODULE_3__["metalRod"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(length, 0)), rod = _a[0], rodHighlight = _a[1];
        // Create the ring.
        var ring = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(length, -ringHeight / 2, ringWidth, ringHeight));
        ring.strokeWidth = 8.0;
        ring.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal;
        // Create ring reflections.
        var reflectionSize = ringWidth * 0.3;
        var reflection1 = ringReflection(ring, 1, reflectionSize);
        var reflection2 = ringReflection(ring, -2.3, reflectionSize);
        reflection1.position.x += length;
        reflection2.position.x += length;
        // Move the rod.
        var shiftable = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([rod, rodHighlight, ring, reflection1, reflection2]);
        shiftable.position.x -= Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["lerp"])(0.95, 0, appearance.shift) * length;
        // Assemble and compute hit shape.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([shiftable, bolt]);
        return {
            graphic: graphic,
            hitShape: graphic.strokeBounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0),
            snapping: { type: "attachable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0) }
        };
    };
    Ring.properties = {
        label: "Retort Ring",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            shift: 0.8,
            ringSize: 77,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "shift", label: "Shift",
                min: 0, max: 1, step: 0.01
            },
            {
                spec: "slider", key: "ringSize", label: "Clamp size",
                min: 35, max: 130
            },
        ],
    };
    return Ring;
}());

function ringReflection(ring, angle, width) {
    var ringWidth = ring.bounds.width;
    var ringHeight = ring.bounds.height;
    var reflectionGradient = new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"]([["#ffffff60", 0.0], ["#ffffff00", 1.0]], true);
    var reflection = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, 8));
    reflection.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](reflectionGradient, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, 4), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width, 8));
    reflection.position.x = ringWidth / 2 + Math.cos(angle) * ringWidth / 2;
    reflection.position.y = Math.sin(angle) * ringHeight / 2;
    return reflection;
}
function setHandleColor(handle, color) {
    var gradient;
    switch (color) {
        case "blue":
            handle.strokeColor = "#26527f";
            gradient = new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"]([
                ["#3c82c9", 0.1],
                ["#56a0ea", 0.3],
                ["#478cd1", 0.7],
                ["#3c82c9", 0.9],
            ]);
            break;
        case "metal":
        default:
            handle.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal;
            gradient = new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"]([
                ["#777777", 0.1],
                ["#aaaaaa", 0.22],
                ["#888888", 0.7],
                ["#444444", 1.0],
            ]);
    }
    handle.strokeWidth = Object(_draw__WEBPACK_IMPORTED_MODULE_3__["strokeWidth"])("thin");
    handle.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](gradient, handle.bounds.leftCenter, handle.bounds.rightCenter);
}
function setHandleColorForFront(item, color) {
    var stroke;
    var fill;
    switch (color) {
        case "blue":
            stroke = "#26527f";
            fill = "#3c82c9";
            break;
        case "metal":
            stroke = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].darkMetal;
            fill = "#888888";
            break;
    }
    item.withFill(fill);
    item.withStroke("thin", stroke);
}


/***/ }),

/***/ "BpvS":
/*!******************************************!*\
  !*** ./src/editing/multilayerliquids.ts ***!
  \******************************************/
/*! exports provided: MultiLiquid, UpdateLiquidLayers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiLiquid", function() { return MultiLiquid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateLiquidLayers", function() { return UpdateLiquidLayers; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};


var MultiLiquid;
(function (MultiLiquid) {
    function addLayer(layers) {
        var newLayer;
        if (layers.length > 0) {
            var lastLayer = layers[0];
            newLayer = {
                position: lastLayer.position * 0.66,
                blending: 0,
                alpha: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquidAlpha,
                color: lastLayer.color.color().rotate(90).hex()
            };
        }
        else {
            newLayer = {
                position: 0.66,
                alpha: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquidAlpha,
                color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquid2,
                blending: 0
            };
        }
        return __spreadArrays([newLayer], layers);
    }
    MultiLiquid.addLayer = addLayer;
    function createSimpleGradient(color, alpha) {
        return [
            {
                position: 0.1,
                alpha: (alpha + apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["LIQUID_OPACITY_MAX"]) / 2,
                color: color.color().darken(0.1).round().hex(),
                blending: 1.0
            }
        ];
    }
    MultiLiquid.createSimpleGradient = createSimpleGradient;
    function removeBottomLayer(data) {
        return data.length == 0 ? [] : data.slice(1, data.length);
    }
    MultiLiquid.removeBottomLayer = removeBottomLayer;
    /**
     * @param data Must have length > 0
     * @param topLayerColor Must include alpha and be a string
     */
    function toGradientStops(data, topLayerColor) {
        var stops = [];
        // Precompute all the colours.
        var colors = data.map(function (d) { return d.color.color().alpha(d.alpha).toString(); });
        colors.push(topLayerColor);
        for (var i = 0; i < data.length; i++) {
            stops.push([colors[i], data[i].position]);
            // Depending on blending, place the next stop:
            // blending == 0: No blending: place the stop as close to the current layer as possible
            // blending == 1: Maximum blending, place the stop as close to the next layer.
            var blendUpper = i == data.length - 1 ? 1 : data[i + 1].position;
            var blendRange = blendUpper - data[i].position;
            var blend = data[i].blending;
            stops.push([colors[i + 1], data[i].position + blend * blendRange]);
        }
        stops.push([topLayerColor, 1.0]);
        return stops;
    }
    MultiLiquid.toGradientStops = toGradientStops;
    function adjustNumeric(data, index, key, value) {
        var _a;
        var newData = __spreadArrays(data);
        newData[index] = __assign(__assign({}, data[index]), (_a = {}, _a[key] = value, _a));
        if (key == "position") {
            newData.sort(function (a, b) { return a.position - b.position; });
        }
        return newData;
    }
    MultiLiquid.adjustNumeric = adjustNumeric;
    function adjustString(data, index, key, value) {
        var _a;
        var newData = __spreadArrays(data);
        if (key == "color") {
            value = value.toLowerCase();
        }
        newData[index] = __assign(__assign({}, data[index]), (_a = {}, _a[key] = value, _a));
        return newData;
    }
    MultiLiquid.adjustString = adjustString;
})(MultiLiquid || (MultiLiquid = {}));
var UpdateLiquidLayers = /** @class */ (function () {
    function UpdateLiquidLayers(id, layers, unsafePreviousLayers) {
        this.id = id;
        this.layers = layers;
        // Copy previous layers.
        this.previousLayers = __spreadArrays(unsafePreviousLayers);
    }
    UpdateLiquidLayers.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("updateLiquidLayers", this.mutator(this.layers));
    };
    UpdateLiquidLayers.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("updateLiquidLayers", this.mutator(this.previousLayers));
    };
    UpdateLiquidLayers.prototype.mutator = function (layers) {
        var _this = this;
        return (function (store) {
            var newStore = __assign({}, store);
            newStore.items = store.items.map(function (i) { return i.id === _this.id && i.liquid
                ? __assign(__assign({}, i), { liquid: __assign(__assign({}, i.liquid), { layers: layers }) }) : i; });
            return newStore;
        });
    };
    return UpdateLiquidLayers;
}());



/***/ }),

/***/ "C2TN":
/*!*************************************************!*\
  !*** ./src/apparatus/library/reagent_bottle.ts ***!
  \*************************************************/
/*! exports provided: ReagentBottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReagentBottle", function() { return ReagentBottle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var ReagentBottle = /** @class */ (function () {
    function ReagentBottle() {
    }
    ReagentBottle.prototype.render = function (appearance) {
        var height = appearance.height;
        var width = appearance.width;
        var neck = width / 2.333;
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neck, 0]], [[neck - 2, 25], undefined, [neck, 0]], [[width, 40], [0, -10]], [[width, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottle);
        var liquidMask = bottle.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLipsReversed"])(bottle);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([bottle]);
        if (appearance.lid != "none") {
            var lid1 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neck + 3, -5]], [[neck + 3, 0]]));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(lid1);
            lid1.closePath();
            var lid2 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neck - 3, 0]], [[neck - 6, 20]]));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(lid2);
            var lid = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([lid1, lid2]);
            switch (appearance.lid) {
                case "closed":
                    lid.position.y -= 5;
                    break;
                case "lifted":
                    lid.position.y -= 40;
                    break;
                case "tilted":
                    lid.position.y -= 30;
                    lid.position.x += 30;
                    lid.rotation = 30;
                    break;
            }
            graphic.addChild(lid);
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            snapping: graphic.placeable(),
        };
    };
    ReagentBottle.properties = {
        label: "Reagent bottle",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            lid: "closed",
            height: 131,
            width: 35,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 90, max: 150,
            },
            {
                spec: "slider", key: "width", label: "Diameter",
                min: 25, max: 40,
            },
            {
                spec: "radio", key: "lid", label: "Lid appearance",
                options: [
                    { value: "none", label: "No lid" },
                    { value: "closed", label: "Closed" },
                    { value: "lifted", label: "Lifted above" },
                    { value: "tilted", label: "Lift tilted" },
                ]
            }
        ],
    };
    return ReagentBottle;
}());



/***/ }),

/***/ "C86e":
/*!******************************************************!*\
  !*** ./src/apparatus/library/decorative/crystals.ts ***!
  \******************************************************/
/*! exports provided: Crystals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Crystals", function() { return Crystals; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var components_colorpicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/colorpicker */ "0J4H");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _paper_ext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../paper_ext */ "uotT");




var crystalOutlineStrokeWidth = "thinner";
var crystalInlineStrokeWidth = 1.0;
var Crystals = /** @class */ (function () {
    function Crystals() {
    }
    Crystals.isBoostRequiredForAppearance = function (a) {
        return a.type == "cubic" || a.type == "rhombic";
    };
    Crystals.prototype.render = function (appearance) {
        var color = appearance.color;
        var count = appearance.count;
        // The appearance colour is used for the stroke.
        // Figure out the fill colour by slightly lightening it.
        var colorLightness = color.color().lightness();
        // Lightness runs from 0 (dark) to 100 (light). Compute
        // the new lightness as midway between current lightness and max light.
        var newLightness = (100 + colorLightness) / 2;
        var fillColor = color.color().lightness(newLightness).hex();
        var crystal = createCrystal(appearance.type, color, fillColor);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([crystal]);
        for (var i = 1; i < count; i++) {
            var _a = OFFSETS[i - 1], offset = _a[0], rotation = _a[1];
            var copy = crystal.clone();
            copy.position = copy.position.add(offset);
            copy.rotation = rotation;
            graphic.addChild(copy);
        }
        graphic.scale(appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.expand(15).toShape() };
    };
    Crystals.properties = {
        label: "Crystals",
        canContainLiquids: false,
        defaultAppearance: {
            type: "octahedron",
            count: 1,
            color: "#6ca6ba",
            scale: 1.5,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "type", label: "Type / Shape",
                options: [
                    { value: "octahedron", label: "Octahedral" },
                    { value: "cubic", label: "Cubic", tier: "boost" },
                    { value: "rhombic", label: "Rhombic", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            {
                spec: "slider", key: "count", label: "Number of crystals",
                min: 1, max: 6,
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 3.0, step: 0.1, unit: "%"
            },
            {
                spec: "color", key: "color", label: "Colour",
                swatches: components_colorpicker__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_SWATCHES"],
            }
        ],
    };
    return Crystals;
}());

function createCrystal(type, strokeColor, fillColor) {
    switch (type) {
        case "octahedron":
            return createOctagonalCrystal(strokeColor, fillColor);
        case "cubic":
            return createCubicCrystal(strokeColor, fillColor);
        case "rhombic":
            return createRhombicCrystal(strokeColor, fillColor);
    }
}
function createOctagonalCrystal(strokeColor, fillColor) {
    var outline = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[6, 8]], [[0, 16]], [[-6, 8]]));
    outline.closePath();
    var fill = outline.clone();
    fill.fillColor = fillColor;
    outline.withStroke(crystalOutlineStrokeWidth, strokeColor);
    var centerPoint = [2, 10];
    var crystalInsideHorizontal = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-6, 8]], [centerPoint], [[6, 8]]));
    crystalInsideHorizontal.strokeWidth = crystalInlineStrokeWidth;
    crystalInsideHorizontal.strokeColor = strokeColor;
    var crystalInsideVertical = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [centerPoint], [[0, 16]]));
    crystalInsideVertical.strokeWidth = crystalInlineStrokeWidth;
    crystalInsideVertical.strokeColor = strokeColor;
    // Lighter shade the top left face.
    var shade1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[-6, 8]], [centerPoint]));
    shade1.fillColor = fillColor.color().lighten(0.1).hex();
    // Darker shade the bottom right face.
    var shade2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[6, 8]], [[0, 16]], [centerPoint]));
    shade2.fillColor = fillColor.color().darken(0.1).hex();
    var crystal = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([fill, shade1, shade2, crystalInsideHorizontal, crystalInsideVertical, outline]);
    return crystal;
}
function createRhombicCrystal(strokeColor, fillColor) {
    // Draw a skewed hexagonal shape, start with topCorner, go clockwise
    var outline = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[6, 8]], [[6, 12]], [[0, 20]], [[-6, 12]], [[-6, 8]]));
    outline.closePath();
    var fill = outline.clone();
    fill.fillColor = fillColor;
    outline.withStroke(crystalOutlineStrokeWidth, strokeColor);
    var inlines = Object(_paper_ext__WEBPACK_IMPORTED_MODULE_3__["createCompoundPath"])(["moveTo", -6, 12], ["lineTo", 0, 4], /* center point */ ["lineTo", 6, 12], ["moveTo", 0, 4], ["lineTo", 0, 0]);
    inlines.strokeWidth = crystalInlineStrokeWidth;
    inlines.strokeColor = strokeColor;
    var shade1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 4]], [[6, 12]], [[6, 8]], [[0, 0]]));
    shade1.fillColor = fillColor.color().darken(0.1).hex();
    var shade2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 4]], [[-6, 12]], [[-6, 8]], [[0, 0]]));
    shade2.fillColor = fillColor.color().lighten(0.1).hex();
    var crystal = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([fill, shade1, shade2, inlines, outline]);
    return crystal;
}
function createCubicCrystal(strokeColor, fillColor) {
    // Draw a hexagonal shape for outline, start with top corner, go clockwise.
    var outline = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[10, 6]], [[10, 16]], [[0, 22]], [[-10, 16]], [[-10, 6]]));
    outline.closePath();
    var fill = outline.clone();
    fill.fillColor = fillColor;
    outline.withStroke(crystalOutlineStrokeWidth, strokeColor);
    var inlines = Object(_paper_ext__WEBPACK_IMPORTED_MODULE_3__["createCompoundPath"])(["moveTo", -10, 6], ["lineTo", 0, 12], /* center */ ["lineTo", 0, 22], ["moveTo", 0, 12], ["lineTo", 10, 6]);
    inlines.strokeWidth = crystalInlineStrokeWidth;
    inlines.strokeColor = strokeColor;
    var shade1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-10, 6]], [[0, 0]], [[10, 6]], [[0, 12]]));
    shade1.fillColor = fillColor.color().lighten(0.1).hex();
    var shade2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[10, 6]], [[10, 16]], [[0, 22]], [[0, 12]]));
    shade2.fillColor = fillColor.color().darken(0.1).hex();
    var crystal = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([fill, shade1, shade2, inlines, outline]);
    crystal.scale(0.8);
    return crystal;
}
// Position offsets and rotations for subsequent crystals
var OFFSETS = [
    [Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(10, 7), 62],
    [Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-6, 10), -28],
    [Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(9, -6), 208],
    [Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(11, 13), -43],
    [Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(17, -2), 82],
];


/***/ }),

/***/ "CEde":
/*!***************************************************!*\
  !*** ./src/apparatus/library/heating/sandbath.ts ***!
  \***************************************************/
/*! exports provided: SandBath */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SandBath", function() { return SandBath; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! random/random */ "PJ3I");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common */ "UCWy");




var DISPERSE = 7;
var SandBath = /** @class */ (function () {
    function SandBath() {
    }
    SandBath.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var container = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[0, 0]], [[0, height]], [[width, height]], [[width, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(container);
        var sand = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["R"])(0, height * (1 - appearance.sandRatio), width, height * appearance.sandRatio));
        sand.strokeColor = "#e0cc4a";
        sand.strokeWidth = 3.0;
        sand.fillColor = "#ebdc7c";
        // Create sand grains.
        var grains = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        var r = new random_random__WEBPACK_IMPORTED_MODULE_2__["Random"]();
        for (var y = height * (1 - appearance.sandRatio) + DISPERSE; y <= height - DISPERSE; y += DISPERSE * 2) {
            for (var x = DISPERSE; x <= width - DISPERSE; x += DISPERSE * 2) {
                var grain = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(x, y).add(r.randomUnitVector(DISPERSE * 0.7)), 2.0);
                grains.addChild(grain);
            }
        }
        grains.fillColor = "#e0cc4a";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([sand, grains, container]);
        var rect = new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](0, 0, width, height);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(rect);
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: graphic.placeable(),
        };
    };
    SandBath.properties = {
        label: "Sand bath",
        canContainLiquids: false,
        defaultAppearance: {
            width: 200,
            height: 80,
            sandRatio: 0.6
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 120, max: 300
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 40, max: 150
            },
            {
                spec: "slider", key: "sandRatio", label: "Amount of sand",
                min: 0.0, max: 1.0, step: 0.01
            },
        ],
    };
    return SandBath;
}());



/***/ }),

/***/ "CF+F":
/*!*********************************************!*\
  !*** ./src/apparatus/library/metalstrip.ts ***!
  \*********************************************/
/*! exports provided: MetalStrip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetalStrip", function() { return MetalStrip; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var MetalStrip = /** @class */ (function () {
    function MetalStrip() {
    }
    MetalStrip.prototype.render = function (appearance) {
        var graphic = createShape(appearance);
        graphic.closePath();
        var baseColor = appearance.color;
        // Set the stroke by darkening the base color.
        graphic.withStroke("thinner", baseColor.color().darken(0.2).hex());
        // Create a gradient composed of:
        // baseColor -------- highlightColor ------ baseColor
        // where the highlightColor is baseColor lightened up.
        // Make the highlight section tighter by moving the
        // baseColor stops to position closer to 0.5.
        var fillGradient = [
            [baseColor, 0.3],
            [baseColor.color().lighten(0.2).hex(), 0.5],
            [baseColor, 0.7]
        ];
        graphic.setGradientFill("right-down", fillGradient);
        var hitShape = graphic.strokeBounds.expand(10).toShape();
        return { graphic: graphic, hitShape: hitShape };
    };
    MetalStrip.properties = {
        label: "Metal Strip",
        canContainLiquids: false,
        defaultAppearance: {
            length: 60,
            width: 20,
            shape: "bent",
            color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].copper,
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 40, max: 100
            },
            {
                spec: "slider", key: "width", label: "Width",
                min: 5, max: 50
            },
            {
                spec: "color", key: "color", label: "Color/Material",
                swatches: {
                    "Zinc": "#BAC4C8",
                    "Silver": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].lightMetal,
                    "Aluminium": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].aluminum,
                    "Gold": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].gold,
                    "Copper": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].copper,
                    "Iron": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].darkMetal,
                }
            },
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "straight", label: "Straight" },
                    { value: "bent", label: "Bent" }
                ]
            }
        ],
    };
    return MetalStrip;
}());

function createShape(appearance) {
    var length = appearance.length;
    var width = appearance.width;
    switch (appearance.shape) {
        case "straight":
            return new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[0, length]], [[width, length]], [[width, 0]]));
        case "bent":
            var bendheight = length * 0.6;
            var twistOffset = width * 1.25;
            var curveHandleLength = bendheight * 0.4;
            return new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0]], [[width, 0]], [[width, bendheight], undefined, [0, curveHandleLength]], [[twistOffset, length]], [[twistOffset - width, length]], [[0, bendheight], [0, curveHandleLength]]));
    }
}


/***/ }),

/***/ "D6l8":
/*!******************************************!*\
  !*** ./src/apparatus/library/gas_jar.ts ***!
  \******************************************/
/*! exports provided: GasJar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GasJar", function() { return GasJar; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var GasJar = /** @class */ (function () {
    function GasJar() {
    }
    GasJar.prototype.render = function (appearance) {
        var height = appearance.height;
        var width = 30 + appearance.height / 10; // 50x200, 60x300
        var bottomLid = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[-6, 10]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottomLid, width / 2);
        bottomLid.closePath();
        var wall1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, -height]]));
        var wall2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[width, 0]], [[width, -height]]));
        var liquiMask = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, -height));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bottomLid, wall1, wall2]);
        var pivot = graphic.bounds.center;
        var hitShapes = [graphic.bounds.clone().toShape()];
        // Top lid.
        if (appearance.lid != "none") {
            var topLid = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[-6, -10]]));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(topLid, width / 2);
            topLid.closePath();
            switch (appearance.lid) {
                case "lifted":
                    topLid.position.y -= height + 40;
                    break;
                case "edge":
                    topLid.position.y -= height;
                    topLid.position.x += width / 1.7;
                    break;
                case "closed":
                    topLid.position.y -= height;
                    break;
                case "tilted":
                    topLid.position.y -= height + 10;
                    topLid.position.x += width * 2;
                    topLid.rotate(30);
                    break;
                case "side":
                    topLid.position.y -= height - 10;
                    topLid.position.x += width + 20;
                    topLid.rotate(180);
            }
            graphic.addChild(topLid);
            hitShapes.push(topLid.bounds.toShape());
        }
        var snapping = [bottomLid.placeable()];
        if (appearance.lid == "none" || appearance.lid == "closed" || appearance.lid == "side") {
            snapping.push(__assign(__assign({}, graphic.placeable()), { facing: 180 }));
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: hitShapes,
            liquidMask: liquiMask,
            pivot: pivot,
            snapping: snapping
        };
    };
    GasJar.properties = {
        label: "Gas Jar",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            lid: "closed",
            height: 200,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 200, max: 300,
            },
            {
                spec: "radio", key: "lid", label: "Lid",
                options: [
                    { value: "none", label: "No lid" },
                    { value: "closed", label: "Closed" },
                    { value: "edge", label: "On the edge" },
                    { value: "lifted", label: "Lifted above" },
                    { value: "tilted", label: "Lift tilted" },
                    { value: "side", label: "To one side" },
                ]
            }
        ],
    };
    return GasJar;
}());



/***/ }),

/***/ "DUYo":
/*!***********************************!*\
  !*** ./src/layout/modals/new.tsx ***!
  \***********************************/
/*! exports provided: NewTemplateModal, Template */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NewTemplateModal", function() { return NewTemplateModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Template", function() { return Template; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var file_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! file/api */ "TDnk");
/* harmony import */ var file_loading__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! file/loading */ "WJ9a");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/api */ "3kYy");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







/** "About Chemix" modal dialog. */
var NewTemplateModal = /** @class */ (function (_super) {
    __extends(NewTemplateModal, _super);
    function NewTemplateModal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            state: "not loaded",
            isOpened: false,
            diagrams: []
        };
        return _this;
    }
    NewTemplateModal.prototype.onOpen = function () {
        if (this.state.state === "not loaded") {
            this.setState({ state: "loading" });
            this.fetch();
        }
    };
    NewTemplateModal.prototype.confirmPrompt = function () {
        if (confirm("This will erase your current diagram. Are you sure?") == true) {
            return true;
        }
        return false;
    };
    NewTemplateModal.prototype.onCreateBlankFile = function () {
        if (!this.confirmPrompt())
            return;
        var blankDocument = file_loading__WEBPACK_IMPORTED_MODULE_3__["ChemixDocuments"].getBlankDocument();
        var blankDiagram = {
            id: "",
            title: "",
            thumbnail: "",
            modified: new Date(),
            created: new Date(),
            rawData: JSON.stringify(blankDocument),
        };
        Object(file_api__WEBPACK_IMPORTED_MODULE_2__["openDiagram"])(blankDiagram, /*isTemplate*/ true);
        this.close();
    };
    NewTemplateModal.prototype.onCreateFromCloudTemplate = function (rawDiagram) {
        if (!this.confirmPrompt())
            return;
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("NewFromTemplate", rawDiagram.title);
        Object(file_api__WEBPACK_IMPORTED_MODULE_2__["openDiagram"])(rawDiagram, /*isTemplate*/ true);
        this.close();
    };
    NewTemplateModal.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"].Container, { parent: this, class: "template-modal", title: "Create New", icon: this.state.state == "loading" ? "loading" : "fa-sparkles" },
            react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("h3", null, "Select template"),
            react__WEBPACK_IMPORTED_MODULE_4__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_5__["TierContext"].Consumer, null, function (tiers) {
                return react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "row file-grid" },
                    react__WEBPACK_IMPORTED_MODULE_4__["createElement"](Template, { key: "Blank", title: "Blank", thumbnail: "./images/blank.png", tiers: tiers, onOpen: function () { return _this.onCreateBlankFile(); } }),
                    _this.state.state == "loading"
                        ? react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("h4", { key: "loading", className: "d-inline-block text-muted ml-3" }, "Loading...")
                        : undefined,
                    _this.state.diagrams.map(function (d) {
                        return react__WEBPACK_IMPORTED_MODULE_4__["createElement"](Template, { key: d.id, title: d.title, thumbnail: d.thumbnail, id: d.id, tiers: tiers, onOpen: function () { return _this.onCreateFromCloudTemplate(d); } });
                    }));
            }));
    };
    /** Fetches and updates the current state with latest templates. */
    NewTemplateModal.prototype.fetch = function () {
        var _this = this;
        Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagram/templates", "GET", null, undefined, {
            success: function (response) {
                _this.setState({
                    state: "done",
                    diagrams: response.diagrams.map(function (d) { return ({
                        id: d.id,
                        title: d.title,
                        thumbnail: d.thumbnailBase64,
                        rawData: d.data,
                        created: new Date(d.created),
                        modified: new Date(d.modified),
                    }); })
                });
            },
            generic: function () {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("NewTemplate:FailToLoad");
            }
        });
    };
    return NewTemplateModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"]));

var Template = function (props) {
    // HACK: If the name ends in "_", it's a template that requires Boost.
    var isBoost = props.title.charAt(props.title.length - 1) == "_";
    var tier = { tier: isBoost ? "boost" : undefined };
    var isAllowed = props.tiers.allow(tier);
    return react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "col-12 col-sm-4 col-md-3 mb-2 pr-2" },
        react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("div", { className: "thumbnail mb-1" },
            react__WEBPACK_IMPORTED_MODULE_4__["createElement"]("img", { src: props.thumbnail, className: "img-thumbnail", onClick: isAllowed
                    ? props.onOpen
                    : function () { return props.tiers.popup("NewTemplate-" + props.title); } })),
        isBoost ? props.title.substring(0, props.title.length - 1) : props.title,
        props.tiers.badge(tier));
};


/***/ }),

/***/ "DiD4":
/*!**************************************************!*\
  !*** ./src/apparatus/library/gas_wash_bottle.ts ***!
  \**************************************************/
/*! exports provided: GasWashBottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GasWashBottle", function() { return GasWashBottle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var GasWashBottle = /** @class */ (function () {
    function GasWashBottle() {
    }
    GasWashBottle.prototype.render = function (appearance) {
        var tubeHWidth = 10 / 2;
        var flipped = appearance.endsFacing == "same";
        var shift = appearance.extension * 80;
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[tubeHWidth, 0], undefined, [5, 0]], [[15, 12], [0, -7]], [[15, 52], undefined, [0, 3]], [[30, 60], [0, -5]], [[30, 200], undefined, [20, 1]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottle);
        bottle.insertSegments(2, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[15, 20]], // A
        [[20, 20], undefined, [10, 0]], // B
        [[30, 10]], // C
        [[30, -10], undefined, [0, -14]], // D
        [[50, -30], [-13, 0]], // E
        [[60, -30]], // F (mouth)
        [[60, -20]], // F
        [[50, -20], undefined, [-10, 0]], // E
        [[40, -10]], // D
        [[40, 10], undefined, [0, 13]], // C
        [[20, 30], [13, 0]], // B
        [[15, 30]]));
        var liquidMask = bottle.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(bottle, 8);
        var tube = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, 180]], // C
        [[-5, -10], undefined, [0, -14]], // D
        [[15, -30], [-13, 0]], // E
        [[25, -30]], // F (mouth)
        [[25, -20]], // F
        [[15, -20], undefined, [-10, 0]], // E
        [[5, -10]], // D
        [[5, 180], undefined, [0, 13]]));
        tube.scale(flipped ? 1 : -1, 1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        tube.position.y -= shift;
        graphic.addChildren(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(tube, 4).children);
        tube.remove();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(60, -25), facing: 90 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-25 * (flipped ? -1 : 1), -25 - shift), facing: flipped ? 90 : -90 }
            ]
        };
    };
    GasWashBottle.properties = {
        label: "Gas Wash Bottle",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            endsFacing: "opposite",
            extension: 0.1
        },
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.35 }),
        appearanceSpecs: [
            {
                spec: "radio", key: "endsFacing", label: "Ends facing",
                options: [
                    { value: "opposite", label: "Opposite direction" },
                    { value: "same", label: "Same direction" },
                ],
            },
            {
                spec: "slider", key: "extension", label: "Extension",
                min: 0, max: 1, step: 0.01
            }
        ],
    };
    return GasWashBottle;
}());



/***/ }),

/***/ "ED6b":
/*!******************************************************!*\
  !*** ./src/apparatus/library/heating/boilingtube.ts ***!
  \******************************************************/
/*! exports provided: BoilingTube, BoilingTubeWithSideArm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoilingTube", function() { return BoilingTube; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoilingTubeWithSideArm", function() { return BoilingTubeWithSideArm; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "UCWy");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var BoilingTube = /** @class */ (function () {
    function BoilingTube() {
    }
    BoilingTube.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"]();
        graphic.addSegments(Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height - width / 2], undefined, [0, width / 1.55]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(graphic, width / 2);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(graphic, 2.0);
        var liquidMask = graphic.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](0, 0, width, height));
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width / 2, 0), diameter: width, facing: 0 }
            ]
        };
    };
    BoilingTube.properties = {
        label: "Boiling tube",
        canContainLiquids: true,
        defaultAppearance: {
            width: 40,
            height: 180,
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "width",
                label: "Width",
                min: 20,
                max: 60,
            },
            {
                spec: "slider",
                key: "height",
                label: "Height",
                min: 75,
                max: 300,
            },
        ]
    };
    return BoilingTube;
}());

var BoilingTubeWithSideArm = /** @class */ (function () {
    function BoilingTubeWithSideArm() {
    }
    BoilingTubeWithSideArm.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var offset = 30;
        var holeRadius = appearance.holeDiameter / 2;
        var sideArmLength = 15;
        var tube = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"]();
        tube.addSegments(Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height - width / 2], undefined, [0, width / 1.55]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(tube, width / 2);
        tube.insertSegments(3, Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[width, offset + holeRadius]], [[width + sideArmLength, offset + holeRadius]], [[width + sideArmLength, offset - holeRadius]], [[width, offset - holeRadius]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(tube, 2.0);
        var liquidMask = tube.clone();
        var graphics = Object(_draw__WEBPACK_IMPORTED_MODULE_1__["breakPath"])(tube, 6);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(graphics);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](0, 0, width + sideArmLength, height));
        return {
            graphic: graphics,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "connectable", at: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width + sideArmLength, offset), facing: 90, },
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width / 2, 0), diameter: width, facing: 0 }
            ]
        };
    };
    BoilingTubeWithSideArm.properties = {
        label: "Boiling Tube with side arm",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: __assign(__assign({}, BoilingTube.properties.defaultAppearance), { holeDiameter: 10 }),
        appearanceSpecs: __spreadArrays(BoilingTube.properties.appearanceSpecs, [
            {
                spec: "slider", key: "holeDiameter", label: "Hole diameter",
                min: 8, max: 20,
            }
        ]),
    };
    return BoilingTubeWithSideArm;
}());



/***/ }),

/***/ "EbaH":
/*!**************************************************!*\
  !*** ./src/apparatus/library/shapes/cylinder.ts ***!
  \**************************************************/
/*! exports provided: Cylinder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cylinder", function() { return Cylinder; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var ext_color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ext/color */ "zyMn");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





var Cylinder = /** @class */ (function () {
    function Cylinder() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 6, maxX: 250,
                minY: 8, maxY: 300,
                toAppearance: function (p) { return ({
                    diameter: p.x * 2,
                    height: p.y * 2
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.diameter / 2, a.height / 2); },
                scale: 1.0,
            }
        ];
    }
    Cylinder.isBoostRequiredForAppearance = function (appearance) {
        return appearance.shading === "3d";
    };
    Cylinder.prototype.render = function (appearance) {
        var diameter = appearance.diameter, height = appearance.height, stroke = appearance.stroke, style = appearance.style, strokeThickness = appearance.strokeThickness, shading = appearance.shading;
        var top = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, diameter, diameter / 2, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
        var bottom = top.clone();
        top.position.y -= height / 2;
        bottom.position.y += height / 2;
        var body = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, diameter, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
        var body3d = body.unite(bottom).subtract(top);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([body3d, top]);
        if (style == "full" || style == "stroke-only") {
            var outline = body.unite(bottom).unite(top);
            outline.withStroke(strokeThickness, stroke);
            graphic.addChild(outline);
        }
        var fillColor = apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].fillColor(appearance).color();
        if (shading == "3d") {
            top.withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].simple(fillColor.ladd(10)));
            body3d.withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder(fillColor, 3));
        }
        else {
            top.fillColor = fillColor.ladd(10).string();
            body3d.withFill(fillColor.string());
        }
        bottom.remove();
        body.remove();
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].bounds(graphic)
        };
    };
    Cylinder.properties = {
        label: "Cylinder",
        canContainLiquids: false,
        defaultAppearance: __assign(__assign({}, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].defaultAppearance), { diameter: 120, height: 150, shading: "flat" }),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].header,
            {
                spec: "radio", key: "shading", label: "Shading",
                options: [
                    { value: "flat", label: "Flat" },
                    { value: "3d", label: "3D", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            }
        ]),
    };
    return Cylinder;
}());



/***/ }),

/***/ "Ej3j":
/*!***************************************!*\
  !*** ./src/layout/modals/welcome.tsx ***!
  \***************************************/
/*! exports provided: WelcomeModal, maybeShowWelcome, SplashImage, PromoStat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WelcomeModal", function() { return WelcomeModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maybeShowWelcome", function() { return maybeShowWelcome; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SplashImage", function() { return SplashImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromoStat", function() { return PromoStat; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_specList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/specList */ "OsNy");
/* harmony import */ var browser_cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! browser/cookie */ "lC4y");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var ext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ext/js */ "A5Ua");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var tutorial__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tutorial */ "xhqc");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







var MAX_SHOW_WELCOME_SCREEN = 3;
/** Welcome modal dialog. */
var WelcomeModal = /** @class */ (function (_super) {
    __extends(WelcomeModal, _super);
    function WelcomeModal() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_5__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_3__["Remodal"].Container, { parent: _this, class: "welcome-modal", title: null, center: true },
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](SplashImage, null),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "ml-4 mb-1 text-left", style: { marginTop: '-80px' } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("img", { src: "./images/64.png", className: "mb-1", srcSet: "./images/64.png 1x, ./images/128.png 2x" })),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("h1", null,
                "Draw science experiments and lab\u00A0instructions\u00A0easily with ",
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "boost-text-gradient" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("b", null, "Chemix"))),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "mx-3 chemix-green" },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "d-inline-block mr-3" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fas fa-vial mr-1" }),
                    apparatus_specList__WEBPACK_IMPORTED_MODULE_1__["releasedItemsCount"],
                    " available items"),
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "d-inline-block mr-3" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fas fa-image mr-1" }),
                    "Unlimited image downloads"),
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "d-inline-block mr-3" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fas fa-cloud-upload mr-1" }),
                    "Save & edit anywhere")),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "button-group my-4" },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "ui-button highlight mb-2 hide-if-too-narrow", onClick: function () { writeCookieToNotShowAgain(); Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Welcome:Tutorial"); Object(tutorial__WEBPACK_IMPORTED_MODULE_6__["runTutorial"])(); }, "data-remodal-action": "confirm" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fas fa-magic mr-2" }),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("b", null, "Quick Tour")),
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "ui-button", onClick: function () { writeCookieToNotShowAgain(); Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Welcome:Skip"); }, "data-remodal-action": "confirm" }, "Skip")),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("p", { className: "mx-auto faded", style: { maxWidth: "66%" } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"](PromoStat, null)))); };
        return _this;
    }
    return WelcomeModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_3__["Remodal"]));

function maybeShowWelcome(welcome) {
    var _a;
    var welcomeScreenShown = +((_a = browser_cookie__WEBPACK_IMPORTED_MODULE_2__["Cookie"].read("WELCOME_SCREEN_SHOWN")) !== null && _a !== void 0 ? _a : "0");
    if (welcomeScreenShown < MAX_SHOW_WELCOME_SCREEN) {
        browser_cookie__WEBPACK_IMPORTED_MODULE_2__["Cookie"].write("WELCOME_SCREEN_SHOWN", "" + (welcomeScreenShown + 1));
        welcome.open();
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Welcome:Open");
    }
}
function writeCookieToNotShowAgain() {
    browser_cookie__WEBPACK_IMPORTED_MODULE_2__["Cookie"].write("WELCOME_SCREEN_SHOWN", "" + MAX_SHOW_WELCOME_SCREEN);
}
var SplashImage = function () { return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "splash-image" }); };
var PromoStat = function () { return react__WEBPACK_IMPORTED_MODULE_5__["createElement"](react__WEBPACK_IMPORTED_MODULE_5__["Fragment"], null,
    "In 2020, we helped\u00A0",
    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "chemix-green" },
        (109521).toLocaleFixed(0),
        " people"),
    " create\u00A0",
    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "chemix-green" },
        (220530).toLocaleFixed(0),
        " diagrams"),
    ".",
    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("br", null),
    "That's 1\u00A0diagram every\u00A02.4\u00A0minutes."); };


/***/ }),

/***/ "EvGu":
/*!************************************************!*\
  !*** ./src/layout/editor/editor_container.tsx ***!
  \************************************************/
/*! exports provided: EditorContainer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorContainer", function() { return EditorContainer; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var arrows_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! arrows/tool */ "X3Bg");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_move__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/move */ "c+g7");
/* harmony import */ var editing_multitool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/multitool */ "nn1V");
/* harmony import */ var editing_pathedit_tool__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! editing/pathedit/tool */ "R1xP");
/* harmony import */ var editing_rotation_rotation_overlay__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! editing/rotation/rotation_overlay */ "Kszg");
/* harmony import */ var editing_zoom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! editing/zoom */ "its7");
/* harmony import */ var freehand_tool__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! freehand/tool */ "VW72");
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var layout_editor_editor_canvas__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! layout/editor/editor_canvas */ "imNg");
/* harmony import */ var layout_editor_selection_overlay__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! layout/editor/selection_overlay */ "TpOi");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! types */ "p21n");
/* harmony import */ var view_pan__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! view/pan */ "gJPE");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



















/** How many pixels to move by when moving items using keyboard. */
var MOVE_BY_KEY_DISTANCE = 10;
/** How much to multiply the distance by when moving by large increments. */
var MOVE_BY_KEY_LARGE_MULTIPLIER = 5;
/** How much to multiply the distance by when moving by small increments. */
var MOVE_BY_KEY_SMALL_MULTIPLIER = 0.2;
/**
 * Container for the area that contains the editor, i.e.
 * the canvas, zoom slider, property panel but e.g.
 * not the sidebar.
 */
var EditorContainer = /** @class */ (function (_super) {
    __extends(EditorContainer, _super);
    function EditorContainer(props) {
        var _this = _super.call(this, props) || this;
        /** Ref to the canvas editor. */
        _this.editorCanvasRef = react__WEBPACK_IMPORTED_MODULE_13__["createRef"]();
        /** Ref to the rotation overlay. */
        _this.rotationOverlayRef = react__WEBPACK_IMPORTED_MODULE_13__["createRef"]();
        /** Ref to the selection overlay. */
        _this.selectionOverlayRef = react__WEBPACK_IMPORTED_MODULE_13__["createRef"]();
        _this.state = {
            isMoving: false,
            isInteracting: false,
        };
        return _this;
    }
    EditorContainer.prototype.componentDidMount = function () {
        var _this = this;
        var editorCanvas = this.editorCanvasRef.current;
        // Update zoom.
        this.setZoom(this.props.zoom);
        // Set up tools and activate.
        this.arrowTool = new arrows_tool__WEBPACK_IMPORTED_MODULE_2__["default"](editorCanvas.layers, this),
            this.allTools = {
                select: new editing_multitool__WEBPACK_IMPORTED_MODULE_5__["default"](editorCanvas.layers, this),
                arrow: this.arrowTool,
                pan: new view_pan__WEBPACK_IMPORTED_MODULE_17__["PanTool"](this),
                freehand: new freehand_tool__WEBPACK_IMPORTED_MODULE_9__["FreehandTool"](this),
                pathedit: new editing_pathedit_tool__WEBPACK_IMPORTED_MODULE_6__["PathEditTool"](this)
            };
        // Activate tool.
        this.currentTool = this.allTools[this.props.tool];
        this.currentTool.activate();
        // Set up keyboard shortcuts.
        Object(keyboard__WEBPACK_IMPORTED_MODULE_10__["registerKeyboardShortcutHandler"])(function (e) {
            // Moving by key. Hold shift to make big jumps.
            if (e.which >= keyboard__WEBPACK_IMPORTED_MODULE_10__["Keys"].LEFT && e.which <= keyboard__WEBPACK_IMPORTED_MODULE_10__["Keys"].DOWN) {
                var direction = Object(keyboard__WEBPACK_IMPORTED_MODULE_10__["keyToDirection"])(e.which);
                var multiplier = ((e.ctrlKey || e.metaKey) && e.shiftKey)
                    ? MOVE_BY_KEY_SMALL_MULTIPLIER
                    : (e.shiftKey
                        ? MOVE_BY_KEY_LARGE_MULTIPLIER
                        : 1);
                var distance = MOVE_BY_KEY_DISTANCE * multiplier;
                _this.moveByKey(direction, distance);
            }
        });
    };
    // TODO: Clean this up, this is needed to compute the selection
    // box correctly but does not grant access to arrows.
    EditorContainer.prototype.getApparatusComponent = function (id) {
        return this.editorCanvasRef.current.getApparatusComponent(id);
    };
    EditorContainer.prototype.getObjectComponent = function (id) {
        return this.editorCanvasRef.current.getObjectComponent(id);
    };
    EditorContainer.prototype.setArrow = function (data) {
        this.editorCanvasRef.current.setState({
            arrow: data
        });
    };
    EditorContainer.prototype.componentDidUpdate = function (prevProps) {
        var _this = this;
        // Activate current tool, if changed.
        if (prevProps.tool != this.props.tool) {
            this.currentTool = this.allTools[this.props.tool];
            this.currentTool.activate();
        }
        // Update the selection and rotation overlays.
        var selectionOverlay = this.selectionOverlayRef.current;
        var selectedItems = this.props.selected.items;
        var selectionMetrics = this.editorCanvasRef.current.computeSelectionMetrics();
        // Notify rotation handler of components corresponding to currently selected items.
        selectionOverlay.rotationHandler.selection = selectionMetrics;
        selectionOverlay.rotationHandler.selectedApparatus = selectedItems.map(function (item) { return _this.getApparatusComponent(item.id); }).filter(function (a) { return a !== null; });
        selectionOverlay.rotationHandler.selectedArrows = this.props.selected.arrows.map(function (a) { return (_this.getObjectComponent(a.id)); });
        // Convert from Paper to HTML coordinates. These are used by the
        // overlay components that are in HTML DOM rather than canvas.
        var convertedMetrics = Object(types__WEBPACK_IMPORTED_MODULE_16__["convertFromPaperToHTMLCoordinates"])(selectionMetrics);
        // Update state on the selection overlay.
        this.selectionOverlayRef.current.setState({
            isVisible: !this.props.selected.isEmpty,
            center: convertedMetrics.pivot,
            bounds: convertedMetrics.bounds,
        });
        // Update state on the rotation overlay.
        this.rotationOverlayRef.current.setState({
            pivot: convertedMetrics.pivot
        });
    };
    EditorContainer.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_13__["createElement"]("div", { id: "editor-container", key: "editorContainer" },
            react__WEBPACK_IMPORTED_MODULE_13__["createElement"](layout_editor_editor_canvas__WEBPACK_IMPORTED_MODULE_11__["EditorCanvasComponent"], __assign({}, this.props, { key: "editor_canvas", tool: this.props.tool, ref: this.editorCanvasRef, isMoving: this.state.isMoving })),
            react__WEBPACK_IMPORTED_MODULE_13__["createElement"](editing_rotation_rotation_overlay__WEBPACK_IMPORTED_MODULE_7__["RotationOverlay"], { key: "rotationOverlay", ref: this.rotationOverlayRef }),
            react__WEBPACK_IMPORTED_MODULE_13__["createElement"](layout_editor_selection_overlay__WEBPACK_IMPORTED_MODULE_12__["SelectionOverlay"], { key: "selectionOverlay", ref: this.selectionOverlayRef, hideDueToInteraction: this.state.isInteracting || this.state.isMoving, onStartRotation: function (t) { return _this.onStartRotation(t); }, onUpdateRotation: function (a) { return _this.onUpdateRotation(a); }, onEndRotation: function () { return _this.onEndRotation(); } }),
            react__WEBPACK_IMPORTED_MODULE_13__["createElement"](editing_zoom__WEBPACK_IMPORTED_MODULE_8__["ZoomSlider"], { key: "zoomSlider", zoom: this.props.zoom, onStartZoom: function () { return _this.onStartZoom(); }, onUpdateZoom: function (z) { return _this.onUpdateZoom(z); }, onEndZoom: function () { return _this.onEndZoom(); } }));
    };
    // Temporarily sets the zoom to this value.
    EditorContainer.prototype.setZoom = function (zoom) {
        var canvasEditor = this.editorCanvasRef.current;
        if (canvasEditor) {
            canvasEditor.setZoom(zoom);
        }
    };
    EditorContainer.prototype.onStartRotation = function (type) {
        this.setIsInteracting(true);
        this.rotationOverlayRef.current.setState({
            type: type,
            angle: 0
        });
    };
    EditorContainer.prototype.onUpdateRotation = function (angle) {
        this.rotationOverlayRef.current.setState({ angle: angle });
    };
    EditorContainer.prototype.onEndRotation = function () {
        this.setIsInteracting(false);
        this.rotationOverlayRef.current.setState({ type: undefined });
        Object(keyboard__WEBPACK_IMPORTED_MODULE_10__["focusMainApp"])();
    };
    EditorContainer.prototype.onStartZoom = function () {
        this.setIsInteracting(true);
    };
    EditorContainer.prototype.onUpdateZoom = function (zoom) {
        this.editorCanvasRef.current.setZoom(zoom);
    };
    EditorContainer.prototype.onEndZoom = function () {
        this.setIsInteracting(false);
    };
    EditorContainer.prototype.setIsInteracting = function (value) {
        this.setState({ isInteracting: value });
    };
    EditorContainer.prototype.setIsMovingItems = function (isMoving) {
        this.setState({ isMoving: isMoving });
    };
    EditorContainer.prototype.moveByKey = function (direction, distance) {
        var selectedItemIds = store_store__WEBPACK_IMPORTED_MODULE_15__["default"].selectedObjectsID();
        if (selectedItemIds.length == 0)
            return;
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("MoveByKey");
        var delta = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["unitVector"])(direction).multiply(distance);
        command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].executeReplacingLastCommand(function (lastCommand) {
            if (!(lastCommand instanceof editing_move__WEBPACK_IMPORTED_MODULE_4__["Move"]))
                return false;
            if (!store_id__WEBPACK_IMPORTED_MODULE_14__["ID"].equals(lastCommand.ids, selectedItemIds))
                return false;
            var combinedDelta = Object(types__WEBPACK_IMPORTED_MODULE_16__["add"])(delta, lastCommand.delta);
            return new editing_move__WEBPACK_IMPORTED_MODULE_4__["Move"](selectedItemIds, combinedDelta);
        }, new editing_move__WEBPACK_IMPORTED_MODULE_4__["Move"](selectedItemIds, delta));
    };
    /** Exports current canvas contents to various image formats. */
    EditorContainer.prototype.exportImages = function () {
        return this.editorCanvasRef.current.export();
    };
    EditorContainer.prototype.exportThumbnail = function () {
        return this.editorCanvasRef.current.exportThumbnail();
    };
    EditorContainer.prototype.setArrowTemplate = function (data) {
        this.arrowTool.updateTemplateArrow(data);
    };
    return EditorContainer;
}(react__WEBPACK_IMPORTED_MODULE_13__["Component"]));



/***/ }),

/***/ "FDe9":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/physics/slotted_weight.ts ***!
  \*********************************************************/
/*! exports provided: SlottedWeight */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SlottedWeight", function() { return SlottedWeight; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SlottedWeight = /** @class */ (function () {
    function SlottedWeight() {
    }
    SlottedWeight.prototype.render = function (appearance) {
        var showHook = appearance.hook, hookLength = appearance.hookLength, count = appearance.count, width = appearance.width, height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([]);
        for (var i = 0; i < count; i++) {
            graphic.addChild(paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, i * height, width, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 3.0)
                .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lightMetal.color()))
                .withStroke("thin", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].mediumMetal));
        }
        if (showHook) {
            var hook = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, -hookLength], , [10, -5]], [[0, -hookLength - 20], [10, 0], [-10, 0]], [[-10, -hookLength - 10]])).withStroke("default");
            graphic.addChild(hook);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: showHook ? Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -hookLength - 20) : undefined,
            snapping: [
                { type: "placeable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height * count) },
                { type: "placeable_surface", start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-width / 2, 0), end: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, 0) }
            ]
        };
    };
    SlottedWeight.properties = {
        label: "Slotted Weight",
        canContainLiquids: false,
        defaultAppearance: {
            hook: true,
            hookLength: 40,
            count: 1,
            width: 60,
            height: 18,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "count", label: "Number",
                min: 1, max: 10,
            },
            {
                spec: "slider", key: "width", label: "Weight diameter",
                min: 20, max: 120, unit: "mm"
            },
            {
                spec: "slider", key: "height", label: "Weight thickness",
                min: 8, max: 25, unit: "mm"
            },
            { spec: "checkbox", key: "hook", label: "Hanger hook", subLabel: "Show" },
            {
                spec: "slider", key: "hookLength", label: "",
                min: 10, max: 100, unit: "mm"
            }
        ],
    };
    return SlottedWeight;
}());



/***/ }),

/***/ "FH+X":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/container/eppendorfTube.ts ***!
  \**********************************************************/
/*! exports provided: EppendorfTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EppendorfTube", function() { return EppendorfTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var EppendorfTube = /** @class */ (function () {
    function EppendorfTube() {
    }
    EppendorfTube.prototype.render = function (appearance) {
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[8, 0]], [[8, appearance.size - 25]], [[0, appearance.size], appearance.bottom == "round" ? [10, 0] : [5, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        var liquidMask = shape.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, 45), 0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10));
        // Create a cap and the linking plastic.
        var capTop = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-8, -4), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(8, -4));
        capTop.strokeWidth = 5.0 * appearance.zoom;
        capTop.strokeCap = "round";
        capTop.setGradientStroke("right", [["#aaaaaa", 0.0], ["#999999", 1.0]]);
        var capInsert = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -4, 14, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0);
        capInsert.setGradientFill("right", [["#666666", 0.0], ["#444444", 1.0]]);
        capInsert.opacity = 0.45;
        var linking = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-8, 0], undefined, [-10, 0]], appearance.cap == "open" ? [[-18, -9]] : [[-8, -4], [-10, -3]]));
        linking.withStroke(3.0 * appearance.zoom, "#cccccc");
        if (appearance.cap == "open") {
            capTop.rotate(-130, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-14, -4));
            capInsert.rotate(-130, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-14, -4));
        }
        graphic.addChildren([linking, shape, capInsert, capTop]);
        // Finally, zoom the graphic.
        graphic.scale(appearance.zoom);
        liquidMask.scale(appearance.zoom, graphic.bounds.center);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            pivot: shape.bounds.center,
        };
    };
    EppendorfTube.properties = {
        label: "Eppendorf Tube",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            size: 50,
            zoom: 1.0,
            cap: "open",
            bottom: "sharp"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 50, max: 70, step: 1,
            },
            {
                spec: "radio", key: "cap", label: "Cap",
                options: [
                    { value: "open", label: "Open" },
                    { value: "closed", label: "Closed" },
                ],
            },
            {
                spec: "radio", key: "bottom", label: "Bottom shape",
                options: [
                    { value: "sharp", label: "Sharp" },
                    { value: "round", label: "Round" },
                ],
            },
            {
                spec: "slider", key: "zoom", label: "Zoom",
                min: 1.0, max: 2.0, step: 0.01, unit: "%"
            },
        ],
    };
    return EppendorfTube;
}());



/***/ }),

/***/ "FK9k":
/*!*********************************!*\
  !*** ./src/editing/deleting.ts ***!
  \*********************************/
/*! exports provided: deleteSelected */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteSelected", function() { return deleteSelected; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/store */ "uFCc");





/** Deletes currently selected items. */
function deleteSelected(source) {
    // Retrieve currently selected items
    var items = store_store__WEBPACK_IMPORTED_MODULE_4__["default"].selectedItems();
    var arrows = store_store__WEBPACK_IMPORTED_MODULE_4__["default"].selectedArrows();
    if (items.length + arrows.length == 0)
        return;
    var deleteCommand = new command_basic__WEBPACK_IMPORTED_MODULE_2__["DeleteApparatus"](items);
    var deleteArrowCommands = new arrows_command__WEBPACK_IMPORTED_MODULE_1__["DeleteArrows"](arrows);
    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_3__["Sequence"]([deleteCommand, deleteArrowCommands]));
    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("DeleteSelected", source);
}


/***/ }),

/***/ "FRyv":
/*!******************************************!*\
  !*** ./src/layout/top_bar/main_menu.tsx ***!
  \******************************************/
/*! exports provided: MainMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainMenu", function() { return MainMenu; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var browser_cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! browser/cookie */ "lC4y");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var layout_modals_export_image__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! layout/modals/export_image */ "gQ5z");
/* harmony import */ var layout_modals_help__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! layout/modals/help */ "or+g");
/* harmony import */ var layout_modals_new__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! layout/modals/new */ "DUYo");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! tiers/badge */ "2UKY");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var tiers_promo__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! tiers/promo */ "ka5u");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! utils */ "fdqv");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! view/tooltips */ "6T3+");
/* harmony import */ var _store_actions__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../store/actions */ "/GBr");
/* harmony import */ var _view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../view/keyboard_shortucts */ "ZPUE");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
























/**
 * Main menu for main actions: New, Save Image etc.
 */
var MainMenu = /** @class */ (function (_super) {
    __extends(MainMenu, _super);
    function MainMenu() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.helpModalRef = react__WEBPACK_IMPORTED_MODULE_10__["createRef"]();
        _this.exportImageModalRef = react__WEBPACK_IMPORTED_MODULE_10__["createRef"]();
        _this.newModalRef = react__WEBPACK_IMPORTED_MODULE_10__["createRef"]();
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_14__["TierContext"].Consumer, null, function (tiers) { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"](react__WEBPACK_IMPORTED_MODULE_10__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("div", { id: "menubar", key: "menubar" },
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"](MenuItem, { key: "new", title: "New", icon: "s fa-plus-circle", hint: "Create a new blank diagram" + (flags__WEBPACK_IMPORTED_MODULE_5__["default"].isNewTemplatesEnabled ? "<br/>or a diagram from a template" : ""), shortcut: { ctrl: true, key: "N" }, onClick: function () { return _this.createNew("click"); } }),
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"](MenuItem, { key: "download", title: "Download Image", icon: "s fa-download", hint: "Save your diagram<br/> as a picture", shortcut: { ctrl: true, key: "E" }, onClick: function () { return _this.saveImage("click"); }, id: "menu-export" }),
                _this.props.auth.state == "logged_in" ? react__WEBPACK_IMPORTED_MODULE_10__["createElement"](CloudMenu, __assign({}, _this.props)) : react__WEBPACK_IMPORTED_MODULE_10__["createElement"](SignedOutCloudMenu, __assign({}, _this.props)),
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"](MenuItem, { key: "help", title: "Help", icon: "s fa-question-circle", hint: "Tutorial and other help topics", shortcut: { key: "?" }, onClick: function () { return _this.openHelp("click"); }, cssClass: "help" }),
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"](WhatsNew, { key: "whats_new" }),
                flags__WEBPACK_IMPORTED_MODULE_5__["default"].isPromoEnabled ? react__WEBPACK_IMPORTED_MODULE_10__["createElement"](MenuItem, { key: "promo", cssClass: "text-danger", title: "Holiday Deal!", icon: "d fa-hat-santa", iconStyle: Object(tiers_promo__WEBPACK_IMPORTED_MODULE_15__["fadColors"])("white", "crimson"), hint: "Get 15% off for 1 year!", onClick: function () { tiers.popup("XmasPromo MenuItem"); } })
                    : null),
            react__WEBPACK_IMPORTED_MODULE_10__["createElement"](layout_modals_help__WEBPACK_IMPORTED_MODULE_8__["HelpModal"], { key: "help_modal", ref: _this.helpModalRef }),
            react__WEBPACK_IMPORTED_MODULE_10__["createElement"](layout_modals_export_image__WEBPACK_IMPORTED_MODULE_7__["ExportImage"], { key: "export_image", ref: _this.exportImageModalRef }),
            flags__WEBPACK_IMPORTED_MODULE_5__["default"].isNewTemplatesEnabled ? react__WEBPACK_IMPORTED_MODULE_10__["createElement"](layout_modals_new__WEBPACK_IMPORTED_MODULE_9__["NewTemplateModal"], { key: "template_modal", ref: _this.newModalRef }) : null)); })); };
        return _this;
    }
    MainMenu.prototype.componentDidMount = function () {
        var _this = this;
        Object(keyboard__WEBPACK_IMPORTED_MODULE_6__["registerKeyboardShortcutHandler"])(function (e) {
            var isCtrlDown = e.ctrlKey || e.metaKey;
            if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_6__["Keys"].QUESTION_MARK) {
                _this.openHelp("keyboard");
            }
            else if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_6__["Keys"].S && isCtrlDown) {
                e.preventDefault();
                toastr.info("Keyboard shortcut to 'Download Image' has changed to " + Object(_view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_20__["formatShortcuts"])({ ctrl: true, key: "E" }));
            }
            else if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_6__["Keys"].E && isCtrlDown) {
                e.preventDefault();
                _this.saveImage("keyboard");
            }
            else if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_6__["Keys"].N && isCtrlDown) {
                e.preventDefault();
                _this.createNew("keyboard");
            }
        });
    };
    MainMenu.prototype.openHelp = function (source) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Help", source);
        this.helpModalRef.current.open();
    };
    MainMenu.prototype.createNew = function (source) {
        if (flags__WEBPACK_IMPORTED_MODULE_5__["default"].isNewTemplatesEnabled) {
            this.newModalRef.current.open();
            return;
        }
        if (confirm("This will erase your current diagram. Are you sure?") == true) {
            var commands = [
                new command_basic__WEBPACK_IMPORTED_MODULE_3__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_11__["default"].selectedObjectsID()),
                new command_basic__WEBPACK_IMPORTED_MODULE_3__["DeleteApparatus"](store_store__WEBPACK_IMPORTED_MODULE_11__["default"].items()),
                new arrows_command__WEBPACK_IMPORTED_MODULE_1__["DeleteArrows"](store_store__WEBPACK_IMPORTED_MODULE_11__["default"].arrows()),
            ];
            command_command__WEBPACK_IMPORTED_MODULE_4__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_4__["Sequence"](commands));
            command_command__WEBPACK_IMPORTED_MODULE_4__["commandProcessor"].markClean();
            store_store__WEBPACK_IMPORTED_MODULE_11__["appStore"].dispatch(Object(_store_actions__WEBPACK_IMPORTED_MODULE_19__["setCloudDiagram"])(undefined));
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("New", source);
        }
        else {
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("New-Cancelled");
        }
    };
    /**
      * Starts a flow to export image, by opening a modal
      * dialog and triggering the export in the background.
      */
    MainMenu.prototype.saveImage = function (source) {
        var _this = this;
        var exportImageModal = this.exportImageModalRef.current;
        if (exportImageModal.state.isExportInProgress)
            return;
        if (store_store__WEBPACK_IMPORTED_MODULE_11__["default"].items().length + store_store__WEBPACK_IMPORTED_MODULE_11__["default"].arrows().length == 0) {
            toastr.error("Image is empty. Add some items before saving");
            return;
        }
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])('ExportToImage', source);
        /** Log some stats about the image. */
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])('ExportedImageStats::strokeThickness', store_store__WEBPACK_IMPORTED_MODULE_11__["appStore"].getState().theme.strokeThickness);
        exportImageModal.setState({ isExportInProgress: true, exportedImages: undefined });
        exportImageModal.open();
        // Execute on background thread.
        setTimeout(function () {
            // This will potentially take a long time.
            var imageExportOutput = _this.props.file.exportImages();
            exportImageModal.setState({
                isExportInProgress: false,
                exportedImages: imageExportOutput,
            });
        }, 100);
    };
    return MainMenu;
}(react__WEBPACK_IMPORTED_MODULE_10__["Component"]));

var MenuItem = function (item) { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("a", { title: createHint(item), id: item.id, className: item.cssClass + " menuBarItem", onClick: function () { return (item.onClick != undefined ? item.onClick() : {}); }, href: item.href, target: "_blank" },
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("i", { className: "fa" + item.icon, style: item.iconStyle }),
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("span", null,
        item.title,
        " "),
    item.badge ? react__WEBPACK_IMPORTED_MODULE_10__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_13__["Badge"], { tier: item.badge }) : null)); };
var SignedOutCloudMenu = function (props) { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"](Dropdown, { key: "signedOutCloud", id: "cloud-menu", title: "Save to Cloud", icon: "s fa-cloud-upload", hint: "Save your diagrams to the cloud and edit them anywhere." },
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"](DropdownItem, { key: "signin", title: "Sign in to save your diagram.", icon: "s fa-user-circle", hint: "Save diagrams for later editing to the cloud. Access them anywhere. <br/>This feature requires you to sign in.", onClick: function () { return props.openLogin(function () { return props.file.saveToCloud(); }); } }))); };
var CloudMenu = function (props) { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"](Dropdown, { key: "cloud", id: "cloud-menu", title: "Cloud", icon: "s fa-cloud", hint: "Save your diagrams and access previously saved diagrams." },
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"](DropdownItem, { key: "open", title: "Open", icon: "fa-folder-open", hint: "Open diagram from cloud", onClick: function () { return props.file.fetchDiagramsFromCloud(); } }),
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("hr", null),
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"](DropdownItem, { key: "save", title: "Save", icon: "fa-cloud-upload", hint: "Save diagram to cloud", onClick: function () { return props.file.saveToCloud(); } }),
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"](DropdownItem, { key: "save_new", title: "Save as new", icon: "fa-cloud-upload", hint: "Save diagram to cloud", onClick: function () { return props.file.saveToCloud({ forceNew: true }); } }),
    props.cloudDiagramTitle ?
        react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("div", { className: "bg-secondary small mt-1 py-1 pl-4 pr-2" },
            react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("b", null, "Current file:"),
            react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("br", null),
            props.cloudDiagramTitle)
        : undefined)); };
var Dropdown = /** @class */ (function (_super) {
    __extends(Dropdown, _super);
    function Dropdown() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_10__["createRef"]();
        _this.hint = function () {
            // Disable hint on iOS
            return utils__WEBPACK_IMPORTED_MODULE_16__["isIOS"] ? undefined : _this.props.hint;
        };
        _this.render = function () {
            var _a;
            return react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("div", { className: "dropdown", id: (_a = _this.props.id) !== null && _a !== void 0 ? _a : "", ref: _this.ref },
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("div", { className: "menuBarItem", "data-toggle": "dropdown", title: _this.hint() },
                    react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("i", { className: "fa" + _this.props.icon }),
                    _this.props.title,
                    _this.props.badge ? react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("span", { className: "ml-1 badge badge-secondary align-text-top" }, _this.props.badge) : null),
                react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("div", { className: "dropdown-menu dropdown-mainmenu-dropdown bg-dark text-white border" }, _this.props.children));
        };
        return _this;
    }
    Dropdown.prototype.componentDidMount = function () {
        // Fix for Bootstrap dropdown positioning.
        $(this.ref.current).on('show.bs.dropdown', function (e) {
            var menu = $(e.target).find('.dropdown-menu');
            menu.appendTo('body');
            $(this).on('hidden.bs.dropdown', function () {
                menu.appendTo(e.target);
            });
        });
    };
    return Dropdown;
}(react__WEBPACK_IMPORTED_MODULE_10__["Component"]));
var WhatsNew = /** @class */ (function (_super) {
    __extends(WhatsNew, _super);
    function WhatsNew(props) {
        var _this = _super.call(this, props) || this;
        var lastSeenVersion = browser_cookie__WEBPACK_IMPORTED_MODULE_2__["Cookie"].read("LAST_SEEN_VERSION");
        if (lastSeenVersion) {
            lastSeenVersion = lastSeenVersion.match("[0-9]*\.[0-9]*")[0];
        }
        _this.state = { isHighlighted: lastSeenVersion != vars__WEBPACK_IMPORTED_MODULE_17__["Consts"].majorVersion };
        return _this;
    }
    /** Called when the "What's new" link is clicked */
    WhatsNew.prototype.onClick = function () {
        support_beacon__WEBPACK_IMPORTED_MODULE_12__["Bcn"].article(support_beacon__WEBPACK_IMPORTED_MODULE_12__["Articles"].NEW, "modal");
        browser_cookie__WEBPACK_IMPORTED_MODULE_2__["Cookie"].write("LAST_SEEN_VERSION", vars__WEBPACK_IMPORTED_MODULE_17__["Consts"].majorVersion);
        this.setState({ isHighlighted: false });
    };
    WhatsNew.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_10__["createElement"](MenuItem, { cssClass: this.state.isHighlighted ? "text-warning" : "", title: "What's New", icon: "s fa-bullhorn", hint: "See what's new", onClick: function () { return _this.onClick(); } });
    };
    return WhatsNew;
}(react__WEBPACK_IMPORTED_MODULE_10__["Component"]));
// TODO: Not all features of MenuBarItem are implemented.
var DropdownItem = function (props) { return (react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("a", { className: "dropdown-item bg-dark", onClick: props.onClick, title: createHint(props) },
    react__WEBPACK_IMPORTED_MODULE_10__["createElement"]("i", { className: "fas " + props.icon + " mr-2" }),
    props.title)); };
var createHint = function (item) { return (item.shortcut ? Object(view_tooltips__WEBPACK_IMPORTED_MODULE_18__["formatTooltip"])(item.hint, [item.shortcut]) : Object(view_tooltips__WEBPACK_IMPORTED_MODULE_18__["formatTooltip"])(item.hint)); };


/***/ }),

/***/ "FT31":
/*!*****************************************!*\
  !*** ./src/apparatus/library/mortar.ts ***!
  \*****************************************/
/*! exports provided: Mortar, Pestle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mortar", function() { return Mortar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pestle", function() { return Pestle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");


var Mortar = /** @class */ (function () {
    function Mortar() {
    }
    Mortar.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].mortar();
        graphic.scale(2.0);
        graphic.strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: graphic.placeable(),
        };
    };
    Mortar.properties = {
        label: "Mortar",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Mortar;
}());

var Pestle = /** @class */ (function () {
    function Pestle() {
    }
    Pestle.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].pestle();
        graphic.scale(2.5);
        graphic.strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Pestle.properties = {
        label: "Pestle",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Pestle;
}());



/***/ }),

/***/ "FXHV":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/biology/other/plant_pot.ts ***!
  \**********************************************************/
/*! exports provided: PlantPot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlantPot", function() { return PlantPot; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var PlantPot = /** @class */ (function () {
    function PlantPot() {
    }
    PlantPot.prototype.render = function (appearance) {
        var radius = appearance.size / 2;
        var height = appearance.size;
        var pot = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[radius, 5]], [[radius - 10, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(pot);
        pot.closePath();
        pot.withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#8b5e46".color(), 2))
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#674837");
        var top = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, radius * 2 + 10, 5 + appearance.size / 8, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER));
        top.withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#8b5e46".color(), 2))
            .withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#674837");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([pot, top]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: pot.placeable(),
        };
    };
    PlantPot.properties = {
        label: "Plant pot",
        canContainLiquids: false,
        defaultAppearance: {
            size: 90
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 60, max: 140
            }
        ],
    };
    return PlantPot;
}());



/***/ }),

/***/ "FvJs":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/biology/other/dirt.ts ***!
  \*****************************************************/
/*! exports provided: Dirt */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dirt", function() { return Dirt; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! random/random */ "PJ3I");




var Dirt = /** @class */ (function () {
    function Dirt() {
    }
    Dirt.prototype.render = function (appearance) {
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-52, -52], [-18, 3], [-5, -15]], [[-12, -55], [-5, -14], [15, -14]], [[29, -47], [0, -10], [10, -17]], [[63, -34], [12, -13], [8, 4]], [[60, -3], [20, 0], [11, 9]], [[56, 29], [16, -5], [9, 4]], [[44, 50], [13, 4], [-6, 11]], [[9, 46], [11, 10], [-18, 15]], [[-36, 47], [9, 8], [-14, 11]], [[-64, 40], [-1, 11], [-20, 0]], [[-62, 11], [-8, 7], [-20, 0]], [[-67, -19], [-13, 9], [-9, -5]]));
        shape.closePath();
        shape.fillColor = "#8c5c4a";
        var fill = shape.clone();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([shape, fill]);
        graphic.clipped = true;
        var r = new random_random__WEBPACK_IMPORTED_MODULE_3__["Random"]();
        for (var x = shape.bounds.left; x < shape.bounds.right; x += 40) {
            for (var y = shape.bounds.top; y < shape.bounds.bottom; y += 40) {
                var dirt = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, y).add(r.randomUnitVector(20)), r.randomBetween(10, 30));
                dirt.setRadialGradientFill(apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].fade("#774f40".color()));
                graphic.addChild(dirt);
            }
        }
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Dirt.properties = {
        label: "Dirt",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            scale: 0.5
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.25, max: 1.0, step: 0.01
            }
        ],
    };
    return Dirt;
}());



/***/ }),

/***/ "G+CT":
/*!**************************************************!*\
  !*** ./src/editing/rotation/rotation_handler.ts ***!
  \**************************************************/
/*! exports provided: RotationHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotationHandler", function() { return RotationHandler; });
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_move__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editing/move */ "c+g7");
/* harmony import */ var editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/rotation/rotate_command */ "Za09");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





var RotationHandler = /** @class */ (function () {
    function RotationHandler() {
        /** Point object, helps with calculating angles. */
        this.vector = new paper__WEBPACK_IMPORTED_MODULE_4__["Point"](0, 0);
        /** Offset to apply before snapping. */
        this.snapOffset = 0;
        this.pivot = new paper__WEBPACK_IMPORTED_MODULE_4__["Point"](0, 0);
    }
    RotationHandler.prototype.onStart = function () {
        if (this.isNothingSelected())
            return;
        // Set up pivot and reset last angle.
        this.pivot.set(this.selection.pivot.x, this.selection.pivot.y);
        if (this.selectedApparatus.length == 1) {
            // If there is one selected apparatus, set up the snap offset.
            this.snapOffset = this.selectedApparatus[0].currentRotation;
            return "rotation";
        }
        else if (this.selectedArrows.length == 1) {
            this.snapOffset = 0;
            return "delta";
        }
        else {
            this.snapOffset = 0;
            return "delta";
        }
    };
    RotationHandler.prototype.onRotate = function (x, y, snaps) {
        var _this = this;
        if (this.isNothingSelected())
            return 0;
        var angle = this.getAngle(x, y);
        if (snaps > 0) {
            angle = this.snap(angle + this.snapOffset, snaps) - this.snapOffset;
        }
        this.selectedApparatus.map(function (apparatus) { return apparatus.setRotationDelta(angle, _this.pivot); });
        this.selectedArrows.map(function (arrow) { return arrow.setRotationDelta(angle, _this.pivot); });
        // If there is only one apparatus, report its overall rotation,
        // otherwise report the delta
        if (this.selectedApparatus.length == 1) {
            return this.anglify(this.selectedApparatus[0].currentRotation + angle);
        }
        else {
            return angle;
        }
    };
    RotationHandler.prototype.onEnd = function () {
        var _this = this;
        if (this.isNothingSelected())
            return;
        // Commit these changes. This relies on original values still
        // being set on the apparatus components as props.
        var values = this.selectedApparatus.map(function (apparatus) { return ({
            id: apparatus.id,
            rotation: _this.anglify(apparatus.visibleRotation),
            originalRotation: apparatus.currentRotation,
        }); });
        var moves = new editing_move__WEBPACK_IMPORTED_MODULE_2__["MoveIndividual"](this.selectedApparatus.map(function (a) { return ({ id: a.id, delta: a.visiblePosition.subtract(a.currentPosition) }); }));
        var rotateArrowCommand = new arrows_command__WEBPACK_IMPORTED_MODULE_0__["UpdateArrowProperties"](this.selectedArrows.map(function (a) { return ({
            id: a.id,
            value: { start: a.state.start, end: a.state.end },
            previousValue: { start: a.props.start, end: a.props.end },
        }); }));
        var sequence = new command_command__WEBPACK_IMPORTED_MODULE_1__["Sequence"]([new editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_3__["RotateItems"](values), moves, rotateArrowCommand]);
        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(sequence);
    };
    RotationHandler.prototype.isNothingSelected = function () {
        return this.selectedApparatus.length + this.selectedArrows.length == 0;
    };
    /** Returns angle from given direction vector, in degrees. */
    RotationHandler.prototype.getAngle = function (x, y) {
        // Compute the delta angle, with up-pointing vector as 0 degrees.
        // We can use paper's Point, angle is measured against x-axis so
        // we just need to swap the coordinates
        this.vector.set(-y, x);
        return this.vector.angle;
    };
    RotationHandler.prototype.anglify = function (angle) {
        return (angle + 180) % 360 - 180;
    };
    RotationHandler.prototype.snap = function (angle, snaps) {
        return Math.round(angle / 360 * snaps) / snaps * 360;
    };
    return RotationHandler;
}());



/***/ }),

/***/ "G2dW":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/biology/organic/seed.ts ***!
  \*******************************************************/
/*! exports provided: Seed */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Seed", function() { return Seed; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Seed = /** @class */ (function () {
    function Seed() {
    }
    Seed.prototype.render = function (appearance) {
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[34, -22], [4, -15], [-5, 19]], [[29, 31], [-2, -15], [2, 21]], [[-33, 28], [12, 36], [-13, -40]], [[-8, -45], [-16, 8], [19, -9]]));
        graphic.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        graphic.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"]([
            ["#c5d872", 0.0],
            ["#83a622", 1.0],
        ], true), graphic.bounds.leftCenter, graphic.bounds.rightCenter);
        graphic.strokeColor = "#609a3a";
        graphic.scale(0.2 * appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10.0).toShape()
        };
    };
    Seed.properties = {
        label: "Seed",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 5.0, step: 0.1, unit: "%",
            }
        ],
    };
    return Seed;
}());



/***/ }),

/***/ "GOgO":
/*!*************************!*\
  !*** ./src/store/id.ts ***!
  \*************************/
/*! exports provided: ID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ID", function() { return ID; });
var ID;
(function (ID) {
    function equals(a, b) {
        if (Array.isArray(a) && Array.isArray(b)) {
            if (a.length !== b.length)
                return false;
            for (var i = 0; i < a.length; i++) {
                if (a[i].id !== b[i].id)
                    return false;
                if (a[i].type !== b[i].type)
                    return false;
            }
            return true;
        }
        else if (!Array.isArray(a) && !Array.isArray(b) && a && b) {
            return a.id === b.id && a.type === b.type;
        }
        // Mixed types => not equal.
        return false;
    }
    ID.equals = equals;
    /** To be used as callback to .filter() */
    function matching(id) {
        var ids = Array.isArray(id) ? id : [id];
        return function (hasId) {
            return ids.indexOf(hasId.id) !== -1;
        };
    }
    ID.matching = matching;
    function notMatching(id) {
        var ids = Array.isArray(id) ? id : [id];
        return function (hasId) {
            return ids.indexOf(hasId.id) === -1;
        };
    }
    ID.notMatching = notMatching;
    function string(id) {
        return id.type + "_" + id.id;
    }
    ID.string = string;
    /** ID to use for currently drawn arrows. */
    function mint(type) {
        return { type: type, id: idCounters[type]++ };
    }
    ID.mint = mint;
    ID.TEMP_ARROW = { type: "arrow", id: -1 };
    /**
     * Resets the current ID counters so they can be used
     * when editing given document.
     */
    function resetFor(doc) {
        var maxArrowId = doc.arrows.reduce(function (id, a) { return Math.max(id, a.id.id); }, 0);
        var maxApparatusId = doc.items.reduce(function (id, a) { return Math.max(id, a.id.id); }, 0);
        var maxGroupId = doc.groups.reduce(function (id, a) { return Math.max(id, a.id.id); }, 0);
        idCounters["arrow"] = maxArrowId + 1;
        idCounters["apparatus"] = maxApparatusId + 1;
        idCounters["group"] = maxGroupId + 1;
    }
    ID.resetFor = resetFor;
    function __resetForTesting() {
        idCounters.arrow = 0;
        idCounters.apparatus = 0;
        idCounters.group = 0;
    }
    ID.__resetForTesting = __resetForTesting;
})(ID || (ID = {}));
/** Tracks unique IDs across different types. */
var idCounters = {
    "arrow": 0,
    "apparatus": 0,
    "group": 0,
};


/***/ }),

/***/ "GUaT":
/*!**********************************************************************!*\
  !*** ./src/apparatus/library/devices/spectrophotometer_schematic.ts ***!
  \**********************************************************************/
/*! exports provided: SpetrophotometerSchematic */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpetrophotometerSchematic", function() { return SpetrophotometerSchematic; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var wavelengthInterpolator = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Interpolator"]([400, 640], [280, 0]);
var SpetrophotometerSchematic = /** @class */ (function () {
    function SpetrophotometerSchematic() {
    }
    SpetrophotometerSchematic.prototype.render = function (appearance) {
        var bulb = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].bulb();
        bulb.scale(4.0);
        bulb.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 16);
        bulb.strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        var collimator = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(70, 0), 50);
        collimator.setRadialGradientFill([["#ffffff", 0.5], ["#777777", 1.0]]);
        collimator.opacity = 0.5;
        collimator.applyMatrix = false;
        collimator.scale(0.25, 1.0);
        var light = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[15, -20]], [[70, -20]], [[170, 0]], [[70, 20]], [[15, 20]])).withGradientFill("right", [["#fff18900", 0.0], ["#fff18980", 0.2]]);
        var prism = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-50, 43]], [[0, -43]], [[50, 43]], [[48, 50]], [[-48, 50]])).close()
            .withStroke("default", "#aaaaaa")
            .withGradientFill("right-down", [["#f0f0f0", 0.5], ["#e6e6e6", 0.6], ["#f0f0f0", 0.7]]);
        prism.position.x += 170;
        var prismLine = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, 43), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-50, 43)).withStroke("thinner", "#bbbbbb");
        prismLine.position.x += 170;
        var rayHue = wavelengthInterpolator.interpolate(appearance.rayNm);
        var base = "hsl(280, 90%, 60%)".color();
        var shift = rayHue / 280 * 50;
        var rainbow = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[10, 0]], [[90, -shift - 2.5]], [[90, -shift + 50 + 2.5]])).withGradientFill("down", [
            [base.hue(0).hex(), 0.0],
            [base.hue(70).hex(), 0.25],
            [base.hue(140).hex(), 0.5],
            [base.hue(210).hex(), 0.75],
            [base.hue(280).hex(), 1.0],
        ]);
        rainbow.position.x += 170;
        var _a = [
            new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, -60), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, -2.5)).withStroke(6.0),
            new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, 60), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, 2.5)).withStroke(6.0)
        ], slitUp = _a[0], slitDown = _a[1];
        var ray = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(400, 0)).withStroke(5.0, base.hue(rayHue).string());
        var detector = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(400, 0, 20, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER), 2.0).withFill("#444444");
        var wire = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[410, 0], , [20, 20]], [[440, 0], [-20, -20]])).withStroke(2.0, "#888888");
        var casing = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(440, 0, 120, 50, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT), 6.0)
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].devicePanel.stroke)
            .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].devicePanel.fill);
        var screen = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(450, 0, 100, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT), 3.0)
            .withStroke(5.0, "white")
            .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lcdScreen);
        var textAbs = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(540, 8),
            content: appearance.absorbance,
            fillColor: "black",
            fontFamily: 'sans-serif',
            fontWeight: 'bold',
            fontSize: 20,
            justification: "right",
        });
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            bulb, light, collimator, rainbow, prism, prismLine, ray, slitUp, slitDown, wire, detector, casing, screen, textAbs
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            watermark: rainbow.segments[0].point.add([10, 0]),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(260, 0),
        };
    };
    SpetrophotometerSchematic.properties = {
        label: "Spectrophotometer (Schematic)",
        canContainLiquids: false,
        defaultAppearance: {
            absorbance: "0.042",
            rayNm: 590,
        },
        appearanceSpecs: [
            { spec: "text", key: "absorbance", label: "Absorbance", maxLength: 5 },
            {
                spec: "slider", key: "rayNm", label: "Wavelength",
                min: 400, max: 640
            }
        ],
    };
    return SpetrophotometerSchematic;
}());



/***/ }),

/***/ "GZua":
/*!**************************************************************!*\
  !*** ./src/apparatus/library/transportation/osmosis_tube.ts ***!
  \**************************************************************/
/*! exports provided: CIRCULAR_RATIO, OsmosisTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CIRCULAR_RATIO", function() { return CIRCULAR_RATIO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OsmosisTube", function() { return OsmosisTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





/** Handle ratio to create a circular shape. */
var CIRCULAR_RATIO = 0.55;
var OsmosisTube = /** @class */ (function () {
    function OsmosisTube() {
    }
    OsmosisTube.prototype.render = function (appearance) {
        // Length above the bend.
        var length = appearance.size * 2;
        var diameter = 30;
        var innerRadius = appearance.size;
        var outerRadius = innerRadius + diameter;
        var outerShell = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](uShapeSegment(outerRadius, length));
        var innerShell = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](uShapeSegment(innerRadius, length));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(outerShell, innerShell);
        innerShell.reverse();
        var leftFluid = new (paper__WEBPACK_IMPORTED_MODULE_2__["Path"].bind.apply(paper__WEBPACK_IMPORTED_MODULE_2__["Path"], __spreadArrays([void 0], innerShell.segments.slice(2).map(function (s) { return s.clone(); }), outerShell.segments.slice(0, 3).map(function (s) { return s.clone(); }))))();
        var rightFluid = new (paper__WEBPACK_IMPORTED_MODULE_2__["Path"].bind.apply(paper__WEBPACK_IMPORTED_MODULE_2__["Path"], __spreadArrays([void 0], outerShell.segments.slice(2).map(function (s) { return s.clone(); }), innerShell.segments.slice(0, 3).map(function (s) { return s.clone(); }))))();
        // Choose levels on either side. Keep it below length.
        var rightLevel = appearance.rightLevel * length;
        var leftLevel = appearance.leftLevel * length;
        leftFluid.segments[2].point.y = -leftLevel;
        leftFluid.segments[3].point.y = -leftLevel;
        rightFluid.segments[2].point.y = -rightLevel;
        rightFluid.segments[3].point.y = -rightLevel;
        // Set colours.
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setLiquidStyle"])(leftFluid, appearance.leftColor, appearance.leftOpacity);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setLiquidStyle"])(rightFluid, appearance.rightColor, appearance.rightOpacity);
        // Add a barrier.
        var barrier = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, innerRadius), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, outerRadius));
        barrier.withStroke(4.0, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke);
        barrier.dashArray = [3, 3];
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([leftFluid, rightFluid, barrier, innerShell, outerShell]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            watermark: graphic.bounds.bottomCenter,
        };
    };
    OsmosisTube.properties = {
        label: "Osmosis Tube",
        canContainLiquids: false,
        defaultAppearance: {
            size: 60,
            leftColor: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].defaultLiquid,
            leftOpacity: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].alpha,
            leftLevel: 0.5,
            rightColor: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].defaultLiquid,
            rightOpacity: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].alpha,
            rightLevel: 0.5,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 40, max: 80
            },
            { spec: "header", icon: "tint", header: "Left liquid" },
            {
                spec: "color", key: "leftColor", label: "Colour",
                opacity: { key: "leftOpacity", range: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["LIQUID_OPACITY_RANGE"] }
            },
            {
                spec: "slider", key: "leftLevel", label: "Level",
                min: 0.0, max: 1.0, step: 0.01
            },
            { spec: "header", icon: "tint", header: "Right liquid" },
            {
                spec: "color", key: "rightColor", label: "Colour",
                opacity: { key: "rightOpacity", range: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["LIQUID_OPACITY_RANGE"] }
            },
            {
                spec: "slider", key: "rightLevel", label: "  Level",
                min: 0.0, max: 1.0, step: 0.01
            }
        ],
    };
    return OsmosisTube;
}());

var uShapeSegment = function (radius, length) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-radius, -length]], [[-radius, 0], undefined, [0, radius * CIRCULAR_RATIO]], [[0, radius], [-radius * CIRCULAR_RATIO, 0], [radius * CIRCULAR_RATIO, 0]], [[radius, 0], [0, radius * CIRCULAR_RATIO]], [[radius, -length]]); };


/***/ }),

/***/ "Gf5X":
/*!*************************************!*\
  !*** ./src/layout/modals/about.tsx ***!
  \*************************************/
/*! exports provided: AboutModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AboutModal", function() { return AboutModal; });
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var layout_modals_welcome__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! layout/modals/welcome */ "Ej3j");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/** "About Chemix" modal dialog. */
var AboutModal = /** @class */ (function (_super) {
    __extends(AboutModal, _super);
    function AboutModal() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_0__["Remodal"].Container, { parent: _this, class: "about-modal", title: null },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](layout_modals_welcome__WEBPACK_IMPORTED_MODULE_1__["SplashImage"], null),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "mx-3" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "d-flex mb-2", style: { marginTop: '-85px' } },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("img", { src: "./images/64.png", className: "mb-1", srcSet: "./images/64.png 1x, ./images/128.png 2x" }),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("h1", null,
                        "Chemix\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("small", { className: "boost-text-gradient" },
                            _this.props.version,
                            " "))),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "Chemix is an online editor for drawing science lab diagrams and school experiment apparatus. The app provides easy sketching for both students and teachers."),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](layout_modals_welcome__WEBPACK_IMPORTED_MODULE_1__["PromoStat"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "If you like Chemix, support us by sharing it with your friends or follow us for updates."),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("iframe", { src: facebookIframeSrc, width: "180", height: "28", style: { border: "none", overflow: "hidden" }, allow: "encrypted-media" }),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("span", { className: "mr-4" }),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { href: "https://twitter.com/ChemixLab?ref_src=twsrc%5Etfw", className: "twitter-follow-button", "data-show-count": "true", "data-size": "large" }, "Follow @ChemixLab")),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null,
                    "Chemix is developed by Codelite Ltd, UK. \u00A9 2007-",
                    new Date().getFullYear(),
                    ".")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", { style: { textAlign: "center" } },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("button", { "data-remodal-action": "confirm", className: "remodal-confirm ui-button highlight" }, "OK")))); };
        return _this;
    }
    return AboutModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_0__["Remodal"]));

var facebookIframeSrc = "https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Ffacebook.com%2FChemix.org&width=147&layout=button_count&action=like&size=large&show_faces=false&share=true&height=46&appId";


/***/ }),

/***/ "GiT7":
/*!**************************************!*\
  !*** ./src/editing/arrange/align.ts ***!
  \**************************************/
/*! exports provided: Align */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Align", function() { return Align; });
/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../move */ "c+g7");

// Contains methods for aligning objects.
var Align;
(function (Align) {
    /**
     * Aligns objects to a certain direction. Returns commands to be
     * executed to align the objects.
     */
    function align(components, direction) {
        if (components.length <= 1)
            return;
        var property = direction;
        var axis = direction == "left" || direction == "right" ? "x" : "y";
        var operator = direction == "left" || direction == "top" ? "min" : "max";
        // Detect left-most edge.
        var extremity = components.reduce(function (v, c) { return Math[operator](v, c.alignmentBounds[property]); }, components[0].alignmentBounds[property]);
        // Move all items towards this edge.
        return components.map(function (c) {
            var delta = { x: 0, y: 0 };
            delta[axis] = extremity - c.alignmentBounds[property];
            return _move__WEBPACK_IMPORTED_MODULE_0__["Move"].one(c.id, delta);
        });
    }
    Align.align = align;
    function alignCenters(components, axis) {
        if (components.length <= 1)
            return;
        var center = components.reduce(function (v, c) { return v + c.alignmentBounds.center[axis]; }, 0) / components.length;
        // Move all items towards this edge.
        return components.map(function (c) {
            var delta = { x: 0, y: 0 };
            delta[axis] = center - c.alignmentBounds.center[axis];
            return _move__WEBPACK_IMPORTED_MODULE_0__["Move"].one(c.id, delta);
        });
    }
    Align.alignCenters = alignCenters;
})(Align || (Align = {}));


/***/ }),

/***/ "Gv/G":
/*!****************************************!*\
  !*** ./src/layout/top_bar/account.tsx ***!
  \****************************************/
/*! exports provided: AccountBar, LoginModal, StaySignedInCheckbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccountBar", function() { return AccountBar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginModal", function() { return LoginModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StaySignedInCheckbox", function() { return StaySignedInCheckbox; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/auth/login_button */ "uYhG");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var layout_modals_my_account__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! layout/modals/my_account */ "HsVG");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _api_auth_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/auth/storage */ "+GPU");
/* harmony import */ var _view_tooltips__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../view/tooltips */ "6T3+");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();








var AccountBar = /** @class */ (function (_super) {
    __extends(AccountBar, _super);
    function AccountBar() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.accountRef = react__WEBPACK_IMPORTED_MODULE_5__["createRef"]();
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](layout_modals_my_account__WEBPACK_IMPORTED_MODULE_3__["MyAccountModal"], { auth: _this.props.auth, ref: _this.accountRef }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { key: "accountBar", className: "accountBar" }, _this.props.auth.state == "logged_in" ?
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { key: "loggedIn", className: "menuBarItem", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("MyAccount"); _this.accountRef.current.open(); } },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("img", { src: _this.props.auth.user.avatarUrl, width: "32", height: "32" }),
                    " My account") :
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { key: "loggedOut", className: "menuBarItem", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("LoginPopup"); _this.props.openLogin(); } },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fad fa-2x mb-1 mt-1 fa-user-circle" }),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("br", null),
                    "Sign in")))); };
        return _this;
    }
    return AccountBar;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));

var LoginModal = /** @class */ (function (_super) {
    __extends(LoginModal, _super);
    function LoginModal(props) {
        var _this = _super.call(this, props) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_5__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_2__["Remodal"].Container, { parent: _this, class: "account-login-modal", title: "Sign in", icon: "fa-user-circle", center: true },
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("p", null, "Sign in to store your diagrams to Cloud."),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["LoginButton"], { providerName: "google", key: "google", auth: _this.props.auth, active: _this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignInButton", "account:google"); }, onSuccess: function (token, _) { return _this.onLoginSuccess(token); } }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["LoginButton"], { providerName: "microsoft", key: "microsoft", auth: _this.props.auth, active: _this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignInButton", "account:microsoft"); }, onSuccess: function (token, _) { return _this.onLoginSuccess(token); } }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["LoginButton"], { key: "twitter", providerName: "twitter", auth: _this.props.auth, active: _this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignInButton", "account:twitter"); }, onSuccess: function (token, _) { return _this.onLoginSuccess(token); } }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["LoginButton"], { key: "facebook", providerName: "facebook", auth: _this.props.auth, active: _this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignInButton", "account:facebook"); }, onSuccess: function (token, _) { return _this.onLoginSuccess(token); } }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["LoginButton"], { key: "code", providerName: "code", auth: _this.props.auth, active: _this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignInButon", "account:code"); }, onSuccess: function (token, _) { return _this.onLoginSuccess(token); } }),
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "mx-3 text-left" },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"](StaySignedInCheckbox, { key: "stayLoggedIn", value: _this.state.staySignedIn, onChange: function (v) { return _this.toggleStayLoggedIn(v); } })))); };
        _this.state = {
            isOpened: false,
            staySignedIn: false
        };
        return _this;
    }
    LoginModal.prototype.onLoginSuccess = function (token) {
        if (this.state.staySignedIn) {
            Object(log__WEBPACK_IMPORTED_MODULE_4__["clog"])("Token written to storage");
            Object(_api_auth_storage__WEBPACK_IMPORTED_MODULE_6__["storeToken"])(token);
        }
        this.close();
        if (this.onLoginSuccessCallback) {
            // Trigger this with a delay.
            var callback = this.onLoginSuccessCallback.bind(this);
            setTimeout(callback, 500);
        }
    };
    LoginModal.prototype.open = function () {
        _super.prototype.open.call(this);
        this.onLoginSuccessCallback = undefined;
    };
    LoginModal.prototype.openWithCallback = function (callback) {
        _super.prototype.open.call(this);
        this.onLoginSuccessCallback = callback;
    };
    LoginModal.prototype.componentDidMount = function () {
        _super.prototype.componentDidMount.call(this);
        Object(_view_tooltips__WEBPACK_IMPORTED_MODULE_7__["setUpQTip"])(this.ref.current);
    };
    LoginModal.prototype.toggleStayLoggedIn = function (stayLoggedIn) {
        this.setState({
            staySignedIn: stayLoggedIn
        });
    };
    return LoginModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_2__["Remodal"]));

var StaySignedInCheckbox = function (props) {
    var id = "stay_signed_in_" + Math.round(Math.random() * 100);
    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "custom-control custom-checkbox my-2" },
        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("input", { id: id, type: "checkbox", className: "custom-control-input", checked: props.value, onChange: function (e) { return props.onChange(e.target.checked); } }),
        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { className: "stay-signed-in custom-control-label", htmlFor: id, title: STAY_SIGNED_IN_TOOLTIP }, "Stay logged in. This is a personal device."));
};
var STAY_SIGNED_IN_TOOLTIP = "\nTick this if you'd like to be automatically signed in on each visit. <br/>\nTo keep your account secure, use this option <b>only on your personal devices.</b>\n";


/***/ }),

/***/ "GzMk":
/*!******************************************!*\
  !*** ./src/panel/apparatus_panel_ui.tsx ***!
  \******************************************/
/*! exports provided: sectionsForOneApparatus, createSingleLayerLiquidPropsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sectionsForOneApparatus", function() { return sectionsForOneApparatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSingleLayerLiquidPropsSection", function() { return createSingleLayerLiquidPropsSection; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var components_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! components/button */ "hhmX");
/* harmony import */ var editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/multilayerliquids */ "BpvS");
/* harmony import */ var panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! panel/appearance_spec_converter */ "Vv2H");
/* harmony import */ var panel_ordering_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! panel/ordering_ui */ "uKu+");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var tiers_apparatus__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! tiers/apparatus */ "UT2h");
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! tiers/badge */ "2UKY");
/* harmony import */ var _apparatus_library_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../apparatus/library/common */ "UCWy");
/* harmony import */ var _editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../editing/rotation/rotate_command */ "Za09");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};













var MAX_TOTAL_EXTRA_LAYERS = 4;
var MAX_EXTRA_LAYERS_FOR_FREE_TIER = 1;
function sectionsForOneApparatus(item, app, tiers, selected) {
    var sections = [];
    var apparatusKlass = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["apparatusClass"])(item.type);
    // Obtain the appearance spec.
    var appearanceSpecs = apparatusKlass.properties.appearanceSpecs;
    // Convert to element props for building UI.
    var elements = Object(panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_6__["convertAppearanceSpecs"])(appearanceSpecs, item, [item], app, tiers);
    // Check if this item is allowed. If not show an upgrade banner.
    if (!Object(tiers_apparatus__WEBPACK_IMPORTED_MODULE_9__["isItemUnlocked"])(item, tiers.tier)) {
        elements.unshift(react__WEBPACK_IMPORTED_MODULE_8__["createElement"](UpgradeHint, { key: "UpgradeHint", onClick: function () { return tiers.popup(item.type); } }));
    }
    sections.push({
        header: "Style",
        icon: "sliders-h",
        hideHeaderIfFirst: true,
        elements: elements
    });
    // Does the apparatus support ChemMark?
    if (apparatusKlass.properties.chemMarkAppearanceKey) {
        sections.push(Object(panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_6__["chemMarkPropsSection"])([item], apparatusKlass.properties.chemMarkAppearanceKey));
    }
    var toolSectionElements = [];
    var appearanceButtons = [];
    if (apparatusKlass.properties.appearanceSpecs.length > 0) {
        appearanceButtons.push({
            buttonLabel: "Reset to default", icon: "undo",
            onClick: function () {
                var defaultAppearance = apparatusKlass.properties.defaultAppearance;
                var currentAppearance = item.appearance;
                // If the appearances are the same, don't execute.
                if (JSON.stringify(defaultAppearance) == JSON.stringify(currentAppearance)
                    && !item.flipped
                    && item.rotation == 0)
                    return;
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::resetAppearance");
                var commands = [
                    new _editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_12__["RotateItems"]([{ id: item.id, rotation: 0, originalRotation: item.rotation }]),
                    new command_basic__WEBPACK_IMPORTED_MODULE_2__["UpdateAppearanceProperties"](item.id, defaultAppearance, currentAppearance),
                ];
                if (item.flipped) {
                    // Must be first otherwise it overwrites rotation.
                    commands.unshift(new command_basic__WEBPACK_IMPORTED_MODULE_2__["Flip"](item));
                }
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_3__["Sequence"](commands));
            },
        });
    }
    if (apparatusKlass.properties.flippable) {
        appearanceButtons.push({
            buttonLabel: "Flip horizontally", icon: "arrows-alt-h",
            onClick: function () {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::flipHorizontally");
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_2__["Flip"](item, { adjustRotation: true, vertical: false }));
            },
        }, {
            buttonLabel: "Flip vertically", icon: "arrows-alt-v",
            onClick: function () {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::flipVertically");
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_2__["Flip"](item, { adjustRotation: true, vertical: true }));
            },
        });
    }
    if (appearanceButtons.length > 0) {
        toolSectionElements.push({
            spec: "vertical-buttons",
            key: "appearance",
            label: "Appearance",
            buttons: appearanceButtons
        });
    }
    toolSectionElements.push(Object(panel_ordering_ui__WEBPACK_IMPORTED_MODULE_7__["createOrderingButtons"])([item.id]));
    sections.push({
        header: "Tools",
        icon: "wrench",
        elements: toolSectionElements
    });
    if (selected.shouldAllowRegrouping) {
        sections.push({
            header: "Grouping",
            icon: "object-group",
            elements: [
                {
                    spec: "button",
                    key: "regroupObjects",
                    label: "Regroup object",
                    buttonLabel: "Regroup object",
                    icon: "object-group",
                    onClick: function () {
                        var command = selected.createRegroupObjectsCommand();
                        if (command) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Grouping", "Regroup");
                            command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(command);
                        }
                    }
                }
            ]
        });
    }
    var props = {
        title: apparatusKlass.properties.label,
        icon: "flask",
        tabs: [
            {
                type: "property",
                sections: sections,
            },
        ]
    };
    // If the apparatus can contain liquids, add options for those.
    if (apparatusKlass.properties.canContainLiquids && item.liquid) {
        props.tabs.push({
            type: "liquid",
            colorDot: item.liquid.color,
            sections: [createLiquidPropsSection(item, item.liquid, app, tiers)]
        });
    }
    return props;
}
function createSingleLayerLiquidPropsSection(items, app) {
    var liquidData = items[0].liquid; // Take liquid data of first item.
    var elements = [
        {
            spec: "slider", label: "Amount",
            min: 0, max: 1, step: 0.01, initialValue: liquidData.amountRatio,
            key: "liquid_amount", unit: "%",
            onChange: function (value) {
                for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
                    var item = items_1[_i];
                    var component = app.getApparatusComponent(item.id);
                    if (!component || !component.state.liquid)
                        continue;
                    component.updateLiquidData(__assign(__assign({}, component.state.liquid), { amountRatio: value }));
                }
            },
            onEnd: function (previous, final) {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", items[0].type + "::liquid::amount");
                var command = new command_basic__WEBPACK_IMPORTED_MODULE_2__["UpdateLiquidAmount"](items.map(function (i) { return ({
                    id: i.id,
                    value: final,
                    previousValue: i.liquid.amountRatio
                }); }));
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(command);
            }
        },
    ];
    // The next section can only be added if there is a single item, or if multiple items all
    // don't have extra layers.
    if (items.length == 1 || items.every(function (i) { var _a; return ((_a = i.liquid) === null || _a === void 0 ? void 0 : _a.layers.length) == 0; })) {
        elements.push({
            spec: "color", label: "Colour",
            key: "liquid_color" + "_" + items[0].id.id,
            value: liquidData.color,
            onColorChange: function (value) {
                for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {
                    var item = items_2[_i];
                    var component = app.getApparatusComponent(item.id);
                    if (!component || !item.liquid)
                        continue;
                    component.updateLiquidData(__assign(__assign({}, item.liquid), { color: value }));
                }
            },
            onColorEnd: function (final) {
                if (final == items[0].liquid.color)
                    return;
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", items[0].type + "::liquid::colour");
                var command = new command_basic__WEBPACK_IMPORTED_MODULE_2__["UpdateLiquidColor"](items.filter(function (i) { return i.liquid !== undefined; }).map(function (i) { return ({
                    id: i.id,
                    value: final,
                    previousValue: i.liquid.color
                }); }));
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(command);
            },
            opacity: {
                value: liquidData.alpha,
                range: _apparatus_library_common__WEBPACK_IMPORTED_MODULE_11__["LIQUID_OPACITY_RANGE"],
                onChange: function (value) {
                    for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {
                        var item = items_3[_i];
                        var component = app.getApparatusComponent(item.id);
                        if (!component || !component.state.liquid)
                            continue;
                        component.updateLiquidData(__assign(__assign({}, component.state.liquid), { alpha: value }));
                    }
                },
                onEnd: function (_, final) {
                    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", items[0].type + "::liquid::alpha");
                    var command = new command_basic__WEBPACK_IMPORTED_MODULE_2__["UpdateLiquidAlpha"](items.map(function (i) { return ({
                        id: i.id,
                        value: final,
                        previousValue: i.liquid.alpha
                    }); }));
                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(command);
                }
            }
        });
    }
    return elements;
}
function createLiquidPropsSection(item, liquidData, app, tiers) {
    var elements = createSingleLayerLiquidPropsSection([item], app);
    var _loop_1 = function (i) {
        var layer = liquidData.layers[i];
        var index = i;
        elements.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("hr", { key: "liquid_hr_" + i }), react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("h4", { key: "liquid_label_" + i },
            "Liquid Layer #",
            liquidData.layers.length - i));
        elements.push({
            spec: "slider", label: "Position",
            min: 0, max: 1, step: 0.01, initialValue: layer.position,
            key: "liquid_position_" + i, unit: "%",
            onChange: function (value) {
                // CALLBACK! Do NOT refer to "i".
                var component = app.getApparatusComponent(item.id);
                if (!component || !component.state.liquid)
                    return;
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "position", value);
                component.updateLiquidData(__assign(__assign({}, component.state.liquid), { layers: newLayers }));
            },
            onEnd: function (previous, final) {
                if (previous == final)
                    return;
                // CALLBACK! Do NOT refer to "i".
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "position", final);
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
            }
        }, {
            spec: "color", label: "Colour",
            key: "liquid_color_" + item.id.id + "_" + i,
            value: layer.color,
            onColorChange: function (value) {
                // CALLBACK! Do NOT refer to "i".
                var component = app.getApparatusComponent(item.id);
                if (!component || !component.state.liquid)
                    return;
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustString(liquidData.layers, index, "color", value);
                component.updateLiquidData(__assign(__assign({}, component.state.liquid), { layers: newLayers }));
            },
            onColorEnd: function (final) {
                // Careful here! We need to compare lowercase because the output
                // will be uppercase from the bootstrap color picker! Also
                // onColorEnd is called when the component is unmounted, so it's
                // possible that this layer no longer exists. Be careful!
                if (final.toLowerCase() == layer.color.toLowerCase())
                    return;
                // CALLBACK! Do NOT refer to "i".
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustString(liquidData.layers, index, "color", final);
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
            },
            opacity: {
                value: layer.alpha,
                range: _apparatus_library_common__WEBPACK_IMPORTED_MODULE_11__["LIQUID_OPACITY_RANGE"],
                onChange: function (value) {
                    // CALLBACK! Do NOT refer to "i".
                    var component = app.getApparatusComponent(item.id);
                    if (!component || !component.state.liquid)
                        return;
                    var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "alpha", value);
                    component.updateLiquidData(__assign(__assign({}, component.state.liquid), { layers: newLayers }));
                },
                onEnd: function (previous, final) {
                    if (previous == final)
                        return;
                    // CALLBACK! Do NOT refer to "i".
                    var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "alpha", final);
                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
                }
            }
        }, {
            spec: "slider", label: "Blending",
            min: 0, max: 1, step: 0.01, initialValue: layer.blending,
            key: "liquid_blending_" + i, unit: "%",
            onChange: function (value) {
                // CALLBACK! Do NOT refer to "i".
                var component = app.getApparatusComponent(item.id);
                if (!component || !component.state.liquid)
                    return;
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "blending", value);
                component.updateLiquidData(__assign(__assign({}, component.state.liquid), { layers: newLayers }));
            },
            onEnd: function (previous, final) {
                if (previous == final)
                    return;
                // CALLBACK! Do NOT refer to "i".
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].adjustNumeric(liquidData.layers, index, "blending", final);
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
            }
        });
    };
    // Present the layers in reverse order, so that it visually matches
    // with how the layers are rendered.
    for (var i = liquidData.layers.length - 1; i >= 0; i--) {
        _loop_1(i);
    }
    var buttons = [];
    var currentExtraLayers = liquidData.layers.length;
    if (currentExtraLayers < MAX_TOTAL_EXTRA_LAYERS) {
        if (currentExtraLayers < MAX_EXTRA_LAYERS_FOR_FREE_TIER || tiers.allow("boost")) {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_4__["Button"], { buttonLabel: "Add layer", icon: "plus", key: "addLayer", onClick: function () {
                    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::liquid::add_layer");
                    var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].addLayer(liquidData.layers);
                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
                } }));
        }
        else {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_4__["Button"], { buttonLabel: "Add layer", icon: "plus", key: "addLayer", tierLock: "boost", onClick: function () {
                    tiers.popup("Add Liquid Layer");
                } }));
        }
    }
    if (liquidData.layers.length === 0) {
        buttons.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_4__["Button"], { buttonLabel: "Quick blend", icon: "fill-drip", key: "quick_blend", onClick: function () {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::liquid::quick_blend");
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].createSimpleGradient(liquidData.color, liquidData.alpha);
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
            } }));
    }
    if (liquidData.layers.length > 0) {
        buttons.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_4__["Button"], { buttonLabel: "Remove layer", icon: "minus", key: "removeLayer", onClick: function () {
                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::liquid::remove_layer");
                var newLayers = editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["MultiLiquid"].removeBottomLayer(liquidData.layers);
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(new editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_5__["UpdateLiquidLayers"](item.id, newLayers, liquidData.layers));
            } }));
    }
    if (buttons.length > 0) {
        elements.push(react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "flex-group", key: "liquidLayerButtons" },
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "label" }),
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "verticalButtonGroup mt-2", key: "liquidLayerButtons" }, buttons)));
    }
    return {
        header: "Liquid",
        icon: "tint",
        hideHeaderIfFirst: true,
        elements: elements
    };
}
/**
 * Element shown if the user does not have a subscription for given
 * item.
 */
var UpgradeHint = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "boxed-hint border-success text-success mt-2" },
        "To use this item, you need a subscription. ",
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_10__["Badge"], { tier: "boost" }),
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("button", { className: "ui-button highlight text-center mt-1", onClick: props.onClick }, "Upgrade"));
};


/***/ }),

/***/ "H7op":
/*!*****************************************************************!*\
  !*** ./src/apparatus/library/distillation/distillation_head.ts ***!
  \*****************************************************************/
/*! exports provided: DistillationHead */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DistillationHead", function() { return DistillationHead; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var DistillationHead = /** @class */ (function () {
    function DistillationHead() {
    }
    DistillationHead.prototype.render = function (appearance) {
        // Distillation head is similar to a 3-way tube. We will
        // draw this by unioning two rectangles, a "vertical" one
        // and a tilted "outlet" one.
        var topGroundJoint = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-10, -10]], [[-7.5, 10]], [[7.5, 10]], [[10, -10]]));
        var bottomGroundJoint = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-10, 60]], [[-7, 85]], [[7, 85]], [[10, 60]]));
        bottomGroundJoint.closePath();
        var vertical = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 10, 18, 51, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
        var pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 30);
        var angle = 15;
        var outletSize = 50;
        var outlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(pivot.x, pivot.y, outletSize, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT));
        outlet.rotate(15, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 40));
        var shape = (vertical.unite(outlet).unite(topGroundJoint).unite(bottomGroundJoint));
        // Smooth out the joints between the outlet and the vertical pipe.
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(shape.segments[9], 3.0);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(shape.segments[6], 5.0);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(shape, 3, 9, 15);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        graphic.addChildren([
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(5, 31, { rotation: 90 }),
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, 12, { size: 6 }),
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, 63, { size: 8 }),
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -3), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 83), facing: 180 },
                { type: "connectable", at: pivot.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outletSize, 0)).rotate(15, pivot), facing: 90 + angle },
            ]
        };
    };
    DistillationHead.properties = {
        label: "Distillation Head",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return DistillationHead;
}());



/***/ }),

/***/ "HN7f":
/*!**************************************************************!*\
  !*** ./src/apparatus/library/measure/digital_themormeter.ts ***!
  \**************************************************************/
/*! exports provided: DigitalThermometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DigitalThermometer", function() { return DigitalThermometer; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var DigitalThermometer = /** @class */ (function () {
    function DigitalThermometer() {
    }
    DigitalThermometer.prototype.render = function (appearance) {
        var displayString = appearance.reading + " " + appearance.unit;
        switch (appearance.brand) {
            case "flinn":
                return renderFlinn(displayString);
            case "vernier":
                return renderVernier(displayString);
        }
    };
    DigitalThermometer.properties = {
        label: "Digital thermometer",
        canContainLiquids: false,
        defaultAppearance: {
            brand: "vernier",
            reading: "20",
            unit: "C"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "brand", label: "Brand",
                options: [
                    { value: "flinn", label: "Flinn" },
                    { value: "vernier", label: "Vernier" },
                ],
            },
            {
                spec: "text", key: "reading", label: "Reading",
            },
            {
                spec: "toggle-buttons", key: "unit", label: "Units", size: "text",
                options: [
                    { value: "C", label: "C", icon: "" },
                    { value: "F", label: "F", icon: "" },
                    { value: "K", label: "K", icon: "" },
                    { value: "", label: "-", icon: "" },
                ],
            }
        ],
    };
    return DigitalThermometer;
}());

// https://www.flinnsci.com/flinn-digital-thermometer/ap8716/
// Probe length 8 in (20cm), overall length 11 in (28cm)
function renderFlinn(displayString) {
    var probe = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-4, 80, 8, 200));
    probe.setGradientFill("right", [
        ["#d0232f", 0.1],
        ["#e75753", 0.6],
        ["#d0232f", 0.9],
    ]);
    var handle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[4, 80], undefined, [0, -6]], [[12, 70], [0, 6]], [[12, 5], undefined, [0, -4]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(handle);
    handle.fillColor = "#111122";
    var screen = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-9, 16, 18, 46), 9);
    screen.fillColor = "#eeeeee";
    var decor1 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-12, 10, 24, 2));
    decor1.fillColor = "#d0232f";
    var decor2 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-12, 66, 24, 2));
    decor2.fillColor = "#d0232f";
    var display = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 43),
        content: displayString,
        fillColor: 'black',
        fontFamily: 'sans-serif',
        fontSize: 14,
        justification: "center",
    });
    display.rotate(-90, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 38));
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([probe, handle, screen, decor1, decor2, display]);
    return { graphic: graphic, hitShape: graphic.bounds.toShape() };
}
// https://www.vernier.com/products/sensors/temperature-sensors/irt-bta/
function renderVernier(displayString) {
    var casing = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[20, 0], [-2, -2]], [[20, 37], undefined, [-4, 7]], [[12, 55], [0, -7]], [[12, 150], undefined, [0, 2]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(casing);
    casing.fillColor = "#333344";
    var screen = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-16, 12, 32, 18));
    screen.fillColor = "#eeeeee";
    var button = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 46), 7);
    button.fillColor = "#d0232f";
    var display = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 26),
        content: displayString,
        fillColor: 'black',
        fontFamily: 'sans-serif',
        fontSize: 12,
        justification: "center",
    });
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([casing, button, screen, display]);
    return { graphic: graphic, hitShape: graphic.bounds.toShape() };
}


/***/ }),

/***/ "HNhp":
/*!****************************************!*\
  !*** ./src/apparatus/library/flask.ts ***!
  \****************************************/
/*! exports provided: ConicalFlask, ConicalFlaskWithSideArm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConicalFlask", function() { return ConicalFlask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConicalFlaskWithSideArm", function() { return ConicalFlaskWithSideArm; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var ConicalFlask = /** @class */ (function () {
    function ConicalFlask() {
    }
    ConicalFlask.prototype.render = function (appearance) {
        var _a = baseFlaskGraphic(appearance), graphic = _a.graphic, markers = _a.markers, neckWidth = _a.neckWidth, neckHeight = _a.neckHeight;
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLipsReversed"])(graphic);
        var liquidMask = graphic.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(graphic);
        var graphicWithMarkers = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([graphic, markers]);
        return {
            graphic: graphicWithMarkers,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            snapping: [
                graphic.placeable(),
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -neckHeight), diameter: neckWidth, facing: 0 },
            ]
        };
    };
    // Based on: https://www.amazon.co.uk/dp/B07CQNWN4C/ref=twister_B07CQ1ZX9L?_encoding=UTF8&th=1
    ConicalFlask.properties = {
        label: "Conical flask",
        canContainLiquids: true,
        defaultAppearance: {
            size: 100,
        },
        appearanceSpecs: [{
                spec: "slider", key: "size", label: "Size",
                min: 80, max: 200,
            }]
    };
    return ConicalFlask;
}());

var ConicalFlaskWithSideArm = /** @class */ (function () {
    function ConicalFlaskWithSideArm() {
    }
    ConicalFlaskWithSideArm.prototype.render = function (appearance) {
        var holeRadius = 5;
        var sideArmLength = 15;
        var offset = -17;
        var _a = baseFlaskGraphic(appearance, 35), graphic = _a.graphic, markers = _a.markers, neckWidth = _a.neckWidth, neckHeight = _a.neckHeight;
        // Insert the spout
        graphic.insertSegments(1, Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neckWidth / 2, offset - holeRadius]], [[neckWidth / 2 + sideArmLength, offset - holeRadius]], [[neckWidth / 2 + sideArmLength, offset + holeRadius]], [[neckWidth / 2, offset + holeRadius]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLipsReversed"])(graphic);
        var liquidMask = graphic.clone();
        var parts = Object(_draw__WEBPACK_IMPORTED_MODULE_1__["breakPath"])(graphic, 4);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(parts);
        var graphicWithMarkers = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([parts, markers]);
        return {
            graphic: graphicWithMarkers,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            snapping: [
                graphic.placeable(),
                { type: "connectable", at: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(neckWidth / 2 + sideArmLength, offset), facing: 90 },
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -neckHeight), diameter: neckWidth, facing: 0 },
            ]
        };
    };
    ConicalFlaskWithSideArm.properties = {
        label: "Conical flask with side arm",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: ConicalFlask.properties.defaultAppearance,
        appearanceSpecs: ConicalFlask.properties.appearanceSpecs,
    };
    return ConicalFlaskWithSideArm;
}());

function baseFlaskGraphic(appearance, minNeckHeight) {
    if (minNeckHeight === void 0) { minNeckHeight = 0; }
    var ratio = appearance.size / 150;
    var neckHeight = Math.max(minNeckHeight, 40 * ratio);
    var neckWidth = 20 + Math.sqrt(ratio) * 20;
    var baseHeight = 150 * ratio;
    var baseWidth = 145 * ratio;
    var corner = 10.0 + ratio * 20;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"]();
    graphic.addSegments([
        // Neck.
        new paper__WEBPACK_IMPORTED_MODULE_0__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](neckWidth / 2, -neckHeight)),
        new paper__WEBPACK_IMPORTED_MODULE_0__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](neckWidth / 2, 0)),
        // Base
        new paper__WEBPACK_IMPORTED_MODULE_0__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](baseWidth / 2, baseHeight)),
        new paper__WEBPACK_IMPORTED_MODULE_0__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](0, baseHeight))
    ]);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(graphic.segments[2], corner);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["removeLastSegment"])(graphic);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(graphic, 0);
    // Create markers.
    var markers = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]();
    var bottomRightCorner = new paper__WEBPACK_IMPORTED_MODULE_0__["Point"]((baseWidth - neckWidth) / 2 - 3.0, baseHeight);
    var scaleRatio = bottomRightCorner.y / _common__WEBPACK_IMPORTED_MODULE_2__["markerSpacing"];
    var markSpacingVector = bottomRightCorner.divide(scaleRatio);
    var markStart = bottomRightCorner.add([neckWidth / 2 - 7.0, 0]);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addMarkers"])(markers, markStart, 0, markSpacingVector);
    return { graphic: graphic, markers: markers, neckWidth: neckWidth, neckHeight: neckHeight };
}


/***/ }),

/***/ "HsVG":
/*!******************************************!*\
  !*** ./src/layout/modals/my_account.tsx ***!
  \******************************************/
/*! exports provided: MyAccountModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyAccountModal", function() { return MyAccountModal; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/api */ "3kYy");
/* harmony import */ var api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/auth/login_button */ "uYhG");
/* harmony import */ var api_auth_reauth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! api/auth/reauth */ "e6DQ");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ "b/SL");
/* harmony import */ var layout_top_bar_account__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! layout/top_bar/account */ "Gv/G");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var tiers_promo_plus__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! tiers/promo_plus */ "11Wx");
/* harmony import */ var _api_auth_storage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../api/auth/storage */ "+GPU");
/* harmony import */ var _store_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../store/actions */ "/GBr");
/* harmony import */ var _tiers_badge__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../tiers/badge */ "2UKY");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils */ "fdqv");
/* harmony import */ var _view_tooltips__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../view/tooltips */ "6T3+");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


















var MyAccountModal = /** @class */ (function (_super) {
    __extends(MyAccountModal, _super);
    function MyAccountModal(props) {
        var _this = _super.call(this, props) || this;
        _this.cancelSubscription = function () {
            Object(api_api__WEBPACK_IMPORTED_MODULE_1__["callApi"])("plans/cancel", "POST", _this.props.auth, undefined, {
                success: function () {
                    toastr.success("Successfully canceled your subscription. Your plan will continue to be active until it expires.");
                    _this.refreshAccountDetails();
                },
                generic: function () {
                    toastr.error("Please try again or contact support@chemix.org if you continue to have issues.", "Failed to cancel plan.");
                }
            });
        };
        _this.resumeSubscription = function () {
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("OpenStripePortal");
            Object(api_api__WEBPACK_IMPORTED_MODULE_1__["callApi"])("plans/resume", "POST", _this.props.auth, undefined, {
                success: function () {
                    toastr.success("Successfully resumed your subscription.");
                    _this.refreshAccountDetails();
                },
                generic: function () {
                    toastr.error("Please try again or contact support@chemix.org if you continue to have issues.", "Failed to resume plan.");
                }
            });
        };
        _this.openStripeCustomerPortal = function () {
            Object(_utils__WEBPACK_IMPORTED_MODULE_15__["opensWindow"])(function (opener) {
                Object(api_api__WEBPACK_IMPORTED_MODULE_1__["callApi"])("account/stripe_customer_portal", "POST", _this.props.auth, undefined, {
                    success: function (response) {
                        opener(response.url);
                    },
                    generic: function () {
                        toastr.error("Could not open the portal. If you get this error repeatedly, please report this to support@chemix.org");
                    }
                });
            });
        };
        _this.refreshPurchase = function (loggedIn) {
            var token = loggedIn.jwtToken;
            var headers = new Headers();
            headers.set("Authorization", "Bearer " + token);
            return fetch(api_api__WEBPACK_IMPORTED_MODULE_1__["BACKEND_API"] + "/plans/refresh", {
                method: "POST",
                headers: headers,
            }).then(function (r) {
                if (r.status == 200) {
                    toastr.success("Successfully refreshed.");
                    Object(api_auth_reauth__WEBPACK_IMPORTED_MODULE_3__["reauthFromCurrentLogin"])();
                    _this.refreshAccountDetails();
                }
                else if (r.status == 404) {
                    toastr.error("Could not retrieve purchase.");
                }
            });
        };
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_4__["Remodal"].Container, { key: "myAccount", parent: _this, class: "my-account-modal", title: "My account", icon: "fa-user-circle" }, _this.props.auth.state == "logged_in" ? _this.renderLoggedIn(_this.props.auth) : _this.renderLoggedOut())); };
        _this.renderLoggedIn = function (state) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](react__WEBPACK_IMPORTED_MODULE_8__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"](Row, { heading: "Account" },
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "account-summary", key: "summary" },
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "avatar" },
                        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("img", { height: "48", src: state.user.avatarUrl }),
                        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", { className: "provider_icon fa-stack fa-2x" },
                            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "fas fa-circle fa-stack-2x" }),
                            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: Object(api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["loginProviderIcon"])(state.provider) + " fa-stack-1x fa-inverse" }))),
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", null,
                        "You are currently signed in using ",
                        Object(api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["loginProviderDisplayName"])(state.provider),
                        " as ",
                        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, state.user.handle),
                        ".")),
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](layout_top_bar_account__WEBPACK_IMPORTED_MODULE_6__["StaySignedInCheckbox"], { key: "stayLoggedIn", value: _this.state.staySignedIn, onChange: function (v) { return _this.toggleStayLoggedIn(v); } })),
            _this.subscriptionRow(state, _this.state.accountDetails),
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "my-1 text-center" },
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button", onClick: function () { return _this.signOut(); }, key: "logoutButton" },
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "fas fa-sign-out-alt mr-2" }),
                    "Sign out"),
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("button", { className: "ui-button ml-1", onClick: function () { return _this.close(); }, key: "closeButton" }, "Close")))); };
        _this.subscriptionRow = function (auth, accountDetails) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](Row, { heading: "Subscription" }, (function () {
            if (!accountDetails)
                return _this.individualAccountDetails(auth, undefined);
            switch (accountDetails.type) {
                case "domain": return _this.domainAccountDetails(accountDetails);
                case "managed": return _this.managedAccountDetails(accountDetails);
                case "individual": return _this.individualAccountDetails(auth, accountDetails);
            }
        })())); };
        _this.individualAccountDetails = function (auth, accountDetails) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](react__WEBPACK_IMPORTED_MODULE_8__["Fragment"], null,
            accountDetails ?
                _this.renderCurrentAccountDetails(accountDetails)
                : _this.renderStartAccountDetails(),
            accountDetails && !accountDetails.auto_renew ?
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button mr-1 mb-1", onClick: _this.resumeSubscription },
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "" }),
                    "Resume plan")
                : undefined,
            !accountDetails ?
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_10__["TierContext"].Consumer, null, function (tiers) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button mr-1 mb-1 highlight", onClick: function () { return tiers.popup("MyAccount"); }, key: "plan" },
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "" }),
                    "Upgrade plan")); })
                : /* Otherwise show a "Manage subscription" button that takes users to Stripe portal. */
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button mr-1 mb-1", onClick: _this.openStripeCustomerPortal, key: "manage" },
                        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "" }),
                        "Manage"),
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button mr-1", onClick: function () { return _this.refreshPurchase(auth); } },
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "" }),
                "Refresh"),
            accountDetails && accountDetails.auto_renew && !_this.state.showCancelDialog ?
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "ui-button mr-1 mb-1", onClick: function () { return _this.setState({ showCancelDialog: true }); } },
                    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("i", { className: "" }),
                    "Cancel plan")
                : undefined,
            _this.state.showCancelDialog ?
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](CancelPlanConfirmation, { onConfirm: function () { _this.cancelSubscription(); _this.setState({ showCancelDialog: false }); }, onNoop: function () { return _this.setState({ showCancelDialog: false }); } })
                : undefined,
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "text-muted my-1" },
                "For any queries, please email ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("a", { href: "mailto:support@chemix.org", target: "_blank" }, "support@chemix.org"),
                "."))); };
        _this.domainAccountDetails = function (details) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](react__WEBPACK_IMPORTED_MODULE_8__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
                "Current plan: ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](_tiers_badge__WEBPACK_IMPORTED_MODULE_14__["Badge"], { tier: details.tier, showHint: false }),
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null,
                    details.tier.capitalise(),
                    " "),
                " ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
                "Your account is part of the ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, details.domain),
                " domain."))); };
        _this.managedAccountDetails = function (details) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"](react__WEBPACK_IMPORTED_MODULE_8__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
                "Current plan: ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](_tiers_badge__WEBPACK_IMPORTED_MODULE_14__["Badge"], { tier: details.tier, showHint: false }),
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null,
                    details.tier.capitalise(),
                    " "),
                " ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
                "Your account is managed by ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, details.managedBy),
                "."))); };
        /** Renders the account summary if the user does not have a paid subscription. */
        _this.renderStartAccountDetails = function () { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
            "Current plan: ",
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, "Start"))); };
        _this.renderCurrentAccountDetails = function (details) {
            var next_payment_date = react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, Object(date_fns__WEBPACK_IMPORTED_MODULE_5__["format"])(details.next_payment_date, "d MMM yyyy"));
            var payment = react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null,
                details.currency,
                "\u00A0",
                details.payment);
            return react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("p", null,
                "Current plan: ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"](_tiers_badge__WEBPACK_IMPORTED_MODULE_14__["Badge"], { tier: details.tier, showHint: false }),
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null,
                    details.tier.capitalise(),
                    " "),
                " ",
                react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("br", null),
                details.auto_renew ?
                    details.is_trial ?
                        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", null,
                            "You are on a free trial until ",
                            next_payment_date,
                            ". You will then be charged ",
                            payment,
                            ".")
                        :
                            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", null,
                                "Your plan will automatically renew on ",
                                next_payment_date,
                                ". You will be charged ",
                                payment,
                                ".")
                    : react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", null,
                        "Your plan is valid until and will expire on ",
                        next_payment_date,
                        "."));
        };
        _this.renderLoggedOut = function () { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", null, "You are signed out.")); };
        _this.state = {
            isOpened: false,
            fetchedAccountDetails: false,
            staySignedIn: Object(_api_auth_storage__WEBPACK_IMPORTED_MODULE_12__["retrieveToken"])() != null,
            showCancelDialog: false,
        };
        return _this;
    }
    MyAccountModal.prototype.signOut = function () {
        store_store__WEBPACK_IMPORTED_MODULE_9__["default"].dispatch(Object(_store_actions__WEBPACK_IMPORTED_MODULE_13__["logOut"])());
        this.close();
    };
    MyAccountModal.prototype.componentDidMount = function () {
        _super.prototype.componentDidMount.call(this);
        Object(_view_tooltips__WEBPACK_IMPORTED_MODULE_16__["setUpQTip"])(this.ref.current);
    };
    MyAccountModal.prototype.onOpen = function () {
        this.setState({ fetchedAccountDetails: false });
        this.refreshAccountDetails();
    };
    MyAccountModal.prototype.toggleStayLoggedIn = function (staySignedIn) {
        if (this.props.auth.state == "logged_in") {
            if (staySignedIn) {
                // Store token.
                Object(log__WEBPACK_IMPORTED_MODULE_7__["clog"])("store token to storage");
                Object(_api_auth_storage__WEBPACK_IMPORTED_MODULE_12__["storeToken"])(this.props.auth.jwtToken);
            }
            else {
                // Erase token.
                Object(log__WEBPACK_IMPORTED_MODULE_7__["clog"])("Clear token");
                Object(_api_auth_storage__WEBPACK_IMPORTED_MODULE_12__["clearToken"])();
            }
            toastr.success("Preference saved.");
            this.setState({
                staySignedIn: staySignedIn
            });
        }
    };
    MyAccountModal.prototype.refreshAccountDetails = function () {
        var _this = this;
        Object(api_api__WEBPACK_IMPORTED_MODULE_1__["callApi"])("account/details", "GET", this.props.auth, undefined, {
            success: function (response) {
                // Convert the response to state.
                var accountDetails = response.planDetails;
                _this.setState({ fetchedAccountDetails: true });
                _this.setState((function () {
                    if (!accountDetails) {
                        return { accountDetails: undefined };
                    }
                    switch (accountDetails.type) {
                        case "individual":
                            return {
                                accountDetails: {
                                    type: accountDetails.type,
                                    tier: accountDetails.tier,
                                    payment: accountDetails.payment,
                                    currency: accountDetails.currency,
                                    interval: accountDetails.interval,
                                    next_payment_date: new Date(accountDetails.next_payment_date),
                                    auto_renew: accountDetails.auto_renew,
                                    is_trial: accountDetails.is_trial,
                                }
                            };
                        case "managed":
                        case "domain":
                            return { accountDetails: accountDetails };
                    }
                })());
            },
        });
    };
    return MyAccountModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_4__["Remodal"]));

/** A row (or section) containing some settings. */
var Row = function (props) { return react__WEBPACK_IMPORTED_MODULE_8__["createElement"](react__WEBPACK_IMPORTED_MODULE_8__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "row" },
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "col-12 col-sm-3 text-muted text-sm-right" },
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, props.heading)),
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "col-12 col-sm-9 text-left" }, props.children)),
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("hr", null)); };
var CancelPlanConfirmation = function (props) { return (react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("div", { className: "mt-2 border border-danger rounded text-left p-2" },
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("span", { className: "text-danger" },
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, "Are you sure you want to cancel your subscription? You will lose the following benefits:")),
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("ul", { className: "fa-ul feature-list mt-1" },
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"](tiers_promo_plus__WEBPACK_IMPORTED_MODULE_11__["Item"], { icon: "image" },
            react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("b", null, "High Quality"),
            " image export"),
        react__WEBPACK_IMPORTED_MODULE_8__["createElement"](tiers_promo_plus__WEBPACK_IMPORTED_MODULE_11__["BoostFeatureList"], null)),
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("button", { className: "ui-button mr-1", onClick: props.onNoop }, "No, keep subscription."),
    react__WEBPACK_IMPORTED_MODULE_8__["createElement"]("button", { className: "ui-button mr-1 danger", onClick: props.onConfirm }, "Yes, cancel"))); };


/***/ }),

/***/ "I6sZ":
/*!***************************************!*\
  !*** ./src/apparatus/library/pump.ts ***!
  \***************************************/
/*! exports provided: Pump */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pump", function() { return Pump; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Pump = /** @class */ (function () {
    function Pump() {
    }
    Pump.prototype.render = function (appearance) {
        var _a = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].pump(), body = _a.body, insert = _a.insert, cog = _a.cog;
        body.children[0].children[2].strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
        insert.children[0].children[1].strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        cog.children[0].children[1].strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        insert.rotate(90);
        insert.position.x -= 21;
        insert.position.y -= -18 + 55 * appearance.insertion;
        cog.position.x += 3;
        cog.position.y += 5;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([insert, cog, body]);
        graphic.scale(1.5);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return {
            graphic: graphic, hitShape: hitShape, pivot: body.bounds.center
        };
    };
    Pump.properties = {
        label: "Pump",
        canContainLiquids: false,
        defaultAppearance: {
            insertion: 0.5
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "insertion", label: "Slide",
                min: 0, max: 1, step: 0.01, unit: "%",
            }
        ],
    };
    return Pump;
}());



/***/ }),

/***/ "IFqG":
/*!**************************!*\
  !*** ./src/view/zoom.ts ***!
  \**************************/
/*! exports provided: ZoomCommand */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoomCommand", function() { return ZoomCommand; });
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var ZoomCommand = /** @class */ (function () {
    function ZoomCommand(from, to) {
        this.from = from;
        this.to = to;
    }
    ZoomCommand.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_0__["default"].dispatchFn("Zoom", mutator(this.to));
    };
    ZoomCommand.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_0__["default"].dispatchFn("Zoom", mutator(this.from));
    };
    return ZoomCommand;
}());

function mutator(zoom) {
    return function (state) { return (__assign(__assign({}, state), { zoom: zoom })); };
}


/***/ }),

/***/ "ITsu":
/*!******************************************!*\
  !*** ./src/apparatus/library/spatula.ts ***!
  \******************************************/
/*! exports provided: Spatula */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spatula", function() { return Spatula; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Spatula = /** @class */ (function () {
    function Spatula() {
    }
    Spatula.prototype.render = function (appearance) {
        var spatula = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-20, 0]], [[0, 0]], [[45, -90]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(spatula);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([spatula]);
        if (appearance.contents != "empty") {
            var contentsColor = appearance.color;
            var strokeColor = contentsColor.color().darken(0.3).hex();
            var pile = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-20, 0], undefined, [5, -15]], [[2, 0], [-5, -15]]));
            pile.strokeColor = strokeColor;
            pile.strokeWidth = 2.0;
            pile.fillColor = contentsColor;
            graphic.insertChild(0, pile);
            if (appearance.contents == "mixture") {
                // Add some dots.
                var dots = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([
                    paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-18, -5), 2.0),
                    paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-12, -7), 2.0),
                    paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-8, -3), 2.0),
                    paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-3, -7), 2.0),
                ]);
                dots.fillColor = strokeColor;
                graphic.addChild(dots);
            }
        }
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    Spatula.properties = {
        label: "Spatula",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            contents: "empty",
            color: "#90cc89",
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "contents", label: "Contents",
                options: [
                    { value: "empty", label: "Empty" },
                    { value: "pure", label: "Solid" },
                    { value: "mixture", label: "Powder" }
                ]
            },
            {
                spec: "color", key: "color", label: "Contents colour",
                visible: function (a) { return a.contents != "empty"; }
            }
        ],
    };
    return Spatula;
}());



/***/ }),

/***/ "InFj":
/*!***************************************!*\
  !*** ./src/apparatus/library/lamp.ts ***!
  \***************************************/
/*! exports provided: Lamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lamp", function() { return Lamp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var Lamp = /** @class */ (function () {
    function Lamp() {
    }
    Lamp.convertToLatest = function (input) {
        if ("light" in input) {
            switch (input.light) {
                case "off": return { color: "off", glow: "small", scale: 1.0 };
                case "noglow": return { color: "yellow", glow: "off", scale: 1.0 };
                case "small": return { color: "yellow", glow: "small", scale: 1.0 };
                case "large": return { color: "yellow", glow: "large", scale: 1.0 };
            }
        }
        return input;
    };
    Lamp.prototype.render = function (appearance) {
        var lamp = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].bulb();
        lamp.scale(4.0);
        lamp.strokeWidth = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        var _a = this.lampColors(appearance.color), fill = _a[0], stroke = _a[1], glowColor = _a[2];
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([lamp]);
        lamp.children[0].children[0].fillColor = fill;
        lamp.children[0].children[0].strokeColor = stroke;
        if (appearance.color !== "off" && appearance.glow != "off") {
            // Add glow.
            var radius = appearance.glow == "large" ? 150.0 : 50;
            var glow = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(5, -5), radius);
            glow.setRadialGradientFill([[glowColor + "b0", 0.2], [glowColor + "00", 1.0]]);
            graphic.addChild(glow);
        }
        graphic.scale(appearance.scale);
        return { graphic: graphic, hitShape: lamp.bounds.toShape(), pivot: lamp.bounds.center };
    };
    Lamp.prototype.lampColors = function (color) {
        switch (color) {
            case "off": return ["#eeeeee", "#bbbbbb", "#ffffff" /* unused */];
            case "yellow": return ["#fce94f", "#c4a000", "#fff189"];
            case "red": return ["#ffb99e", "#fd3939", "#ff957a"];
            case "green": return ["#def779", "#97d435", "#aafc83"];
            case "blue": return ["#75ffff", "#3ea8e6", "#5192f5"];
        }
    };
    Lamp.properties = {
        label: "Bulb",
        canContainLiquids: false,
        defaultAppearance: {
            color: "yellow",
            glow: "small",
            scale: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 2.0, step: 0.01, unit: "%",
            },
            {
                spec: "radio", key: "color", label: "Color",
                options: [
                    { value: "off", label: "Off" },
                    { value: "yellow", label: "Yellow" },
                    { value: "red", label: "Red" },
                    { value: "green", label: "Green" },
                    { value: "blue", label: "Blue" },
                ]
            },
            {
                spec: "radio", key: "glow", label: "Glow",
                options: [
                    { value: "off", label: "None" },
                    { value: "small", label: "Small" },
                    { value: "large", label: "Large" },
                ],
                visible: function (a) { return a.color !== "off"; }
            }
        ],
    };
    return Lamp;
}());



/***/ }),

/***/ "JCGD":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/biology/organic/potato.ts ***!
  \*********************************************************/
/*! exports provided: Potato */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Potato", function() { return Potato; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var HIGHLIGHT = [
    ["#fde9ae60", 0.0],
    ["#fde9ae00", 1.0],
];
var Potato = /** @class */ (function () {
    function Potato() {
    }
    Potato.prototype.render = function (appearance) {
        var graphic = renderFns[appearance.type](appearance);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.strokeBounds.toShape(),
        };
    };
    Potato.properties = {
        label: "Potato",
        canContainLiquids: false,
        defaultAppearance: {
            type: "whole",
            scale: 1.0,
            length: 70,
            diameter: 15,
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 2.0, step: 0.01, unit: "%",
            },
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "whole", label: "Whole potato" },
                    { value: "chip", label: "Chip" },
                    { value: "cylinder", label: "Cylinder (Core)" },
                ],
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 20, max: 100, unit: "mm",
                visible: function (a) { return a.type === "chip" || a.type === "cylinder"; }
            },
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 10, max: 30, unit: "mm"
            }
        ],
    };
    return Potato;
}());

var renderFns = {
    "whole": renderWhole,
    "chip": renderChip,
    "cylinder": renderCore,
};
function renderWhole(_) {
    var shape = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-30, -30], [-21, 15], [27, -20]], [[53, -40], [-18, -13], [26, 19]], [[53, 17], [10, -4], [-43, 18]], [[-40, 32], [45, 22], [-22, -11]]));
    shape.closePath();
    shape.setGradientFill("right-down", [
        ["#e2b15d", 0.0],
        ["#d5a14d", 0.4],
        ["#a56314", 0.9],
    ]);
    shape.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#775025");
    var highlight1 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-25, -12), 30);
    highlight1.setRadialGradientFill(HIGHLIGHT);
    highlight1.scale(1.0, 0.5);
    highlight1.rotate(-30);
    var highlight2 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(30, -26), 20);
    highlight2.setRadialGradientFill(HIGHLIGHT);
    highlight2.scale(1.0, 0.8);
    highlight2.rotate(40);
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([shape, highlight1, highlight2]);
}
function renderChip(a) {
    var diameter = a.diameter, length = a.length;
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
        // Light shade.
        paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 0.625 * diameter, length)).withFill("#edd090"),
        // Dark shade.
        paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0.624 * diameter, 0, 0.376 * diameter, length)).withFill("#d9b462"),
        // Outline.
        paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, diameter, length), 2.0).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#9a7744"),
    ]);
}
function renderCore(a) {
    var diameter = a.diameter, length = a.length;
    var top = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, diameter, diameter / 2, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER));
    var bottom = top.clone();
    bottom.position.y += length;
    var body = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, diameter, length, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER));
    top.fillColor = "#f7e1b0";
    var body3d = body.unite(bottom);
    var outline = body3d.unite(top);
    body3d.withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#edd090".color()));
    bottom.remove();
    body.remove();
    outline.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#9a7744");
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
        body3d, top, outline
    ]);
}


/***/ }),

/***/ "JHtj":
/*!*************************!*\
  !*** ./src/text/ui.tsx ***!
  \*************************/
/*! exports provided: PropertyPanelHint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyPanelHint", function() { return PropertyPanelHint; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var text_parse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! text/parse */ "YKxB");
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tiers/badge */ "2UKY");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tiers/context */ "tya1");





/**
 * Hint UI element explaning how ChemMark works, to be used in the Property panel.
 * @param props: showUpgradeHint: if set to true, the upgrade hint will be shown if the user is not upgraded.
 */
var PropertyPanelHint = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_4__["TierContext"].Consumer, null, function (tiers) {
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "boxed-hint" },
            "Automatically converts",
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("ul", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null, "H2SO4 to H\u2082SO\u2084"),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null, "Mg2+ to Mg\u00B2\u207A"),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("li", null, "cm3 to cm\u00B3 \u2026")),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "#", "data-beacon-article-sidebar": support_beacon__WEBPACK_IMPORTED_MODULE_1__["Articles"].CHEMTEXT }, "Learn more"),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("br", null),
            !tiers.tier && props.showUpgradeHint ? react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("hr", null),
                "On free tier, this feature is ",
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("b", null,
                    "limited to first ",
                    text_parse__WEBPACK_IMPORTED_MODULE_2__["ChemMark"].FREE_TIER_CHAR_LIMIT),
                " letters. After that, \u26A0\uFE0F is added. Upgrade to remove this restriction ",
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_3__["Badge"], { tier: "boost" }),
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { className: "ui-button highlight text-center mt-1", onClick: function () { return tiers.popup("ChemText"); } }, "Upgrade")) : undefined);
    });
};


/***/ }),

/***/ "JK3v":
/*!************************************************!*\
  !*** ./src/apparatus/library/shapes/common.ts ***!
  \************************************************/
/*! exports provided: BasicShapes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicShapes", function() { return BasicShapes; });
/* harmony import */ var components_colorpicker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/colorpicker */ "0J4H");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var defaultSwatches = __assign({ "Black": "#000000", "Grey 1": "#333333", "Grey 2": "#666666", "Grey 3": "#999999", "Grey 4": "#cccccc", "White": "#ffffff" }, components_colorpicker__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_SWATCHES"]);
var demoSwatches = {
    "Black": "#333333",
    "Grey": "#666666",
    'Blue': '#80cce6',
    'Red': '#e33d4d',
    'Green': '#3ac433',
};
var DEFAULT_STROKE = "#333333";
var DEFAULT_STROKE_THICKNESS = 4.0;
var MIN_BOUNDS = 40;
var BasicShapes;
(function (BasicShapes) {
    var StrokeOnly;
    (function (StrokeOnly) {
        StrokeOnly.defaultAppearance = {
            stroke: DEFAULT_STROKE,
            strokeThickness: DEFAULT_STROKE_THICKNESS
        };
        StrokeOnly.specs = [
            { spec: "header", header: "Stroke", icon: "r,square" },
            {
                spec: "color", key: "stroke", label: "Colour",
                swatches: defaultSwatches,
                demoSwatches: demoSwatches,
            },
            {
                spec: "slider", key: "strokeThickness", label: "Thickness",
                tier: "boost",
                min: 1, max: 20,
            },
        ];
        function apply(item, appearance) {
            item.strokeWidth = appearance.strokeThickness;
            item.strokeColor = appearance.stroke;
        }
        StrokeOnly.apply = apply;
    })(StrokeOnly = BasicShapes.StrokeOnly || (BasicShapes.StrokeOnly = {}));
    BasicShapes.defaultAppearance = {
        style: "full",
        fill: "#cccccc",
        fillAlpha: 1.0,
        stroke: DEFAULT_STROKE,
        strokeThickness: DEFAULT_STROKE_THICKNESS
    };
    BasicShapes.header = { spec: "header", header: "Options", icon: "shapes" };
    BasicShapes.specs = [
        {
            spec: "toggle-buttons", key: "style", label: "Style", size: "large",
            options: [
                { value: "full", label: "With border", icon: "d,square fa-swap-opacity" },
                { value: "fill-only", label: "No border", icon: "square" },
            ],
        },
        { spec: "header", header: "Fill", icon: "square", visible: function (a) { return a.style == "full" || a.style == "fill-only"; } },
        {
            spec: "color", key: "fill", label: "Colour",
            swatches: components_colorpicker__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_SWATCHES"],
            demoSwatches: demoSwatches,
            opacity: { key: "fillAlpha", range: [0, 1] },
            visible: function (a) { return a.style == "full" || a.style == "fill-only"; }
        },
        { spec: "header", header: "Border", icon: "r,square", visible: function (a) { return a.style == "full" || a.style == "stroke-only"; } },
        {
            spec: "color", key: "stroke", label: "Colour",
            tier: "boost",
            swatches: components_colorpicker__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_SWATCHES"],
            demoSwatches: demoSwatches,
            visible: function (a) { return a.style == "full" || a.style == "stroke-only"; }
        },
        {
            spec: "slider", key: "strokeThickness", label: "Thickness",
            tier: "boost",
            min: 1, max: 10,
            visible: function (a) { return a.style == "full" || a.style == "stroke-only"; }
        },
    ];
    function applyStyle(item, appearance) {
        if (appearance.style == "full" || appearance.style == "stroke-only") {
            // Draw stroke.
            StrokeOnly.apply(item, appearance);
        }
        if (appearance.style == "full" || appearance.style == "fill-only") {
            // Draw fill.
            item.fillColor = fillColor(appearance);
        }
    }
    BasicShapes.applyStyle = applyStyle;
    function applyCustom(appearance, setFill, setStroke) {
        if (appearance.style == "full" || appearance.style == "stroke-only") {
            // Draw stroke.
            setStroke(appearance.strokeThickness, appearance.stroke);
        }
        if (appearance.style == "full" || appearance.style == "fill-only") {
            // Draw fill.
            setFill(fillColor(appearance));
        }
    }
    BasicShapes.applyCustom = applyCustom;
    function fillColor(appearance) {
        return appearance.fill.color().alpha(appearance.fillAlpha).string();
    }
    BasicShapes.fillColor = fillColor;
    function bounds(item) {
        var bounds = item.strokeBounds;
        var diff = MIN_BOUNDS - Math.min(bounds.height, bounds.width);
        if (diff > 0) {
            bounds = bounds.expand(diff);
        }
        return bounds.toShape();
    }
    BasicShapes.bounds = bounds;
})(BasicShapes || (BasicShapes = {}));


/***/ }),

/***/ "JTYd":
/*!*************************************************!*\
  !*** ./src/bootstrap_colorpicker_extensions.ts ***!
  \*************************************************/
/*! exports provided: registerBootstrapColorpickerExtensions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerBootstrapColorpickerExtensions", function() { return registerBootstrapColorpickerExtensions; });
/* harmony import */ var _view_tooltips__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view/tooltips */ "6T3+");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var colorClipboard = "";
/** Registers extensions for bootstrap color picker */
function registerBootstrapColorpickerExtensions() {
    var ExtensionClass = $.colorpicker.Extension;
    $.colorpicker.extensions["extrabuttons"] = /** @class */ (function (_super) {
        __extends(class_1, _super);
        function class_1(a, b) {
            var _this = _super.call(this, a, b) || this;
            _this.element = null;
            return _this;
        }
        class_1.prototype.onCreate = function (e) {
            var colorpicker = this.colorpicker;
            this.element = $("<div class='mt-2 clearfix'>" +
                "<div class='horizontal-button-group d-block float-left fs-16'>" +
                "<div class='ui-button squarer' title='Copy colour'><i class='far fa-copy fa-fw' />&#8203;</div>" +
                "<div class='ui-button squarer' title='Paste colour'><i class='far fa-clipboard fa-fw' />&#8203;</div>" +
                "</div>" +
                "<div class='ui-button squarer d-block float-right fs-16' title='Close'>" +
                "<i class='fas fa-times fa-fw' />&#8203;" +
                "</div>" +
                "</div>");
            colorpicker.picker.append(this.element);
            // Copy.
            this.element.get(0).childNodes[0].childNodes[0].onclick = function (e) {
                colorClipboard = colorpicker.getValue();
            };
            // Paste.
            this.element.get(0).childNodes[0].childNodes[1].onclick = function (e) {
                if (colorClipboard !== "") {
                    colorpicker.setValue(colorClipboard);
                }
            };
            // Close.
            this.element.get(0).childNodes[1].onclick = function (e) {
                // First call to hide does not stick. Have to call it twice.
                colorpicker.hide();
                colorpicker.hide();
            };
            Object(_view_tooltips__WEBPACK_IMPORTED_MODULE_0__["setUpQTip"])(this.element);
        };
        class_1.prototype.resolveColor = function () { };
        return class_1;
    }(ExtensionClass));
    $.colorpicker.extensions["manualinput"] = /** @class */ (function (_super) {
        __extends(class_2, _super);
        function class_2(a, b) {
            var _this = _super.call(this, a, b) || this;
            _this.element = null;
            return _this;
        }
        class_2.prototype.onCreate = function (e) {
            var colorpicker = this.colorpicker;
            this.element = $("<div class='mt-2'>" +
                "<input type='text' class='ui-input w-100' />" +
                "</div>");
            colorpicker.picker.append(this.element);
            // Input.
            this.inputField = this.element.get(0).childNodes[0];
            this.inputField.value = colorpicker.getValue();
            this.inputField.onchange = function (e) {
                colorpicker.setValue(e.target.value);
            };
        };
        class_2.prototype.onUpdate = function () {
            var colorpicker = this.colorpicker;
            if (this.inputField) {
                this.inputField.value = colorpicker.getValue();
            }
        };
        return class_2;
    }(ExtensionClass));
}


/***/ }),

/***/ "Jgwi":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/accessories/drop_counter.ts ***!
  \***********************************************************/
/*! exports provided: DropCounter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropCounter", function() { return DropCounter; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var BOTTOM_EDGE_BIT = [
    [[130, 0]],
    [[128, 4], [2, 0]],
    [[115, 4]],
    [[115, 0]],
    [[85, 0]],
    [[85, 4]],
    [[72, 4], , [-2, 0]],
    [[70, 2]],
    [[70, 0]],
    [[8, 0], , [0, -3]],
    [[-8, 0], [0, -3]],
    [[-20, 0]],
];
var DropCounter = /** @class */ (function () {
    function DropCounter() {
    }
    DropCounter.prototype.render = function (appearance) {
        var top = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, __spreadArrays([[[-15, -5]],
            [[130, -5]]], BOTTOM_EDGE_BIT))).withFill("#777777").close();
        var shade = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, __spreadArrays([[[-15, -5]],
            [[130, -5]]], BOTTOM_EDGE_BIT.map(function (s) { return [[s[0][0], s[0][1] + 10], s[1], s[2]]; }), [[[-20, 0]]]))).close();
        var outline = shade.clone();
        outline.withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke);
        shade.withGradientFill("right", [
            ["#444444", 0.08],
            ["#333333", 0.081],
            ["#555555", 0.18],
            ["#444444", 0.181],
            ["#444444", 0.59],
            ["#555555", 0.61],
            // first bit sticking out.
            ["#555555", 0.69],
            ["#444444", 0.70],
            // depression bit.
            ["#444444", 0.89],
            ["#555555", 0.9],
        ]);
        var screw = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-15, 3, 20, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT), 0.0).withFill("#aaaaaa");
        var screwTop = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-32, 3, 8, 16, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT), 2.0)
            .withStroke("thin", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke)
            .withGradientFill("up", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].simple("#555555".color()));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([screw, screwTop, shade, top, outline]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "attachable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0) }
            ]
        };
    };
    DropCounter.properties = {
        label: "Drop Counter",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return DropCounter;
}());



/***/ }),

/***/ "JkqK":
/*!**************************************************!*\
  !*** ./src/apparatus/library/accessories/tap.ts ***!
  \**************************************************/
/*! exports provided: Tap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tap", function() { return Tap; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common/tap */ "ndDi");


var Tap = /** @class */ (function () {
    function Tap() {
    }
    Tap.prototype.render = function (appearance) {
        var graphic = Object(apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_1__["createTap"])(appearance.tapOpening);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)
        };
    };
    Tap.properties = {
        label: "Tap",
        canContainLiquids: false,
        defaultAppearance: apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_1__["Tap"].defaultAppearance,
        appearanceSpecs: [apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_1__["Tap"].appearanceSpec],
    };
    return Tap;
}());



/***/ }),

/***/ "Jotj":
/*!********************************************************!*\
  !*** ./src/apparatus/library/measure/conductimeter.ts ***!
  \********************************************************/
/*! exports provided: Conductimeter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Conductimeter", function() { return Conductimeter; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var Conductimeter = /** @class */ (function () {
    function Conductimeter() {
        this.drivers = [
            {
                type: "rectangle",
                minX: -150, maxX: 150,
                minY: 0, maxY: 200,
                toAppearance: function (p) { return ({ probeX: p.x, probeY: p.y }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.probeX, a.probeY); },
                scale: 1.0,
            }
        ];
    }
    Conductimeter.prototype.render = function (appearance) {
        var probeOffsetX = appearance.probeX;
        var probeOffsetY = appearance.probeY;
        // Create a reader
        var casing = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 60, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 4);
        casing.fillColor = "#dddddd";
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(casing);
        var screen = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 7, 46, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 2);
        screen.strokeWidth = 2.0;
        screen.strokeColor = "#777777";
        screen.fillColor = "white";
        var button = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-10, 80), 7);
        button.fillColor = "#5c9adb";
        button.strokeWidth = 2.0;
        button.strokeColor = "#3c6fa6";
        var button2 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(10, 80), 7);
        button2.fillColor = "#5c9adb";
        button2.strokeWidth = 2.0;
        button2.strokeColor = "#3c6fa6";
        var display = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 25),
            content: appearance.reading,
            fillColor: 'black',
            fontFamily: 'sans-serif',
            fontSize: 15,
            justification: "center",
        });
        var unitLabel = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-20, 50),
            content: appearance.units,
            fillColor: "#888888",
            fontFamily: 'sans-serif',
            fontSize: 14,
            justification: "left",
        });
        var reader = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([casing, screen, display, unitLabel, button, button2]);
        // Create the probe
        var probeRod = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["CenterR"])(0, 60, 10, 120));
        probeRod.setGradientFill("right", [["#444444", 0.0], ["#222222", 1.0]]);
        var probeTop = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["CenterR"])(0, 15, 13, 30));
        probeTop.fillColor = "#cccccc";
        probeTop.strokeColor = "#aaaaaa";
        probeTop.strokeWidth = 2.0;
        var probe = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([probeRod, probeTop]);
        probe.position = probe.position.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(probeOffsetX, probeOffsetY));
        // Create the wire.
        var wire = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 100], undefined, [0, 50]], [[probeOffsetX, probeOffsetY], [0, -50]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(wire);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([reader, probe, wire]);
        var hitShapes = [
            probe.bounds.toShape(),
            reader.bounds.toShape(),
        ];
        return {
            graphic: graphic,
            hitShape: hitShapes, pivot: casing.bounds.center,
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(20, -5)
        };
    };
    Conductimeter.convertToLatest = function (old) {
        if (!old.x) {
            old.probeX = old.position == "right" ? 150 : -150;
            old.probeY = 100;
        }
        return old;
    };
    Conductimeter.properties = {
        label: "Conductimeter",
        canContainLiquids: false,
        defaultAppearance: {
            reading: "0.0",
            units: "µS/cm",
            probeX: 150,
            probeY: 100,
        },
        appearanceSpecs: [
            {
                spec: "text", key: "reading", label: "Reading",
                numbersOnly: true, maxLength: 6,
            },
            {
                spec: "radio", key: "units", label: "Units",
                options: [
                    { value: "µS/cm", label: "µS/cm" },
                    { value: "S/m", label: "S/m" },
                ],
            }
        ],
    };
    return Conductimeter;
}());



/***/ }),

/***/ "Js+g":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/accessories/paper_clip.ts ***!
  \*********************************************************/
/*! exports provided: PaperClip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PaperClip", function() { return PaperClip; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var components_colorpicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/colorpicker */ "0J4H");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var PaperClip = /** @class */ (function () {
    function PaperClip() {
    }
    PaperClip.prototype.render = function (appearance) {
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-20, 49]], [[-20, -68], , [0, -22]], [[19, -68], [0, -22]], [[19, 105], , [0, 30]], [[-40, 105], [0, 30]], [[-40, -105], , [0, -45]], [[38, -105], [0, -45]], [[38, 48]])).withStroke(appearance.scale * 2, appearance.color);
        graphic.strokeCap = "round";
        graphic.scale(appearance.scale * 0.125);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(5).toShape()
        };
    };
    PaperClip.properties = {
        label: "Paper Clip",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            scale: 1.0,
            color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Zoom",
                min: 1, max: 5, step: 0.01, unit: "%",
            },
            {
                spec: "color", key: "color", label: "Color", tier: "boost",
                demoSwatches: { "Default": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke, "Metal": "#999999" },
                swatches: __assign({ "Default": apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke, "Metal": "#999999" }, components_colorpicker__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_SWATCHES"])
            }
        ],
    };
    return PaperClip;
}());



/***/ }),

/***/ "Ju2P":
/*!******************************************************************!*\
  !*** ./src/apparatus/library/distillation/distillation_flask.ts ***!
  \******************************************************************/
/*! exports provided: DistillationFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DistillationFlask", function() { return DistillationFlask; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);





/** Interpolator, converts height to corresponding bulb size. */
var bulbDiameterLerp = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Interpolator"]([100, 300], [40, 136]);
/** Interpolator, converts height to corresponding neck diameter. */
var neckSizeLerp = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Interpolator"]([100, 300], [18, 28]);
/**
 * Based on https://scienceequip.com.au/products/distilling-flasks-fused-quartz
 */
var DistillationFlask = /** @class */ (function () {
    function DistillationFlask() {
    }
    DistillationFlask.prototype.render = function (appearance) {
        var height = appearance.height;
        var bulbDiameter = bulbDiameterLerp.interpolate(height);
        var neckWidth = neckSizeLerp.interpolate(height);
        var bulb = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -bulbDiameter / 2), bulbDiameter / 2);
        var neck = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[neckWidth / 2, -height]], [[neckWidth / 2, -20]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(neck);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLipsReversed"])(neck);
        neck.closePath();
        var outletPivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -(height + bulbDiameter) / 2 - 10);
        var outletAngle = 17;
        var outletLength = bulbDiameter / 2 + 50;
        var outlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, outletPivot.y, outletLength, 12));
        outlet.rotate(outletAngle, outletPivot);
        var shape = bulb.unite(neck).unite(outlet);
        var liquidMask = shape.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(shape, 4, 8);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outletLength, outletPivot.y + 6).rotate(outletAngle, outletPivot), facing: 90 + outletAngle }
            ]
        };
    };
    DistillationFlask.properties = {
        label: "Distillation Flask",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            height: 180
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 100, max: 300
            }
        ],
    };
    return DistillationFlask;
}());



/***/ }),

/***/ "JuZC":
/*!*******************************!*\
  !*** ./src/support/beacon.ts ***!
  \*******************************/
/*! exports provided: Bcn, Articles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bcn", function() { return Bcn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Articles", function() { return Articles; });
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vars */ "nHh6");

/** Beacon wrapper */
var Bcn;
(function (Bcn) {
    function init() {
        (function (e, t, n) { function a() { var e = t.getElementsByTagName("script")[0], n = t.createElement("script"); n.type = "text/javascript", n.async = !0, n.src = "https://beacon-v2.helpscout.net", e.parentNode.insertBefore(n, e); } if (e.Beacon = n = function (t, n, a) { e.Beacon.readyQueue.push({ method: t, options: n, data: a }); }, n.readyQueue = [], "complete" === t.readyState)
            return a(); e.attachEvent ? e.attachEvent("onload", a) : e.addEventListener("load", a, !1); })(window, document, window.Beacon || function () { });
    }
    Bcn.init = init;
    function load() {
        Beacon('init', '2ee18501-cd54-44e1-8cac-b39bdfac6d17');
    }
    Bcn.load = load;
    function article(id, style) {
        Beacon('article', id, { type: style });
    }
    Bcn.article = article;
    function setSessionData(provider, user, tier) {
        // First reset session data.
        unsetSessionData();
        var data = {
            dbId: user.id,
            adminLink: "https://chemixapp.appspot.com/admin/lookup?emailOrId=" + user.id,
            tier: tier !== null && tier !== void 0 ? tier : "basic",
            oauthProvider: provider,
            avatar: user.avatarUrl,
            version: vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].version,
        };
        if (user.email)
            data["email"] = user.email;
        if (provider == "twitter" && user.handle)
            data["twitterHandle"] = user.handle;
        if (user.name)
            data["name"] = user.name;
        Beacon('session-data', data);
        // Identify.
        if (user.email) {
            Beacon('identify', { email: user.email });
        }
    }
    Bcn.setSessionData = setSessionData;
    function unsetSessionData() {
        Beacon('reset');
        Beacon('logout');
    }
    Bcn.unsetSessionData = unsetSessionData;
    function open() {
        Beacon('open');
    }
    Bcn.open = open;
    function ask() {
        Beacon('navigate', '/ask/');
        Beacon('open');
    }
    Bcn.ask = ask;
    function openSchoolEnquiry(numberOfStudents) {
        Beacon('prefill', {
            subject: 'Chemix: School subscription',
            text: 'I would like to request a quote for a Chemix subscription for my organisation. \n\nOrganisation name: \nNumber of students (estimate): ' + numberOfStudents,
        });
        Beacon('navigate', '/ask/message/');
        Beacon('open');
    }
    Bcn.openSchoolEnquiry = openSchoolEnquiry;
})(Bcn || (Bcn = {}));
/** Article IDs */
var Articles;
(function (Articles) {
    Articles.NEW = "5fb54c0b46e0fb0017fcd333";
    Articles.TOS = "5fb565c04cedfd00165b1a28";
    Articles.ABOUT = "5fb524eacff47e00160bb1a7";
    Articles.SCREEN_TOO_SMALL = "5fb5673acff47e0017d33160";
    Articles.CHEMTEXT = "5fb5690a4cedfd00165b1a34";
    Articles.IMAGE_FORMATS = "5fb56a42cff47e0017d33173";
    Articles.IMAGE_QUALITY = "5fb56e064cedfd001610e2f9";
    Articles.SUBSCRIPTIONS = "5fb564154cedfd001610e2b5";
    Articles.CHRISTMAS_PROMO = "5fbafd3a46e0fb0017fce7c8";
    Articles.LICENSE = "5fb56603cff47e00160bb3fe";
})(Articles || (Articles = {}));


/***/ }),

/***/ "KBmw":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/container/centrifugeTube.ts ***!
  \***********************************************************/
/*! exports provided: CentrifugeTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CentrifugeTube", function() { return CentrifugeTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



/**
 * Sources:
 *  - https://www.amazon.co.uk/StonyLab-Conical-Centrifuge-Polypropylene-Graduated/dp/B07MYY1WKW/ref=asc_df_B07MYY1WKW/?tag=googshopuk-21&linkCode=df0&hvadid=241063450015&hvpos=1o4&hvnetw=g&hvrand=9989796212979711613&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9045901&hvtargid=pla-757694563196&psc=1
 *  - https://www.amazon.co.uk/Uotyle-Plastic-Centrifuge-Conical-Graduated/dp/B07SQ1WVZ1/ref=asc_df_B07SQ1WVZ1/?tag=googshopuk-21&linkCode=df0&hvadid=375433463406&hvpos=1o9&hvnetw=g&hvrand=9989796212979711613&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9045901&hvtargid=pla-846557735754&psc=1&tag=&ref=&adgrpid=82457261171&hvpone=&hvptwo=&hvadid=375433463406&hvpos=1o9&hvnetw=g&hvrand=9989796212979711613&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9045901&hvtargid=pla-846557735754
 */
var CentrifugeTube = /** @class */ (function () {
    function CentrifugeTube() {
    }
    CentrifugeTube.prototype.render = function (appearance) {
        var width = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["interpolate"])(appearance.size, [10, 50], [20, 30]);
        var height = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["interpolate"])(appearance.size, [10, 50], [105, 117]);
        var tapering = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["interpolate"])(appearance.size, [10, 50], [25, 17]);
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[width / 2, 0]], [[width / 2, height - tapering]], [[3, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        var liquidMask = shape.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([shape]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2 - 5, height - tapering), 0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10));
        if (appearance.cap) {
            var cap = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -2, width + 4, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
            var capColor = capColors[appearance.capColor];
            cap.withStroke(3.0, capColor.color().darken(0.1).hex());
            cap.setGradientFill("right", [
                [capColor.color().lighten(0.1).hex(), 0.0],
                [capColor, 1.0]
            ]);
            graphic.addChild(cap);
        }
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape()
        };
    };
    CentrifugeTube.properties = {
        label: "Centrifuge tube",
        canContainLiquids: true,
        defaultAppearance: {
            cap: true,
            size: 50,
            capColor: "blue",
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 10, max: 50
            },
            {
                spec: "checkbox", key: "cap", label: "Show cap"
            },
            {
                spec: "radio", key: "capColor", label: "Cap colour",
                options: [
                    { value: "blue", label: "Blue" },
                    { value: "orange", label: "Orange" },
                    { value: "white", label: "White" },
                ],
                visible: function (a) { return a.cap; },
            }
        ],
    };
    return CentrifugeTube;
}());

var capColors = {
    "orange": "#d9901a",
    "blue": "#3475b8",
    "white": "#dddddd"
};


/***/ }),

/***/ "KHCx":
/*!*********************!*\
  !*** ./src/math.ts ***!
  \*********************/
/*! exports provided: areRotationsClose */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "areRotationsClose", function() { return areRotationsClose; });
/** Evaluates whether two rotations are close to each other. */
function areRotationsClose(r1, r2, tolerance) {
    var diff = Math.abs(r1 - r2);
    if (diff > 180)
        diff = 360 - diff;
    return diff <= tolerance;
}


/***/ }),

/***/ "KJd4":
/*!************************************************!*\
  !*** ./src/apparatus/library/physics/cable.ts ***!
  \************************************************/
/*! exports provided: Cable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cable", function() { return Cable; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/shapes/curve */ "t5XS");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};





var RED_COLOR = "#BD1E0C";
var BLACK_COLOR = "#222222";
var Cable = /** @class */ (function () {
    function Cable() {
        this.drivers = apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__["Curve"].drivers;
        this.shouldUseBoundsCenter = true;
    }
    Cable.prototype.render = function (appearance) {
        var _a = Object(apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__["drawCurve"])(appearance), path = _a.path, xray = _a.xray;
        path.withStroke("thick", appearance.color);
        var endClip = this.createClip(appearance);
        endClip.position = path.segments[0].point;
        endClip.rotation = path.segments[0].handleOut.angle + 180;
        var startClip = this.createClip(appearance);
        var lastSegment = path.segments[path.segments.length - 1];
        startClip.position = lastSegment.point;
        startClip.rotation = lastSegment.handleIn.angle + 180;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([path, endClip, startClip]);
        return {
            graphic: graphic,
            xray: xray,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
        };
    };
    Cable.prototype.createClip = function (appearance) {
        var color = appearance.color.color();
        var casing = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[24, 0]], [[32, 8]], [[32, 14]], [[0, 14]])).close()
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box(color));
        var connector = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, -2]], [[7, -2]], [[15, -2], [-5, -2]], [[18, -2], , [1, 2]])).close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorY"])(connector);
        connector.withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].gold.color()));
        connector.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
        connector.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(32, 11);
        var group = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([connector, casing]);
        group.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 4);
        return group;
    };
    Cable.properties = {
        label: "Cable",
        canContainLiquids: false,
        defaultAppearance: __assign(__assign({}, apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__["Curve"].properties.defaultAppearance), { color: RED_COLOR }),
        appearanceSpecs: [
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: RED_COLOR, label: "Red" },
                    { value: BLACK_COLOR, label: "Black" },
                ],
            }
        ],
    };
    return Cable;
}());



/***/ }),

/***/ "KqdT":
/*!***************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/cover_slip.ts ***!
  \***************************************************************/
/*! exports provided: CoverSlip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoverSlip", function() { return CoverSlip; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var CoverSlip = /** @class */ (function () {
    function CoverSlip() {
    }
    CoverSlip.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height;
        if (appearance.side) {
            var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width, 0));
            graphic.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#999999aa");
            return {
                graphic: graphic,
                hitShape: graphic.bounds.expand(20).toShape(),
            };
        }
        else {
            var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, height));
            graphic.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), "#999999aa").withFill("#dddddd40");
            return {
                graphic: graphic,
                hitShape: graphic.bounds.expand(15).toShape()
            };
        }
    };
    CoverSlip.properties = {
        label: "Cover slip",
        canContainLiquids: false,
        defaultAppearance: {
            width: 20,
            height: 20,
            side: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 20, max: 50, unit: "mm"
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 20, max: 50, unit: "mm"
            },
            {
                spec: "checkbox", key: "side", label: "View from side"
            }
        ],
    };
    return CoverSlip;
}());



/***/ }),

/***/ "Kszg":
/*!***************************************************!*\
  !*** ./src/editing/rotation/rotation_overlay.tsx ***!
  \***************************************************/
/*! exports provided: RotationOverlay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotationOverlay", function() { return RotationOverlay; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../apparatus/library/common */ "UCWy");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Component to display current state of rotation while
 * an item or collection of items is being rotated.
 * To use this component, instantiate it and update by setting state.
 */
var RotationOverlay = /** @class */ (function (_super) {
    __extends(RotationOverlay, _super);
    function RotationOverlay(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { pivot: Object(_apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), angle: 0 };
        return _this;
    }
    RotationOverlay.prototype.render = function () {
        if (!this.state.type)
            return null;
        var _a = this.state, pivot = _a.pivot, rotation = _a.angle, type = _a.type;
        var labelOffsetX = 155 * Math.sin(rotation.toRadians()) - 30;
        var labelOffsetY = -135 * Math.cos(rotation.toRadians()) - 12;
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { id: "rotation-line", key: "guideLine", style: {
                    left: pivot.x,
                    top: pivot.y - 130,
                    transform: "rotate(" + rotation + "deg)"
                } }),
            type == "delta" ?
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { id: "rotation-base", key: "base_line", style: {
                        left: pivot.x,
                        top: pivot.y - 100,
                    } })
                : null,
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { id: "rotation-info", key: "rotationInfo", style: {
                    left: pivot.x + labelOffsetX,
                    top: pivot.y + labelOffsetY,
                } }, this.label()));
    };
    /** Determine the label to display based on given state. */
    RotationOverlay.prototype.label = function () {
        // Round the rotation to 1 decimal place.
        var rotation = Math.round(this.state.angle * 10) / 10;
        var rotationString = rotation.toFixed(1);
        switch (this.state.type) {
            case "rotation":
                return rotationString + "\u00B0";
            case "delta":
                return "\u0394=" + (rotation >= 0 ? "+" : "") + rotation + "\u00B0";
            default:
                return ""; // Should not happen
        }
    };
    return RotationOverlay;
}(react__WEBPACK_IMPORTED_MODULE_0__["Component"]));



/***/ }),

/***/ "L0oq":
/*!***************************************!*\
  !*** ./src/apparatus/library/tank.ts ***!
  \***************************************/
/*! exports provided: Tank */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tank", function() { return Tank; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var Tank = /** @class */ (function () {
    function Tank() {
    }
    Tank.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]], [[width, height]], [[width, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var rect = new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](0, 0, width, height);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(rect);
        var liquidMask = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(rect);
        return {
            graphic: graphic, hitShape: hitShape, liquidMask: liquidMask,
            snapping: graphic.placeable()
        };
    };
    Tank.properties = {
        label: "Tank",
        canContainLiquids: true,
        defaultAppearance: {
            width: 400,
            height: 220,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 150, max: 600
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 80, max: 300
            },
        ],
    };
    return Tank;
}());



/***/ }),

/***/ "LSFp":
/*!***************************************************!*\
  !*** ./src/apparatus/library/magnetic_stirrer.ts ***!
  \***************************************************/
/*! exports provided: MagneticStirrer, StirBar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MagneticStirrer", function() { return MagneticStirrer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StirBar", function() { return StirBar; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var MagneticStirrer = /** @class */ (function () {
    function MagneticStirrer() {
    }
    MagneticStirrer.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].magneticStirrer();
        graphic.scale(2.0 * appearance.scale, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        graphic.children[0].children[5].strokeWidth = Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        graphic.children[0].children[6].strokeWidth = Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin");
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                graphic.placeable(),
                graphic.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    MagneticStirrer.properties = {
        label: "Magnetic Stirrer",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.75, max: 1.5, step: 0.05, unit: "%",
            }
        ],
    };
    return MagneticStirrer;
}());

var StirBar = /** @class */ (function () {
    function StirBar() {
    }
    StirBar.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].stirbar();
        // Scale vertically to lesser extent compared to horizontal.
        graphic.scale(appearance.scale, (appearance.scale - 1.0) * 0.3 + 1.0);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    StirBar.properties = {
        label: "Magnetic Stir Bar",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.75, max: 2.0, step: 0.05
            }
        ],
    };
    return StirBar;
}());



/***/ }),

/***/ "MLxQ":
/*!****************************************!*\
  !*** ./src/apparatus/library/timer.ts ***!
  \****************************************/
/*! exports provided: Timer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Timer", function() { return Timer; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Timer = /** @class */ (function () {
    function Timer() {
    }
    Timer.prototype.render = function (appearance) {
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([
            apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].timer().withScale(0.08, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)),
            new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
                point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(45, 30),
                content: appearance.label,
                fillColor: 'black',
                fontFamily: 'sans-serif',
                fontSize: 20,
            })
        ]);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Timer.properties = {
        label: "Timer / Stopwatch",
        canContainLiquids: false,
        defaultAppearance: {
            label: "1:00"
        },
        appearanceSpecs: [
            {
                spec: "text", key: "label", label: "Label",
            }
        ],
    };
    return Timer;
}());



/***/ }),

/***/ "MOlx":
/*!********************************!*\
  !*** ./src/view/formatters.ts ***!
  \********************************/
/*! exports provided: toPercent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toPercent", function() { return toPercent; });
// Contains formatting functions, useful for formatting values for display.
/** Converts values from ratio to percentage, e.g. 0.1 => "10%". */
function toPercent(input) {
    return Math.round(input * 100) + "%";
}


/***/ }),

/***/ "MSq7":
/*!*********************************************!*\
  !*** ./src/apparatus/library/coldfinger.ts ***!
  \*********************************************/
/*! exports provided: ColdFinger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColdFinger", function() { return ColdFinger; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var ColdFinger = /** @class */ (function () {
    function ColdFinger() {
    }
    ColdFinger.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].coldFinger();
        graphic.scale(1.8 * appearance.scale);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thinner", graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    ColdFinger.properties = {
        label: "Cold Finger",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 1.3, step: 0.05,
            },
        ],
    };
    return ColdFinger;
}());



/***/ }),

/***/ "MUtg":
/*!****************************************************!*\
  !*** ./src/apparatus/library/accessories/glove.ts ***!
  \****************************************************/
/*! exports provided: Glove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Glove", function() { return Glove; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var Glove = /** @class */ (function () {
    function Glove() {
    }
    Glove.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].glove();
        graphic.scale(0.2 * appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Glove.properties = {
        label: "Glove",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 3, step: 0.1
            }
        ],
    };
    return Glove;
}());



/***/ }),

/***/ "Me3J":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/distillation/splash_head.ts ***!
  \***********************************************************/
/*! exports provided: SplashHead */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SplashHead", function() { return SplashHead; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SplashHead = /** @class */ (function () {
    function SplashHead() {
    }
    SplashHead.prototype.render = function (appearance) {
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[9, 0]], [[6, 17]], [[8, 17]], [[8, 31], [-1, -4], [7, 3]], [[26, 58], [0, -16], [0, 17]], [[7, 84], [2, -2]], [[7, 97]], [[9, 98]], [[6, 117]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 9);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var innerSpout = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[4, 34], [0, -20], [0, 13]], [[-16, 54], [15, 0]], [[-16, 47], , [12, 0]], [[-3, 34], [0, 10], [0, -20]])), 2);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thin", innerSpout);
        graphic.addChild(innerSpout);
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, 79, { rotation: 180 }));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 117), facing: 180 },
            ]
        };
    };
    SplashHead.properties = {
        label: "Splash head",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return SplashHead;
}());



/***/ }),

/***/ "MhfZ":
/*!*****************************************!*\
  !*** ./src/apparatus/library/bunsen.ts ***!
  \*****************************************/
/*! exports provided: BunsenBurner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BunsenBurner", function() { return BunsenBurner; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../svg */ "5L+D");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common */ "UCWy");




var baseDiameter = 75;
var baseHeight = 15;
var height = 110; // Total height = height + baseHeight
var barrelDiameter = 12;
var largerDiameter = 15;
var BunsenBurner = /** @class */ (function () {
    function BunsenBurner() {
    }
    BunsenBurner.prototype.render = function (appearance) {
        if (appearance.flame == "simple") {
            return this.renderSimple(appearance);
        }
        return this.renderDefault(appearance);
    };
    BunsenBurner.prototype.renderDefault = function (appearance) {
        var base = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[0, height]], [[barrelDiameter / 2, height], undefined, [2.0, 0.0]], [[baseDiameter / 2, height + baseHeight - 3], [-2.0, 0]], [[baseDiameter / 2, height + baseHeight]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(base);
        base.position = Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, height);
        base.closed = true;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(base);
        base.strokeColor = "#375587";
        base.fillColor = "#477dd9";
        var barrel = this.barrel();
        var collar = this.collar(appearance.collar);
        var tip = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["R"])(0, 0, largerDiameter, 18, _common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_CENTER))
            .withStroke("thinner", _common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].mediumMetal)
            .withGradientFill("right", _common__WEBPACK_IMPORTED_MODULE_3__["SharedGradients"].metal);
        var gasInlet = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[2, 0]], [[2, 10]], [[3, 10]], [[2, 15]], [[3, 15]], [[2, 20]], [[3, 20]], [[1, 25]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(gasInlet);
        gasInlet.closePath();
        gasInlet.setGradientFill("left", _common__WEBPACK_IMPORTED_MODULE_3__["SharedGradients"].metal);
        gasInlet.rotate(-90);
        gasInlet.position = Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(15, height - 20);
        gasInlet.withStroke("thinner", _common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].mediumMetal);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([gasInlet, barrel, base, collar, tip]);
        var hitShapes = [paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(graphic.bounds)];
        // Add flame if specified
        var flame = this.flame(appearance);
        if (flame) {
            flame.scale(appearance.scale);
            flame.position.x = 0;
            flame.position.y = 0;
            graphic.addChild(flame);
            hitShapes.push(paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(flame.bounds));
        }
        return {
            graphic: graphic,
            hitShape: hitShapes,
            pivot: Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, height / 2),
            snapping: graphic.placeable(),
        };
    };
    BunsenBurner.prototype.renderSimple = function (appearance) {
        var text = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
            point: Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 40),
            content: "HEAT",
            fillColor: 'black',
            fontFamily: 'sans-serif',
            fontSize: 40,
            justification: 'center'
        });
        var arrow = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[0, -60]], [[22, -22]], [[7, -22]], [[7, 0]], [[-7, 0]], [[-7, -22]], [[-22, -22]]));
        arrow.closePath();
        arrow.fillColor = "#de3a3a";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([arrow, text]);
        graphic.scale(appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    BunsenBurner.prototype.barrel = function () {
        var barrel = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["R"])(0, 0, barrelDiameter, height, _common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_CENTER));
        var vent = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["CenterR"])(0, 70, 6, 10), 2);
        vent.setGradientFill("down", [["#222222", 0.0], ["#666666", 1.0]]);
        barrel
            .withStroke("thinner", _common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].mediumMetal)
            .setGradientFill("right", _common__WEBPACK_IMPORTED_MODULE_3__["SharedGradients"].metal);
        var gasJet = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["CenterR"])(0, 73, 2, 4));
        gasJet.fillColor = "#b5ac57";
        return new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([barrel, vent, gasJet]);
    };
    BunsenBurner.prototype.collar = function (valveOpening) {
        var collar = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["CenterR"])(0, 70, largerDiameter, 20));
        var vent = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["CenterR"])(0, 70, largerDiameter - 6, 14), 4);
        vent.position.x += valveOpening * (largerDiameter / 2 + 7);
        var collarWithVent = collar.subtract(vent);
        collarWithVent
            .withStroke("thinner", _common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].mediumMetal)
            .setGradientFill("right", _common__WEBPACK_IMPORTED_MODULE_3__["SharedGradients"].metal);
        return collarWithVent;
    };
    BunsenBurner.prototype.flame = function (appearance) {
        switch (appearance.flame) {
            case "red":
                switch (appearance.shape) {
                    case "straight":
                        return _svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].redFlame();
                    case "flat":
                    default:
                        return _svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].redFlameFlat();
                }
            case "blue":
                switch (appearance.shape) {
                    case "straight":
                        return _svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].blueFlame();
                    case "flat":
                    default:
                        return _svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].blueFlameFlat();
                }
            case "off":
            case "simple":
                return;
        }
    };
    BunsenBurner.properties = {
        label: "Bunsen Burner",
        canContainLiquids: false,
        defaultAppearance: {
            flame: "red",
            shape: "straight",
            scale: 1.0,
            collar: 0,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "flame", label: "Flame heat",
                options: [
                    { value: "off", label: "Off" },
                    { value: "red", label: "Red flame (Low heat)" },
                    { value: "blue", label: "Blue flame (High heat)" },
                    { value: "simple", label: "Simple" } // LAUNCH_IN_3.2.0
                ]
            },
            {
                spec: "radio", key: "shape", label: "Flame shape",
                options: [
                    { value: "straight", label: "Straight up" },
                    { value: "flat", label: "Flattened" },
                ],
                visible: function (a) { return a.flame != "simple"; }
            },
            {
                spec: "slider", key: "scale", label: "Flame size",
                min: 0.5, max: 1.5, step: 0.05
            },
            {
                spec: "slider", key: "collar", label: "Adjust collar (vents)",
                min: -1, max: 1, step: 0.05,
                visible: function (a) { return a.flame != "simple"; },
                tier: "boost",
            },
        ],
    };
    return BunsenBurner;
}());



/***/ }),

/***/ "Mnl2":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/accessories/tlc_spot.ts ***!
  \*******************************************************/
/*! exports provided: TLCSpot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TLCSpot", function() { return TLCSpot; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var ext_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ext/color */ "zyMn");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var TLCSpot = /** @class */ (function () {
    function TLCSpot() {
    }
    // static isBoostRequiredForAppearance(a: TLCSpotAppearance) {
    //     return a.type == "blur"
    // }
    TLCSpot.prototype.render = function (appearance) {
        var baseColor = appearance.color;
        // Create a circle of diameter <size> * 4, i.e radius of <size> * 2
        var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), appearance.size * 2);
        graphic.scale(1.0, appearance.thin);
        if (appearance.type == "solid") {
            graphic.fillColor = baseColor;
        }
        else {
            var gradient = [
                [baseColor, 1.0 - appearance.blurAmount],
                [baseColor + "00", 1.0]
            ];
            graphic.setRadialGradientFill(gradient);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(5).toShape(),
            snapping: { type: "tlc_spot", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0) }
        };
    };
    TLCSpot.properties = {
        label: "Chromatography Spot",
        canContainLiquids: false,
        defaultAppearance: {
            type: "solid",
            blurAmount: 0.5,
            color: "#47aa31",
            size: 6,
            thin: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "color", key: "color", label: "Colour",
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 2, max: 10, unit: "mm"
            },
            {
                spec: "slider", key: "thin", label: "Thin/Thick",
                min: 0.4, max: 4.0, step: 0.1, unit: "%",
            },
            {
                spec: "radio", key: "type", label: "Presentation",
                options: [
                    { value: "solid", label: "Solid" },
                    { value: "blur", label: "Blurred" },
                ],
            },
            {
                spec: "slider", key: "blurAmount", label: "Blur amount", tier: "boost",
                min: 0.0, max: 1.0, step: 0.05, unit: "%",
                visible: function (a) { return a.type == "blur"; }
            },
        ],
    };
    return TLCSpot;
}());



/***/ }),

/***/ "MrcZ":
/*!**************************!*\
  !*** ./src/file/type.ts ***!
  \**************************/
/*! exports provided: CURRENT_CHEMIX_DOCUMENT_VERSION */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CURRENT_CHEMIX_DOCUMENT_VERSION", function() { return CURRENT_CHEMIX_DOCUMENT_VERSION; });
/**
 * Chemix document version.
 * 1 - Default version
 * 2 - Add support for groups
 * 3 - Add support for theme. (Stroke width only.)
 */
var CURRENT_CHEMIX_DOCUMENT_VERSION = 3;


/***/ }),

/***/ "MuHm":
/*!******************************************************!*\
  !*** ./src/apparatus/library/utility/wash_bottle.ts ***!
  \******************************************************/
/*! exports provided: WashBottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WashBottle", function() { return WashBottle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var WashBottle = /** @class */ (function () {
    function WashBottle() {
    }
    WashBottle.prototype.render = function (appearance) {
        var size = appearance.size;
        var totalHeight = 30 + size;
        var width = Math.min(40, 15 + size / 5);
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[12, 0]], [[12, 10], undefined, [0, 10]], [[width, 30], [0, -15]], [[width, totalHeight - 5], undefined, [0, 4]], [[width - 5, totalHeight]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottle);
        var liquidMask = bottle.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(bottle);
        // Draw the tube.
        var tube = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[4, totalHeight - 20]], [[4, -40], undefined, [0, -15]], [[-15, -55], [10, -8]], [[-70, -10]], [[-70, 0]], [[-15, -45], undefined, [9, -7]], [[-4, -36], [0, -8]], [[-4, totalHeight - 20]]));
        var newTube = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(tube, 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(newTube);
        // Draw the cap.
        var cap = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["CenterR"])(0, 0, 25, 15).toShape();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(cap);
        cap.fillColor = "white";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bottle, newTube, cap]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            snapping: graphic.placeable(),
        };
    };
    WashBottle.properties = {
        label: "Wash Bottle",
        canContainLiquids: true,
        defaultAppearance: {
            size: 100
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 70, max: 150
            }
        ],
    };
    return WashBottle;
}());



/***/ }),

/***/ "N+/U":
/*!***********************************************!*\
  !*** ./src/layout/sidebar/apparatus_item.tsx ***!
  \***********************************************/
/*! exports provided: ApparatusItem, UsageVisualiser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApparatusItem", function() { return ApparatusItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UsageVisualiser", function() { return UsageVisualiser; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var apparatus_specs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/specs */ "nDAO");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! utils */ "fdqv");









/** Clickable item that displays a single apparatus item.  */
var ApparatusItem = function (props) {
    var tiers = react__WEBPACK_IMPORTED_MODULE_5__["useContext"](tiers_context__WEBPACK_IMPORTED_MODULE_7__["TierContext"]);
    /** Adds the apparatus. */
    var addApparatus = function () {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Add apparatus" + (props.isSearchMode ? ":search" : ""), props.type);
        Object(utils__WEBPACK_IMPORTED_MODULE_8__["crumb"])("ui", "Add " + props.type);
        var apparatusData = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])(props.type, paper.project.view.center);
        var commands = [
            new command_basic__WEBPACK_IMPORTED_MODULE_3__["AddApparatus"]([apparatusData]),
            new command_basic__WEBPACK_IMPORTED_MODULE_3__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_6__["default"].selectedObjectsID()),
            new command_basic__WEBPACK_IMPORTED_MODULE_3__["Select"]([apparatusData.id])
        ];
        command_command__WEBPACK_IMPORTED_MODULE_4__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_4__["Sequence"](commands));
    };
    var spritePositionX, spritePositionY;
    var extraClass = "";
    if (props.sprite.length == 3) {
        // New specification for multiple sheets.
        spritePositionX = -props.sprite[1] * 40;
        spritePositionY = -props.sprite[2] * 40;
        extraClass = "sprite-sheet-" + props.sprite[0];
    }
    else {
        spritePositionX = -props.sprite[0] * 40;
        spritePositionY = -props.sprite[1] * 40;
    }
    function onClick() {
        // Always add apparatus. If it's tier-locked,
        // this is handled by the editor_canvas via watermarking.
        addApparatus();
    }
    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "apparatus-item", key: "item", onClick: onClick },
        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("img", { className: "apparatus-preview " + extraClass, key: "preview", src: "./images/1.png", style: {
                backgroundPosition: spritePositionX + "px " + spritePositionY + "px"
            } }),
        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "name", key: "text" },
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "apparatus-name", key: "name" }, props.name),
            tiers.badge(props),
            props.showCategory
                ? react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { className: "sub d-block", key: "sub" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("i", { className: "fa fa-" + apparatus_specs__WEBPACK_IMPORTED_MODULE_2__["categoryToModuleMap"][props.category].icon }),
                    "\u00A0",
                    apparatus_specs__WEBPACK_IMPORTED_MODULE_2__["categoryToModuleMap"][props.category].display,
                    " > ",
                    props.category.displaySpecial())
                : null));
};
var UsageVisualiser = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("span", { style: { height: "20px", width: props.widthRatio * 100 + "%", background: "red", display: "block", position: "absolute" } });
};


/***/ }),

/***/ "N5IU":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/accessories/scissors.ts ***!
  \*******************************************************/
/*! exports provided: Scissors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scissors", function() { return Scissors; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var GREEN = "#31c458";
var YELLOW = "#e6de49";
var Scissors = /** @class */ (function () {
    function Scissors() {
    }
    Scissors.prototype.render = function (appearance) {
        var blade = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-74, 10]], [[-65, 17], [-10, 1], [20, -3]], [[5, 7]], [[19, -5]], [[15, -13]]));
        blade.closePath();
        var handleOuter = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[15, -15]], [[36, -22], [-13, 6], [23, -11]], [[83, -55], [-16, 4], [15, -3]], [[113, -38], [-4, -12], [3, 10]], [[101, -16], [9, -2], [-38, 7]], [[20, -3]]));
        handleOuter.closePath();
        var handleInner = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[88, -46], [-14, 1], [15, -1]], [[100, -25], [13, -4], [-13, 4]], [[66, -25], [6, 8], [-4, -6]]));
        handleInner.closePath();
        var handle = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({ children: [handleOuter, handleInner] });
        handle.fillRule = "evenodd";
        var handleStroke = appearance.handleColor.color().desaturate(0.15).darken(0.2).hex();
        blade.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#777777").withFill("#dddddd");
        handle.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), handleStroke).withFill(appearance.handleColor);
        var part1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([blade, handle]);
        part1.rotate(8 - appearance.opening, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var part2 = part1.clone();
        part2.children[0].fillColor = "#bbbbbb";
        part2.scale(1.0, -1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        if (appearance.handleColor === GREEN) {
            part2.children[1].fillColor = YELLOW;
            part2.children[1].strokeColor = YELLOW.color().desaturate(0.15).darken(0.2).hex();
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([part2, part1, paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), 2.0).withFill("#777777")]);
        if (appearance.leftie) {
            graphic.scale(1.0, -1.0);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0),
        };
    };
    Scissors.properties = {
        label: "Scissors",
        canContainLiquids: false,
        defaultAppearance: {
            opening: 20,
            handleColor: "#c44231",
            leftie: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "opening", label: "Opening",
                min: 0, max: 40, unit: "°"
            },
            {
                spec: "radio", key: "handleColor", label: "Handle colour",
                options: [
                    { value: "#c44231", label: "Red" },
                    { value: "#5395db", label: "Blue" },
                    { value: "#444444", label: "Black" },
                    { value: GREEN, label: "Green/Yellow" },
                ],
            },
            {
                spec: "checkbox", key: "leftie", label: "Left-handed"
            }
        ],
    };
    return Scissors;
}());



/***/ }),

/***/ "NQjl":
/*!***************************************************!*\
  !*** ./src/apparatus/library/physics/solenoid.ts ***!
  \***************************************************/
/*! exports provided: Solenoid */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Solenoid", function() { return Solenoid; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Solenoid = /** @class */ (function () {
    function Solenoid() {
    }
    Solenoid.prototype.render = function (appearance) {
        var coilBack = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]([]).withStroke("thick");
        coilBack.strokeCap = "round";
        var coilFront = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]([]).withStroke("thick");
        coilFront.strokeCap = "round";
        var coilStep = 20;
        var coilHeight = 50;
        var coils = 10;
        var width = coilStep * coils;
        var coilBackStep = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(coilStep / 2, coilHeight);
        var coilBackStepHandle = coilBackStep.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(10, 0));
        var coilFrontStep = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(coilStep / 2, -coilHeight);
        var coilFrontStepHandle = coilFrontStep.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-10, 0));
        for (var i = 0; i < coils; i++) {
            coilBack.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(i * coilStep, -coilHeight / 2));
            coilBack.cubicCurveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(10, 0), coilBackStepHandle, coilBackStep);
            coilFront.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])((i + 0.5) * coilStep, coilHeight / 2));
            coilFront.cubicCurveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-10, 0), coilFrontStepHandle, coilFrontStep);
        }
        var leftFrontWire = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-10, 80]], [[0, -coilHeight / 2], [-15, 0]])).withStroke("thick");
        var rightBackWire = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -coilHeight / 2], , [15, 0]], [[10, 80]])).withStroke("thick");
        rightBackWire.position.x += width;
        var bar = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, coilHeight * 0.74, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT))
            .withStroke("default").withFill("#d7a558");
        var magneticLines = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        if (appearance.fieldLines) {
            var magneticLinesCount = 2;
            for (var i = 0; i < magneticLinesCount; i++) {
                var y = (magneticLinesCount - i - 0.5) * coilHeight / (2 * (magneticLinesCount + 1));
                var line = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, y)),
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, y), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(10, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-20, 0)),
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-width * 0.2 * (i + 1), coilHeight * (0.5 + 0.2 * (i + 1))), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Polar"])(coilHeight * 0.3, -20).multiply(i + 1), // down
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Polar"])(coilHeight * 0.7, -20 + 180).multiply(i + 1))
                ]);
                Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(line, width / 2);
                var mirrored = line.clone();
                line.scale(1, -1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                magneticLines.addChildren([line, mirrored]);
                var middleOfTheLine = line.getPointAt(line.length * 0.5);
                var arrow = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(middleOfTheLine),
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(middleOfTheLine.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-5, 3))),
                    Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(middleOfTheLine.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-5, -3))),
                ]).close().withFill("#3020ff");
                var mirroredArrow = arrow.clone();
                arrow.scale(1, -1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                magneticLines.addChildren([arrow, mirroredArrow]);
            }
            magneticLines.withStroke("thin", "#3020ff");
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([coilBack, rightBackWire, magneticLines, bar, coilFront, leftFrontWire]);
        return {
            graphic: graphic,
            hitShape: paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["RP"])(-10, -coilHeight / 2, coils * coilStep + 10, 60)),
            pivot: bar.bounds.center,
        };
    };
    Solenoid.properties = {
        label: "Solenoid",
        canContainLiquids: false,
        defaultAppearance: {
            fieldLines: false,
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "fieldLines", label: "Show", subLabel: "Field lines" }
        ],
    };
    return Solenoid;
}());



/***/ }),

/***/ "NXUG":
/*!**********************************************!*\
  !*** ./src/apparatus/library/gas_syringe.ts ***!
  \**********************************************/
/*! exports provided: GasSyringe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GasSyringe", function() { return GasSyringe; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var GasSyringe = /** @class */ (function () {
    function GasSyringe() {
    }
    GasSyringe.prototype.render = function (appearance) {
        var length = appearance.size;
        var diameter = length / 4 + 4;
        var outletLength = 15;
        var radius = diameter / 2;
        var plungerRadius = radius - 2;
        var outletRadius = 4;
        var body = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])(
        // Start from the tip
        [[outletRadius, length + outletLength]], [[outletRadius, length]], [[radius, length - 3], [0, 3]], // Slight rounded corner
        [[radius, 0], undefined, [20, -2]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(body);
        var liquidMask = body.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(body);
        // Plunger.
        var plunger = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[plungerRadius, length - 5], [0, 3]], [[plungerRadius, -2], undefined, [30, -1]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(plunger);
        plunger.closePath();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(plunger);
        plunger.fillColor = "#eeeeee";
        plunger.position.y -= appearance.plungerSlide * length;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([body, plunger]);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addMarkers"])(graphic, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(plungerRadius - 5, length), 0, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, _common__WEBPACK_IMPORTED_MODULE_2__["markerSpacing"]));
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: [body.bounds.toShape(), plunger.bounds.toShape()],
            pivot: body.bounds.center,
            snapping: {
                type: "connectable", at: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, length + outletLength), facing: 180,
            }
        };
    };
    GasSyringe.properties = {
        label: "Gas Syringe",
        canContainLiquids: true,
        defaultLiquidData: __assign(__assign({}, _common__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.3 }),
        defaultAppearance: {
            plungerSlide: 0.4,
            size: 120,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "plungerSlide", label: "Plunger slide",
                min: 0.0, max: 0.95, step: 0.01,
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 80, max: 200
            }
        ],
    };
    return GasSyringe;
}());



/***/ }),

/***/ "NrkT":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/accessories/splint.ts ***!
  \*****************************************************/
/*! exports provided: Splint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Splint", function() { return Splint; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var Splint = /** @class */ (function () {
    function Splint() {
    }
    Splint.prototype.render = function (appearance) {
        var width = appearance.width;
        var length = appearance.length;
        var graphic = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, width, length), width / 2)
            .withFill("#ddc292")
            .withStroke("thinner", "#b69660");
        return { graphic: graphic, hitShape: graphic.bounds.expand(15).toShape() };
    };
    Splint.properties = {
        label: "Wooden Splint",
        canContainLiquids: false,
        defaultAppearance: {
            length: 140,
            width: 8
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 100, max: 180
            },
            {
                spec: "slider", key: "width", label: "Width",
                min: 5, max: 12,
            }
        ],
    };
    return Splint;
}());



/***/ }),

/***/ "O+47":
/*!***************************************************!*\
  !*** ./src/apparatus/library/decorative/label.ts ***!
  \***************************************************/
/*! exports provided: Label */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Label", function() { return Label; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/text/appearance */ "P6qo");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var text_parse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! text/parse */ "YKxB");
/* harmony import */ var _text_render__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../text/render */ "w91z");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






var Label = /** @class */ (function () {
    function Label() {
        this.advancedText = new _text_render__WEBPACK_IMPORTED_MODULE_5__["AdvancedText"]();
        this.advancedText2 = new _text_render__WEBPACK_IMPORTED_MODULE_5__["AdvancedText"]();
    }
    Label.prototype.render = function (appearance) {
        var fontFamily = appearance.fontFamily, fontSize = appearance.fontSize, textColor = appearance.textColor, text = appearance.text, text2 = appearance.text2, isChemMarkEnabled = appearance.isChemMarkEnabled;
        var textItem1 = this.renderText(this.advancedText, text, fontFamily, fontSize, textColor, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), isChemMarkEnabled);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([textItem1]);
        // Add a second, subtitle line. Note the font size is slightly smaller.
        if (appearance.text2.length > 0) {
            var textItem2 = this.renderText(this.advancedText2, text2, fontFamily, fontSize * 0.8, textColor, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, fontSize * 2), isChemMarkEnabled);
            graphic.addChild(textItem2);
            // To center, shift each item by half its width. Only if chemMark is not enabled.
            if (!isChemMarkEnabled) {
                textItem1.position.x -= textItem1.bounds.width / 2;
                textItem2.position.x -= textItem2.bounds.width / 2;
            }
        }
        if (appearance.showBorder) {
            var radius = appearance.roundedCorners ? 4.0 : 0.0;
            var sticker = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds.expand(10.0), radius);
            sticker.fillColor = "#ffffffcc"; // Transparent white
            sticker.strokeColor = "#444444";
            sticker.strokeWidth = 3.0;
            graphic.insertChild(0, sticker);
        }
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Label.prototype.renderText = function (field, text, fontFamily, fontSize, color, position, isChemMarkEnabled) {
        var sharedStyle = {
            fontFamily: fontFamily,
            fontSize: fontSize * 2,
            fillColor: color,
        };
        if (isChemMarkEnabled) {
            // TODO: This is hacky, accessing appstore directly for tier.
            var formattedText = store_store__WEBPACK_IMPORTED_MODULE_3__["appStore"].getState().tier ? text_parse__WEBPACK_IMPORTED_MODULE_4__["ChemMark"].parseSmart(text) : text_parse__WEBPACK_IMPORTED_MODULE_4__["ChemMark"].parseSmartLimited(text);
            var style = __assign(__assign({}, sharedStyle), { textAlign: "left" });
            field.setText(formattedText, style);
            field.setPosition(position.x, position.y);
            return field.container;
        }
        else {
            return new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"](__assign({ point: position, content: text }, sharedStyle));
        }
    };
    Label.properties = {
        label: "Label",
        canContainLiquids: false,
        chemMarkAppearanceKey: "isChemMarkEnabled",
        defaultAppearance: {
            text: "Label",
            text2: "",
            fontSize: 10,
            fontFamily: "sans-serif",
            isChemMarkEnabled: false,
            textColor: "#000000",
            textAlign: "left",
            showBorder: true,
            roundedCorners: false,
        },
        appearanceSpecs: [
            {
                spec: "text", key: "text", label: "Label text",
                maxLength: 100, enableReplacements: true,
            },
            {
                spec: "text", key: "text2", label: "Subtitle text",
                maxLength: 100, enableReplacements: true, tier: "boost",
            },
            {
                spec: "slider", key: "fontSize", label: "Text size",
                min: 4, max: 16, step: 0.5
            },
            {
                spec: "select", key: "fontFamily", label: "Font",
                options: apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["FONT_FAMILY_OPTIONS"]
            },
            {
                spec: "color", key: "textColor", label: "Text colour",
                swatches: apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["TEXT_COLOUR_SWATCHES"],
                tier: "boost", demoSwatches: apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["DEMO_COLOUR_SWATCHES"],
            },
            {
                spec: "checkbox-group", label: "Border",
                checkboxes: [
                    { key: "showBorder", label: "Show", tier: "boost" },
                    { key: "roundedCorners", label: "Rounded", tier: "boost", visible: function (a) { return a.showBorder; } },
                ]
            }
        ],
    };
    Label.convertToLatest = convertToLatest;
    return Label;
}());

function convertToLatest(a) {
    return __assign(__assign({}, Label.properties.defaultAppearance), a);
}


/***/ }),

/***/ "O70j":
/*!****************************************!*\
  !*** ./src/layout/sidebar/sidebar.tsx ***!
  \****************************************/
/*! exports provided: ApparatusList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApparatusList", function() { return ApparatusList; });
/* harmony import */ var apparatus_specs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/specs */ "nDAO");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ "fdqv");
/* harmony import */ var _apparatus_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../apparatus/search */ "eymq");
/* harmony import */ var _apparatus_specList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../apparatus/specList */ "OsNy");
/* harmony import */ var _apparatus_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apparatus_item */ "N+/U");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







/**
 * Component that displays a list of apparatus. Clicking on an item adds it.
 * This is also used for a filtered apparatus search.
 */
var ApparatusList = /** @class */ (function (_super) {
    __extends(ApparatusList, _super);
    function ApparatusList() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sidebar-list" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "scrollable-container", "data-simplebar": true },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, _this.isInSearchMode
                    ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](SearchResults, { key: "searchResults", results: Object(_apparatus_search__WEBPACK_IMPORTED_MODULE_3__["searchApparatus"])(_this.props.searchTerm), onSwitchModule: _this.props.onSwitchModule })
                    : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](DefaultList, { key: "searchResults", groups: ApparatusList.apparatusByGroups[_this.props.module] }))))); };
        return _this;
    }
    Object.defineProperty(ApparatusList.prototype, "isInSearchMode", {
        get: function () {
            return this.props.searchTerm.length > 0;
        },
        enumerable: false,
        configurable: true
    });
    /** List of all apparatus, split into modules by category. */
    ApparatusList.apparatusByGroups = {
        "chemistry": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "chemistry"),
        "heating": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "heating"),
        "various": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "various"),
        "shapes": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "shapes"),
        "biology": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "biology"),
        "physics": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "physics"),
        "distillation": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "distillation"),
        "measurement": splitApparatusByCategory(_apparatus_specList__WEBPACK_IMPORTED_MODULE_4__["default"], "measurement"),
    };
    return ApparatusList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var SearchResults = function (props) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: "searchResultSummary", className: "search-results-summary" }, Object(utils__WEBPACK_IMPORTED_MODULE_2__["pluralize"])(props.results.length, "result", true)),
    props.results.map(function (a) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apparatus_item__WEBPACK_IMPORTED_MODULE_5__["ApparatusItem"], __assign({ showCategory: true, isSearchMode: true, key: a.name }, a));
    }),
    props.results.length == 0 ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](NoResultsTip, { onSwitchToShapes: function () { return props.onSwitchModule("shapes"); } }) : undefined)); };
/** Remembers the collapse state of groups. True = expanded. */
var groupCollapseMemo = {};
var DefaultList = function (props) {
    function onHeaderClick(id, el) {
        var _a, _b;
        var collapsed = el.classList.contains("collapsed");
        groupCollapseMemo[id] = !collapsed;
        // If collapsing and the header is sticky,
        // scroll to the header element to prevent weird artifacts.
        if (collapsed) {
            var scrollable = document.getElementsByClassName("scrollable-container")[0];
            var sb = SimpleBar.instances.get(scrollable);
            var groupOffsetStart = (_b = (_a = el.parentElement) === null || _a === void 0 ? void 0 : _a.offsetTop) !== null && _b !== void 0 ? _b : 0;
            if (sb.getScrollElement().scrollTop > groupOffsetStart) {
                $(sb.getScrollElement()).animate({ scrollTop: groupOffsetStart }, 100);
            }
        }
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, props.groups.map(function (group) {
        var _a;
        var id = "apparatus-group-" + group.category.replace(" ", "_");
        var show = (_a = groupCollapseMemo[id]) !== null && _a !== void 0 ? _a : true;
        return [
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "category-group-wrapper", key: group.category },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", { "data-toggle": "collapse", "aria-expanded": show ? "true" : "false", "data-target": "#" + id, onClick: function (e) { return onHeaderClick(id, e.nativeEvent.target); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-caret-right fa-fw" }),
                    group.category.displaySpecial()),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "category-group collapse " + "show".if(show), key: "group_" + group.category, id: id }, group.apparatus.map(function (a) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apparatus_item__WEBPACK_IMPORTED_MODULE_5__["ApparatusItem"], __assign({ isSearchMode: false, key: a.name }, a));
                })))
        ];
    }));
};
function splitApparatusByCategory(allApparatus, module) {
    return apparatus_specs__WEBPACK_IMPORTED_MODULE_0__["apparatusCategories"][module].map(function (category) { return ({
        category: category,
        apparatus: allApparatus.filter(function (spec) { return spec.category == category; })
    }); });
}
var NoResultsTip = function (props) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "text-secondary p-3" },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fad fa-lightbulb-on text-warning mr-2 fa-lg" }),
    "Didn't find an item you need? Try using ",
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "href", onClick: function () { return props.onSwitchToShapes(); } },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("b", null, "Shapes")),
    " to draw it yourself or",
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "https://chemix.kampsite.co", target: "_blank" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("b", null, "send us a suggestion.")))); };


/***/ }),

/***/ "O8CP":
/*!****************************************************************!*\
  !*** ./src/apparatus/library/distillation/receiver_adaptor.ts ***!
  \****************************************************************/
/*! exports provided: ReceiverAdaptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReceiverAdaptor", function() { return ReceiverAdaptor; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var ReceiverAdaptor = /** @class */ (function () {
    function ReceiverAdaptor() {
    }
    ReceiverAdaptor.prototype.render = function (appearance) {
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[22, 7]], [[24, 6]], [[50, 13], , [20, 7]], [[71, 40], [0, -5]], [[71, 91]], // Bottom. Break after this
        [[62, 100]], [[62, 52], , [0, -11]], [[50, 38], [6, 2]], [[18, 30]], [[16, 28]], [[-6, 23]]));
        var hitShape = path.bounds.toShape();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(path, 6);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(20, 18, { size: 12, rotation: -73 }));
        return {
            graphic: graphic,
            hitShape: hitShape,
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10)
        };
    };
    ReceiverAdaptor.properties = {
        label: "Receiver Adaptor",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return ReceiverAdaptor;
}());



/***/ }),

/***/ "OTzt":
/*!****************************************!*\
  !*** ./src/layout/top_bar/top_bar.tsx ***!
  \****************************************/
/*! exports provided: TopBar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TopBar", function() { return TopBar; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var editing_clipboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/clipboard */ "A2/w");
/* harmony import */ var editing_deleting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editing/deleting */ "FK9k");
/* harmony import */ var editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/undo_redo */ "qaw3");
/* harmony import */ var layout_top_bar_account__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! layout/top_bar/account */ "Gv/G");
/* harmony import */ var layout_top_bar_extras__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! layout/top_bar/extras */ "4eva");
/* harmony import */ var layout_top_bar_main_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! layout/top_bar/main_menu */ "FRyv");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var _modals_about__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../modals/about */ "Gf5X");
/* harmony import */ var _button_group__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./button_group */ "zJJ1");
/* harmony import */ var _toolbox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./toolbox */ "bPYb");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};













/**
 * Application Top Bar, displays:
 *  - for main actions (such as Save Image, Help...),
 *  - tool selection (move, pan, label...),
 *  - common operations (cut/copy/paste, undo/redo...)
 *  - various links (e.g. social links, link to "What's new" page)
 */
var TopBar = /** @class */ (function (_super) {
    __extends(TopBar, _super);
    function TopBar() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.aboutDialogRef = react__WEBPACK_IMPORTED_MODULE_7__["createRef"]();
        _this.loginRef = react__WEBPACK_IMPORTED_MODULE_7__["createRef"]();
        _this.openLogin = function (callback) {
            _this.loginRef.current.openWithCallback(callback);
        };
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_7__["createElement"](react__WEBPACK_IMPORTED_MODULE_7__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { id: "topBar", key: "topBar", "data-simplebar": true },
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](layout_top_bar_extras__WEBPACK_IMPORTED_MODULE_5__["Logo"], { key: "logo", onClick: function () { Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Click logo"); _this.aboutDialogRef.current.open(); } }),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](layout_top_bar_main_menu__WEBPACK_IMPORTED_MODULE_6__["MainMenu"], { key: "menubar", file: _this.props.file, auth: _this.props.auth, openLogin: _this.openLogin, cloudDiagramTitle: _this.props.cloudDiagramTitle }),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { key: "rhg", className: "rightHandGroup" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](layout_top_bar_extras__WEBPACK_IMPORTED_MODULE_5__["SocialWidgets"], { key: "widgets", visible: _this.props.auth.state != "logged_in" })),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"]("div", { className: "secondTopBarRow" },
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_toolbox__WEBPACK_IMPORTED_MODULE_11__["Toolbox"], { key: "toolbox", tool: _this.props.tool }),
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["ButtonGroup"], { key: "undo_redo", id: "history-toolbox" }, UNDO_REDO_BUTTONS.map(function (b, i) { return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["Button"], __assign({ key: "b_" + i }, b)); })),
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["ButtonGroup"], { key: "clipboard" }, CLIPBOARD_BUTTONS.map(function (b, i) { return react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["Button"], __assign({ key: "b_" + i }, b)); })),
                    react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["ButtonGroup"], { key: "delete" },
                        react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_button_group__WEBPACK_IMPORTED_MODULE_10__["Button"], { key: "delete", icon: "r,trash-alt", hint: "Delete selected", shortcuts: [{ key: "Del" }, { key: "⌫" }], onClick: function () { Object(editing_deleting__WEBPACK_IMPORTED_MODULE_2__["deleteSelected"])("click"); } }))),
                react__WEBPACK_IMPORTED_MODULE_7__["createElement"](layout_top_bar_account__WEBPACK_IMPORTED_MODULE_4__["AccountBar"], { auth: _this.props.auth, openLogin: _this.openLogin })),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](layout_top_bar_account__WEBPACK_IMPORTED_MODULE_4__["LoginModal"], { auth: _this.props.auth, ref: _this.loginRef }),
            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](_modals_about__WEBPACK_IMPORTED_MODULE_9__["AboutModal"], { key: "about", version: vars__WEBPACK_IMPORTED_MODULE_8__["Consts"].version, ref: _this.aboutDialogRef }))); };
        return _this;
    }
    return TopBar;
}(react__WEBPACK_IMPORTED_MODULE_7__["Component"]));

var UNDO_REDO_BUTTONS = [
    {
        hint: "Undo",
        icon: "undo",
        shortcuts: [{ ctrl: true, key: "Z" }],
        onClick: function () { Object(editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__["undo"])("click"); }
    },
    {
        hint: "Redo",
        icon: "redo",
        shortcuts: [{ ctrl: true, key: "Y" }],
        onClick: function () { Object(editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__["redo"])("click"); }
    },
];
var CLIPBOARD_BUTTONS = [
    {
        hint: "Cut",
        icon: "cut",
        shortcuts: [{ ctrl: true, key: "X" }],
        onClick: function () { editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].cut("click"); }
    },
    {
        hint: "Copy",
        icon: "r,copy",
        shortcuts: [{ ctrl: true, key: "C" }],
        onClick: function () { editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].copy("click"); }
    },
    {
        hint: "Paste",
        icon: "r,clipboard",
        shortcuts: [{ ctrl: true, key: "V" }],
        onClick: function () { editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].paste("click"); }
    }
];


/***/ }),

/***/ "OWZY":
/*!*********************************!*\
  !*** ./src/ordering/actions.ts ***!
  \*********************************/
/*! exports provided: ReorderItems, SendToBack, BringToFront, BringForward, SendBackward */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReorderItems", function() { return ReorderItems; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SendToBack", function() { return SendToBack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BringToFront", function() { return BringToFront; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BringForward", function() { return BringForward; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SendBackward", function() { return SendBackward; });
/* harmony import */ var ext_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ext/array */ "3pNw");
/* harmony import */ var ordering_reorder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ordering/reorder */ "X9Jd");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var ReorderItems = /** @class */ (function () {
    function ReorderItems(from, to) {
        this.from = from;
        this.to = to;
    }
    ReorderItems.create = function (ids, op) {
        var indices = getIndices(ids);
        var destIndices = (function () {
            switch (op) {
                case "sendBackward": return Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["createSendBackwardIndices"])(indices);
                case "sendToBack": return Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["createSendToBackIndices"])(indices);
                case "bringForward": return Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["createMoveForwardIndices"])(indices, store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items().length);
                case "bringToFront": return Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["createMoveToFrontIndices"])(indices, store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items().length);
            }
        })();
        // If this results in no changes, dont' return a command.
        if (ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].shallowStrictEquals(indices, destIndices))
            return;
        return new ReorderItems(indices, destIndices);
    };
    ReorderItems.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Reorder", function (store) {
            return __assign(__assign({}, store), { items: Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["reorder"])(store.items, _this.from, _this.to) });
        });
    };
    ReorderItems.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Reorder", function (store) {
            return __assign(__assign({}, store), { items: Object(ordering_reorder__WEBPACK_IMPORTED_MODULE_1__["reorder"])(store.items, _this.to, _this.from) });
        });
    };
    return ReorderItems;
}());

var SendToBack = /** @class */ (function () {
    function SendToBack(index) {
        this.index = index;
    }
    SendToBack.createFor = function (id) {
        // Determine the index of the element.
        var index = getIndex(id, 0);
        if (index == 0)
            return;
        return new SendToBack(index);
    };
    SendToBack.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("SendToBack", function (state) {
            var newItems = __spreadArrays(state.items);
            var toMove = newItems.splice(_this.index, 1);
            newItems.unshift(toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    SendToBack.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Undo-SendToBack", function (state) {
            var newItems = __spreadArrays(state.items);
            // Pop from the front and insert into original index position.
            var toMove = newItems.shift();
            newItems.splice(_this.index, 0, toMove);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    return SendToBack;
}());

var BringToFront = /** @class */ (function () {
    function BringToFront(index) {
        this.index = index;
    }
    BringToFront.createFor = function (id) {
        // Determine the index of the element.
        var highestIndex = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items().length - 1;
        var index = getIndex(id, highestIndex);
        if (index == highestIndex)
            return;
        return new BringToFront(index);
    };
    BringToFront.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("BringToFront", function (state) {
            var newItems = __spreadArrays(state.items);
            var toMove = newItems.splice(_this.index, 1);
            newItems.push(toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    BringToFront.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Undo-BrintToFront", function (state) {
            var newItems = __spreadArrays(state.items);
            // Pop from the front and insert into original index position.
            var toMove = newItems.pop();
            newItems.splice(_this.index, 0, toMove);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    return BringToFront;
}());

var BringForward = /** @class */ (function () {
    function BringForward(index) {
        this.index = index;
    }
    BringForward.createFor = function (id) {
        // Determine the index of the element.
        var highestIndex = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items().length - 1;
        var index = getIndex(id, highestIndex);
        if (index == highestIndex)
            return;
        return new BringForward(index);
    };
    BringForward.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("BringForward", function (state) {
            var newItems = __spreadArrays(state.items);
            var toMove = newItems.splice(_this.index, 1);
            newItems.splice(_this.index + 1, 0, toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    BringForward.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Undo-BringForward", function (state) {
            var newItems = __spreadArrays(state.items);
            // Pop from the front and insert into original index position.
            var toMove = newItems.splice(_this.index + 1, 1);
            newItems.splice(_this.index, 0, toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    return BringForward;
}());

var SendBackward = /** @class */ (function () {
    function SendBackward(index) {
        this.index = index;
    }
    SendBackward.createFor = function (id) {
        // Determine the index of the element.
        var index = getIndex(id, 0);
        if (index == 0)
            return;
        return new SendBackward(index);
    };
    SendBackward.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("SendBackwards", function (state) {
            var newItems = __spreadArrays(state.items);
            var toMove = newItems.splice(_this.index, 1);
            newItems.splice(_this.index - 1, 0, toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    SendBackward.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Undo-SendBackwards", function (state) {
            var newItems = __spreadArrays(state.items);
            // Pop from the front and insert into original index position.
            var toMove = newItems.splice(_this.index - 1, 1);
            newItems.splice(_this.index, 0, toMove[0]);
            return __assign(__assign({}, state), { items: newItems });
        });
    };
    return SendBackward;
}());

function getIndex(id, notFound) {
    var items = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items();
    for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if (item.id == id) {
            return i;
        }
    }
    // This should never happen.
    return notFound;
}
function getIndices(ids) {
    var items = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].items();
    var indices = [];
    for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if (ids.indexOf(item.id) > -1) {
            indices.push(i);
        }
    }
    return indices;
}


/***/ }),

/***/ "OjqD":
/*!******************************************!*\
  !*** ./src/apparatus/library/buchner.ts ***!
  \******************************************/
/*! exports provided: BuchnerFunnel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BuchnerFunnel", function() { return BuchnerFunnel; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




var BuchnerFunnel = /** @class */ (function () {
    function BuchnerFunnel() {
    }
    BuchnerFunnel.prototype.render = function (appearance) {
        var radius = appearance.size;
        var upperHeight = radius * 0.5 + 30;
        var taperHeight = 0.5 * radius;
        var stem = 40;
        var mouthRadius = 6;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-radius, -taperHeight - upperHeight]], [[-radius, -taperHeight]], [[0, 0]], [[0, stem]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape, mouthRadius);
        var hitShape = shape.clone();
        var liquidMask = shape.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 4);
        // Add filter layer.
        var filterLayer = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-radius, -taperHeight - 2]], [[radius + mouthRadius * 2, -taperHeight - 2]]));
        filterLayer.strokeWidth = 3;
        filterLayer.strokeCap = 'butt';
        filterLayer.dashArray = [3, 6];
        graphic.addChild(filterLayer);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: hitShape, liquidMask: liquidMask };
    };
    BuchnerFunnel.properties = {
        label: "Buchner Funnel",
        canContainLiquids: true,
        defaultAppearance: {
            size: 40
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 30, max: 60,
            }
        ],
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.7 })
    };
    return BuchnerFunnel;
}());



/***/ }),

/***/ "OsNy":
/*!***********************************!*\
  !*** ./src/apparatus/specList.ts ***!
  \***********************************/
/*! exports provided: itemsThatRequireBoost, releasedItemsCount, releasedAndFreeItemsCount, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "itemsThatRequireBoost", function() { return itemsThatRequireBoost; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "releasedItemsCount", function() { return releasedItemsCount; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "releasedAndFreeItemsCount", function() { return releasedAndFreeItemsCount; });
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vars */ "nHh6");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var apparatusSpecList = [
    {
        type: "__live edit__",
        category: "Containers",
        sprite: ["2", 1, 0],
        search: [],
        released: vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].isDev,
    },
    {
        type: "test tube",
        category: "Containers",
        sprite: [0, 0],
        search: [],
    },
    {
        type: "test tube with side arm",
        category: "Containers",
        sprite: [1, 9],
        search: [],
    },
    {
        type: "bung",
        category: "Containers",
        sprite: [9, 0],
        search: ["test tube", "stopper", "cork", "rubber bung", "lid", "cover"]
    },
    {
        type: "beaker",
        category: "Containers",
        sprite: [0, 2],
        search: []
    },
    {
        type: "displacement beaker",
        category: "Containers",
        sprite: [0, 3],
        search: []
    },
    {
        type: "conical flask",
        category: "Containers",
        sprite: [0, 4],
        search: ["erlenmeyer", "erlen meyer"]
    },
    {
        type: "conical flask with side arm",
        category: "Containers",
        sprite: [4, 7],
        search: ["buchner flask"]
    },
    {
        type: "boiling flask",
        category: "Containers",
        sprite: [0, 5],
        search: []
    },
    {
        type: "volumetric flask",
        category: "Containers",
        sprite: [0, 6],
        search: []
    },
    {
        type: "round bottom flask",
        category: "Containers",
        sprite: [0, 7],
        search: ["spherical", "three neck"]
    },
    {
        type: "petri dish",
        category: "_Bio_Equipment",
        sprite: [0, 8],
        search: ["sample dish"]
    },
    {
        type: "choice chamber",
        category: "_Bio_Equipment",
        sprite: ["2", 9, 4],
        search: [],
    },
    {
        type: "watch glass",
        category: "Containers",
        sprite: [2, 9],
        search: []
    },
    {
        type: "gas jar",
        category: "Containers",
        sprite: [0, 9],
        search: []
    },
    {
        type: "tank",
        category: "Containers",
        sprite: [0, 10],
        search: ["container", "tub", "water tank", "sink", "water trough"]
    },
    {
        type: "boiling tube",
        category: "Containers",
        sprite: [0, 0],
        tier: "boost",
        search: [],
    },
    {
        type: "boiling tube with sidearm",
        category: "Containers",
        sprite: [1, 9],
        search: [],
        tier: "boost",
    },
    {
        type: "thiele tube",
        category: "Containers",
        sprite: [0, 1],
        search: []
    },
    {
        type: "pear-shaped flask",
        category: "Containers",
        sprite: ["2", 0, 2],
        search: ["pear shaped flask", "pear flask"],
        tier: "boost",
    },
    {
        type: "schlenk flask",
        category: "Containers",
        sprite: ["2", 0, 4],
        search: [],
    },
    {
        type: "weight boat",
        category: "Containers",
        sprite: ["2", 9, 6],
        search: ["weighing boat", "disposable boat", "weigh boat"],
    },
    {
        type: "calorimetry cup",
        category: "Containers",
        sprite: [6, 6],
        search: ["plastic cup", "foam cup", "styrofoam cup", "coffee cup", "polystyrene cup"]
    },
    {
        type: "thermos",
        category: "Containers",
        sprite: ["2", 6, 5],
        search: ["thermos flask", "Dewar flask", "Dewar bottle"]
    },
    {
        type: "cuvette",
        category: "Containers",
        sprite: [6, 7],
        search: []
    },
    {
        type: "cell flask",
        category: "Containers",
        sprite: ["2", 6, 0],
        search: ["culture flask"],
        tier: "boost"
    },
    {
        type: "centrifuge tube",
        category: "_Bio_Equipment",
        sprite: [8, 6],
        search: ["falcon tube", "microcentrifuge tube", "eppendorf"],
        tier: "boost",
    },
    {
        type: "eppendorf tube",
        category: "_Bio_Equipment",
        sprite: [8, 5],
        search: ["centrifuge tube", "microcentrifuge tube", "falcon"],
        tier: "boost",
    },
    {
        type: "wash bottle",
        category: "Containers",
        sprite: [6, 8],
        search: ["clean"],
    },
    {
        type: "cylinder",
        category: "Measurement",
        sprite: [1, 1],
        search: ["graduated cylinder", "measuring cylinder", "mixing cylinder"]
    },
    {
        type: "pipette",
        category: "Measurement",
        sprite: [1, 3],
        search: ["dropper"]
    },
    {
        type: "mohr",
        category: "Measurement",
        sprite: ["2", 5, 6],
        search: []
    },
    {
        type: "burette",
        category: "Measurement",
        sprite: [1, 4],
        search: []
    },
    {
        type: "thermometer",
        category: "Measurement",
        sprite: [1, 0],
        search: []
    },
    {
        type: "digital thermometer",
        category: "Measurement",
        sprite: [7, 6],
        search: []
    },
    {
        type: "balance",
        category: "Measurement",
        sprite: [1, 5],
        search: ["scales", "weight", "lab scales", "mass"],
    },
    {
        type: "triple beam balance",
        category: "Measurement",
        sprite: ["2", 8, 7],
        search: ["scales", "weight", "mass", "triple-beam balance"],
        tier: "boost",
    },
    {
        type: "beam balance",
        category: "Measurement",
        sprite: ["2", 8, 9],
        search: ["scales", "physical balance", "weight", "mass"],
        tier: "boost",
    },
    {
        type: "hydrometer",
        category: "Measurement",
        sprite: ["2", 6, 8],
        search: ["density"],
    },
    {
        type: "manometer",
        category: "Measurement",
        sprite: ["2", 7, 1],
        search: ["pressure"],
        tier: "boost",
    },
    {
        type: "ruler",
        category: "Measurement",
        sprite: [1, 7],
        search: ["measure", "tape", "length"]
    },
    {
        type: "tape measure",
        category: "Measurement",
        sprite: ["2", 2, 6],
        search: ["measure", "tape", "length"],
    },
    {
        type: "vernier",
        category: "Measurement",
        sprite: ["2", 9, 9],
        search: ["measure", "tape", "length"],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "protractor",
        category: "Measurement",
        sprite: ["2", 8, 8],
        search: ["angle"],
    },
    {
        type: "ph paper pack",
        category: "Measurement",
        sprite: ["2", 7, 8],
        search: ["ph meter", "ph indicator", "indicator paper", "ph strips", "indicator strips", "strips", "litmus"],
        tier: "boost",
    },
    {
        type: "ph paper",
        category: "Measurement",
        sprite: ["2", 7, 9],
        search: ["ph meter", "ph indicator", "indicator paper", "ph strips", "indicator strips", "strips", "litmus"],
    },
    {
        type: "ph probe",
        category: "Measurement",
        sprite: [6, 9],
        search: ["ph meter"],
    },
    {
        type: "conductimeter",
        category: "Measurement",
        sprite: [6, 10],
        search: ["probe"],
        tier: "boost"
    },
    {
        type: "oxsat probe",
        category: "Measurement",
        sprite: ["2", 9, 3],
        search: ["data probe"],
        tier: "boost",
    },
    {
        type: "spectrophotometer",
        category: "Measurement",
        sprite: ["2", 8, 4],
        search: ["colorimeter"],
        tier: "boost",
    },
    {
        type: "spectrophotometer-s",
        category: "Measurement",
        sprite: ["2", 8, 5],
        search: ["colorimeter"],
        tier: "boost",
    },
    {
        type: "pump",
        category: "_Mea_Extraction",
        sprite: [1, 2],
        search: ["pipette filler"]
    },
    {
        type: "suction pear",
        category: "_Mea_Extraction",
        sprite: ["2", 5, 8],
        search: ["suction ball", "pipette filler", "pipette aid", "peleus ball"],
    },
    {
        type: "dropper pipette",
        category: "_Mea_Extraction",
        sprite: [1, 6],
        search: ["pipette bottle"],
    },
    {
        type: "pipette bottle",
        category: "_Mea_Extraction",
        sprite: [7, 5],
        search: ["dropper pipette", "glass bottle"],
    },
    {
        type: "plastic pipette",
        category: "_Mea_Extraction",
        sprite: [3, 6],
        search: ["dropper", "disposable"]
    },
    {
        type: "micropipette",
        category: "_Mea_Extraction",
        sprite: ["2", 2, 10],
        search: ["automatic pipette", "pipette"],
        tier: "boost",
    },
    {
        type: "microplate",
        category: "_Mea_Extraction",
        sprite: ["2", 5, 7],
        search: ["96 wells"],
        tier: "boost",
    },
    {
        type: "syringe",
        category: "_Mea_Extraction",
        sprite: ["2", 2, 7],
        search: ["syringe", "needle", "inject"],
    },
    {
        type: "gas syringe",
        category: "_Mea_Extraction",
        sprite: [1, 8],
        search: ["plunger"]
    },
    {
        type: "bunsen",
        category: "Heating",
        sprite: [2, 0],
        search: ["bunsen burner", "burner", "heat", "fire", "flame", "hot"]
    },
    {
        type: "torch burner",
        category: "Heating",
        sprite: ["2", 6, 7],
        search: ["propane torch", "burner", "heat", "fire", "flame", "hot"]
    },
    {
        type: "flame",
        category: "Heating",
        sprite: [7, 10],
        search: ["fire", "flame"],
    },
    {
        type: "hot plate",
        category: "Heating",
        sprite: [2, 1],
        search: ["heat", "boil"]
    },
    {
        type: "magnetic stirrer-heater",
        category: "Heating",
        sprite: [2, 2],
        search: []
    },
    {
        type: "spirit lamp",
        category: "Heating",
        sprite: [7, 9],
        search: ["heat", "flame", "alcohol lamp", "burner", "alcohol burner"],
    },
    {
        type: "stick lighter",
        category: "Heating",
        sprite: ["2", 6, 6],
        search: ["heat", "gas lighter", "flame", "fire"],
        tier: "boost",
    },
    {
        type: "sand bath",
        category: "Heating",
        sprite: [5, 8],
        search: []
    },
    {
        type: "heating mantle",
        category: "Heating",
        sprite: [8, 2],
        search: ["isomantle"],
    },
    {
        type: "stirring rod",
        category: "Heating",
        sprite: [2, 8],
        search: ["glass rod", "stir rod", "stick"]
    },
    {
        type: "magnetic stir bar",
        category: "Heating",
        sprite: [2, 3],
        search: ["stirrer"]
    },
    {
        type: "glass wool",
        category: "Heating",
        sprite: [2, 4],
        search: ["cloud", "puff"]
    },
    {
        type: "wire gauze",
        category: "Heating",
        sprite: [2, 5],
        search: []
    },
    {
        type: "clay triangle",
        category: "Heating",
        sprite: [2, 6],
        search: []
    },
    {
        type: "tongs",
        category: "Heating",
        sprite: [2, 7],
        search: ["crucible tongs", "beaker tongs"]
    },
    {
        type: "peg",
        category: "Heating",
        sprite: [8, 3],
        search: ["test tube holder"],
    },
    {
        type: "test tube holder",
        category: "Heating",
        sprite: [8, 4],
        search: ["metal test tube holder", "metallic test tube holder"],
    },
    {
        type: "filter funnel",
        category: "Filtering",
        sprite: [3, 0],
        search: []
    },
    {
        type: "thistle tube",
        category: "Filtering",
        sprite: [3, 1],
        search: ["thistle tube"],
    },
    {
        type: "buchner",
        category: "Filtering",
        sprite: [3, 2],
        search: [],
        tier: "boost",
    },
    {
        type: "separatory funnel",
        category: "Filtering",
        sprite: [3, 3],
        search: ["separation funnel", "separating funnel", "sep funnel", "seperat"]
    },
    {
        type: "filter paper",
        category: "Filtering",
        sprite: [3, 4],
        search: []
    },
    {
        type: "fluted filter paper",
        category: "Filtering",
        sprite: [9, 10],
        search: ["folded filter paper"],
        tier: "boost",
    },
    {
        type: "evaporating dish",
        category: "Filtering",
        sprite: [3, 5],
        search: []
    },
    {
        type: "allihn",
        category: "Condensers",
        sprite: [4, 2],
        search: ["condenser"]
    },
    {
        type: "fractionating column",
        category: "Condensers",
        sprite: [4, 0],
        search: ["distillation", "condenser"]
    },
    {
        type: "graham",
        category: "Condensers",
        sprite: [4, 3],
        search: ["condenser"]
    },
    {
        type: "liebig condenser",
        category: "Condensers",
        sprite: [4, 1],
        search: ["condenser"]
    },
    {
        type: "vigreux",
        category: "Condensers",
        sprite: ["2", 5, 3],
        search: ["vigreux condenser"],
        tier: "boost",
    },
    {
        type: "waterless condenser",
        category: "Condensers",
        sprite: [7, 7],
        search: ["air condenser"],
        tier: "boost",
    },
    {
        type: "cold finger",
        category: "Distillation",
        sprite: [4, 6],
        search: []
    },
    {
        type: "distillation head",
        category: "Distillation",
        sprite: [8, 9],
        search: [],
    },
    {
        type: "splash head",
        category: "Distillation",
        sprite: ["2", 2, 5],
        tier: "boost",
        search: [],
    },
    {
        type: "soxhlet extractor",
        category: "Distillation",
        sprite: ["2", 0, 7],
        search: [],
        tier: "boost",
    },
    {
        type: "receiver adaptor",
        category: "Distillation",
        sprite: ["2", 0, 3],
        search: ["receiver adapter", "distillation"],
        tier: "boost",
    },
    {
        type: "cowtype",
        category: "Distillation",
        sprite: ["2", 5, 5],
        search: [],
        tier: "boost",
    },
    {
        type: "dean-stark trap",
        category: "Distillation",
        sprite: ["2", 0, 5],
        search: [],
    },
    {
        type: "distillation flask",
        category: "Distillation",
        sprite: ["2", 0, 1],
        search: [],
    },
    {
        type: "oil bubbler",
        category: "Distillation",
        sprite: ["2", 5, 4],
        search: [],
        tier: "boost",
    },
    {
        type: "capillary tube",
        category: "Transportation",
        sprite: [2, 10],
        search: ["tube", "tlc", "tlc spotter"]
    },
    {
        type: "tube",
        category: "Transportation",
        sprite: [5, 0],
        search: ["transport", "delivery"]
    },
    {
        type: "tube bend",
        category: "Transportation",
        sprite: [5, 1],
        search: ["transport", "delivery"]
    },
    {
        type: "s-bent tube",
        category: "Transportation",
        sprite: [5, 4],
        search: ["S bend", "u-bend", "s-tube", "s tube", "delivery", "transport", "tube"]
    },
    {
        type: "u-bent tube",
        category: "Transportation",
        sprite: [5, 6],
        search: ["tube", "u-bend", "u tube", "u bend", "u-tube", "delivery", "transport", "utube"]
    },
    {
        type: "tube adapter",
        category: "Transportation",
        sprite: [5, 7],
        search: ["diameter", "change diameter", "tube diameter", "transport", "connect", "delivery"]
    },
    {
        type: "3-way crossing",
        category: "Transportation",
        sprite: [5, 2],
        search: ["t tube", "three way crossing", "threeway crossing", "3 way crossing", "delivery", "transport",]
    },
    {
        type: "4-way crossing",
        category: "Transportation",
        sprite: [5, 3],
        search: ["cross tube", "x tube", "four way crossing", "fourway crossing", "delivery", "transport",],
        tier: "boost",
    },
    {
        type: "gas wash bottle",
        category: "Transportation",
        sprite: [5, 5],
        search: ["drechsel bottle"],
        tier: "boost",
    },
    {
        type: "dropping funnel",
        category: "Transportation",
        sprite: [9, 8],
        search: ["addition funnel", "dropping funnel", "drop funnel",]
    },
    {
        type: "osmosis tube",
        category: "Transportation",
        sprite: ["2", 7, 0],
        search: ["u tube", "utube", "u-tube"],
        tier: "boost",
    },
    {
        type: "dialysis tube",
        category: "Transportation",
        sprite: ["2", 6, 10],
        search: ["visking tube"],
        tier: "boost",
    },
    {
        type: "test tube rack",
        category: "Metallic",
        sprite: [6, 0],
        search: []
    },
    {
        type: "retort stand",
        category: "Metallic",
        sprite: [6, 1],
        search: ["retort", "stand", "clamp", "ring"]
    },
    {
        type: "clamp",
        category: "Metallic",
        sprite: [6, 2],
        search: ["retort", "stand"]
    },
    {
        type: "clamp front",
        category: "Metallic",
        sprite: ["2", 7, 6],
        search: ["retort", "stand", "front-facing clamp", "front facing clamp", "frontfacing clamp"],
    },
    {
        type: "retort ring",
        category: "Metallic",
        sprite: [6, 5],
        search: ["retort stand", "stand", "clamp", "ring clamp", "iron ring"]
    },
    {
        type: "burette holder",
        category: "Metallic",
        sprite: [7, 8],
        search: ["burette clamp", "retort"],
        tier: "boost",
    },
    {
        type: "burette clamp",
        category: "Metallic",
        sprite: ["2", 6, 1],
        search: ["holder"],
        tier: "boost",
    },
    {
        type: "spatula",
        category: "Metallic",
        sprite: [6, 3],
        search: ["spoon"]
    },
    {
        type: "tripod",
        category: "Metallic",
        sprite: [6, 4],
        search: ["stand", "shelf"]
    },
    {
        type: "nichrome loop",
        category: "Metallic",
        sprite: ["2", 2, 0],
        search: ["inoculating loop", "inoculation loop"],
        tier: "boost",
    },
    {
        type: "combustion spoon",
        category: "Metallic",
        sprite: ["2", 8, 10],
        search: ["deflagration spoon", "deflagrating spoon", "spoon"],
        tier: "boost",
    },
    {
        type: "steel wool",
        category: "Metallic",
        sprite: ["2", 5, 9],
        search: ["iron wool"],
    },
    {
        type: "hoffman clamp",
        category: "Metallic",
        sprite: ["2", 5, 10],
        search: [],
    },
    {
        type: "mortar",
        category: "Ceramic",
        sprite: [7, 0],
        search: ["pestle"]
    },
    {
        type: "pestle",
        category: "Ceramic",
        sprite: [7, 1],
        search: ["mortar"]
    },
    {
        type: "beehive stand",
        category: "Ceramic",
        sprite: [7, 2],
        search: ["beehive shelf"],
        tier: "boost",
    },
    {
        type: "spotting tile",
        category: "Ceramic",
        sprite: [1, 10],
        search: ["dimple tile", "sampling tile"]
    },
    {
        type: "bench mat",
        category: "Ceramic",
        sprite: [3, 7],
        search: ["ceramic tile", "white tile"]
    },
    {
        type: "crucible",
        category: "Ceramic",
        sprite: [7, 3],
        search: []
    },
    {
        type: "crucible cover",
        category: "Ceramic",
        sprite: [7, 4],
        search: []
    },
    {
        type: "battery",
        category: "Electrical",
        sprite: ["2", 6, 2],
        search: ["power"],
    },
    {
        type: "croc clips",
        category: "Electrical",
        sprite: ["2", 0, 6],
        search: ["alligator clip"],
        tier: "boost",
    },
    {
        type: "fume hood",
        category: "Devices",
        sprite: ["2", 8, 0],
        search: ["fume cupboard", "fume closet", "extractor"],
    },
    {
        type: "rotavap",
        category: "Devices",
        sprite: ["2", 0, 9],
        search: ["rotovap"],
        tier: "boost",
    },
    {
        type: "centrifuge",
        category: "Devices",
        sprite: ["2", 9, 7],
        search: [""],
        tier: "boost",
    },
    {
        type: "sonicator",
        category: "Devices",
        sprite: ["2", 7, 5],
        search: ["rotovap"],
        tier: "boost",
    },
    {
        type: "lab jack",
        category: "Devices",
        sprite: [8, 7],
        search: ["laboratory jack", "lab scissor jack", "laboratory scissor jack", "scissor lift jack"],
        tier: "boost",
    },
    {
        type: "drop counter",
        category: "Devices",
        sprite: ["2", 7, 10],
        search: [],
        tier: "boost",
    },
    {
        type: "hofmann",
        category: "Devices",
        sprite: ["2", 2, 2],
        search: ["Hoffman", "Hofmann Apparatus"],
        tier: "boost",
    },
    {
        type: "schlenk lines",
        category: "Devices",
        sprite: ["2", 0, 10],
        search: ["vacuum gas manifold"],
        tier: "boost",
    },
    {
        type: "tlc plate",
        category: "Chromatography",
        sprite: ["2", 2, 3],
        search: [],
    },
    {
        type: "tlc spot",
        category: "Chromatography",
        sprite: ["2", 2, 4],
        search: ["dot"],
    },
    {
        type: "tlc chamber",
        category: "Chromatography",
        sprite: ["2", 9, 8],
        search: ["tlc"],
    },
    {
        type: "desiccator",
        category: "Storage",
        sprite: [8, 1],
        search: ["dessicator", "dessiccator"],
    },
    {
        type: "reagent bottle",
        category: "Storage",
        sprite: [8, 0],
        search: []
    },
    {
        type: "gas cylinder",
        category: "Storage",
        sprite: [8, 8],
        search: ["oxygen", "argon", "canister"],
    },
    {
        type: "plastic reagent bottle",
        category: "Storage",
        sprite: ["2", 0, 8],
        search: ["reagent container"],
        tier: "boost",
    },
    /** Substances */
    {
        type: "bubbles",
        category: "Substances",
        sprite: [4, 8],
        search: ["boil", "circle", "particles", "fizz", "effervescence", "foam", "froth"]
    },
    {
        type: "crystals",
        category: "Substances",
        sprite: [4, 9],
        search: ["solid"],
    },
    {
        type: "beads",
        category: "Substances",
        sprite: ["2", 5, 0],
        search: ["pearls", "algae beads", "yeast beads", "pellets", "samples"],
    },
    {
        type: "drop",
        category: "Substances",
        sprite: [9, 4],
        search: ["liquid", "fluid", "water"]
    },
    {
        type: "ice cube",
        category: "Substances",
        sprite: [4, 10],
        search: ["solid", "square"],
    },
    {
        type: "metal strip",
        category: "Substances",
        sprite: [5, 9],
        search: ["rectangle", "paper", "electrode", "magnesium", "ribbon"],
    },
    {
        type: "nail",
        category: "Substances",
        sprite: [9, 1],
        search: []
    },
    {
        type: "powder",
        category: "Substances",
        sprite: [5, 10],
        search: ["solid", "lumps", "piles", "particle", "dose", "dust", "chips", "food", "samples", "salt"],
    },
    {
        type: "smoke",
        category: "Substances",
        sprite: ["2", 9, 2],
        search: ["fume", "vapour", "gas", "exhaust", "steam", "trails"],
    },
    {
        type: "faucet",
        category: "Substances",
        sprite: ["2", 7, 2],
        search: ["water", "tap", "flow"],
    },
    /** Accessories */
    {
        type: "table",
        category: "Accessories",
        sprite: [9, 2],
        search: ["desk", "ground", "line", "base", "surface", "box", "rectangle", "flat surface", "workbench"]
    },
    {
        type: "glass stopper",
        category: "Accessories",
        sprite: ["2", 0, 0],
        search: ["ground joint glass stopper", "glass joint stopper"],
    },
    {
        type: "lamp",
        category: "Accessories",
        sprite: [9, 5],
        search: ["light", "illumination", "bright", "ray", "bulb", "lamp"]
    },
    {
        type: "desk lamp",
        category: "Accessories",
        sprite: ["2", 4, 9],
        search: ["light", "illumination", "bright", "ray", "bulb"],
    },
    {
        type: "wooden splint",
        category: "Accessories",
        sprite: [3, 8],
        search: ["stick", "stir", "match"]
    },
    {
        type: "pencil",
        category: "Accessories",
        sprite: ["2", 8, 3],
        search: ["write"],
    },
    {
        type: "felt tip pen",
        category: "Accessories",
        sprite: ["2", 8, 2],
        search: ["marker", "sharpie", "write"],
    },
    {
        type: "balloon",
        category: "Accessories",
        sprite: ["2", 6, 9],
        search: ["baloon"]
    },
    {
        type: "adhesive tape",
        category: "Accessories",
        sprite: ["2", 7, 4],
        search: ["sticky tape", "tape", "sellotape", "duct tape"],
    },
    {
        type: "timer",
        category: "Accessories",
        sprite: [9, 6],
        search: ["stopwatch", "clock", "time"]
    },
    {
        type: "glove",
        category: "Accessories",
        sprite: [3, 9],
        search: ["disposable glove", "safety"]
    },
    {
        type: "goggles",
        category: "Accessories",
        sprite: [3, 10],
        search: ["glasses", "eye protection", "safety"]
    },
    {
        type: "bottle",
        category: "Accessories",
        sprite: ["2", 7, 7],
        search: ["water bottle", "cola", "coke", "soda"],
    },
    {
        type: "candle",
        category: "Accessories",
        sprite: ["2", 8, 6],
        search: ["wax"],
        tier: "boost",
    },
    {
        type: "plastic joint clip",
        category: "Accessories",
        sprite: [9, 9],
        search: ["glass joint clip", "keck clip"],
    },
    {
        type: "cork ring",
        category: "Accessories",
        sprite: ["2", 2, 1],
        search: ["cork stand", "round bottom flask", "round-bottom flask"],
        tier: "boost",
    },
    {
        type: "scissors",
        category: "Accessories",
        sprite: ["2", 2, 8],
        search: ["cut"],
    },
    {
        type: "paperclip",
        category: "Accessories",
        sprite: ["2", 9, 5],
        search: [],
    },
    {
        type: "tap",
        category: "Accessories",
        sprite: ["2", 2, 9],
        search: ["stopcock", "stop cock"],
        tier: "boost",
    },
    {
        type: "camera",
        category: "Accessories",
        sprite: ["2", 6, 3],
        search: []
    },
    {
        type: "videocamera",
        category: "Accessories",
        sprite: ["2", 6, 4],
        search: []
    },
    {
        type: "label",
        category: "Labelling",
        sprite: [9, 7],
        search: ["text", "sticker"]
    },
    {
        type: "eye",
        category: "Labelling",
        sprite: [9, 3],
        search: ["eye", "pointer", "focus", "attention", "highlight"]
    },
    {
        type: "ghs hazard",
        category: "Labelling",
        sprite: [8, 10],
        search: ["signs", "symbols", "warning", "flammable", "danger"],
    },
    {
        type: "rectangle",
        category: "Basic shapes",
        sprite: ["2", 1, 0],
        search: ["square"],
    },
    {
        type: "ellipse",
        category: "Basic shapes",
        sprite: ["2", 1, 1],
        search: ["circle", "ring"],
    },
    {
        type: "line",
        category: "Basic shapes",
        sprite: ["2", 1, 7],
        search: ["wire"],
    },
    {
        type: "curve",
        category: "Basic shapes",
        sprite: ["2", 1, 6],
        search: ["wire", "wires", "line", "hose", "pipe", "tube", "delivery"],
    },
    {
        type: "triangle",
        category: "Basic shapes",
        sprite: ["2", 8, 1],
        search: ["ramp"],
    },
    {
        type: "arrow",
        category: "Arrows",
        sprite: ["2", 1, 4],
        search: [],
    },
    {
        type: "curved arrow",
        category: "Arrows",
        sprite: ["2", 9, 0],
        search: ["arrow", "curve"],
    },
    {
        type: "stir arrow",
        category: "Arrows",
        sprite: ["2", 9, 1],
        search: ["shake arrow", "swirl", "spin", "stirring", "shaking", "swirling", "spinning"],
    },
    {
        type: "cross",
        category: "Basic shapes",
        sprite: ["2", 1, 2],
        search: ["plus"],
    },
    {
        type: "star",
        category: "Basic shapes",
        sprite: ["2", 1, 8],
        search: [],
        tier: "boost",
    },
    {
        type: "tick",
        category: "Basic shapes",
        sprite: ["2", 1, 3],
        search: [],
        tier: "boost",
    },
    {
        type: "cuboid",
        category: "3D",
        sprite: ["2", 1, 9],
        search: ["cube", "rectangle", "box"],
    },
    {
        type: "3dcylinder",
        category: "3D",
        sprite: ["2", 1, 5],
        search: ["cylinder", "rod", "electrode"],
    },
    {
        type: "sphere",
        category: "3D",
        sprite: ["2", 1, 10],
        search: ["atom", "ball"],
        tier: "boost",
    },
    {
        type: "leaf",
        category: "Organic",
        sprite: ["2", 3, 0],
        search: ["leaves", "green"],
    },
    {
        type: "plant shoot",
        category: "Organic",
        sprite: ["2", 3, 9],
        search: [],
    },
    {
        type: "root",
        category: "Organic",
        sprite: ["2", 5, 1],
        search: [],
        tier: "boost",
    },
    {
        type: "shoot",
        category: "Organic",
        sprite: ["2", 4, 1],
        search: ["plant", "straight shoot"],
    },
    {
        type: "pond weed",
        category: "Organic",
        sprite: ["2", 4, 0],
        search: ["leaves", "green", "plant", "waterweed", "elodea"],
    },
    {
        type: "potato",
        category: "Organic",
        sprite: ["2", 3, 1],
        search: ["chip"],
    },
    {
        type: "agar",
        category: "Organic",
        sprite: ["2", 3, 6],
        search: ["jelly", "gel", "cube"],
    },
    {
        type: "bug",
        category: "Organic",
        sprite: ["2", 5, 2],
        search: ["insect", "spider"],
    },
    {
        type: "seed",
        category: "Organic",
        sprite: ["2", 3, 2],
        search: [],
    },
    {
        type: "bacteria",
        category: "Organic",
        sprite: ["2", 4, 4],
        search: ["culture", "petri dish", "sample dish"],
    },
    {
        type: "streaked bacteria",
        category: "Organic",
        sprite: ["2", 7, 3],
        search: ["culture", "petri dish", "sample dish"],
        tier: "boost",
    },
    {
        type: "microscope",
        category: "_Bio_Equipment",
        sprite: ["2", 3, 4],
        search: [],
    },
    {
        type: "microscope slide",
        category: "_Bio_Equipment",
        sprite: ["2", 3, 7],
        search: [],
    },
    {
        type: "cover slip",
        category: "_Bio_Equipment",
        sprite: ["2", 3, 8],
        search: ["microscope", "slide"],
    },
    {
        type: "potometer",
        category: "_Bio_Equipment",
        sprite: ["2", 4, 3],
        search: [],
        tier: "boost",
    },
    {
        type: "petri top",
        category: "_Bio_Equipment",
        sprite: ["2", 3, 3],
        search: ["petri dish", "sample dish"],
    },
    {
        type: "tweezers",
        category: "_Bio_Equipment",
        sprite: ["2", 4, 2],
        search: ["forceps"],
    },
    {
        type: "scalpel",
        category: "_Bio_Equipment",
        sprite: ["2", 4, 6],
        search: [],
        tier: "boost",
    },
    {
        type: "quadrat",
        category: "_Bio_Equipment",
        sprite: ["2", 4, 7],
        search: ["grid"],
    },
    {
        type: "water bath",
        category: "_Bio_Equipment",
        sprite: ["2", 4, 10],
        search: [],
    },
    {
        type: "pot",
        category: "_Bio_Other",
        sprite: ["2", 3, 10],
        search: [],
    },
    {
        type: "dirt",
        category: "_Bio_Other",
        sprite: ["2", 4, 5],
        search: ["earth", "ground", "soil"],
    },
    {
        type: "cotton wool",
        category: "_Bio_Other",
        sprite: ["2", 3, 5],
        search: [],
    },
    {
        type: "sun",
        category: "_Bio_Other",
        sprite: ["2", 4, 8],
        search: ["light", "rays"],
    },
    {
        type: "magnet",
        category: "Electrical",
        sprite: ["3", 0, 0],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "powerpack",
        category: "Electrical",
        sprite: ["3", 0, 1],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "digital ammeter",
        category: "Electrical",
        sprite: ["3", 1, 3],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "digital voltmeter",
        category: "Electrical",
        sprite: ["3", 1, 2],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "cable",
        category: "Electrical",
        sprite: ["3", 0, 4],
        search: ["wire", "banana clips"],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "light gate",
        category: "Optics",
        sprite: ["3", 1, 4],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "solenoid",
        category: "Electrical",
        sprite: ["3", 1, 5],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "ammeter-s",
        category: "Electrical",
        sprite: ["3", 0, 2],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "voltmeter-s",
        category: "Electrical",
        sprite: ["3", 0, 3],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "trolley",
        category: "Dynamics",
        sprite: ["3", 1, 0],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "ramp",
        category: "Dynamics",
        sprite: ["3", 1, 1],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "pulley",
        category: "Dynamics",
        sprite: ["3", 0, 5],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "raybox",
        category: "Optics",
        sprite: ["3", 0, 6],
        search: ["laser box", "ray box"],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "glass block",
        category: "Optics",
        sprite: ["3", 0, 7],
        search: ["refraction", "ray", "laser"],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "spring",
        category: "Dynamics",
        sprite: ["3", 0, 8],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "slotted weight",
        category: "Dynamics",
        sprite: ["3", 0, 9],
        search: ["mass"],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
    {
        type: "mirror",
        category: "Optics",
        sprite: ["3", 0, 10],
        search: [],
        released: flags__WEBPACK_IMPORTED_MODULE_1__["default"].isPhysicsEnabled,
    },
];
// Adds names to the above list.
var apparatusSpecListWithNames = apparatusSpecList
    // Filter out apparatus that is not yet released.
    .filter(function (spec) { var _a; return ((_a = spec.released) !== null && _a !== void 0 ? _a : true); })
    .map(function (spec) {
    var name = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(spec.type).properties.label;
    return __assign(__assign({}, spec), { name: name, lowerCaseName: name.toLowerCase() });
});
var releasedItems = apparatusSpecList.filter(function (spec) { var _a; return ((_a = spec.released) !== null && _a !== void 0 ? _a : true); });
var releasedAndFreeItems = releasedItems.filter(function (spec) { return spec.tier === undefined; });
var itemsThatRequireBoost = apparatusSpecList.filter(function (spec) { return spec.tier == "boost"; }).map(function (spec) { return spec.type; });
/** Count the number of items that are released. */
var releasedItemsCount = releasedItems.length;
/** Count the number of items that are in free tier and publicly available. */
var releasedAndFreeItemsCount = releasedAndFreeItems.length;
/* harmony default export */ __webpack_exports__["default"] = (apparatusSpecListWithNames);


/***/ }),

/***/ "P2PJ":
/*!*************************************!*\
  !*** ./src/components/checkbox.tsx ***!
  \*************************************/
/*! exports provided: Checkbox, LabelledCheckbox, LabelledCheckboxGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checkbox", function() { return Checkbox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabelledCheckbox", function() { return LabelledCheckbox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabelledCheckboxGroup", function() { return LabelledCheckboxGroup; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tiers/context */ "tya1");
// Component for checkbox
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var Checkbox = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("input", { type: "checkbox", className: "custom-control-input", ref: function (el) { return el && (el.indeterminate = (props.value === undefined)); }, id: props.id, checked: (_a = props.value) !== null && _a !== void 0 ? _a : false, disabled: props.disabled, onChange: function (e) { return props.onCheckedChange(e.target.checked); } }));
};
var LabelledCheckbox = function (props) {
    var tiers = react__WEBPACK_IMPORTED_MODULE_0__["useContext"](tiers_context__WEBPACK_IMPORTED_MODULE_1__["TierContext"]);
    var disableCheckbox = !tiers.allow(props) && props.allowWhenLocked !== true;
    var className = "custom-control " + (props.useSwitch ? "custom-switch" : "custom-checkbox");
    var onClick = disableCheckbox ? function () { return tiers.popup("PP:" + props.id); } : undefined;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: className, onClick: onClick },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](Checkbox, __assign({}, props, { id: props.id, key: props.id, disabled: disableCheckbox })),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("label", { key: "label", className: "custom-control-label", htmlFor: props.id },
            props.label,
            tiers.badge(props) /* Display badge if locked. */));
};
var LabelledCheckboxGroup = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", null, props.checkboxes.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](LabelledCheckbox, __assign({}, c, { key: c.id })); }))); };


/***/ }),

/***/ "P3FS":
/*!*************************************************************!*\
  !*** ./src/apparatus/library/measurement/digital_meters.ts ***!
  \*************************************************************/
/*! exports provided: DigitalVoltmeter, DigitalAmmemter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DigitalVoltmeter", function() { return DigitalVoltmeter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DigitalAmmemter", function() { return DigitalAmmemter; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_electrical_powerpack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/electrical/powerpack */ "YW4J");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var DigitalVoltmeter = /** @class */ (function () {
    function DigitalVoltmeter() {
    }
    DigitalVoltmeter.prototype.render = function (appearance) {
        return renderMeter(appearance, "V");
    };
    DigitalVoltmeter.properties = {
        label: "Digital Voltmeter",
        canContainLiquids: false,
        defaultAppearance: {
            reading: "12.00",
        },
        appearanceSpecs: [],
    };
    return DigitalVoltmeter;
}());

var DigitalAmmemter = /** @class */ (function () {
    function DigitalAmmemter() {
    }
    DigitalAmmemter.prototype.render = function (appearance) {
        return renderMeter(appearance, "A");
    };
    DigitalAmmemter.properties = {
        label: "Digital Ammeter",
        canContainLiquids: false,
        defaultAppearance: {
            reading: "12.00",
        },
        appearanceSpecs: [],
    };
    return DigitalAmmemter;
}());

function renderMeter(appearance, unit) {
    var casing = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 90, 62, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 3.0)
        .withStroke("default")
        .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].deviceGrey.color(), { shift: 0.15 }));
    var dcJack1 = Object(apparatus_library_electrical_powerpack__WEBPACK_IMPORTED_MODULE_2__["createJack"])("#f61f2f").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-30, 46));
    var dcJack2 = Object(apparatus_library_electrical_powerpack__WEBPACK_IMPORTED_MODULE_2__["createJack"])("#414141").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(30, 46));
    var screen = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 8, 70, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2)
        .withStroke(2.0, "white")
        .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lcdScreen);
    var backgroundText = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 59),
        content: unit,
        fillColor: '#d1d5d9',
        fontFamily: 'sans-serif',
        fontSize: 78,
        justification: "center",
    });
    var text = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(30, 27),
        content: appearance.reading,
        fillColor: 'black',
        fontFamily: 'sans-serif',
        fontSize: 15,
        justification: "right",
    });
    var unitText = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-30, 27),
        content: unit,
        fillColor: "#61893f",
        fontFamily: 'sans-serif',
        fontWeight: 'bold',
        fontSize: 15,
        justification: "left",
    });
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([casing, backgroundText, dcJack1, dcJack2, screen, text, unitText]);
    return {
        graphic: graphic,
        hitShape: graphic.bounds.toShape()
    };
}


/***/ }),

/***/ "P6qo":
/*!******************************************!*\
  !*** ./src/apparatus/text/appearance.ts ***!
  \******************************************/
/*! exports provided: FONT_FAMILY_OPTIONS, TEXT_COLOUR_SWATCHES, DEMO_COLOUR_SWATCHES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FONT_FAMILY_OPTIONS", function() { return FONT_FAMILY_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TEXT_COLOUR_SWATCHES", function() { return TEXT_COLOUR_SWATCHES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEMO_COLOUR_SWATCHES", function() { return DEMO_COLOUR_SWATCHES; });
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var FONT_FAMILY_OPTIONS = [
    { value: "sans-serif", label: "Default" },
    { value: "Arial", label: "Arial" },
    { value: "Calibri", label: "Calibri" },
    { value: "Comic Sans MS", label: "Comic Sans" },
    { value: "Courier New", label: "Courier New" },
    { value: "Georgia", label: "Georgia" },
    { value: "Rubik", label: "Rubik" },
    { value: "Times New Roman", label: "Times New Roman" },
    { value: "Verdana", label: "Verdana" },
];
var TEXT_COLOUR_SWATCHES = {
    "Black": "#000000",
    "Red": "#FF3B2D",
    "Blue": "#4353EB",
    "Green": "#43882E",
};
var DEMO_COLOUR_SWATCHES = __assign({}, TEXT_COLOUR_SWATCHES);


/***/ }),

/***/ "PJ3I":
/*!******************************!*\
  !*** ./src/random/random.ts ***!
  \******************************/
/*! exports provided: Random */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Random", function() { return Random; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");

var Random = /** @class */ (function () {
    function Random(seed) {
        if (seed === void 0) { seed = 1238167; }
        this.generator = sfc32(seed, 871238, 61237, 301189);
    }
    // Returns a random vector sampled uniformly from a square, from (-x, -x) to (x, x)
    Random.prototype.randomUnitVector = function (x) {
        if (x === void 0) { x = 1.0; }
        return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(this.randomUnitValue(x), this.randomUnitValue(x));
    };
    // Returns random value from -x to x
    Random.prototype.randomUnitValue = function (x) {
        if (x === void 0) { x = 1.0; }
        return (this.generator() - 0.5) * 2 * x;
    };
    Random.prototype.randomBetween = function (min, max) {
        return min + (max - min) * this.generator();
    };
    Random.prototype.randomInBounds = function (r) {
        var x = this.randomBetween(r.left, r.right);
        var y = this.randomBetween(r.top, r.bottom);
        return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, y);
    };
    return Random;
}());

function sfc32(a, b, c, d) {
    return function () {
        a >>>= 0;
        b >>>= 0;
        c >>>= 0;
        d >>>= 0;
        var t = (a + b) | 0;
        a = b ^ b >>> 9;
        b = c + (c << 3) | 0;
        c = (c << 21 | c >>> 11);
        d = d + 1 | 0;
        t = t + d | 0;
        c = c + t | 0;
        return (t >>> 0) / 4294967296;
    };
}


/***/ }),

/***/ "PSxR":
/*!******************************************!*\
  !*** ./src/apparatus/library/pipette.ts ***!
  \******************************************/
/*! exports provided: Pipette, PlasticPipette, MohrPipette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pipette", function() { return Pipette; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlasticPipette", function() { return PlasticPipette; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MohrPipette", function() { return MohrPipette; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var allSizes = ["0.5", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "15", "20", "25", "30", "40", "50", "100"];
var BLACK = "#000000";
var BLUE = "#0423af";
var ORANGE = "#db720f";
var RED = "#aa1d1d";
var WHITE = "#eeeeee";
var GREEN = "#20b12f";
var YELLOW = "#eadb10";
var LABEL_COLOR = "#33333366";
/**
 * Original:
 *  - https://www.fishersci.com/shop/products/pyrex-reusable-class-a-volumetric-pipets-capacity-25ml-tolerance-0-03ml-color-code-blue/136511n
 *
 * Colour coding:
 *  - https://www.coleparmer.co.uk/p/blaubrand-bulb-pipettes/81461
 *  - https://1.bp.blogspot.com/-LUBA0vZZrxM/XBFI3Ogcv9I/AAAAAAAALUQ/eUV-Z2dC0DwjXWIfmB8zmRnt78P-Y0LFACLcBGAs/s1600/IMG_20181207_175733.jpg
 *
 * Example: https://www.sks-science.com/lab-supply-p-9503.html
 */
var Pipette = /** @class */ (function () {
    function Pipette() {
    }
    Pipette.isBoostRequiredForAppearance = function (appearance) {
        return appearance.showLabel;
    };
    Pipette.prototype.render = function (appearance) {
        var radius = 5;
        var _a = this.params(appearance.size), length = _a[0], bulbRadius = _a[1], bulbLength = _a[2], colorCode = _a[3], doubleCode = _a[4];
        var bulbCenterRelative = 0.45;
        var bulbStart = bulbCenterRelative * length - bulbLength / 2;
        var bulbEnd = bulbStart + bulbLength;
        var radiusDiff = bulbRadius - radius;
        var oneSide = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[radius, 0]], [[radius, bulbStart]], [[bulbRadius, bulbStart + bulbRadius], [0, -radiusDiff]], [[bulbRadius, bulbEnd - bulbRadius], , [0, radiusDiff]], [[radius, bulbEnd]], [[radius, length]]));
        var shape = oneSide.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        var liquidMask = shape.clone();
        shape.remove();
        var otherSide = oneSide.clone();
        otherSide.scale(-1, 1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([oneSide, otherSide]);
        // Extend the lip on one side.
        oneSide.lastSegment.point.y += 5;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(oneSide, otherSide);
        // Add marker.
        graphic.insertChild(0, new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-radius, bulbStart - 20), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, bulbStart - 20))
            .withStroke("thinner", LABEL_COLOR));
        // Add volume label.
        if (appearance.showLabel) {
            var fontSize = bulbRadius * 0.9;
            var label = new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"]({
                point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, bulbCenterRelative * length + fontSize / 2),
                content: appearance.size,
                fillColor: LABEL_COLOR,
                fontFamily: 'sans-serif',
                fontWeight: 'bold',
                fontSize: fontSize,
                justification: "center",
            });
            graphic.addChild(label);
        }
        // Add color code.
        if (!doubleCode) {
            graphic.insertChild(0, paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 15, radius * 2, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER)).withFill(colorCode));
        }
        else {
            graphic.insertChildren(0, [
                paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 15, radius * 2, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER)).withFill(colorCode),
                paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 15 + 7, radius * 2, 5, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER)).withFill(colorCode),
            ]);
        }
        // Scale everything.
        var center = graphic.bounds.center;
        graphic.scale(appearance.scale, center);
        liquidMask.scale(appearance.scale, center);
        var hitShape = graphic.bounds.expand(5).toShape();
        return { graphic: graphic, hitShape: hitShape, liquidMask: liquidMask, watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(5, bulbEnd) };
    };
    Pipette.prototype.params = function (size) {
        switch (size) {
            case "0.5":
                return [300, 7, 40, BLACK, true];
            case "1":
                return [300, 7, 40, BLUE, false];
            case "2":
                return [330, 8, 40, ORANGE, false];
            case "3":
                return [330, 9, 42, BLACK, false];
            case "4":
                return [400, 9, 42, RED, true];
            case "5":
                return [400, 10, 45, WHITE, false];
            case "6":
                return [400, 11, 45, ORANGE, true];
            case "7":
                return [400, 12, 50, GREEN, true];
            case "8":
                return [440, 13, 50, BLUE, false];
            case "9":
                return [440, 14, 50, BLACK, false];
            case "10":
                return [440, 15, 55, RED, false];
            case "15":
                return [510, 16, 55, GREEN, false];
            case "20":
                return [510, 16, 60, YELLOW, false];
            case "25":
                return [520, 17, 60, BLUE, false];
            case "30":
                return [520, 18, 65, BLACK, false];
            case "40":
                return [540, 18, 70, WHITE, false];
            case "50":
                return [540, 19, 75, RED, false];
            case "100":
                return [585, 20, 80, YELLOW, false];
        }
    };
    Pipette.properties = {
        label: "Pipette",
        canContainLiquids: true,
        defaultAppearance: {
            size: "10",
            scale: 0.73,
            showLabel: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.6, max: 1.0, step: 0.01, unit: "%"
            },
            {
                spec: "select", key: "size", label: "Max volume",
                options: allSizes.map(function (s) { return ({ label: s + " mL", value: s }); })
            },
            { spec: "checkbox", key: "showLabel", label: "Show label", tier: "boost", allowWhenLocked: true },
        ],
    };
    return Pipette;
}());

var PlasticPipette = /** @class */ (function () {
    function PlasticPipette() {
    }
    PlasticPipette.prototype.render = function (appearance) {
        var length = appearance.length;
        var lip = 30;
        var bulb = 40;
        var bodyWidth = 8;
        var bulbWidth = 15;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[2, length]], [[bodyWidth / 2, length - lip]], [[bodyWidth / 2, bulb]], [[bulbWidth / 2, bulb - 10]], [[bulbWidth / 2, 0], undefined, [0, -10]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        var liquidMask = graphic.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: graphic.strokeBounds.toShape(), liquidMask: liquidMask };
    };
    PlasticPipette.properties = {
        label: "Plastic Pipette",
        canContainLiquids: true,
        defaultAppearance: {
            length: 155,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 100, max: 180
            }
        ],
    };
    return PlasticPipette;
}());

var MohrPipette = /** @class */ (function () {
    function MohrPipette() {
    }
    MohrPipette.prototype.render = function (appearance) {
        var length = appearance.length;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[4, 0]], [[4, 40]], [[8, 47], [0, -4]], [[8, length - 40], , [0, 5]], [[4, length]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        var liquidMask = shape.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers2"])(graphic, { start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(6, length - 50), step: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -4), count: (length - 150) / 4 + 1, majorEvery: 5 });
        return { graphic: graphic, hitShape: graphic.strokeBounds.toShape(), liquidMask: liquidMask };
    };
    MohrPipette.properties = {
        label: "Mohr Pipette",
        canContainLiquids: true,
        defaultAppearance: {
            length: 350
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Size",
                min: 250, max: 350
            }
        ],
    };
    return MohrPipette;
}());



/***/ }),

/***/ "Pnck":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/container/thermos_flask.ts ***!
  \**********************************************************/
/*! exports provided: ThermosFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThermosFlask", function() { return ThermosFlask; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var ThermosFlask = /** @class */ (function () {
    function ThermosFlask() {
    }
    ThermosFlask.prototype.render = function (appearance) {
        var wallThickness = 8;
        var neckSize = appearance.neckSize;
        var radius = appearance.width / 2;
        var height = appearance.height;
        var outline = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neckSize, 0]], [[neckSize, 10], , [0, 15]], [[radius, 40], [0, -15]], [[radius, height - 20], , [0, 10]], [[radius - 20, height], [10, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(outline);
        // Create the liquid mask first. The mask is closed but the
        // graphics is not.
        var liquidMask = outline.clone();
        liquidMask.closePath();
        // Reuse the outline as the thicker outline, forming the walls.
        outline.strokeCap = "round";
        var innerWall = outline.clone();
        outline.withStroke(Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default") * 2 + wallThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke);
        innerWall.withStroke(wallThickness, "white");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([outline, innerWall]);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: outline.strokeBounds.toShape(),
            snapping: outline.placeable()
        };
    };
    ThermosFlask.properties = {
        label: "Vacuum Flask",
        canContainLiquids: true,
        defaultAppearance: {
            neckSize: 18,
            height: 240,
            width: 80,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Diameter",
                min: 60, max: 90,
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 160, max: 250,
            },
            {
                spec: "slider", key: "neckSize", label: "Neck Size",
                min: 12, max: 20, step: 0.5
            }
        ],
    };
    return ThermosFlask;
}());



/***/ }),

/***/ "Pp6V":
/*!*****************************************!*\
  !*** ./src/apparatus/library/filter.ts ***!
  \*****************************************/
/*! exports provided: FilterFunnel, FilterPaper, FlutedFilterPaper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterFunnel", function() { return FilterFunnel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterPaper", function() { return FilterPaper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FlutedFilterPaper", function() { return FlutedFilterPaper; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



/** Filter paper stroke color */
var strokeColor = "#cccccc";
/** Used by "folded" and "folded-simple". Lower results in narrower paper. */
var FOLD_DRAW_RATIO = 0.8;
var FilterFunnel = /** @class */ (function () {
    function FilterFunnel() {
    }
    FilterFunnel.prototype.render = function (appearance) {
        var ratio = 0.8;
        var height = appearance.funnelSize, stem = appearance.stemLength, stemD = appearance.stemDiameter;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-height * ratio, -height]], [[0, 0]], [[0, stem]], [[stemD, stem + 5]], [[stemD, 0]], [[stemD + height * ratio, -height]]));
        var hitShape = shape.clone();
        var liquidMask = shape.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 3);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: hitShape, liquidMask: liquidMask };
    };
    FilterFunnel.properties = {
        label: "Filter Funnel",
        canContainLiquids: true,
        defaultAppearance: {
            funnelSize: 55,
            stemLength: 45,
            stemDiameter: 10,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "funnelSize", label: "Funnel size",
                min: 30, max: 90,
            },
            {
                spec: "slider", key: "stemLength", label: "Stem length",
                min: 30, max: 80,
            },
            {
                spec: "slider", key: "stemDiameter", label: "Stem diameter",
                min: 7, max: 35, unit: "mm"
            },
        ],
    };
    return FilterFunnel;
}());

var FilterPaper = /** @class */ (function () {
    function FilterPaper() {
    }
    FilterPaper.prototype.render = function (appearance) {
        var graphic = createGraphic(appearance);
        graphic.scale(appearance.diameter / 90);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    FilterPaper.properties = {
        label: "Filter paper",
        canContainLiquids: false,
        defaultAppearance: {
            style: "folded",
            folding: "simple",
            diameter: 90.0,
            residue: false,
            residueColor: "#9c735d",
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "style", label: "View and style",
                options: [
                    { value: "top", label: "Top view" },
                    { value: "folded", label: "Folded, side view" },
                    { value: "folded-simple", label: "Simple, side view" },
                ]
            },
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 60, max: 150,
            },
            {
                spec: "checkbox", key: "residue", label: "Residue",
            },
            {
                visible: function (a) { return a.residue; },
                spec: "color", key: "residueColor", label: "Residue color",
            },
        ],
    };
    return FilterPaper;
}());

var FlutedFilterPaper = /** @class */ (function () {
    function FlutedFilterPaper() {
    }
    FlutedFilterPaper.prototype.render = function (appearance) {
        var graphic = createGraphic(appearance);
        graphic.scale(appearance.diameter / 90);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    FlutedFilterPaper.properties = {
        label: "Fluted Filter paper",
        canContainLiquids: false,
        defaultAppearance: __assign(__assign({}, FilterPaper.properties.defaultAppearance), { folding: "fluted" }),
        appearanceSpecs: FilterPaper.properties.appearanceSpecs
    };
    return FlutedFilterPaper;
}());

function createGraphic(appearance) {
    switch (appearance.style) {
        case "top":
            return function () {
                var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
                var filterPaper = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), 45)
                    .withStroke("thinner", strokeColor);
                filterPaper.setRadialGradientFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].filterPaper);
                graphic.addChild(filterPaper);
                if (appearance.folding == "fluted") {
                    var valleyFold = createValleyFold([[0, 0]], [[5, 45]], [[-5, 45]]);
                    graphic.addChild(valleyFold);
                    var mountainFold = createMountainFold("aa", [[0, 0]], [[5, 45]], [[-5, 45]]);
                    mountainFold.rotate(15, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                    graphic.addChild(mountainFold);
                    for (var i = 1; i < 12; i++) {
                        valleyFold.clone();
                        valleyFold.rotate(30, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                        mountainFold.clone();
                        mountainFold.rotate(30, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
                        graphic.addChild(valleyFold);
                        graphic.addChild(mountainFold);
                    }
                }
                if (!appearance.residue) {
                    return graphic;
                }
                // Add residue.
                var residue = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[10, 10], [-5, -5], [6, 6]], [[-10, 10], [-5, 3], [-3, -8]], [[-10, -10], [7, 9], [-4, -11]], [[10, -10], [4, 4], [15, -5]]));
                residue.closePath();
                residue.fillColor = appearance.residueColor + "aa";
                graphic.addChild(residue);
                return graphic;
            }();
        case "folded":
            var graphic_1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
            return function () {
                var filterPaper = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 45]], [[45 * FOLD_DRAW_RATIO, 0], undefined, [3, -5]], [[-45 * FOLD_DRAW_RATIO, 0], [-3, -5]]));
                filterPaper.close()
                    .withStroke("thinner", strokeColor)
                    .setGradientFill("right-down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].filterPaper);
                var topLine = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[45 * FOLD_DRAW_RATIO, 0], undefined, [0, 5]], [[-45 * FOLD_DRAW_RATIO, 0], [0, 5]]));
                topLine.strokeColor = strokeColor;
                // Add shading for the inside.
                var insideShading = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-36, 0], [0, -5], [0, 5]], [[36, 0], [0, 5], [0, -5]]));
                insideShading.closePath();
                insideShading.fillColor = "#00001028";
                graphic_1.addChildren([filterPaper, insideShading, topLine]);
                if (appearance.folding == "fluted") {
                    var valley = createValleyFold([[0, 45]], [[-5, -5]], [[5, -5]]);
                    graphic_1.addChild(valley);
                    var mountain1 = createMountainFold("30", [[0, 45]], [[-5, -4]], [[5, -5]]);
                    mountain1.rotate(8, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    graphic_1.addChild(mountain1);
                    var valley1 = valley.clone();
                    valley1.rotate(17, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    valley1.scale(1.0, 1.03, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var valley2 = valley.clone();
                    valley2.rotate(34, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    valley2.scale(1.0, 1.19, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var valley_1 = valley1.clone();
                    valley1.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var valley_2 = valley2.clone();
                    valley2.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var mountain2 = mountain1.clone();
                    mountain1.rotate(17, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    mountain1.scale(1.0, 1.06, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var mountain_1 = mountain1.clone();
                    mountain_1.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    var mountain_2 = mountain2.clone();
                    mountain_2.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
                    graphic_1.addChildren([valley1, valley2, valley_1, valley_2, mountain1, mountain2, mountain_1, mountain_2]);
                }
                else {
                    var foldedPart = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-45 * FOLD_DRAW_RATIO, 0], undefined, [3, 5]], [[-20 * FOLD_DRAW_RATIO, 8]], [[0, 45]]));
                    foldedPart.strokeColor = strokeColor;
                    graphic_1.addChild(foldedPart);
                }
                if (!appearance.residue) {
                    return graphic_1;
                }
                var residue = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 45]], [[16, 25], undefined, [-8, -8]], [[-16, 25], [8, 8]]));
                residue.closePath();
                residue.fillColor = appearance.residueColor + "60";
                graphic_1.addChild(residue);
                return graphic_1;
            }();
        case "folded-simple":
            return foldedSimple(appearance);
    }
}
function foldedSimple(appearance) {
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
    var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-45 * FOLD_DRAW_RATIO, 0]], [[0, 45]], [[45 * FOLD_DRAW_RATIO, 0]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
    graphic.addChild(shape);
    if (appearance.residue) {
        var residue = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 45]], [[16, 25], undefined, [-8, -8]], [[-16, 25], [8, 8]]));
        residue.closePath();
        residue.fillColor = appearance.residueColor + "60";
        graphic.addChild(residue);
    }
    return graphic;
}
function createValleyFold() {
    var segments = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        segments[_i] = arguments[_i];
    }
    var valleyFold = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, segments));
    valleyFold.setGradientFill("right", [["#00000000", 0.0], ["#00000015", 0.5], ["#00000000", 1.0]]);
    return valleyFold;
}
function createMountainFold(opacity) {
    var segments = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        segments[_i - 1] = arguments[_i];
    }
    var mountainFold = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, segments));
    mountainFold.setGradientFill("right", [["#ffffff00", 0.0], ["#ffffff" + opacity, 0.5], ["#ffffff00", 1.0]]);
    return mountainFold;
}


/***/ }),

/***/ "Pr/b":
/*!********************************************!*\
  !*** ./src/layout/editor/context_menu.tsx ***!
  \********************************************/
/*! exports provided: EditorContextMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorContextMenu", function() { return EditorContextMenu; });
/* harmony import */ var _szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @szhsin/react-menu */ "4qBU");
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_clipboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/clipboard */ "A2/w");
/* harmony import */ var editing_deleting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/deleting */ "FK9k");
/* harmony import */ var ordering_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ordering/actions */ "OWZY");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







var EditorContextMenu = /** @class */ (function (_super) {
    __extends(EditorContextMenu, _super);
    function EditorContextMenu() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.reorderAction = function (action) {
            var command = ordering_actions__WEBPACK_IMPORTED_MODULE_5__["ReorderItems"].create(_this.extractSelectedIds(), action);
            if (command) {
                Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("LayerOrdering", action.capitalise() + "-ContextMenu");
                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(command);
            }
        };
        return _this;
    }
    EditorContextMenu.prototype.render = function () {
        var _this = this;
        var itemsSelected = !this.props.selected.isEmpty;
        return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["ControlledMenu"], { key: "ContextMenu", anchorPoint: this.props.contextMenu ? this.props.contextMenu.position : { x: 0, y: 0 }, isOpen: this.props.contextMenu !== undefined, onClose: function () { return _this.props.onClose(); } },
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Cut", onClick: function () { return editing_clipboard__WEBPACK_IMPORTED_MODULE_3__["default"].cut("contextmenu"); }, disabled: !itemsSelected },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fas fa-cut" }),
                "Cut"),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Copy", onClick: function () { return editing_clipboard__WEBPACK_IMPORTED_MODULE_3__["default"].copy("contextmenu"); }, disabled: !itemsSelected },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "far fa-copy" }),
                "Copy"),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Paste", onClick: function () { return editing_clipboard__WEBPACK_IMPORTED_MODULE_3__["default"].paste("contextmenu"); } },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "far fa-clipboard" }),
                "Paste"),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuDivider"], null),
            this.groupUngroupSection(),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuDivider"], null),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["SubMenu"], { label: "Order", disabled: !itemsSelected, offsetX: -4 },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { onClick: function () { return _this.reorderAction("bringToFront"); } },
                    react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fad fa-bring-front" }),
                    "Bring to front"),
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { onClick: function () { return _this.reorderAction("bringForward"); } },
                    react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fad fa-bring-forward" }),
                    "Bring forward"),
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { onClick: function () { return _this.reorderAction("sendBackward"); } },
                    react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fad fa-send-backward" }),
                    "Send backward"),
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { onClick: function () { return _this.reorderAction("sendToBack"); } },
                    react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fad fa-send-back" }),
                    "Send to back")),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuDivider"], null),
            react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Delete", onClick: function () { return Object(editing_deleting__WEBPACK_IMPORTED_MODULE_4__["deleteSelected"])("contextmenu"); }, disabled: !itemsSelected },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "far fa-trash-alt" }),
                "Delete"));
    };
    EditorContextMenu.prototype.groupUngroupSection = function () {
        var _this = this;
        var children = [];
        if (this.props.selected.shouldAllowUngrouping) {
            children.push(react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Ungroup", onClick: function () {
                    var command = _this.props.selected.createUngroupObjectsCommand();
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("Grouping", "Ungroup-ContextMenu");
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(command);
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "far fa-object-ungroup" }),
                "Ungroup"));
        }
        if (this.props.selected.shouldAllowRegrouping) {
            children.push(react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Regroup", onClick: function () {
                    var command = _this.props.selected.createRegroupObjectsCommand();
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("Grouping", "Regroup-ContextMenu");
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(command);
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "fad fa-object-group" }),
                "Regroup"));
        }
        if (children.length == 0 || this.props.selected.shouldAllowGrouping) {
            // Ensure there is at least one button: Group.
            children.unshift(react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_szhsin_react_menu__WEBPACK_IMPORTED_MODULE_0__["MenuItem"], { key: "Group", disabled: !this.props.selected.shouldAllowGrouping, onClick: function () {
                    var command = _this.props.selected.createGroupObjectsCommand();
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("Grouping", "Group-ContextMenu");
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(command);
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", { className: "far fa-object-group" }),
                "Group"));
        }
        return children;
    };
    EditorContextMenu.prototype.extractSelectedIds = function () {
        return this.props.selected.items.map(function (a) { return a.id; });
    };
    return EditorContextMenu;
}(react__WEBPACK_IMPORTED_MODULE_6___default.a.Component));



/***/ }),

/***/ "Q2/V":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/accessories/candle.ts ***!
  \*****************************************************/
/*! exports provided: Candle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Candle", function() { return Candle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var CANDLE_GRADIENT = [
    ["#deca8b", 0],
    ["#feeab8", 0.31],
    ["#fcedc9", 0.45],
    ["#deca8b", 1.0],
];
var STROKE = "#c3b68e";
var Candle = /** @class */ (function () {
    function Candle() {
    }
    Candle.prototype.render = function (appearance) {
        var width = appearance.diameter, height = appearance.height;
        var base = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[width / 2, 0], [12, -3]], [[width / 2, height - 5], , [7, -2]], [[width / 2 + 5, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(base);
        base.close().withGradientFill("right", CANDLE_GRADIENT);
        // Create some melted drops.
        var drop = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[5, 10], [0, -5], [0, 5]])).close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(drop);
        drop.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, 8);
        drop.fillColor = new paper__WEBPACK_IMPORTED_MODULE_3__["Color"](new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"]([["#fcedc9", 0.4], ["#ddbe61", 1.0]], true), drop.bounds.center, drop.bounds.bottomRight, drop.bounds.topLeft);
        var drop2 = drop.clone();
        drop2.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-width / 2, height / 2);
        var drop3 = drop.clone();
        drop3.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2 - 3, Math.min(height * 0.7, height - 10));
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["createOutlinedGroup"])("thin", STROKE, base, drop, drop2, drop3);
        // Add wick.
        graphic.insertChild(0, new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0], , [5, -5]], [[0, -12], [0, 5]])).withStroke("thick", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke));
        // Add flame.
        if (appearance.flame) {
            graphic.addChild(apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].redFlame().withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -12)).withScale(0.75 * appearance.flameSize));
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: base.bounds.center,
            snapping: base.placeable(),
        };
    };
    Candle.properties = {
        label: "Candle",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            diameter: 30,
            height: 100,
            flame: true,
            flameSize: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 20, max: 40, unit: "mm",
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 20, max: 150, unit: "mm"
            },
            { spec: "checkbox", key: "flame", label: "Show flame" },
            {
                spec: "slider", key: "flameSize", label: "Flame size",
                min: 0.5, max: 1.3, step: 0.1, unit: "%",
                visible: function (a) { return a.flame; }
            }
        ],
    };
    return Candle;
}());



/***/ }),

/***/ "Q4rv":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/accessories/tlc_chamber.ts ***!
  \**********************************************************/
/*! exports provided: TLCChamber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TLCChamber", function() { return TLCChamber; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var TLCChamber = /** @class */ (function () {
    function TLCChamber() {
    }
    TLCChamber.prototype.render = function (appearance) {
        var size = appearance.size;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-size * 0.4, 0]], [[-size * 0.4, size]], [[size * 0.4, size]], [[size * 0.4, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(path);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCornersIndividual"])(path, { 1: 5, 2: 5 });
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(path);
        var liquidMask = path.clone();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([path]);
        if (appearance.lid == "flat") {
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-size * 0.5, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(size * 0.5, 0)).withStroke("thick"));
        }
        else if (appearance.lid == "handle") {
            var lid = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-path.strokeBounds.topLeft.x - 1, 10]], [[-path.strokeBounds.topLeft.x - 1, 0]])).withStroke("default");
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(lid);
            var handle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 18, 9, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER)).withStroke("default");
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCornersIndividual"])(handle, { 1: 2, 2: 2 });
            graphic.addChildren([handle, lid]);
        }
        if (appearance.view == "zoom") {
            var pivot = path.bounds.center;
            graphic.scale(4.0, pivot);
            liquidMask.scale(4.0, pivot);
        }
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            pivot: path.bounds.center,
            hitShape: graphic.bounds.toShape(),
            snapping: path.placeable(),
        };
    };
    TLCChamber.properties = {
        label: "Chromatography Chamber",
        canContainLiquids: true,
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.1 }),
        defaultAppearance: {
            view: "zoom",
            size: 100,
            lid: "flat"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "view", label: "View size",
                options: [
                    { value: "real", label: "Real size" },
                    { value: "zoom", label: "Zoomed" },
                ],
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 80, max: 150, unit: "mm",
            },
            {
                spec: "radio", key: "lid", label: "Lid",
                options: [
                    { value: "none", label: "None" },
                    { value: "flat", label: "Flat" },
                    { value: "handle", label: "With handle" },
                ],
            }
        ],
    };
    return TLCChamber;
}());



/***/ }),

/***/ "Q6X1":
/*!****************************************!*\
  !*** ./src/apparatus/library/petri.ts ***!
  \****************************************/
/*! exports provided: PetriDish */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PetriDish", function() { return PetriDish; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var PetriDish = /** @class */ (function () {
    function PetriDish() {
    }
    PetriDish.prototype.render = function (appearance) {
        var diameter = appearance.size;
        var height = 10 + appearance.size / 20;
        var path = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]();
        path.addSegments(Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(path, diameter / 2);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([path]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        graphic.strokeCap = "butt";
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](0, 0, diameter, height));
        var liquidMask = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](0, 0, diameter, height));
        return { graphic: graphic, hitShape: hitShape, liquidMask: liquidMask, snapping: { type: "placeable", at: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(diameter / 2, height) } };
    };
    PetriDish.properties = {
        label: "Petri dish",
        canContainLiquids: true,
        defaultAppearance: {
            // Standard petri dish is 100mm.
            size: 100
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "size",
                label: "Diameter",
                min: 50,
                max: 150,
            },
        ],
    };
    return PetriDish;
}());



/***/ }),

/***/ "QT3L":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/container/gas_cylinder.ts ***!
  \*********************************************************/
/*! exports provided: GasCylinder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GasCylinder", function() { return GasCylinder; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var WHITE = "#e0e0e0";
var GRAY = "#999999";
var GRAY_BLUE = "#bbbbb9";
var BLACK = "#444444";
var DARK_BLUE = "#325b99";
var LIGHT_BLUE = "#477bc9";
var LIGHT_GREEN = "#289937";
var DARK_GREEN = "#206b2a";
var MAROON = "#752334";
var YELLOW = "#ebde4d";
var RED = "#d43737";
var BROWN = "#8c5f4a";
/**
 * Gas Cylinder.
 *
 * Color coding according to "EN 1089 Part 3"
 */
var GasCylinder = /** @class */ (function () {
    function GasCylinder() {
    }
    GasCylinder.prototype.render = function (appearance) {
        var height = appearance.height;
        // A gas cylinder consists of
        // 1) the container, coloured in two parts: shoulder and body.
        // 2) the outlet
        var shoulder = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 20]], [[0, 0], , [0, -90]], [[140, 0], [0, -90]], [[140, 20]]));
        var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 20]], [[0, height]], [[140, height]], [[140, 20]]));
        var outlet = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(70, -120, 35, 80, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER), 17.5);
        setMetallicGradient(outlet, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].lightMetal);
        // Add highlights to create a more realistic look.
        var highlight = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[70, -68]], [[45, 20], [0, -100]], [[45, height]], [[20, height]], [[20, 20], , [0, -100]]));
        highlight.closePath();
        highlight.fillColor = "#ffffff50";
        var topHighlight = shoulder.clone();
        topHighlight.setGradientFill("down", [["#ffffff80", 0.0], ["#ffffff00", 0.5]]);
        // Set up the colors of the container based on type of gas.
        var color = shoulderColor(appearance.gas);
        setMetallicGradient(shoulder, color);
        if (appearance.bodyColor == "medical") {
            setMetallicGradient(body, WHITE);
        }
        else if (appearance.bodyColor == "industrial") {
            setMetallicGradient(body, GRAY_BLUE);
        }
        else {
            // Copy shoulder colour.
            setMetallicGradient(body, color);
        }
        // Put everything together.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([outlet, body, shoulder, highlight, topHighlight]);
        // The container can be large. Allow it to be scaleable.
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                graphic.placeable(),
                { type: "connectable", at: outlet.bounds.topCenter.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 8)), facing: 0 },
            ]
        };
    };
    GasCylinder.properties = {
        label: "Gas cylinder",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 0.5,
            height: 600,
            gas: "argon",
            bodyColor: "industrial",
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 1.0, step: 0.01,
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 400, max: 600
            },
            {
                spec: "radio", key: "bodyColor", label: "Body colour",
                options: [
                    { value: "industrial", label: "Industrial Gas" },
                    { value: "medical", label: "Medical Gas" },
                    { value: "copy-shoulder", label: "Same as shoulder" },
                ],
            },
            {
                spec: "select", key: "gas", label: "Gas type (colour)",
                options: [
                    { value: "toxic", label: "Toxic / Corrosive", tier: "boost" },
                    { value: "flammable", label: "Flammable", tier: "boost" },
                    { value: "oxidising", label: "Oxidising", tier: "boost" },
                    { value: "inert", label: "Inert", tier: "boost" },
                    { value: "acetylene", label: "Acetylene" },
                    { value: "argon", label: "Argon" },
                    { value: "co2", label: "Carbon dioxide" },
                    { value: "helium", label: "Helium" },
                    { value: "nitrogen", label: "Nitrogen" },
                    { value: "nitrous oxide", label: "Nitrous Oxide" },
                    { value: "oxygen", label: "Oxygen" },
                ],
            },
        ],
    };
    return GasCylinder;
}());

function setMetallicGradient(item, color) {
    var darkerColor = color.color().darken(0.18).hex();
    item.setGradientFill("right", [
        [darkerColor, 0.0],
        [color, 0.3],
        [color, 0.7],
        [darkerColor, 1.0]
    ]);
}
var shoulderColor = function (gas) {
    switch (gas) {
        case "toxic": return YELLOW;
        case "flammable": return RED;
        case "oxidising": return LIGHT_BLUE;
        case "inert": return LIGHT_GREEN;
        case "argon": return DARK_GREEN;
        case "helium": return BROWN;
        case "co2": return GRAY;
        case "nitrogen": return BLACK;
        case "oxygen": return WHITE;
        case "acetylene": return MAROON;
        case "nitrous oxide": return DARK_BLUE;
    }
};


/***/ }),

/***/ "QoY0":
/*!**********************************************!*\
  !*** ./src/apparatus/library/thermometer.ts ***!
  \**********************************************/
/*! exports provided: Thermometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Thermometer", function() { return Thermometer; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var Thermometer = /** @class */ (function () {
    function Thermometer() {
    }
    Thermometer.isBoostRequiredForAppearance = function (a) {
        return a.size == "medium" || a.size == "tiny";
    };
    Thermometer.prototype.measurements = function (size) {
        switch (size) {
            case "tiny":
                return { stemWidth: 6, bulbRadius: 6, mercuryBulbGap: 2.0, mercuryStemGap: 0.0, markerSize: 4, };
            case "small":
                return { stemWidth: 8, bulbRadius: 6, mercuryBulbGap: 2.0, mercuryStemGap: 0.0, markerSize: 6 };
            case "medium":
                return { stemWidth: 11, bulbRadius: 9, mercuryBulbGap: 3.5, mercuryStemGap: 1.0 };
            case "large":
                return { stemWidth: 15, bulbRadius: 12, mercuryBulbGap: 5.0, mercuryStemGap: 2.0 };
        }
    };
    Thermometer.prototype.render = function (appearance) {
        var stemHeight = appearance.length;
        var _a = this.measurements(appearance.size), stemWidth = _a.stemWidth, bulbRadius = _a.bulbRadius, mercuryBulbGap = _a.mercuryBulbGap, mercuryStemGap = _a.mercuryStemGap, markerSize = _a.markerSize;
        var glassColor = "#ffffffb0";
        var mercuryColor = "#f43d50";
        var mercuryAmountRatio = appearance.mercuryAmountRatio;
        // Draw glassware.
        var stem = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](-stemWidth / 2, 0, stemWidth, stemHeight), stemWidth / 2);
        var bulb = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, stemHeight), bulbRadius);
        var body = new paper__WEBPACK_IMPORTED_MODULE_0__["CompoundPath"](stem).unite(bulb);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(body);
        body.fillColor = glassColor;
        // Draw mercury.
        var mercuryBulb = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, stemHeight), bulbRadius - mercuryBulbGap);
        mercuryBulb.fillColor = mercuryColor;
        var mercuryStem = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Line(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, Object(_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(stemHeight, stemWidth / 2, mercuryAmountRatio)), Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, stemHeight));
        mercuryStem.strokeColor = mercuryColor;
        mercuryStem.strokeWidth = stemWidth / 2.0 - mercuryStemGap;
        mercuryStem.strokeCap = "round";
        // Assemble.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([body]);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addMarkers"])(graphic, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(stemWidth / 2, stemHeight), stemWidth / 2, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, _common__WEBPACK_IMPORTED_MODULE_2__["markerSpacing"]), markerSize);
        graphic.addChildren([mercuryStem, mercuryBulb]);
        // Set up hit shape.
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](-bulbRadius, 0, bulbRadius * 2, stemHeight + bulbRadius));
        return {
            graphic: graphic,
            hitShape: hitShape,
        };
    };
    Thermometer.properties = {
        label: "Thermometer",
        canContainLiquids: false,
        defaultAppearance: {
            length: 180,
            size: "large",
            mercuryAmountRatio: 0.3,
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "length",
                label: "Length",
                min: 100,
                max: 320,
            },
            {
                spec: "slider",
                key: "mercuryAmountRatio",
                label: "Temperature",
                min: 0.0,
                max: 1.0,
                step: 0.05,
            },
            {
                spec: "radio",
                key: "size",
                label: "Overall size",
                options: [
                    { value: "large", label: "Large" },
                    { value: "medium", label: "Medium", tier: "boost" },
                    { value: "small", label: "Small" },
                    { value: "tiny", label: "Tiny", tier: "boost" }
                ],
                allowSelectingTierLockedOptions: true,
            },
        ]
    };
    return Thermometer;
}());



/***/ }),

/***/ "R1xP":
/*!**************************************!*\
  !*** ./src/editing/pathedit/tool.ts ***!
  \**************************************/
/*! exports provided: PathEditTool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PathEditTool", function() { return PathEditTool; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_move__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/move */ "c+g7");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! store/store */ "uFCc");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







var PathEditTool = /** @class */ (function (_super) {
    __extends(PathEditTool, _super);
    function PathEditTool(app) {
        var _this = _super.call(this) || this;
        _this.app = app;
        _this.onMouseDown = function (event) {
            var TOLERANCE = 10 / paper.project.view.scaling.x;
            // Get first selected item.
            var selectedFirstItem = store_store__WEBPACK_IMPORTED_MODULE_6__["default"].selectedItems()[0];
            if (!selectedFirstItem || selectedFirstItem.type !== "__live edit__")
                return;
            var component = _this.app.getApparatusComponent(selectedFirstItem.id);
            if (!component)
                return;
            if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.alt && paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.shift && paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.control) {
                var path = getPath(component);
                var delta_1 = event.downPoint.subtract(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(component.props.x, component.props.y));
                path.segments.forEach(function (s) { s.point = s.point.subtract(delta_1); });
                _this.editedLiveEditComponent = component;
                _this.op = { type: "set-center", delta: delta_1 };
            }
            else if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.shift && paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.control) {
                // Align centers.
                var destination_1 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(component.props.x, component.props.y);
                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_2__["Sequence"](store_store__WEBPACK_IMPORTED_MODULE_6__["default"].selectedItems().map(function (i) { return new editing_move__WEBPACK_IMPORTED_MODULE_3__["Move"]([i.id], destination_1.subtract(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(i.x, i.y))); })));
            }
            else if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.alt) {
                var hitResult = component.item.hitTest(event.downPoint, { segments: true, tolerance: TOLERANCE });
                if (hitResult) {
                    _this.editedLiveEditComponent = component;
                    if (hitResult.segment.handleIn.length == 0 && hitResult.segment.handleOut.length == 0) {
                        // Straight point. Switch to having both handles
                        hitResult.segment.handleIn = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(20, 0);
                        hitResult.segment.handleOut = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-20, 0);
                    }
                    else if (hitResult.segment.handleIn.length == 0) {
                        // Only has handleOut. Switch to handleIn.
                        hitResult.segment.handleIn = hitResult.segment.handleOut.multiply(-1);
                        hitResult.segment.handleOut = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
                    }
                    else if (hitResult.segment.handleOut.length == 0) {
                        // Only has handleIn set. Switch to none.
                        hitResult.segment.handleOut = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
                        hitResult.segment.handleIn = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
                    }
                    else {
                        // Has both handles, switch to handleOut only.
                        hitResult.segment.handleIn = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
                    }
                }
            }
            else if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.shift) {
                // Add a point to path.
                var hitResult = component.item.hitTest(event.downPoint, { stroke: true, tolerance: TOLERANCE });
                Object(log__WEBPACK_IMPORTED_MODULE_4__["clog"])(hitResult);
                if (hitResult && hitResult.location) {
                    var path = getPath(component);
                    path.insert(hitResult.location.index + 1, event.point.subtract(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(component.props.x, component.props.y)));
                    _this.editedLiveEditComponent = component;
                }
            }
            else if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.control) {
                // Remove a point.
                var hitResult = component.item.hitTest(event.downPoint, { segments: true, tolerance: TOLERANCE });
                if (hitResult) {
                    var path = getPath(component);
                    path.removeSegment(hitResult.segment.index);
                    _this.editedLiveEditComponent = component;
                }
            }
            else {
                var hitResult = component.item.hitTest(event.downPoint, {
                    segments: true,
                    handles: true,
                    tolerance: TOLERANCE,
                });
                if (hitResult) {
                    if (hitResult.type === "segment") {
                        _this.op = {
                            type: "move-segment",
                            segment: hitResult.segment
                        };
                        _this.editedLiveEditComponent = component;
                    }
                    else if (hitResult.type === "handle-in") {
                        _this.op = {
                            type: "move-handle-in",
                            segment: hitResult.segment
                        };
                        _this.editedLiveEditComponent = component;
                    }
                    else if (hitResult.type === "handle-out") {
                        _this.op = {
                            type: "move-handle-out",
                            segment: hitResult.segment
                        };
                        _this.editedLiveEditComponent = component;
                    }
                }
            }
        };
        _this.onMouseDrag = function (event) {
            if (!_this.editedLiveEditComponent)
                return;
            if (!_this.op)
                return;
            switch (_this.op.type) {
                case "move-segment":
                    _this.op.segment.point = _this.op.segment.point.add(event.delta);
                    break;
                case "move-handle-in":
                    _this.op.segment.handleIn = _this.op.segment.handleIn.add(event.delta);
                    if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.shift) {
                        _this.op.segment.handleOut.angle = _this.op.segment.handleIn.angle + 180;
                    }
                    break;
                case "move-handle-out":
                    _this.op.segment.handleOut = _this.op.segment.handleOut.add(event.delta);
                    if (paper__WEBPACK_IMPORTED_MODULE_5__["Key"].modifiers.shift) {
                        _this.op.segment.handleIn.angle = _this.op.segment.handleOut.angle + 180;
                    }
                    break;
            }
        };
        _this.onMouseUp = function (event) {
            var _a;
            if (!_this.editedLiveEditComponent)
                return;
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].startRecording();
            // Extract Path object.
            var path = getPath(_this.editedLiveEditComponent);
            var mirrored = _this.editedLiveEditComponent.props.appearance["mirrored"];
            var pathData = convertToData(path, mirrored ? path.segments.length / 2 : path.segments.length);
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["UpdateAppearance"](_this.editedLiveEditComponent.id, "segments", pathData, _this.editedLiveEditComponent.props.appearance["segments"]));
            if (((_a = _this.op) === null || _a === void 0 ? void 0 : _a.type) == "set-center") {
                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new editing_move__WEBPACK_IMPORTED_MODULE_3__["Move"]([_this.editedLiveEditComponent.id], _this.op.delta));
            }
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].finishRecording();
            _this.editedLiveEditComponent = undefined;
            _this.op = undefined;
        };
        return _this;
    }
    return PathEditTool;
}(paper__WEBPACK_IMPORTED_MODULE_5__["Tool"]));

function getPath(liveEditComponent) {
    return liveEditComponent.item.children[0].children[0];
}
function convertToData(path, limit) {
    var converted = [];
    var count = 0;
    for (var _i = 0, _a = path.segments; _i < _a.length; _i++) {
        var segment = _a[_i];
        if (count >= limit)
            break;
        var point = [segment.point.x, segment.point.y];
        var handleOut = segment.handleOut.x == 0 && segment.handleOut.y == 0 ? undefined : [segment.handleOut.x, segment.handleOut.y];
        var handleIn = segment.handleIn.x == 0 && segment.handleIn.y == 0 ? undefined : [segment.handleIn.x, segment.handleIn.y];
        if (handleOut) {
            converted.push("[" + toString(point) + "," + (handleIn ? toString(handleIn) : '') + "," + toString(handleOut) + "]");
        }
        else if (handleIn) {
            converted.push("[" + toString(point) + "," + toString(handleIn) + "]");
        }
        else {
            converted.push("[" + toString(point) + "]");
        }
        count++;
    }
    return converted.join(",\n");
}
/** Rounds and converts a PointAsArray into string. */
function toString(point) {
    return "[" + point[0].round() + ", " + point[1].round() + "]";
}


/***/ }),

/***/ "R2/k":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/heating/testTubeHolder.ts ***!
  \*********************************************************/
/*! exports provided: TestTubeHolder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TestTubeHolder", function() { return TestTubeHolder; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var TestTubeHolder = /** @class */ (function () {
    function TestTubeHolder() {
    }
    TestTubeHolder.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].testTubeHolder();
        graphic.scale(appearance.scale, 1.0);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    TestTubeHolder.properties = {
        label: "Test Tube Holder (Metal)",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            scale: 1
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.8, max: 1.25, step: 0.01, unit: "%"
            }
        ],
    };
    return TestTubeHolder;
}());



/***/ }),

/***/ "RGHk":
/*!**********************************************!*\
  !*** ./src/apparatus/library/stirringRod.ts ***!
  \**********************************************/
/*! exports provided: StirringRod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StirringRod", function() { return StirringRod; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var StirringRod = /** @class */ (function () {
    function StirringRod() {
    }
    StirringRod.prototype.render = function (appearance) {
        var width = 8;
        var height = appearance.height;
        var bulbWidth = 15;
        var bulbHeight = 25;
        var rod = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-width / 2.0, 0, width, height), width / 2);
        var finalRod;
        if (appearance.style == "bulb") {
            var bulb = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-bulbWidth / 2, height - bulbHeight, bulbWidth, bulbHeight), bulbWidth / 2);
            finalRod = bulb.unite(rod);
        }
        else {
            finalRod = rod;
        }
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(finalRod);
        finalRod.fillColor = "#ffffffaa";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]();
        graphic.addChild(finalRod);
        if (appearance.showArrow) {
            graphic.insertChild(0, new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-20, -2]], [[-15, 0], undefined, [-50, 20]], [[15, 0], [50, 20]], [[20, -2]])).withStroke(3.0, "#777777").withPosition({ y: 20 }));
        }
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-bulbWidth / 2.0, 0, bulbWidth, height));
        return { graphic: graphic, hitShape: hitShape };
    };
    StirringRod.properties = {
        label: "Stirring rod",
        canContainLiquids: false,
        defaultAppearance: {
            style: "bulb",
            height: 220,
            showArrow: false,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "style", label: "Style",
                options: [
                    { value: "bulb", label: "Normal" },
                    { value: "simple", label: "Simple" },
                ],
            },
            {
                spec: "slider", key: "height", label: "Length",
                min: 100, max: 300
            },
            {
                spec: "checkbox", key: "showArrow", label: "Stirring arrow", subLabel: "Show",
            }
        ],
    };
    return StirringRod;
}());



/***/ }),

/***/ "RHVt":
/*!*******************************************!*\
  !*** ./src/apparatus/library/testTube.ts ***!
  \*******************************************/
/*! exports provided: TestTube, TestTubeWithSideArm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TestTube", function() { return TestTube; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TestTubeWithSideArm", function() { return TestTubeWithSideArm; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var TestTube = /** @class */ (function () {
    function TestTube() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 8, maxX: 30,
                minY: 75, maxY: 200,
                fromAppearance: function (a) { return Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.width, a.height); },
                toAppearance: function (p) { return ({ width: p.x, height: p.y }); },
                scale: 2.0,
            }
        ];
    }
    TestTube.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"]();
        graphic.addSegments(Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height - width / 2], undefined, [0, width / 1.55]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(graphic, width / 2);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(graphic, 2.0);
        var liquidMask = graphic.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](0, 0, width, height));
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width / 2, 0), diameter: width, facing: 0 }
        };
    };
    TestTube.properties = {
        label: "Test tube",
        canContainLiquids: true,
        defaultAppearance: {
            // Size of a regular test tube = 16, according to
            // https://www.homesciencetools.com/product/glass-test-tubes/
            // However we use 24 so it's more visible.
            width: 24,
            height: 150,
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "width",
                label: "Width",
                min: 8,
                max: 30,
            },
            {
                spec: "slider",
                key: "height",
                label: "Height",
                min: 75,
                max: 200,
            },
        ]
    };
    return TestTube;
}());

var TestTubeWithSideArm = /** @class */ (function () {
    function TestTubeWithSideArm() {
    }
    TestTubeWithSideArm.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        var offset = 30;
        var holeRadius = appearance.holeDiameter / 2;
        var sideArmLength = 15;
        var tube = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"]();
        tube.addSegments(Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height - width / 2], undefined, [0, width / 1.55]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(tube, width / 2);
        tube.insertSegments(3, Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[width, offset + holeRadius]], [[width + sideArmLength, offset + holeRadius]], [[width + sideArmLength, offset - holeRadius]], [[width, offset - holeRadius]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(tube, 2.0);
        var liquidMask = tube.clone();
        var graphics = Object(_draw__WEBPACK_IMPORTED_MODULE_1__["breakPath"])(tube, 6);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(graphics);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_0__["Rectangle"](0, 0, width + sideArmLength, height));
        return {
            graphic: graphics,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "connectable", at: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width + sideArmLength, offset), facing: 90, },
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width / 2, 0), diameter: width, facing: 0 }
            ]
        };
    };
    TestTubeWithSideArm.properties = {
        label: "Test tube with side arm",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: __assign(__assign({}, TestTube.properties.defaultAppearance), { holeDiameter: 10 }),
        appearanceSpecs: __spreadArrays(TestTube.properties.appearanceSpecs, [
            {
                spec: "slider", key: "holeDiameter", label: "Hole diameter",
                min: 8, max: 20,
            }
        ]),
    };
    return TestTubeWithSideArm;
}());



/***/ }),

/***/ "RJVQ":
/*!******************************************************!*\
  !*** ./src/apparatus/library/heating/spirit_lamp.ts ***!
  \******************************************************/
/*! exports provided: SpiritLamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpiritLamp", function() { return SpiritLamp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common */ "UCWy");





var SpiritLamp = /** @class */ (function () {
    function SpiritLamp() {
    }
    SpiritLamp.prototype.render = function (appearance) {
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[10, 0]], [[10, 10], undefined, [30, 20]], [[20, 70], [35, -15]], [[25, 78], [5, -5]]));
        var wick = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[0, -12]], [[0, 20], undefined, [0, 30]], [[-13, 66], [70, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottle);
        var liquidMask = bottle.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(bottle);
        wick.strokeWidth = 5.0;
        wick.strokeColor = "#cccc3f"; // Yellowish.
        var cap = Object(_common__WEBPACK_IMPORTED_MODULE_3__["CenterR"])(0, 3, 24, 10).toShape();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(cap);
        cap.fillColor = "#eeeeee"; // Light grey.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bottle, wick, cap]);
        if (appearance.flame == "red") {
            var flame = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].redFlame();
            flame.scale(appearance.flameScale);
            graphic.addChild(flame);
            flame.position.x = 0;
            flame.position.y = -10;
        }
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            pivot: bottle.bounds.center,
            snapping: graphic.placeable(),
        };
    };
    SpiritLamp.properties = {
        label: "Spirit Lamp",
        canContainLiquids: true,
        defaultAppearance: {
            flame: "red",
            flameScale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "flame", label: "Flame",
                options: [
                    { value: "off", label: "Off" },
                    { value: "red", label: "Red flame" },
                ],
            },
            {
                spec: "slider", key: "flameScale", label: "Flame size",
                min: 0.5, max: 1.5, step: 0.05, tier: "boost",
            }
        ],
    };
    return SpiritLamp;
}());



/***/ }),

/***/ "RUr7":
/*!*********************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/microscope_slide.ts ***!
  \*********************************************************************/
/*! exports provided: MicroscopeSlide */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicroscopeSlide", function() { return MicroscopeSlide; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var MicroscopeSlide = /** @class */ (function () {
    function MicroscopeSlide() {
    }
    MicroscopeSlide.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height;
        if (appearance.side) {
            var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width, 0));
            graphic.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#999999aa");
            return {
                graphic: graphic,
                hitShape: graphic.bounds.expand(20).toShape(),
                snapping: [
                    graphic.placeable(),
                ]
            };
        }
        else {
            var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, height));
            graphic.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), "#999999aa").withFill("#dddddd40");
            return {
                graphic: graphic,
                hitShape: graphic.bounds.toShape()
            };
        }
    };
    MicroscopeSlide.properties = {
        label: "Microscope slide",
        canContainLiquids: false,
        defaultAppearance: {
            width: 75,
            height: 25,
            side: false
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 50, max: 150, unit: "mm"
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 20, max: 50, unit: "mm"
            },
            {
                spec: "checkbox", key: "side", label: "View from side"
            }
        ],
    };
    return MicroscopeSlide;
}());



/***/ }),

/***/ "Rbn7":
/*!******************************************!*\
  !*** ./src/apparatus/library/balance.ts ***!
  \******************************************/
/*! exports provided: Balance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Balance", function() { return Balance; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");




var Balance = /** @class */ (function () {
    function Balance() {
    }
    Balance.prototype.render = function (appearance) {
        switch (appearance.design) {
            case "cream": return design1(appearance.display);
            case "modern": return designModern(appearance.display, appearance.windshield);
        }
    };
    Balance.properties = {
        label: "Balance",
        canContainLiquids: false,
        defaultAppearance: {
            design: "modern",
            display: "0.00 g",
            windshield: "none"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "design", label: "Design",
                options: [
                    { value: "cream", label: "Generic Cream" },
                    { value: "modern", label: "Modern White" },
                ],
            },
            {
                spec: "text", key: "display", label: "Display"
            },
            {
                visible: function (a) { return a.design == "modern"; },
                spec: "radio", key: "windshield", label: "Windshield",
                options: [
                    { value: "none", label: "No windshield" },
                    { value: "enabled", label: "With windshield" },
                ],
            }
        ],
    };
    return Balance;
}());

/** Older design, creamy looking */
function designModern(display, windshield) {
    var width = 200;
    var bodyColor = "#dbd7d9";
    var plate = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(25, 0, width - 50, 10)); // The weighing plate.
    var leg = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(10, 45, 30, 5));
    var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[80, 10], , [0, 3]], [[100, 19], [0, -5]], [[100, 45]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(body);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(body.segments[3]);
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(body.segments[2]);
    body.closePath();
    body.position.x += 100;
    plate.setGradientFill("right", _common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].metal);
    plate.withStroke("thinner", "#888888");
    body.setGradientFill("down", Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["simpleGradient"])(bodyColor));
    body.withStroke("thinner", bodyColor.color().darken(0.1).hex());
    leg.fillColor = _common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].mediumMetal;
    var leg2 = leg.clone();
    leg2.position.x += width - 50;
    // Add buttons with labels.
    var button1 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(15, 25, 16, 10, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_LEFT), 2.0);
    button1.fillColor = "#f5ba49";
    button1.strokeColor = "#6e6b3d";
    button1.strokeWidth = 0.0;
    var button1Text = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(22, 38));
    button1Text.content = "O/I";
    button1Text.fontSize = "7";
    button1Text.justification = "center";
    button1Text.fontWeight = "bold";
    button1Text.fillColor = "#888888";
    var button2 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(35, 25, 16, 10, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_LEFT), 2.0);
    button2.fillColor = "#f5ba49";
    button2.strokeColor = "#6e6b3d";
    button2.strokeWidth = 0.0;
    var button2Text = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(42, 38));
    button2Text.content = "TARE";
    button2Text.fontSize = "7";
    button2Text.fontWeight = "bold";
    button2Text.justification = "center";
    button2Text.fillColor = "#888888";
    // Screen display.
    var displayScreen = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(180, 18, 120, 20, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_RIGHT), 3.0);
    displayScreen.fillColor = "#87cee7";
    displayScreen.strokeColor = "#53a2be";
    displayScreen.strokeWidth = 1.0;
    var displayText = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(175, 33));
    displayText.content = display;
    displayText.style = {
        fontFamily: "monospace",
        fontSize: "16",
        justification: "right"
    };
    displayText.fillColor = "#2d758f";
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([leg, leg2, plate, body, displayScreen, displayText, button1, button2, button1Text, button2Text]);
    // Windshield.
    if (windshield == "enabled") {
        var windshieldHeight = 170;
        var leftWall = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(10, 30, 10, windshieldHeight, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_LEFT), 2.0);
        var rightWall = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(width - 10, 30, 10, windshieldHeight, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_RIGHT), 2.0);
        var topWall = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(width / 2, -windshieldHeight + 30, width - 20, 10, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0);
        var wallGradient = [["#dddddd", 0.0], ["#cccccc", 1.0]];
        leftWall.setGradientFill("right", wallGradient);
        rightWall.setGradientFill("right", wallGradient);
        topWall.setGradientFill("down", wallGradient);
        var glass = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(width / 2, 30, width - 25, windshieldHeight - 5, _common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER));
        glass.setGradientFill("right-down", _common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].glass);
        graphic.insertChildren(0, [glass, leftWall, rightWall, topWall]);
    }
    return {
        graphic: graphic,
        hitShape: graphic.bounds.toShape(),
        snapping: [
            graphic.placeable(),
            plate.topEdgeAsPlaceableSurface(),
        ],
        pivot: body.bounds.center,
    };
}
function design1(display) {
    var width = 200;
    var bodyColor = "#c4b18c";
    var plate = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, width, 10));
    var body = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 10, width, 30));
    var leg = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 40, 30, 5));
    plate.setGradientFill("down", _common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].metal);
    plate.withStroke("thinner", "#888888");
    body.setGradientFill("down", Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["simpleGradient"])(bodyColor));
    body.withStroke("thinner", bodyColor);
    leg.fillColor = _common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].darkMetal;
    var leg2 = leg.clone();
    leg2.position.x += width - 30;
    var displayText = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width - 10, 30));
    displayText.content = display;
    displayText.style = {
        fontFamily: "monospace",
        fontSize: "16",
        justification: "right"
    };
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([body, plate, leg, leg2, displayText]);
    return {
        graphic: graphic,
        hitShape: graphic.bounds.toShape(),
        snapping: [
            graphic.placeable(),
            graphic.topEdgeAsPlaceableSurface(),
        ]
    };
}


/***/ }),

/***/ "Rcq3":
/*!***************************************************!*\
  !*** ./src/apparatus/library/roundBottomFlask.ts ***!
  \***************************************************/
/*! exports provided: RoundBottomFlask, BoilingFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoundBottomFlask", function() { return RoundBottomFlask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoilingFlask", function() { return BoilingFlask; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../draw */ "hHoh");




var FOURTH_NECK_ROTATION = 10;
var RoundBottomFlask = /** @class */ (function () {
    function RoundBottomFlask() {
    }
    RoundBottomFlask.prototype.render = function (appearance) {
        var neckWidth = 12 + appearance.size / 12;
        var neckTaper = 2;
        var neckHeight = 20 + appearance.size / 15;
        var radius = appearance.size / 2;
        var glassFoldSize = neckWidth * 0.48;
        var cornerSmoothing = radius / 8;
        // Round bottom flask is drawn using path union. First draw
        // the bottom part, then the neck and then assemble.
        var bulb = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, radius), radius);
        var neck = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-neckWidth / 2, -neckHeight]], [[-neckWidth / 2 + neckTaper, 20]] // Use a higher number to make sure it attaches to the bottom.
        ));
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(neck);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["addEdgeLips"])(neck);
        // Snap point, which is placed at the top of the neck, slightly inside.
        var connectableSnapPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -neckHeight + 10);
        // Snap point for bung, placed at the height of the neck.
        var neckSnapPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -neckHeight);
        var snapPoints = [
            { type: "placeable", at: bulb.strokeBounds.bottomCenter },
        ];
        var combinedShape;
        var neckPivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, radius * 2);
        if (appearance.necks == "one") {
            combinedShape = neck.unite(bulb);
            snapPoints.push({ type: "connectable", at: connectableSnapPoint, facing: 0 });
            snapPoints.push({ type: "neck", top: neckSnapPoint, diameter: neckWidth, facing: 0 });
            combinedShape.closed = false;
        }
        else if (appearance.necks == "three" || appearance.necks == "four") {
            var neckLeft = neck.clone();
            var neckRight = neck.clone();
            neckLeft.rotate(-20, neckPivot);
            neckRight.rotate(20, neckPivot);
            if (appearance.necks == "four") {
                neck.rotate(-3, neckPivot);
                snapPoints.push({ type: "connectable", at: connectableSnapPoint.rotate(-3, neckPivot), facing: -3 });
                snapPoints.push({ type: "neck", top: neckSnapPoint.rotate(-3, neckPivot), diameter: neckWidth, facing: -3 });
                snapPoints.push({ type: "connectable", at: connectableSnapPoint.rotate(FOURTH_NECK_ROTATION, neckPivot), facing: FOURTH_NECK_ROTATION });
                snapPoints.push({ type: "neck", top: neckSnapPoint.rotate(FOURTH_NECK_ROTATION, neckPivot), diameter: neckWidth, facing: FOURTH_NECK_ROTATION });
            }
            else {
                snapPoints.push({ type: "connectable", at: connectableSnapPoint, facing: 0 });
                snapPoints.push({ type: "neck", top: neckSnapPoint, diameter: neckWidth, facing: 0 });
            }
            combinedShape = neck.unite(bulb).unite(neckLeft).unite(neckRight);
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["smoothCorner"])(combinedShape.segments[12], cornerSmoothing);
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["smoothCorner"])(combinedShape.segments[8], cornerSmoothing);
            snapPoints.push({ type: "connectable", at: connectableSnapPoint.rotate(-20, neckPivot), facing: -20 });
            snapPoints.push({ type: "neck", top: neckSnapPoint.rotate(-20, neckPivot), diameter: neckWidth, facing: -20 });
            snapPoints.push({ type: "connectable", at: connectableSnapPoint.rotate(20, neckPivot), facing: 20 });
            snapPoints.push({ type: "neck", top: neckSnapPoint.rotate(20, neckPivot), diameter: neckWidth, facing: 20 });
        }
        else { // Two-neck cases.
            var secondNeck = neck.clone();
            var angle = 20;
            secondNeck.rotate(angle, neckPivot);
            combinedShape = neck.unite(bulb).unite(secondNeck);
            snapPoints.push({ type: "connectable", at: connectableSnapPoint, facing: 0 });
            snapPoints.push({ type: "neck", top: neckSnapPoint, diameter: neckWidth, facing: 0 });
            snapPoints.push({ type: "connectable", at: connectableSnapPoint.rotate(angle, neckPivot), facing: angle });
            snapPoints.push({ type: "neck", top: neckSnapPoint.rotate(angle, neckPivot), diameter: neckWidth, facing: angle });
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["smoothCorner"])(combinedShape.segments[8], cornerSmoothing);
        }
        // Liquid mask.
        var liquidMask = combinedShape.clone();
        // For 3-neck, decompose the shape into separate paths.
        var graphic;
        if (appearance.necks == "one") {
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(combinedShape);
            graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
                combinedShape,
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(0, 5, { size: glassFoldSize })
            ]);
        }
        else if (appearance.necks == "three") {
            graphic = Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(combinedShape, 6, 17);
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(graphic);
            graphic.addChildren([
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(0, 5, { size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(radius * 0.61, radius * 0.3, { rotation: 35, size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(-radius * 0.61, radius * 0.3, { rotation: -35, size: glassFoldSize })
            ]);
        }
        else if (appearance.necks == "four") {
            // Break at the same points as three but create a fourth neck
            // that is just overlayed on top of everything.
            var fourthNeck = neck.clone();
            // +3 is required because of earlier -3 on the neck.
            fourthNeck.rotate(FOURTH_NECK_ROTATION + 3, neckPivot);
            var fourthNeckGlass = fourthNeck.clone();
            fourthNeckGlass.strokeWidth = 0.0;
            fourthNeckGlass.fillColor = "#ffffffaa";
            graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(combinedShape, 6, 17),
                fourthNeckGlass,
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(radius * -0.1, 6, { size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(radius * 0.61, radius * 0.3, { rotation: 35, size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(-radius * 0.61, radius * 0.3, { rotation: -35, size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(fourthNeckGlass, 3),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(radius * 0.36 - 6, 27, { rotation: 13, size: glassFoldSize }),
            ]);
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(graphic.children[0], graphic.children[5]);
        }
        else {
            // Two-neck case. (R)
            graphic = Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(combinedShape, 6);
            Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(graphic);
            graphic.addChildren([
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(0, 5, { size: glassFoldSize }),
                Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(radius * 0.61, radius * 0.3, { rotation: 35, size: glassFoldSize }),
            ]);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, radius),
            liquidMask: liquidMask,
            snapping: snapPoints
        };
    };
    RoundBottomFlask.properties = {
        label: "Round bottom flask",
        canContainLiquids: true,
        defaultAppearance: {
            size: 115,
            necks: "three"
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 80, max: 200,
            },
            {
                spec: "toggle-buttons",
                size: "text",
                key: "necks",
                label: "Necks",
                options: [
                    { value: "one", label: "1", icon: "" },
                    { value: "two-r", label: "2", icon: "" },
                    { value: "three", label: "3", icon: "" },
                    { value: "four", label: "4", icon: "" },
                ]
            },
        ],
    };
    return RoundBottomFlask;
}());

// Sizes: https://www.ebay.co.uk/itm/222654821188?var=&ul_noapp=true
var BoilingFlask = /** @class */ (function () {
    function BoilingFlask() {
    }
    BoilingFlask.prototype.render = function (appearance) {
        var neckWidth = 10 + appearance.size / 10;
        var neckHeight = 20 + appearance.size / 3;
        var radius = appearance.size / 2;
        var bulb = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, radius), radius);
        var neck = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-neckWidth / 2, -neckHeight]], [[-neckWidth / 2, 30]] // Use a higher number to make sure it attaches to the bottom.
        ));
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(neck);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["addEdgeLips"])(neck);
        var combinedShape = neck.unite(bulb);
        // If the bottom is flat, create one by subtracting a rectangle.
        if (appearance.bottom == "flat" || appearance.bottom == "very flat") {
            var flatness = appearance.bottom == "flat" ? 0.07 : 0.2;
            var flatBottomNegative = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-radius, (2.0 - flatness) * radius, radius * 2, radius));
            combinedShape = combinedShape.subtract(flatBottomNegative);
        }
        var liquidMask = combinedShape.clone();
        var hitShape = combinedShape.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(combinedShape);
        combinedShape.closed = false;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([combinedShape]);
        graphic.addChild(Object(_draw__WEBPACK_IMPORTED_MODULE_2__["glassFold"])(0, 5, { size: neckWidth * 0.7 }));
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "placeable", at: combinedShape.bounds.bottomCenter },
                { type: "neck", top: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -neckHeight), diameter: neckWidth, facing: 0 },
            ]
        };
    };
    BoilingFlask.properties = {
        label: "Boiling Flask",
        canContainLiquids: true,
        defaultAppearance: {
            size: 120,
            bottom: "flat",
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 45, max: 180,
            },
            {
                spec: "radio", key: "bottom", label: "Base",
                options: [
                    { value: "round", label: "Round" },
                    { value: "flat", label: "Rather Flat" },
                    { value: "very flat", label: "Very flat" }
                ],
            }
        ],
    };
    return BoilingFlask;
}());



/***/ }),

/***/ "S/0Z":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/transportation/dialysis.ts ***!
  \**********************************************************/
/*! exports provided: DialysisTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialysisTube", function() { return DialysisTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var DialysisTube = /** @class */ (function () {
    function DialysisTube() {
    }
    DialysisTube.isBoostRequiredForAppearance = function (appearance) {
        return appearance.shape == "bulge";
    };
    DialysisTube.prototype.render = function (appearance) {
        var length = appearance.length, width = appearance.diameter, shapeOption = appearance.shape;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -8], , [3, -5]], [[5, -6], [3, -5], [4, -1]], [[6, 0], [5, -1], [-2, 6]], shapeOption == "uniform" ? [[width / 2, 21], [0, -16]] : [[width / 2, length / 2], [0, -length / 3]]));
        // Create bottom part.
        var bottomSegments = shape.segments.map(function (s) { return new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(s.point.x, -s.point.y + length), s.handleOut.multiply([1, -1]), s.handleIn.multiply([1, -1])); });
        bottomSegments.reverse();
        shape.addSegments(bottomSegments);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        shape.close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([
            shape,
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 14, 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke),
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, length, 14, 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 2).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke),
        ]);
        var liquidMask = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](shape.segments.slice(2, 6).map(function (s) { return s.clone(); }));
        liquidMask.segments[0].point.y += 3;
        liquidMask.segments[3].point.y -= 3;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(liquidMask);
        liquidMask.close();
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: shape.bounds.toShape()
        };
    };
    DialysisTube.properties = {
        label: "Dialysis Tube",
        canContainLiquids: true,
        defaultAppearance: {
            diameter: 26,
            length: 80,
            shape: "uniform"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 15, max: 35, unit: "mm"
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 50, max: 150, unit: "mm"
            },
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "uniform", label: "Uniform" },
                    { value: "bulge", label: "Bulge", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true
            }
        ],
    };
    return DialysisTube;
}());



/***/ }),

/***/ "SOVK":
/*!***********************************!*\
  !*** ./src/tiers/promo_table.tsx ***!
  \***********************************/
/*! exports provided: ComparisonTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComparisonTable", function() { return ComparisonTable; });
/* harmony import */ var apparatus_specList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/specList */ "OsNy");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tiers/promo_ui */ "/DYk");
/* harmony import */ var _promo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./promo */ "ka5u");






var extraCustomisationsText = "More crystal shapes, specialised glassware, more colour options, sizes, views...";
var ComparisonTable = function (props) {
    var maxBoostDiagramLayersAsIcons = [];
    for (var i = 0; i < _promo__WEBPACK_IMPORTED_MODULE_5__["MAX_BOOST_DIAGRAM_LAYERS"]; i++) {
        maxBoostDiagramLayersAsIcons.push(react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InlineIcon, { icon: "fa-tint", key: i }));
    }
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("table", { className: "table-responsive-md" },
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tbody", null,
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("th", { style: { minWidth: 260 }, colSpan: 2 },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("h6", { className: "text-left m-0" }, "Compare features")),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("th", { style: { minWidth: 110 } },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-vial mr-2" }),
                        "Start")),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("th", { style: { minWidth: 110 } },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-bolt mr-2" }),
                        "Boost")),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("th", { style: { minWidth: 110 } },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-university mr-2" }),
                        "Schools"))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-flask" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Available apparatus"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, apparatus_specList__WEBPACK_IMPORTED_MODULE_0__["releasedAndFreeItemsCount"]),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    apparatus_specList__WEBPACK_IMPORTED_MODULE_0__["releasedItemsCount"],
                    " "),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    apparatus_specList__WEBPACK_IMPORTED_MODULE_0__["releasedItemsCount"],
                    " ")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-th" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Downloaded image quality",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["BeaconLink"], { hint: "Click to learn more about Standard vs High Quality", article: support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].IMAGE_QUALITY })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "0.5 MP ",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-square" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "4.0 MP ",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-th" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "4.0 MP ",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-th" }))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-image" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Maximum image size",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["BeaconLink"], { hint: "Click to learn more about Standard vs High Quality", article: support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].IMAGE_QUALITY })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "800x600"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "2400x1600"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "2400x1600")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-download" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Image export and downloads"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InfinityIcon, null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InfinityIcon, null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InfinityIcon, null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-cloud" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Diagrams stored in the Cloud"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "3"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, _promo__WEBPACK_IMPORTED_MODULE_5__["BOOST_TOTAL_DIAGRAMS"]),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, props.maxDiagrams)),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-graduation-cap" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Permission for educational use",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["BeaconLink"], { hint: "You can use Chemix diagrams in your teaching materials and student handouts distributed in a limited setting, such as a class.<br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].LICENSE })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-file-certificate" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Permission for publishing and commercial use",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["BeaconLink"], { hint: "Allows mass and commerical distribution of material containing diagrams made with Chemix.<br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].LICENSE })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", { className: "start-section" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-sliders-h" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Extra item customisations",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "text-muted" }, extraCustomisationsText)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "0"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, _promo__WEBPACK_IMPORTED_MODULE_5__["ITEM_CUSTOMISATIONS"]),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, _promo__WEBPACK_IMPORTED_MODULE_5__["ITEM_CUSTOMISATIONS"])),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-paint-roller" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Text colour and additional styling"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-subscript" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    "Easily write formulas, units and symbols using\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("b", null, "ChemText"),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["BeaconLink"], { hint: "When writing text, automatically convert H2SO4 to H\u2082SO\u2084. <br/>Click to learn more", article: support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].CHEMTEXT }),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "text-muted" }, "Convert H2SO4 to H\u2082SO\u2084, cm3 to cm\u00B3...")),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-fill-drip" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Liquid layers in a container"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InlineIcon, { icon: "fa-tint", key: "1" }),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InlineIcon, { icon: "fa-tint", key: "2" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, maxBoostDiagramLayersAsIcons),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, maxBoostDiagramLayersAsIcons)),
            flags__WEBPACK_IMPORTED_MODULE_1__["default"].isNewTemplatesEnabled
                ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-sparkles" })),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "More diagram templates to choose from"),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)))
                : undefined,
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-file-download" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Download as JPG"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-file-download" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Download as PNG"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-file-download" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Download as SVG"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-file-image" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Transparent PNG"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-ban" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "No social widgets"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null))),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", { className: "start-section" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-users" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Number of user accounts"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "1"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "1"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, props.students)),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Icon, { icon: "fa-at" })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null, "Sign in with school email"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("td", null,
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_promo_ui__WEBPACK_IMPORTED_MODULE_4__["Tick"], null)))));
};
var Icon = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa-fw fad " + props.icon });
};
var InlineIcon = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-sm mr-1 " + props.icon });
};
var InfinityIcon = function () { return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fas fa-infinity" }); };


/***/ }),

/***/ "ScPQ":
/*!*********************************!*\
  !*** ./src/apparatus/driver.ts ***!
  \*********************************/
/*! exports provided: INFINITE_BOUNDS, createRectangleDriver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INFINITE_BOUNDS", function() { return INFINITE_BOUNDS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRectangleDriver", function() { return createRectangleDriver; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_handle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/handle */ "9nbt");
/* harmony import */ var editing_interaction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/interaction */ "hXn/");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_6__);
// Driver is a feature that allows on-screen elements to drive
// changes to appearance. A simple example is a draggable circle
// that can be dragged to change the width and height of a rectangle.
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







var INFINITE_BOUNDS = { minX: -10000, maxX: 10000, minY: -10000, maxY: 10000 };
function restrainRectangleDriver(position, driver) {
    var x = Math.round(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["clamp"])(position.x, driver.minX, driver.maxX));
    var y = Math.round(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["clamp"])(position.y, driver.minY, driver.maxY));
    return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(x, y);
}
/** Computes the delta in the component's coordinate system, from a screen-space delta. */
function adjustDriverDelta(rawDelta, driver, component) {
    var rotation = -component.currentRotation;
    var flipped = component.props.flipped;
    return rawDelta.rotate(rotation).multiply([flipped ? -1.0 : 1.0, 1.0]).multiply(driver.scale);
}
/** Applies the constraint, if present. */
function maybeApplyConstraint(position, driver, component) {
    if (!driver.constraints)
        return position;
    var maybeNewAppearance = driver.constraints(__assign(__assign({}, component.props.appearance), driver.toAppearance(position, component.props.appearance)), paper__WEBPACK_IMPORTED_MODULE_6__["Key"].modifiers);
    if (!maybeNewAppearance)
        return position;
    return driver.fromAppearance(maybeNewAppearance);
}
function createRectangleDriver(driver, component) {
    var currentPosition = driver.fromAppearance(component.props.appearance);
    var handle;
    handle = Object(editing_handle__WEBPACK_IMPORTED_MODULE_4__["createInteractionHandleFor"])(Object(editing_interaction__WEBPACK_IMPORTED_MODULE_5__["Adjustable"])({
        setDelta: function (delta) {
            // Compute new position and then apply the appearance changes.
            delta = adjustDriverDelta(delta, driver, component);
            var restrainedPosition = restrainRectangleDriver(currentPosition.add(delta), driver);
            var finalPosition = maybeApplyConstraint(restrainedPosition, driver, component);
            handle.position = finalPosition;
            component.updateMultipleAppearanceAttributes(driver.toAppearance(finalPosition, component.props.appearance));
        },
        onEnd: function (delta) {
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", component.apparatusType + "::{driver}");
            delta = adjustDriverDelta(delta, driver, component);
            var restrainedPosition = restrainRectangleDriver(currentPosition.add(delta), driver);
            var finalPosition = maybeApplyConstraint(restrainedPosition, driver, component);
            var newAppearance = driver.toAppearance(finalPosition, component.props.appearance);
            var commands = [];
            for (var key in newAppearance) {
                commands.push(new command_basic__WEBPACK_IMPORTED_MODULE_2__["UpdateAppearance"](component.id, key, newAppearance[key], component.props.appearance[key]));
            }
            return new command_command__WEBPACK_IMPORTED_MODULE_3__["Sequence"](commands);
        },
    }));
    return {
        handle: handle,
        onPropsChanged: function (newAppearance) {
            currentPosition = driver.fromAppearance(newAppearance);
            handle.position = currentPosition;
        },
        onStateChanged: function (newAppearance) {
            handle.position = driver.fromAppearance(newAppearance);
        }
    };
}


/***/ }),

/***/ "TDnk":
/*!*************************!*\
  !*** ./src/file/api.ts ***!
  \*************************/
/*! exports provided: openDiagram, CloudFiles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openDiagram", function() { return openDiagram; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CloudFiles", function() { return CloudFiles; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var file_loading__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! file/loading */ "WJ9a");
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../api/api */ "3kYy");
/* harmony import */ var _store_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};









function openDiagram(rawDiagram, isTemplate) {
    Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("Cloud", "Open");
    // TODO: Check if user is ok to open this file.
    command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].clear();
    _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["eraseItems"])());
    // This sucks because we have to first erase the items,
    // then use a setTimeout so that React can update the props
    // and states. This should flush out the objectRefs in
    // editor canvas. Without this, if an item is of the same
    // ID but different type, the ref might be erased, e.g.
    // if "test tube" has ID 1 and is replaced by "beaker" with
    // same ID, a different ApparatusComponent is created but
    // the ref is the same since it's based on ID only. This may
    // result in the ref being erased when the old component is removed.
    _sentry_react__WEBPACK_IMPORTED_MODULE_0__["withScope"](function (scope) {
        if (!isTemplate) {
            scope.setExtra("diagram.id", rawDiagram.id);
            scope.setExtra("diagram.data", rawDiagram.rawData);
        }
        var diagram = __assign(__assign({}, rawDiagram), { data: file_loading__WEBPACK_IMPORTED_MODULE_3__["ChemixDocuments"].parseJson(rawDiagram.rawData) });
        // Reset IDs based on the doc.
        store_id__WEBPACK_IMPORTED_MODULE_5__["ID"].resetFor(diagram.data);
        // Update the stroke thickness ahead of time.
        _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["setThemeStrokeThickness"])(diagram.data.theme.strokeThickness));
        setTimeout(function () { return _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["replace"])(diagram, isTemplate)); }, 0);
    });
}
var CloudFiles;
(function (CloudFiles) {
    /**
     * Saves the current diagram to cloud. Thumbnail must be passed as base64 encoded image.
     * @param forceNew Whether a new diagram should be created regardless if the
     * current diagram is already linked to a cloud diagram.
     */
    function save(loggedIn, thumbnail, forceNew, callbacks) {
        var _a, _b;
        if (forceNew === void 0) { forceNew = false; }
        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("Cloud", "Save");
        var data = JSON.stringify(file_loading__WEBPACK_IMPORTED_MODULE_3__["ChemixDocuments"].getCurrentDocument());
        // Check if this is a new diagram.
        var currentDiagramId = (_a = _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].getState().currentCloudDiagram) === null || _a === void 0 ? void 0 : _a.id;
        var requestMethod;
        var requestPayload;
        var title;
        if (currentDiagramId === undefined || forceNew) {
            // Create new diagram.
            var inputTitle = prompt("Enter a file name for your diagram", "Untitled");
            if (inputTitle === null)
                return;
            title = inputTitle || "Untitled",
                requestMethod = "POST";
            requestPayload = {
                diagramSerialized: data,
                thumbnailBase64: thumbnail,
                title: title,
            };
        }
        else {
            // Save existing diagram.
            title = ((_b = _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].getState().currentCloudDiagram) === null || _b === void 0 ? void 0 : _b.title) || "";
            requestMethod = "PATCH";
            requestPayload = {
                id: currentDiagramId,
                diagramSerialized: data,
                thumbnailBase64: thumbnail,
            };
        }
        toastr.info("Saving diagram...", title, { timeOut: 1000 });
        Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagram", requestMethod, loggedIn, requestPayload, {
            success: function (response) {
                _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["setCloudDiagram"])(response));
                toastr.success("Successfully saved diagram to Cloud.", response.title);
            },
            special: function (error) {
                if (error.error_type == "diagram_exceeded") {
                    Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("ErrorPopups", "StorageExceeded");
                    toastr.error("You have " + error.current + " diagrams stored. " +
                        "To save this diagram, consider" +
                        "<ul>" +
                        "<li><b>upgrading</b> your plan or</li>" +
                        "<li><b>delete</b> some previously stored diagrams first.</li>" +
                        "</ul>", "You can currently only store " + error.limit + " diagrams", { timeOut: 20000, extendedTimeOut: 20000 });
                    // Trigger callback with delay to allow for toastr animation.
                    setTimeout(callbacks.onDiagramsLimitExceeded, 1000);
                    return true;
                }
                return false;
            }
        });
    }
    CloudFiles.save = save;
    function rename(loggedIn, diagram, title, callback) {
        Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagram", "PATCH", loggedIn, {
            id: diagram.id,
            title: title,
        }, {
            success: function (response) {
                var _a;
                // Update the current document if the renamed file matches the currently opened file.
                if (((_a = _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].getState().currentCloudDiagram) === null || _a === void 0 ? void 0 : _a.id) == diagram.id) {
                    _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["setCloudDiagram"])({ id: diagram.id, title: title }));
                }
                toastr.success("Successfully renamed diagram.", title);
                callback();
            },
            generic: function () {
                toastr.error("Error renaming diagram.");
            }
        });
    }
    CloudFiles.rename = rename;
    function remove(auth, diagram, callback) {
        Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagrams", "DELETE", auth, { id: diagram.id }, {
            success: function () {
                var _a;
                toastr.success("Diagram successfully deleted!");
                // If the current diagram has been deleted, reset the diagram ID.
                if (((_a = _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].getState().currentCloudDiagram) === null || _a === void 0 ? void 0 : _a.id) == diagram.id) {
                    _store_store__WEBPACK_IMPORTED_MODULE_7__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["setCloudDiagram"])(undefined));
                }
                callback();
            },
            generic: function () {
                toastr.error("Could not delete file!");
            }
        });
    }
    CloudFiles.remove = remove;
})(CloudFiles || (CloudFiles = {}));


/***/ }),

/***/ "TmSb":
/*!****************************************!*\
  !*** ./src/apparatus/library/tubes.ts ***!
  \****************************************/
/*! exports provided: TUBE_DIAMETER_SPEC, TubeBend, Tube, FourWayCrossing, ThreeWayCrossing, UTube, STube, AdapterTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TUBE_DIAMETER_SPEC", function() { return TUBE_DIAMETER_SPEC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TubeBend", function() { return TubeBend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tube", function() { return Tube; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FourWayCrossing", function() { return FourWayCrossing; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThreeWayCrossing", function() { return ThreeWayCrossing; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UTube", function() { return UTube; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "STube", function() { return STube; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdapterTube", function() { return AdapterTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var MIN_DIAMETER = 8;
var MAX_DIAMETER = 40;
var TUBE_DIAMETER_SPEC = {
    spec: "slider", key: "diameter", label: "Diameter",
    min: MIN_DIAMETER, max: MAX_DIAMETER
};
var bendSpecs = {
    min: -135, max: 135, step: 5,
    pipsStep: 9, unit: "°"
};
var lengthSpecs = {
    label: "Length", min: 0, max: 250
};
var defaultDiameter = 15;
var TubeBend = /** @class */ (function () {
    function TubeBend() {
    }
    TubeBend.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var semilength = 25;
        var onesidelength = appearance.length;
        var angle = appearance.angle;
        var _a = tubeBend(diameter, angle, semilength, onesidelength), topWall = _a.topWall, bottomWall = _a.bottomWall, snapping = _a.snapping;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([topWall, bottomWall]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](__spreadArrays(topWall.segments, bottomWall.segments));
        // let pivot = angle != 0 ? P(semilength, 0).add([rotationPivotDistance * Math.tan(angle.toRadians() / 2), 0]) : P(semilength + tubeBendLength / 2, 0)
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), facing: -90 },
                snapping,
            ]
        };
    };
    TubeBend.properties = {
        label: "Tube bend",
        kind: "tube",
        canContainLiquids: false,
        defaultAppearance: {
            angle: -75,
            diameter: defaultDiameter,
            length: 25
        },
        appearanceSpecs: [
            __assign({ spec: "slider", key: "angle", label: "Bend Angle" }, bendSpecs),
            TUBE_DIAMETER_SPEC,
            __assign({ spec: "slider", key: "length" }, lengthSpecs),
        ],
    };
    return TubeBend;
}());

var Tube = /** @class */ (function () {
    function Tube() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 30, maxX: 600,
                minY: 20, maxY: 20,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.length, 20); },
                toAppearance: function (p) { return ({ length: p.x }); },
                scale: 2.0,
            }
        ];
    }
    Tube.prototype.render = function (appearance) {
        var radius = appearance.diameter / 2;
        var length = appearance.length;
        var topWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -radius]], [[length, -radius]]));
        var bottomWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, radius]], [[length, radius]]));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([topWall, bottomWall]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -radius, length, radius * 2));
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [{
                    type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), facing: -90,
                }, {
                    type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(length, 0), facing: 90,
                }]
        };
    };
    Tube.properties = {
        label: "Straight tube",
        kind: "tube",
        canContainLiquids: false,
        defaultAppearance: {
            length: 100,
            diameter: defaultDiameter,
        },
        appearanceSpecs: [
            TUBE_DIAMETER_SPEC,
            {
                spec: "slider", key: "length", label: "Length",
                min: 30, max: 600
            },
        ],
    };
    return Tube;
}());

var FourWayCrossing = /** @class */ (function () {
    function FourWayCrossing() {
    }
    FourWayCrossing.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var radius = diameter / 2;
        var outer = radius + 20;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({});
        path.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, -outer));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, -radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outer, -radius));
        path.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, diameter));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, outer));
        path.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-diameter, 0));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-radius, radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-outer, radius));
        path.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -diameter));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-radius, -radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-radius, -outer));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(path);
        return {
            graphic: path, hitShape: path.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, outer), facing: 180 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outer, 0), facing: 90 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -outer), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-outer, 0), facing: -90 },
            ]
        };
    };
    FourWayCrossing.properties = {
        label: "4-Way Crossing",
        kind: "tube",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: defaultDiameter
        },
        appearanceSpecs: [
            TUBE_DIAMETER_SPEC
        ],
    };
    return FourWayCrossing;
}());

var ThreeWayCrossing = /** @class */ (function () {
    function ThreeWayCrossing() {
    }
    ThreeWayCrossing.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var radius = diameter / 2;
        var outer = radius + 20;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({});
        path.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, -outer));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, -radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outer, -radius));
        path.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, diameter));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, radius));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(radius, outer));
        path.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-diameter, 0));
        path.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-radius, -outer));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(path);
        return {
            graphic: path, hitShape: path.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, outer), facing: 180 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -outer), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(outer, 0), facing: 90 },
            ]
        };
    };
    ThreeWayCrossing.properties = {
        label: "3-Way Crossing",
        kind: "tube",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            diameter: defaultDiameter
        },
        appearanceSpecs: [
            TUBE_DIAMETER_SPEC
        ],
    };
    return ThreeWayCrossing;
}());

var UTube = /** @class */ (function () {
    function UTube() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 0, maxX: 0,
                minY: 30, maxY: 150,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, a.size); },
                toAppearance: function (p) { return ({ size: p.y }); },
                scale: 2.0,
            }
        ];
    }
    UTube.prototype.render = function (appearance) {
        var bendRadius = appearance.size;
        var diameter = appearance.diameter;
        var outerRadius = bendRadius + diameter;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-bendRadius, -50]], [[-bendRadius, 0], undefined, [0, bendRadius * 1.4]], [[bendRadius, 0], [0, bendRadius * 1.4]], [[bendRadius, -50]], [[outerRadius, -50]], [[outerRadius, 0], undefined, [0, outerRadius * 1.4]], [[-outerRadius, 0], [0, outerRadius * 1.4]], [[-outerRadius, -50]]));
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(path, 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: path,
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-bendRadius - diameter / 2, -50), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(bendRadius + diameter / 2, -50), facing: 0 },
            ]
        };
    };
    UTube.properties = {
        label: "U-Bent Tube",
        kind: "tube",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: defaultDiameter,
            size: 60
        },
        appearanceSpecs: [
            TUBE_DIAMETER_SPEC,
            {
                spec: "slider", key: "size", label: "Size",
                min: 30, max: 150,
            },
        ],
    };
    return UTube;
}());

var STube = /** @class */ (function () {
    function STube() {
    }
    STube.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var leftAngle = appearance.angle1;
        var rightAngle = appearance.angle2;
        var semilength = 15;
        // Length of the section connecting the two end in the middle.
        var middleLength = appearance.length;
        var rightEnd = tubeBend(diameter, rightAngle, semilength, semilength);
        var leftEnd = tubeBend(diameter, leftAngle, semilength, semilength);
        // reflect the left end.
        leftEnd.topWall.scale(-1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        leftEnd.bottomWall.scale(-1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        // Shift the segments of the right end.
        rightEnd.topWall.segments.forEach(function (s) { return s.point.x += middleLength; });
        rightEnd.bottomWall.segments.forEach(function (s) { return s.point.x += middleLength; });
        // Assembe the top walls and bottom walls separately.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([
            new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](__spreadArrays(leftEnd.bottomWall.segments, rightEnd.topWall.segments)),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](__spreadArrays(rightEnd.bottomWall.segments, leftEnd.topWall.segments))
        ]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        // Join everything together to create the hit shape.
        var hitShape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](__spreadArrays(leftEnd.bottomWall.segments, rightEnd.topWall.segments, rightEnd.bottomWall.segments, leftEnd.topWall.segments));
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                __assign(__assign({}, rightEnd.snapping), { at: rightEnd.snapping.at.add([middleLength, 0]) }),
                __assign(__assign({}, leftEnd.snapping), { at: leftEnd.snapping.at.multiply(-1), facing: leftEnd.snapping.facing + 180 })
            ]
        };
    };
    STube.properties = {
        label: "S-Bent Tube",
        kind: "tube",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            diameter: defaultDiameter,
            angle1: 90,
            angle2: 90,
            length: 80
        },
        appearanceSpecs: [
            TUBE_DIAMETER_SPEC,
            __assign({ spec: "slider", key: "angle1", label: "First angle" }, bendSpecs),
            __assign({ spec: "slider", key: "angle2", label: "Second angle" }, bendSpecs),
            {
                spec: "slider", key: "length", label: "Length",
                min: 0, max: 120
            }
        ],
    };
    return STube;
}());

var AdapterTube = /** @class */ (function () {
    function AdapterTube() {
    }
    AdapterTube.prototype.render = function (appearance) {
        var radius1 = appearance.diameter1 / 2;
        var radius2 = appearance.diameter2 / 2;
        var hitShape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])(
        // Top
        [[-30, -radius1]], [[-15, -radius1], undefined, [5, 0]], [[15, -radius2], [-5, 0]], [[30, -radius2]], 
        // Bottom
        [[30, radius2]], [[15, radius2], undefined, [-5, 0]], [[-15, radius1], [5, 0]], [[-30, radius1]]));
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(hitShape, 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-30, 0), facing: -90 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(30, 0), facing: 90 },
            ]
        };
    };
    AdapterTube.properties = {
        label: "Adapter Tube",
        canContainLiquids: true,
        defaultAppearance: {
            diameter1: 8,
            diameter2: defaultDiameter,
        },
        appearanceSpecs: [
            {
                spec: "slider", min: MIN_DIAMETER, max: MAX_DIAMETER,
                key: "diameter1", label: "First diameter",
            },
            {
                spec: "slider", min: MIN_DIAMETER, max: MAX_DIAMETER,
                key: "diameter2", label: "Second diameter",
            }
        ],
    };
    return AdapterTube;
}());

/**
 * Helper method to draw a tube bend.
 *
 *               r     D   D2
 *                   /   /
 *           e     C   C2
 *   A ------- B /   /    e = semi length
 *   o            p /     r = rotary pivot
 *   A2 ------ B2 -/      o = origin, p = pivot
 * Parameters:
 *  - diameter: The thickness of the tube
 *  - angle: The angle the tube should bend
 *  - semilength: length from A -> B and C -> D
 * Returns:
 *  - topWall: (A,B,C,D)
 *  - bottomWall: (D2,C2,B2,A2)
 *  - snapPoint: The snappoint for the D-end. A-end is simply P(0, 0)
 */
function tubeBend(diameter, angle, semilength, onesidelength) {
    var radius = diameter / 2;
    // Length dedicated to drawing the bend.
    var tubeBendLength = diameter * 3;
    // Set up the pivot around which the tube bends
    var rotationPivotDistance = angle != 0 ? tubeBendLength / angle.toRadians() : 100;
    var r = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(semilength, rotationPivotDistance);
    // Unit direction vector that determines where to draw
    // point D from C and also the (inverse) handleIn for C.
    var directionC = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(1, 0).rotate(angle);
    // Same, but for point B, from A to B
    var directionB = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(1, 0);
    // Set up the points that define the bend. Watch out for angle = 0
    var a = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -radius);
    var b = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(semilength, -radius);
    var c = angle != 0 ? b.rotate(angle, r) : b.add([tubeBendLength, 0]);
    var d = c.add(directionC.multiply(onesidelength));
    var a2 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, radius);
    var b2 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(semilength, radius);
    var c2 = angle != 0 ? b2.rotate(angle, r) : b2.add([tubeBendLength, 0]);
    var d2 = c2.add(directionC.multiply(onesidelength));
    // Factor by which to scale handle points in the bend.
    var handlesFactor = tubeBendLength * 0.4;
    var outerFactor = handlesFactor * (1 + radius / rotationPivotDistance);
    var innerFactor = handlesFactor * (1 - radius / rotationPivotDistance);
    var topHandlesFactor = outerFactor;
    var bottomHandleFactor = innerFactor;
    var topWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(a),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(b, undefined, directionB.multiply(topHandlesFactor)),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(c, directionC.multiply(-topHandlesFactor)),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(d)
    ]);
    // Constructed in reverse.
    var bottomWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(d2),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(c2, undefined, directionC.multiply(-bottomHandleFactor)),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(b2, directionB.multiply(bottomHandleFactor)),
        Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["S"])(a2),
    ]);
    return {
        topWall: topWall,
        bottomWall: bottomWall,
        snapping: {
            type: "connectable",
            at: angle != 0
                ? Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(semilength, 0).rotate(angle, r).add(directionC.multiply(onesidelength))
                : Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(d.x, 0),
            facing: 90 + angle
        }
    };
}


/***/ }),

/***/ "TpOi":
/*!*************************************************!*\
  !*** ./src/layout/editor/selection_overlay.tsx ***!
  \*************************************************/
/*! exports provided: SelectionOverlay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectionOverlay", function() { return SelectionOverlay; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var editing_rotation_rotation_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/rotation/rotation_handler */ "G+CT");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! view/keyboard_shortucts */ "ZPUE");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/**
 * Component to display a rectangle around the current selection
 * plus an icon that can be clicked on to perform rotation.
 * To use this component, instantiate it and update by setting state.
 */
var SelectionOverlay = /** @class */ (function (_super) {
    __extends(SelectionOverlay, _super);
    function SelectionOverlay(props) {
        var _this = _super.call(this, props) || this;
        /** Ref to the rotation handle. */
        _this.rotatioHandleRef = react__WEBPACK_IMPORTED_MODULE_2__["createRef"]();
        /** Helper for handling updating items when the rotation handler is used */
        _this.rotationHandler = new editing_rotation_rotation_handler__WEBPACK_IMPORTED_MODULE_1__["RotationHandler"]();
        _this.state = { isVisible: false, center: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), bounds: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 0, 0) };
        return _this;
    }
    SelectionOverlay.prototype.componentDidMount = function () {
        this.setUpRotationHandler();
    };
    SelectionOverlay.prototype.render = function () {
        var _a = this.state, isVisible = _a.isVisible, center = _a.center, bounds = _a.bounds;
        var hideDueToInteraction = this.props.hideDueToInteraction;
        return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { id: "selection-center", key: "selectionCenter", style: {
                visibility: isVisible && !hideDueToInteraction ? "visible" : "hidden",
                left: center.x,
                top: center.y
            } },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { id: "selection-box", key: "box", style: {
                    left: bounds.x - center.x - 5,
                    top: bounds.y - center.y - 5,
                    width: bounds.width + 10,
                    height: bounds.height + 10,
                } }),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { id: "rotation-handle", key: "handle_image", title: rotationTitle, ref: this.rotatioHandleRef, style: {
                    top: bounds.y - center.y - 60
                } },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fas fa-sync-alt" })));
    };
    /** Sets up the rotation handle to be draggable, using jQuery. */
    SelectionOverlay.prototype.setUpRotationHandler = function () {
        var handle = $(this.rotatioHandleRef.current);
        var self = this;
        handle.draggable({
            revert: true,
            revertDuration: 0,
            cursorAt: { top: 14, left: 0 },
            start: function (e, ui) {
                var rotationType = self.rotationHandler.onStart();
                self.props.onStartRotation(rotationType);
            },
            drag: function (e, ui) {
                var pos = $(this).position();
                // How many snap points?
                var snaps = 72;
                if (e.ctrlKey) {
                    snaps = 360;
                }
                else if (e.shiftKey) {
                    snaps = 16;
                }
                else if (e.altKey) {
                    snaps = 0;
                }
                var angle = self.rotationHandler.onRotate(pos.left, pos.top, snaps);
                self.props.onUpdateRotation(angle);
            },
            stop: function (e, ui) {
                self.rotationHandler.onEnd();
                self.props.onEndRotation();
            }
        }).on('click', function () {
            toastr.info("To rotate, start dragging this handle.");
        });
    };
    return SelectionOverlay;
}(react__WEBPACK_IMPORTED_MODULE_2__["Component"]));

var rotationTitle = "Drag to rotate<div class=\"shortcut\">" +
    "By default, rotates in 5\u00B0 steps.<br/>" +
    ("Hold <span class=\"keyboardKey\">" + Object(view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_3__["ctrlKey"])() + "</span> for 1\u00B0 steps<br/>") +
    "Hold <span class=\"keyboardKey\">Shift</span> for 22.5\u00B0 steps<br/>" +
    "Hold <span class=\"keyboardKey\">Alt</span> for free rotation</div";


/***/ }),

/***/ "U+Wy":
/*!***************************************************!*\
  !*** ./src/apparatus/library/shapes/rectangle.ts ***!
  \***************************************************/
/*! exports provided: Rectangle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rectangle", function() { return Rectangle; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Rectangle = /** @class */ (function () {
    function Rectangle() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 8, maxX: 250,
                minY: 8, maxY: 250,
                toAppearance: function (p) { return ({
                    width: p.x * 2,
                    height: p.y * 2
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width / 2, a.height / 2); },
                scale: 1.0,
                constraints: function (a, modifiers) {
                    if (modifiers.shift) {
                        // Force square.
                        var size = Math.max(a.width, a.height);
                        return { width: size, height: size };
                    }
                    return;
                }
            }
        ];
    }
    Rectangle.prototype.render = function (appearance) {
        var cornerRadius = 0;
        if (appearance.roundedCorner) {
            cornerRadius = Math.min(Math.min(appearance.width / 2, appearance.height / 2), appearance.cornerRadius);
        }
        var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, appearance.width, appearance.height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER), cornerRadius);
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic)
        };
    };
    Rectangle.properties = {
        label: "Rectangle",
        canContainLiquids: false,
        defaultAppearance: __assign({ width: 200, height: 100, roundedCorner: false, cornerRadius: 10 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "checkbox", key: "roundedCorner", label: "Rounded corners",
            },
            {
                spec: "slider", key: "cornerRadius", label: "Rounded corner size",
                min: 1, max: 30,
                visible: function (a) { return a.roundedCorner; }
            }
        ]),
    };
    return Rectangle;
}());



/***/ }),

/***/ "UESe":
/*!*************************************************!*\
  !*** ./src/apparatus/library/shapes/ellipse.ts ***!
  \*************************************************/
/*! exports provided: Ellipse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ellipse", function() { return Ellipse; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Ellipse = /** @class */ (function () {
    function Ellipse() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 8, maxX: 300,
                minY: 8, maxY: 300,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width / 2, a.height / 2); },
                toAppearance: function (p) { return ({ width: p.x * 2, height: p.y * 2 }); },
                scale: 1.0,
                constraints: function (a, modifiers) {
                    if (modifiers.shift) {
                        // Force square.
                        var size = Math.max(a.width, a.height);
                        return { width: size, height: size };
                    }
                    return;
                }
            }
        ];
    }
    Ellipse.prototype.render = function (appearance) {
        var width = appearance.width;
        var height = appearance.height;
        if (appearance.forceCircle) {
            var max = Math.max(width, height);
            width = max;
            height = max;
        }
        var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, width, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER));
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic)
        };
    };
    Ellipse.properties = {
        label: "Ellipse",
        canContainLiquids: false,
        defaultAppearance: __assign({ width: 120, height: 80, forceCircle: false }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "checkbox", key: "forceCircle", label: "Force circle shape",
            }
        ]),
    };
    return Ellipse;
}());



/***/ }),

/***/ "UT2h":
/*!********************************!*\
  !*** ./src/tiers/apparatus.ts ***!
  \********************************/
/*! exports provided: isItemUnlocked */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isItemUnlocked", function() { return isItemUnlocked; });
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var apparatus_specList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/specList */ "OsNy");


/**
 * This should probably be moved inside the context.
 */
function isItemUnlocked(item, currentTier) {
    if (currentTier) {
        return true;
    }
    // If here, then user does not have a plan.
    if (apparatus_specList__WEBPACK_IMPORTED_MODULE_1__["itemsThatRequireBoost"].indexOf(item.type) !== -1) {
        return false;
    }
    var klass = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(item.type);
    if (klass.isBoostRequiredForAppearance && klass.isBoostRequiredForAppearance(item.appearance)) {
        return false;
    }
    return true;
}


/***/ }),

/***/ "UVm1":
/*!***************************************************!*\
  !*** ./src/apparatus/library/decorative/flame.ts ***!
  \***************************************************/
/*! exports provided: Flame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Flame", function() { return Flame; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! random/random */ "PJ3I");




var FLAME_COLOR_SWATCHES = {
    "Green": "#5FAA5C",
    "Blue": "#5C6FAA",
    "Yellow": "#E9DC8C",
};
var Flame = /** @class */ (function () {
    function Flame() {
    }
    Flame.prototype.render = function (appearance) {
        var flame = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].redFlame();
        if (appearance.colorMode == "custom") {
            var baseColor = appearance.color.color();
            // Outer flame shape.
            var highlightColor = baseColor.ladd(30);
            flame.children[0].children[0].setGradientFill("down", [
                [highlightColor.hex(), 0.0],
                [baseColor.hex(), 1.0]
            ]);
            // Inner flame shape.
            flame.children[0].children[1].setGradientFill("down", [
                [highlightColor.ladd(50).hex(), 0.0],
                [highlightColor.ladd(20).hex(), 1.0]
            ]);
            flame.opacity = 0.9;
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        graphic.addChild(flame);
        var r = new random_random__WEBPACK_IMPORTED_MODULE_3__["Random"]();
        var position = flame.position;
        for (var i = 1; i < appearance.peaks; i++) {
            var newFlame = flame.clone();
            position = position.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(appearance.spacing, 0)).add(r.randomUnitVector(5.0));
            newFlame.position = position;
            graphic.addChild(newFlame);
        }
        graphic.scale(appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Flame.properties = {
        label: "Flame",
        canContainLiquids: false,
        defaultAppearance: {
            peaks: 1,
            scale: 1.0,
            spacing: 12,
            colorMode: "default",
            color: FLAME_COLOR_SWATCHES["Green"]
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 2.0, step: 0.05, unit: "%",
            },
            {
                spec: "slider", key: "peaks", label: "Number of peaks",
                min: 1, max: 7, step: 1,
                tier: "boost"
            },
            {
                spec: "radio", key: "colorMode", label: "Flame colour",
                options: [
                    { value: "default", label: "Default red" },
                    { value: "custom", label: "Custom" },
                ],
            },
            {
                spec: "color", key: "color", label: "Custom colour",
                visible: function (a) { return a.colorMode === "custom"; },
                swatches: FLAME_COLOR_SWATCHES, demoSwatches: FLAME_COLOR_SWATCHES,
                tier: "boost",
            },
            {
                spec: "slider", key: "spacing", label: "Spacing between peaks",
                min: 12, max: 20, tier: "boost",
                visible: function (a) { return a.peaks > 1; }
            }
        ],
    };
    return Flame;
}());



/***/ }),

/***/ "UVr1":
/*!***************************************!*\
  !*** ./src/apparatus/library/nail.ts ***!
  \***************************************/
/*! exports provided: Nail */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Nail", function() { return Nail; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Nail = /** @class */ (function () {
    function Nail() {
    }
    Nail.prototype.render = function (appearance) {
        var length = appearance.length;
        var thickness = appearance.thickness;
        var nail = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[thickness * 2 + 3, 0]], [[thickness, 3]], [[thickness, length - 10]], [[0, length]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(nail);
        nail.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thinner", nail);
        nail.fillColor = (function () {
            switch (appearance.color) {
                case "light":
                    return apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lightMetal;
                case "dark":
                    return apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].mediumMetal;
                case "rusty":
                    return "#bc7832";
            }
        })();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([nail]);
        if (appearance.additional == "metal strip") {
            var stripThickness = thickness * 2 + 4;
            var metalStrip = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-stripThickness / 2, length / 2 - 25, stripThickness, 40))
                .withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].metal)
                .withStroke("thinner", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].mediumMetal);
            graphic.addChild(metalStrip);
        }
        return { graphic: graphic, hitShape: graphic.bounds.expand(10).toShape() };
    };
    Nail.properties = {
        label: "Nail",
        canContainLiquids: false,
        defaultAppearance: {
            length: 75,
            thickness: 2,
            color: "light",
            additional: "none"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 60, max: 120
            },
            {
                spec: "slider", key: "thickness", label: "Thickness",
                min: 2, max: 4, step: 0.1
            },
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "light", label: "Light metal" },
                    { value: "dark", label: "Dark metal" },
                    { value: "rusty", label: "Rusty" }
                ]
            },
            {
                spec: "radio", key: "additional", label: "Additions",
                options: [
                    { value: "none", label: "Nothing" },
                    { value: "metal strip", label: "Metal strip" },
                ]
            }
        ],
    };
    return Nail;
}());



/***/ }),

/***/ "UqWn":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/measurement/micropipette.ts ***!
  \***********************************************************/
/*! exports provided: Micropipette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Micropipette", function() { return Micropipette; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var HANDLE_COLOUR = "#132c64".color();
/**
 * See https://solutions.pipette.com/micropipette/
 * https://5.imimg.com/data5/IG/DV/EH/SELLER-10358897/laboratory-ware-500x500.png
 */
var Micropipette = /** @class */ (function () {
    function Micropipette() {
    }
    Micropipette.prototype.render = function (appearance) {
        var handle = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-28, -79]], [[15, -71]], [[15, -63]], [[26, -61], [-5, -1], [3, 1]], [[30, -50], [0, -4], [-1, 21]], [[25, 33]], [[-11, 33]], [[-12, -59], [1, 19], [-1, -12]], [[-28, -72]])).close()
            .subtract(new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -65, 15, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 4.0))
            .withStroke("thin", "#151d2b")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(HANDLE_COLOUR));
        var dial1 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -65, 15, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#333333".color()));
        var dial2 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -60, 8, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#333333".color()));
        var dial3 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 33, 22, 16, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0)
            .withStroke("thin", "#142852")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(HANDLE_COLOUR));
        var ejectorTip = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[20, -76], , [16, -1]], [[26, -72], [8, -1]], [[25, -52]], [[19, -52]])).close()
            .withGradientFill("left", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple("#cccccc".color()));
        var shaft = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[25, 31], , [-1, 21]], [[10, 68], [6, -11], [-5, 9]], [[3, 157]], [[0, 184]], [[-3, 184]], [[-5, 157]], [[-6, 85], [0, 16], [0, -15]], [[-8, 48], [-1, 18], [-1, -8]], [[-9, 31]])).close().withStroke("thinner", "#bbbbbb")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].reflected(["#cfd4dc", 0.1], ["#e4e5e9", 0.3]));
        var plungerButton = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[14, -107]], [[14, -102]], [[5, -93], [2, -7], [-5, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(plungerButton);
        plungerButton
            .close()
            .withGradientFill("down", [["#d2d2d2", 0.32], ["#bbbbbb", 0.33], ["#d2d2d2", 0.8]]);
        var plungerRod = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -95, 6, 50, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("left", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedGradients"].cylinderMetal);
        var plunger = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([plungerRod, plungerButton]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([plunger, ejectorTip, dial2, dial1, shaft, dial3, handle]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0)
        };
    };
    Micropipette.properties = {
        label: "Micropipette",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Micropipette;
}());



/***/ }),

/***/ "UtFm":
/*!********************************************************!*\
  !*** ./src/apparatus/library/distillation/cow_type.ts ***!
  \********************************************************/
/*! exports provided: CowType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CowType", function() { return CowType; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var CowType = /** @class */ (function () {
    function CowType() {
    }
    CowType.prototype.render = function (appearance) {
        var angle = 35;
        var bulb = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10), 40);
        var inlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[11, -60]], [[9, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(inlet);
        var outlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[13, 0]], [[7, 80]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(outlet);
        var hoseOutlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 6, 60, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
        hoseOutlet.rotate(-75, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10));
        var outletL = outlet.clone();
        outletL.rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var outletR = outlet.clone();
        outletR.rotate(-angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var path = bulb.unite(outlet).unite(outletL).unite(outletR).unite(inlet).unite(hoseOutlet);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(path, 3, 8, 12, 16, 20);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, -24));
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, 44, { rotation: 180 }));
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(24, 35, { rotation: 180 - angle }));
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(-24, 35, { rotation: 180 + angle }));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -60), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 80), facing: 180 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 80).rotate(-angle), facing: 180 - angle },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 80).rotate(angle), facing: 180 + angle },
            ]
        };
    };
    CowType.properties = {
        label: "Cow-type Distillation Receiver",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return CowType;
}());



/***/ }),

/***/ "UuPG":
/*!**********************************************!*\
  !*** ./src/apparatus/library/watch_glass.ts ***!
  \**********************************************/
/*! exports provided: WatchGlass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WatchGlass", function() { return WatchGlass; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var WatchGlass = /** @class */ (function () {
    function WatchGlass() {
    }
    WatchGlass.prototype.render = function (appearance) {
        var radius = appearance.diameter / 2;
        var height = radius / 5;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[radius, -height]], [[0, 0], [radius / 1.5, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        var liquidMask = graphic.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.strokeBounds.expand(10).toShape(),
            snapping: {
                type: "placeable",
                at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 2)
            }
        };
    };
    WatchGlass.properties = {
        label: "Watch glass",
        canContainLiquids: true,
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.0 }),
        defaultAppearance: {
            diameter: 75,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 60, max: 100
            }
        ],
    };
    return WatchGlass;
}());



/***/ }),

/***/ "UuRN":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/measurement/suction_pear.ts ***!
  \***********************************************************/
/*! exports provided: SuctionPear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SuctionPear", function() { return SuctionPear; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var SuctionPear = /** @class */ (function () {
    function SuctionPear() {
    }
    SuctionPear.prototype.render = function (appearance) {
        var fillColor = appearance.color.color();
        var strokeColor = fillColor.ladd(-35);
        var graphic = (function () {
            switch (appearance.type) {
                case "simple": return simple;
                case "3-way": return threeWay;
            }
        })()(fillColor, strokeColor);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    SuctionPear.properties = {
        label: "Suction Pear",
        canContainLiquids: false,
        defaultAppearance: {
            type: "simple",
            color: "#2243a7",
            scale: 1.0
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.6, max: 1.25, step: 0.01, unit: "%"
            },
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "simple", label: "Basic" },
                    { value: "3-way", label: "Three-way" },
                ],
            },
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "#2243a7", label: "Blue" },
                    { value: "#9f2529", label: "Red" },
                ],
            },
        ],
    };
    return SuctionPear;
}());

function simple(fillColor, strokeColor) {
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0], [-20, 0], [20, 0]], [[37, 35], [0, -21], [0, 20]], [[20, 67], [5, -7], [-9, 12]], [[11, 112], [1, -22]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
    graphic.closePath();
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
    graphic.fillColor = new paper__WEBPACK_IMPORTED_MODULE_3__["Color"](new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"](apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(fillColor, -25), true), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 35), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-20, 18));
    graphic.withStroke("default", strokeColor.hex());
    return graphic;
}
// https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQf3rceGIKp0oaNoFTW-jup1lzBkXEDoozGfA&usqp=CAU
function threeWay(fillColor, strokeColor) {
    var main = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[8, -29], [0, -2]], [[8, -1], , [20, 4]], [[41, 36], [0, -17], [0, 20]], [[16, 75], [11, -5], [0, 12]], [[16, 96]], [[8, 98]], [[8, 155], , [0, 2]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(main);
    main.close();
    var side = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[11, -64]], [[10, -58], [-1, -3], [11, 5]], [[7, -34], [10, -3]], [[7, -7], , [0, 6]]));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(side);
    side.close();
    side.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
    side.withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(fillColor, -8));
    side.rotate(-90);
    side.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 130);
    var outline = main.unite(side);
    outline.withStroke("default", strokeColor.hex());
    outline.fillColor = null;
    main.fillColor = new paper__WEBPACK_IMPORTED_MODULE_3__["Color"](new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"](apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(fillColor, -25), true), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 35), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-20, 18));
    return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([main, side, outline]);
}


/***/ }),

/***/ "V1Zj":
/*!******************************************!*\
  !*** ./src/apparatus/library/dropper.ts ***!
  \******************************************/
/*! exports provided: Dropper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dropper", function() { return Dropper; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Dropper = /** @class */ (function () {
    function Dropper() {
    }
    Dropper.prototype.render = function (appearance) {
        var height = appearance.size;
        var width = 8 + height / 15;
        var handle = this.handle();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thin", handle);
        handle.fillColor = "#555555";
        handle.closePath();
        var body = this.body(width, height);
        // Center the pipette body.
        body.position.x += handle.bounds.center.x - body.bounds.center.x;
        var liquidMask = body.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thin", body);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([body, handle]);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -handle.bounds.height, handle.bounds.width, graphic.bounds.height));
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: graphic.placeable(),
        };
    };
    Dropper.prototype.body = function (width, height) {
        var mouthSize = 5;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[width / 2 - mouthSize / 2, height + 12]], [[width / 2 - mouthSize / 2, height + 7]], [[0, height], [0, 7]], [[0, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(path, width / 2);
        return path;
    };
    Dropper.prototype.handle = function () {
        var height = 30;
        var width = 20;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, -5], undefined, [10, -5]], [[width / 2, -height], [-12, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(path, width / 2);
        return path;
    };
    Dropper.properties = {
        label: "Dropper Pipette",
        canContainLiquids: true,
        defaultAppearance: {
            size: 60
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 30, max: 80
            }
        ],
    };
    return Dropper;
}());



/***/ }),

/***/ "V4sx":
/*!*******************************************************************!*\
  !*** ./src/apparatus/library/distillation/waterless_condenser.ts ***!
  \*******************************************************************/
/*! exports provided: WaterlessCondenser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WaterlessCondenser", function() { return WaterlessCondenser; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var WaterlessCondenser = /** @class */ (function () {
    function WaterlessCondenser() {
    }
    WaterlessCondenser.prototype.render = function (appearance) {
        var outline = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[7.5, 0]], [[7.5, 30], undefined, [10, 5]], [[16, 50]]));
        for (var i = 0; i < appearance.height; i++) {
            outline.cubicCurveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(8, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(8, 13), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 13));
            outline.cubicCurveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-3, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-3, 10), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 10));
        }
        // Remove last segment
        outline.lastSegment.remove();
        var lastY = outline.lastSegment.point.y;
        outline.lastSegment.handleOut = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 7);
        outline.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(7.5, lastY + 15));
        outline.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 20));
        var maxY = outline.lastSegment.point.y;
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(outline);
        var liquidMask = outline.clone();
        var graphic = Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(outline, outline.segments.length / 2);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), facing: 0 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, maxY), facing: 180 },
            ]
        };
    };
    WaterlessCondenser.properties = {
        label: "Waterless condenser",
        canContainLiquids: true,
        defaultAppearance: {
            height: 10
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 6, max: 12
            }
        ],
    };
    return WaterlessCondenser;
}());



/***/ }),

/***/ "VIBT":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/distillation/soxhlet.ts ***!
  \*******************************************************/
/*! exports provided: SoxhletExtractor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SoxhletExtractor", function() { return SoxhletExtractor; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SoxhletExtractor = /** @class */ (function () {
    function SoxhletExtractor() {
    }
    SoxhletExtractor.prototype.render = function (appearance) {
        var topInlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-11, -30]], [[11, -30]], [[9, 20]], [[-9, 20]]));
        topInlet.closePath();
        var body = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -10, 40, 151, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 15);
        var outerArm = outerArmPath();
        outerArm.closePath();
        var innerArmHalf = armFirstHalfPath();
        innerArmHalf.closePath();
        var joined = body.unite(outerArm).unite(topInlet).unite(innerArmHalf);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(joined, 5, 14, 28);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        // Insert, at bottom, the rest of the arm. Since the arm
        // overlaps itself, add a small white shape in between.
        var whiteOverlapSheet = armFirstHalfPath();
        whiteOverlapSheet.closePath();
        whiteOverlapSheet.fillColor = "#ffffff80";
        graphic.insertChild(0, whiteOverlapSheet);
        var secondArmHalf = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(armSecondHalfPath(), 6);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(secondArmHalf);
        graphic.insertChild(0, secondArmHalf);
        // Add wrinkles.
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, -8));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    SoxhletExtractor.properties = {
        label: "Soxhlet Extractor",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return SoxhletExtractor;
}());

function outerArmPath() {
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0], , [10, -10]], [[40, 5], , [7, 0]], [[50, 15]], [[50, 180], , [0, 20]], [[12, 205]], [[12, 215], , [2, 0]], [[8, 240]], // Bottom.
    [[-8, 240]], [[-12, 215], [-2, 0]], [[-12, 140], , [5, 3]], [[12, 140], [-5, 3]], [[15, 158], [0, -4], [0, 4]], [[12, 190], [0, -20], [0, 10]], [[42, 180], [0, 10]], [[42, 20]], [[35, 12], [7, 0]], [[0, 12]]));
}
// function fullArm(): Path {
//     return new Path(Segments(
//         [[15,125]],
//         [[25,136],[-5,5],[5,-5]],
//         [[20, 120],[0,5]],
//         [[20, 55],,[0, -13]],
//         [[36, 55],[0, -13]],
//         [[36, 150],,[0,20]],
//         [[4, 180],[0, -20]],
//         [[4, 230]],
//         [[-4,230]],
//         [[-4,175],,[0, -20]],
//         [[28, 145],[0, 20]],
//         [[28, 55]],
//         [[28, 116],,[0, 10]],
//         [[30,142],[12, -12],[-12,12]],
//         [[6, 130]]
//     ))
// }
function armFirstHalfPath() {
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[15, 125]], [[25, 136], [-5, 5], [5, -5]], [[20.1, 120], [0, 5]], [[28, 116], , [0, 10]], [[30, 142], [12, -12], [-12, 12]], [[6, 130]]));
}
function armSecondHalfPath() {
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[20, 120], [0, 5]], [[20, 55], , [0, -13]], [[36, 55], [0, -13]], [[36, 150], , [0, 20]], [[4, 180], [0, -20]], [[4, 230]], [[-4, 230]], [[-4, 175], , [0, -20]], [[28, 145], [0, 20]], [[28, 55]], [[28, 116], , [0, 10]]));
}


/***/ }),

/***/ "VVZF":
/*!**************************************!*\
  !*** ./src/components/searchbox.tsx ***!
  \**************************************/
/*! exports provided: SEARCH_BOX_ID, SearchBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SEARCH_BOX_ID", function() { return SEARCH_BOX_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchBox", function() { return SearchBox; });
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var SEARCH_BOX_ID = "search-box-input";
var SearchBox = /** @class */ (function (_super) {
    __extends(SearchBox, _super);
    function SearchBox() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.inputRef = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = { value: "", focused: false };
        _this.onChange = function (e) {
            var value = e.target.value;
            _this.setState({ value: value });
            if (_this.props.throttleMs) {
                // Reset throttle timer.
                if (_this.interval)
                    clearTimeout(_this.interval);
                _this.interval = setTimeout(function () {
                    _this.props.onChange(value);
                }, _this.props.throttleMs);
            }
            else {
                _this.props.onChange(value);
            }
        };
        _this.isActive = function () { return _this.state.value.length > 0; };
        _this.render = function () {
            var _a;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "search-box-container " + "active".if(_this.isActive()) + " " + "focused".if(_this.state.focused) + " " + ((_a = _this.props.className) !== null && _a !== void 0 ? _a : ""), key: "box" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa " + (_this.isActive() ? "fa-backspace" : "fa-search"), key: "icon", onClick: function (_) {
                        if (_this.isActive()) {
                            // Erase field.
                            _this.setState({ value: "" });
                            _this.props.onChange("");
                        }
                        _this.inputRef.current.focus();
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { key: "input", id: SEARCH_BOX_ID, ref: _this.inputRef, value: _this.state.value, title: _this.props.tooltip, onFocus: function (_) { return _this.setState({ focused: true }); }, onChange: _this.onChange, onBlur: function (e) { var _a; _this.setState({ focused: false }); (_a = _this.props.onBlur) === null || _a === void 0 ? void 0 : _a.call(null, e.target.value); }, onKeyUp: function (e) { if (e.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_0__["Keys"].ESCAPE)
                        Object(keyboard__WEBPACK_IMPORTED_MODULE_0__["focusMainApp"])(); }, placeholder: _this.props.placeholder }));
        };
        return _this;
    }
    SearchBox.getDerivedStateFromProps = function (nextProps, state) {
        if (!state.focused) {
            return __assign(__assign({}, state), { value: nextProps.value });
        }
        return state;
    };
    return SearchBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "VW72":
/*!******************************!*\
  !*** ./src/freehand/tool.ts ***!
  \******************************/
/*! exports provided: FreehandTool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FreehandTool", function() { return FreehandTool; });
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/store */ "uFCc");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





var FreehandTool = /** @class */ (function (_super) {
    __extends(FreehandTool, _super);
    function FreehandTool(app) {
        var _this = _super.call(this) || this;
        _this.app = app;
        _this.onMouseDown = function () {
            var _a;
            _this.app.setIsInteracting(true);
            (_a = _this.path) === null || _a === void 0 ? void 0 : _a.remove();
            _this.path = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"]();
            _this.path.selected = true;
        };
        _this.onMouseDrag = function (event) {
            if (!_this.path)
                return;
            _this.path.add(event.point);
        };
        _this.onMouseUp = function () {
            _this.app.setIsInteracting(false);
            var path = _this.path;
            if (!path)
                return;
            // Clean up the path first.
            path.simplify();
            path.smooth();
            // Convert path points to segments as array.
            var points = [];
            for (var _i = 0, _a = path.segments; _i < _a.length; _i++) {
                var segment = _a[_i];
                var point = [segment.point.x, segment.point.y];
                var handleOut = segment.handleOut.x == 0 && segment.handleOut.y == 0 ? undefined : [segment.handleOut.x, segment.handleOut.y];
                var handleIn = segment.handleIn.x == 0 && segment.handleIn.y == 0 ? undefined : [segment.handleIn.x, segment.handleIn.y];
                if (handleOut) {
                    points.push([point, handleIn, handleOut]);
                }
                else if (handleIn) {
                    points.push([point, handleIn]);
                }
                else {
                    points.push([point]);
                }
            }
            // Find the center of the path.
            var center = path.bounds.center;
            // Apparatus data.
            var apparatusData = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["createApparatus"])("__freehand", center);
            apparatusData.appearance["points"] = points;
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_2__["Sequence"]([
                new command_basic__WEBPACK_IMPORTED_MODULE_1__["AddApparatus"]([apparatusData]),
                new command_basic__WEBPACK_IMPORTED_MODULE_1__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_4__["default"].selectedObjectsID()),
                new command_basic__WEBPACK_IMPORTED_MODULE_1__["Select"]([apparatusData.id])
            ]));
            // Remove path.
            path.remove();
            _this.path = undefined;
        };
        return _this;
    }
    return FreehandTool;
}(paper__WEBPACK_IMPORTED_MODULE_3__["Tool"]));



/***/ }),

/***/ "VqZE":
/*!********************************************!*\
  !*** ./src/editing/grouping/operations.ts ***!
  \********************************************/
/*! exports provided: getRootGroup, getDescendantIDs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRootGroup", function() { return getRootGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDescendantIDs", function() { return getDescendantIDs; });
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/store */ "uFCc");


/** Returns the ID of the root group for given item. */
function getRootGroup(groupOrId) {
    var group;
    if (isID(groupOrId)) {
        group = store_store__WEBPACK_IMPORTED_MODULE_1__["default"].groups().filter(store_id__WEBPACK_IMPORTED_MODULE_0__["ID"].matching(groupOrId))[0];
        if (!group) {
            console.error("Group could not be found!");
        }
    }
    else {
        group = groupOrId;
    }
    // Iterate up the chain, to the root group.
    while (group.parentGroup) {
        group = store_store__WEBPACK_IMPORTED_MODULE_1__["default"].groups().filter(store_id__WEBPACK_IMPORTED_MODULE_0__["ID"].matching(group.parentGroup))[0];
    }
    return group;
}
function isID(arg) {
    return typeof arg.id === "number";
}
/**
 * Returns IDs of all descendants of a given group, except for
 * other groups, which are unpacked.
 */
function getDescendantIDs(group) {
    var ids = [];
    for (var _i = 0, _a = group.items; _i < _a.length; _i++) {
        var id = _a[_i];
        if (id.type === "group") {
            var childGroup = store_store__WEBPACK_IMPORTED_MODULE_1__["default"].groups().filter(store_id__WEBPACK_IMPORTED_MODULE_0__["ID"].matching(id))[0];
            ids.push.apply(ids, getDescendantIDs(childGroup));
        }
        else {
            ids.push(id);
        }
    }
    return ids;
}


/***/ }),

/***/ "Vv2H":
/*!*************************************************!*\
  !*** ./src/panel/appearance_spec_converter.tsx ***!
  \*************************************************/
/*! exports provided: SENTINEL_INDETERMINATE_RADIO, SENTINEL_TEXT_PLACEHOLDER, convertAppearanceSpecs, chemMarkPropsSection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SENTINEL_INDETERMINATE_RADIO", function() { return SENTINEL_INDETERMINATE_RADIO; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SENTINEL_TEXT_PLACEHOLDER", function() { return SENTINEL_TEXT_PLACEHOLDER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertAppearanceSpecs", function() { return convertAppearanceSpecs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chemMarkPropsSection", function() { return chemMarkPropsSection; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var panel_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! panel/shared */ "fGEM");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var text_parse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! text/parse */ "YKxB");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "fdqv");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







/** Sentinel "indeterminate" value used for a group of radio buttons. A random string unlikely to be used as an actual value. */
var SENTINEL_INDETERMINATE_RADIO = "@_x/.!";
/** Text to display as placeholder for text inputs with indeterminate values. */
var SENTINEL_TEXT_PLACEHOLDER = "Multiple values";
function createUpdateCommand(items, key, newValue) {
    if (items.length > 1) {
        var values = items.map(function (i) { return ({ id: i.id, value: newValue, previousValue: i.appearance[key] }); });
        return new command_basic__WEBPACK_IMPORTED_MODULE_1__["UpdateItemsAppearance"](key, values);
    }
    else {
        var item = items[0];
        return new command_basic__WEBPACK_IMPORTED_MODULE_1__["UpdateAppearance"](item.id, key, newValue, item.appearance[key]);
    }
}
function getConsistentValue(items, key) {
    var value = items[0].appearance[key];
    if (items.length == 1)
        return value;
    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
        var item = items_1[_i];
        if (item.appearance[key] !== value)
            return;
    }
    return value;
}
function convertAppearanceSpecs(specs, item, items, app, tiers) {
    return specs.filter(function (spec) { return (spec.visible || (function (a) { return true; }))(item.appearance); }) // Filter out specs set to invisible, if visibility fn is defined.
        .map(function (spec) {
        var _a, _b;
        switch (spec.spec) {
            case "slider":
                // Create a slider.
                // Sliders are not reusable and so need a unique key.
                return __assign(__assign({}, spec), { spec: "slider", key: item.type + "." + spec.key, initialValue: item.appearance[spec.key], onStart: function () { app.setIsInteracting(true); }, onChange: function (value) {
                        var _a;
                        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {
                            var item_1 = items_2[_i];
                            (_a = app.getApparatusComponent(item_1.id)) === null || _a === void 0 ? void 0 : _a.updateAppearanceAttributes(spec.key, value);
                        }
                    }, onEnd: function (_, final) {
                        app.setIsInteracting(false);
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    } });
            case "radio": {
                // Create a group of radio buttons.
                var currentValue_1 = (_a = getConsistentValue(items, spec.key)) !== null && _a !== void 0 ? _a : SENTINEL_INDETERMINATE_RADIO;
                return __assign(__assign({}, spec), { id: spec.key, value: currentValue_1, onChange: function (_, final) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    } });
            }
            case "select":
                // Create a group of radio buttons.
                return __assign(__assign({}, spec), { id: spec.key, value: item.appearance[spec.key], onSelectChange: function (_, final) {
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    } });
            case "toggle-buttons": {
                // Identify the highlight index.
                var currentValue_2 = getConsistentValue(items, spec.key);
                var highlightIndex = -1;
                if (currentValue_2 !== undefined) {
                    for (var i = 0; i < spec.options.length; i++) {
                        if (spec.options[i].value == currentValue_2) {
                            highlightIndex = i;
                            break;
                        }
                    }
                }
                return {
                    spec: "toggle-horizontal-buttons",
                    id: spec.key,
                    key: item.id.id + "_" + spec.key,
                    label: spec.label,
                    highlightIndex: highlightIndex,
                    size: spec.size,
                    buttons: spec.options.map(function (o) { return ({
                        icon: o.icon,
                        buttonLabel: o.label,
                        onClick: function () {
                            Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + o.value);
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, o.value));
                        }
                    }); })
                };
            }
            case "text": {
                var currentValue_3 = getConsistentValue(items, spec.key);
                return __assign(__assign({}, spec), { key: item.id.id + "_" + spec.key + "_" + currentValue_3, spec: "text", id: spec.key, text: currentValue_3 !== null && currentValue_3 !== void 0 ? currentValue_3 : "", placeholder: SENTINEL_TEXT_PLACEHOLDER.if(currentValue_3 === undefined), onFocus: function () { app.setIsInteracting(true); }, onChange: function (value) {
                        var _a;
                        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {
                            var item_2 = items_3[_i];
                            (_a = app.getApparatusComponent(item_2.id)) === null || _a === void 0 ? void 0 : _a.updateAppearanceAttributes(spec.key, value);
                        }
                    }, onEnd: function (previous, final) {
                        app.setIsInteracting(false);
                        if (previous == final)
                            return;
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    } });
            }
            case "textarea":
                var currentValue = getConsistentValue(items, spec.key);
                return __assign(__assign({}, spec), { key: item.id.id + "_" + spec.key + "_" + currentValue, spec: "textarea", id: spec.key, text: currentValue !== null && currentValue !== void 0 ? currentValue : "", placeholder: SENTINEL_TEXT_PLACEHOLDER.if(currentValue === undefined), onFocus: function () { app.setIsInteracting(true); }, onChange: function (value) {
                        var _a;
                        for (var _i = 0, items_4 = items; _i < items_4.length; _i++) {
                            var item_3 = items_4[_i];
                            (_a = app.getApparatusComponent(item_3.id)) === null || _a === void 0 ? void 0 : _a.updateAppearanceAttributes(spec.key, value);
                        }
                    }, onEnd: function (previous, final) {
                        app.setIsInteracting(false);
                        if (previous == final)
                            return;
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    } });
            case "color":
                var startColor_1 = item.appearance[spec.key];
                // Depending on whether this is supported or not on the
                // current plan, return either a full color picker
                // or a limited radio list from demo swatches.
                if (!tiers.allow(spec) && spec.demoSwatches) {
                    // Return a limited set of choices as radios.
                    return {
                        spec: "radio",
                        id: spec.key,
                        key: spec.key,
                        label: spec.label,
                        visible: spec.visible,
                        options: Object(panel_shared__WEBPACK_IMPORTED_MODULE_3__["convertDemoSwatchesToRadioOptions"])(spec.demoSwatches),
                        value: startColor_1,
                        onChange: function (_, final) {
                            Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                        }
                    };
                }
                // Return a normal color picker.
                return __assign(__assign({}, spec), { id: spec.key, 
                    // Colorpicker needs a unique key per instance.
                    key: spec.key + "_" + item.id.id, value: startColor_1, onColorChange: function (value) {
                        var _a;
                        for (var _i = 0, items_5 = items; _i < items_5.length; _i++) {
                            var item_4 = items_5[_i];
                            // TODO: Fix this bug where component may be null
                            (_a = app.getApparatusComponent(item_4.id)) === null || _a === void 0 ? void 0 : _a.updateAppearanceAttributes(spec.key, value);
                        }
                    }, onColorEnd: function (final) {
                        if (final == startColor_1)
                            return;
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                        Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + final);
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
                    }, opacity: spec.opacity
                        ? opacitySettingsForColorpicker(items, app, spec.opacity)
                        : undefined });
            case "checkbox":
                /** Convert to a checkbox-group with 1 check box. */
                var cg = {
                    spec: "checkbox-group",
                    label: spec.label,
                    key: spec.key,
                    checkboxes: [
                        __assign(__assign({}, spec), { id: spec.key, label: (_b = spec.subLabel) !== null && _b !== void 0 ? _b : "", value: getConsistentValue(items, spec.key), onCheckedChange: function (newValue) {
                                Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + spec.key);
                                Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + spec.key + " -> " + newValue);
                                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, newValue));
                            } }),
                    ]
                };
                return cg;
            case "checkbox-group":
                return __assign(__assign({}, spec), { key: spec.label, checkboxes: spec.checkboxes
                        .filter(function (cSpec) { var _a; return ((_a = cSpec.visible) !== null && _a !== void 0 ? _a : (function (a) { return true; }))(item.appearance); })
                        .map(function (cSpec) { return (__assign(__assign({}, cSpec), { id: cSpec.key, value: getConsistentValue(items, cSpec.key), onCheckedChange: function (newValue) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", item.type + "::" + cSpec.key);
                            Object(utils__WEBPACK_IMPORTED_MODULE_6__["crumb"])("ui.props", item.type + ": " + cSpec.key + " -> " + newValue);
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, cSpec.key, newValue));
                        } })); }) });
            case "header":
                return __assign({ key: "__fakeKey", label: "" }, spec);
            case "array":
                return {
                    spec: "text",
                    id: spec.key,
                    key: spec.key,
                    label: "Hello",
                    text: "NOT WORKING",
                    onChange: function (value) {
                    },
                    onEnd: function (previous, final) {
                    }
                };
        }
    });
}
function opacitySettingsForColorpicker(items, app, spec) {
    return {
        value: items[0].appearance[spec.key],
        range: spec.range,
        onChange: function (value) {
            var _a;
            for (var _i = 0, items_6 = items; _i < items_6.length; _i++) {
                var item = items_6[_i];
                (_a = app.getApparatusComponent(item.id)) === null || _a === void 0 ? void 0 : _a.updateAppearanceAttributes(spec.key, value);
            }
        },
        onEnd: function (_, final) {
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", items[0].type + "::" + spec.key);
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, spec.key, final));
        }
    };
}
function chemMarkPropsSection(items, key) {
    return {
        header: "ChemText",
        icon: "subscript",
        elements: [
            {
                spec: "checkbox-group",
                key: "is_chem_mark_enabled",
                label: text_parse__WEBPACK_IMPORTED_MODULE_5__["ChemMark"].uiDescription,
                wideLabel: true,
                checkboxes: [{
                        label: "",
                        useSwitch: true,
                        id: "is_chem_mark_enabled",
                        value: items[0].appearance[key],
                        tier: "boost",
                        allowWhenLocked: true,
                        onCheckedChange: function (value) {
                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", items[0].type + "::ChemMark");
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(createUpdateCommand(items, key, value));
                        }
                    }],
            },
            react__WEBPACK_IMPORTED_MODULE_4__["createElement"](text_parse__WEBPACK_IMPORTED_MODULE_5__["ChemMark"].Hint, { key: "chemmark_hint", showUpgradeHint: items[0].appearance[key] })
        ]
    };
}


/***/ }),

/***/ "W4c3":
/*!**************************************************!*\
  !*** ./src/apparatus/library/decorative/drop.ts ***!
  \**************************************************/
/*! exports provided: Drop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Drop", function() { return Drop; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var components_colorpicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/colorpicker */ "0J4H");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Drop = /** @class */ (function () {
    function Drop() {
    }
    Drop.prototype.render = function (appearance) {
        var shape = appearance.shape;
        var dropShape = (function () {
            switch (shape) {
                case "drop":
                    var plumpness = appearance.plumpness;
                    var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 0], [-plumpness, 4], [plumpness, 4]], [[0, 10], [plumpness, 0], [-plumpness, 0]]));
                    path.closePath();
                    return path;
                case "round":
                    return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 5);
            }
        })();
        dropShape.scale(appearance.size);
        dropShape.fillColor = appearance.color.color().alpha(appearance.opacity).toString();
        dropShape.withStroke("thinner", appearance.color);
        var graphic;
        if (appearance.count > 1) {
            graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([dropShape]);
            dropShape.position.y = 0;
            for (var i = 1; i < appearance.count; i++) {
                var drop = dropShape.clone();
                drop.position.y = i * (10 + appearance.dropSpacing) * appearance.size;
                graphic.addChild(drop);
            }
        }
        else {
            graphic = dropShape;
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(20).toShape(),
            snapping: appearance.shape == "round"
                ? { type: "spotting_tile_placeable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0) }
                : undefined
        };
    };
    Drop.properties = {
        label: "Drop",
        canContainLiquids: false,
        defaultAppearance: {
            color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquid,
            opacity: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].defaultLiquidAlpha,
            size: 2,
            shape: "drop",
            plumpness: 5.0,
            count: 1,
            dropSpacing: 5,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 1.5, max: 4, step: 0.1
            },
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "drop", label: "Drop" },
                    { value: "round", label: "Round" },
                ]
            },
            {
                spec: "slider", key: "count", label: "Number of drops",
                min: 1, max: 5, tier: "boost",
            },
            {
                spec: "slider", key: "dropSpacing", label: "Drop spacing",
                min: 1, max: 15,
                visible: function (a) { return a.count > 1; },
            },
            {
                spec: "slider", key: "plumpness", label: "Plumpness",
                min: 3.0, max: 6.0, step: 0.1,
                visible: function (a) { return a.shape == "drop"; }
            },
            {
                spec: "color", key: "color", label: "Liquid colour",
                swatches: components_colorpicker__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_SWATCHES"],
                opacity: { key: "opacity", range: apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["LIQUID_OPACITY_RANGE"] }
            }
        ],
    };
    return Drop;
}());



/***/ }),

/***/ "WJ9a":
/*!*****************************!*\
  !*** ./src/file/loading.ts ***!
  \*****************************/
/*! exports provided: convertItem, convertArrow, ChemixDocuments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertItem", function() { return convertItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertArrow", function() { return convertArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChemixDocuments", function() { return ChemixDocuments; });
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var arrows_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! arrows/type */ "fXqh");
/* harmony import */ var file_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! file/type */ "MrcZ");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! store/store */ "uFCc");
/**
 * Everything that has to do with saving and loading a ChemixDocument.
 */
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






function convertItem(item) {
    var klass = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(item.type);
    if (klass.convertToLatest) {
        item.appearance = klass.convertToLatest(item.appearance);
    }
    else {
        item.appearance = __assign(__assign({}, klass.properties.defaultAppearance), item.appearance);
    }
    if (item.liquid) {
        item.liquid = __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), item.liquid);
    }
    return item;
}
function convertArrow(arrow) {
    // Fix bugs:
    //  1) Iterate over arrows to check start and end are {x,y}
    //     instead of the serialised Point object.
    return __assign(__assign(__assign({}, arrows_type__WEBPACK_IMPORTED_MODULE_2__["Arrow"].defaultArrow), arrow), { start: ensurePosition(arrow.start), end: ensurePosition(arrow.end) });
}
var ChemixDocuments;
(function (ChemixDocuments) {
    /**
     * Converts stored (in JSON) document to ChemixDocument, matching
     * latest specs.
     */
    function parseJson(data) {
        var doc = JSON.parse(data);
        doc.arrows = doc.arrows.map(convertArrow);
        doc.items = doc.items.map(convertItem);
        // Run migrations.
        if (!doc.version || doc.version == 1) {
            doc = migrateFrom1To2(doc);
        }
        if (doc.version == 2) {
            doc = migrateFrom2To3(doc);
        }
        // Make sure same IDs use the same reference.
        graftIds(doc);
        doc.version = file_type__WEBPACK_IMPORTED_MODULE_3__["CURRENT_CHEMIX_DOCUMENT_VERSION"];
        return doc;
    }
    ChemixDocuments.parseJson = parseJson;
    /**
     * Extract current saveable state as JSON. Note this does not
     * return deep copies so conversion to JSON immediately is advised.
     */
    function getCurrentDocument() {
        var currentState = store_store__WEBPACK_IMPORTED_MODULE_5__["appStore"].getState();
        return {
            version: file_type__WEBPACK_IMPORTED_MODULE_3__["CURRENT_CHEMIX_DOCUMENT_VERSION"],
            zoom: currentState.zoom,
            items: currentState.items,
            arrows: currentState.arrows,
            groups: currentState.groups,
            theme: currentState.theme,
        };
    }
    ChemixDocuments.getCurrentDocument = getCurrentDocument;
    /** Returns a blank document, based on the current settings. */
    function getBlankDocument() {
        return __assign(__assign({}, getCurrentDocument()), { items: [], arrows: [], groups: [] });
    }
    ChemixDocuments.getBlankDocument = getBlankDocument;
})(ChemixDocuments || (ChemixDocuments = {}));
function migrateFrom1To2(doc) {
    doc.version = 2;
    doc.groups = [];
    return doc;
}
function migrateFrom2To3(doc) {
    doc.version = 3;
    doc.theme = __assign({}, store_store__WEBPACK_IMPORTED_MODULE_5__["DEFAULT_THEME"]);
    return doc;
}
/** Converts definitely to plain Position */
function ensurePosition(position) {
    return Array.isArray(position) && position[0] === "Point" ? { x: position[1], y: position[2] } : position;
}
/**
 * IDs rely on object equality. Loading from JSON creates new instances of IDs,
 * so object equality would be broken. Re-graft referenced IDs to same instance
 * as the owned ID.
 */
function graftIds(doc) {
    // Collect all owned IDs.
    var ownedIds = {
        "arrow": {},
        "apparatus": {},
        "group": {}
    };
    doc.items.forEach(function (i) { return ownedIds["apparatus"][i.id.id] = i.id; });
    doc.arrows.forEach(function (i) { return ownedIds["arrow"][i.id.id] = i.id; });
    doc.groups.forEach(function (i) { return ownedIds["group"][i.id.id] = i.id; });
    // Now regraft each reference ID to the owned instance.
    doc.items.forEach(function (i) {
        if (i.parentGroup) {
            i.parentGroup = ownedIds.group[i.parentGroup.id];
        }
    });
    doc.arrows.forEach(function (a) {
        if (a.parentGroup) {
            a.parentGroup = ownedIds.group[a.parentGroup.id];
        }
    });
    doc.groups.forEach(function (g) {
        if (g.parentGroup) {
            g.parentGroup = ownedIds.group[g.parentGroup.id];
        }
        g.items =
            g.items
                // Filter out null and undefined values.
                .filter(function (i) { return i != null; })
                .map(function (i) { return ownedIds[i.type][i.id]; })
                // Filter afterwards too, some groups may be broken
                // and contain invalid children.
                .filter(function (i) { return i != null; });
    });
    // SINGLE CHILD COLLAPSE:
    // If the group only has 1 child, collapse it: if the group has a child, reparent
    // it to its parents.
    doc.groups.filter(function (g) { return g.items.length == 1; }).forEach(function (g) {
        var childId = g.items[0];
        var newParentId = g.parentGroup;
        // Assign child to parent.
        if (newParentId) {
            var parentGroup = doc.groups.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].matching(newParentId))[0];
            parentGroup.items = parentGroup.items.map(function (id) { return id == g.id ? childId : id; });
        }
        // Assign parent to child.
        var child = getChildIn(doc, childId);
        child.parentGroup = newParentId;
    });
    // Don't keep empty groups or groups with 1 child.
    doc.groups = doc.groups.filter(function (g) { return g.items.length > 1; });
}
function getChildIn(doc, childId) {
    switch (childId.type) {
        case "apparatus":
            return doc.items.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].matching(childId))[0];
        case "arrow":
            return doc.arrows.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].matching(childId))[0];
        case "group":
            return doc.groups.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].matching(childId))[0];
    }
}


/***/ }),

/***/ "WNWG":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/biology/organic/leaf.ts ***!
  \*******************************************************/
/*! exports provided: DEFAULT_COLOR, Leaf */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_COLOR", function() { return DEFAULT_COLOR; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Leaf", function() { return Leaf; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var ext_color__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ext/color */ "zyMn");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_5__);






var DEFAULT_COLOR = Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(124, 57, 40).hex();
var Leaf = /** @class */ (function () {
    function Leaf() {
    }
    Leaf.prototype.render = function (appearance) {
        var graphic = Leaf.createLeaf(appearance.color, appearance.length);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Leaf.createLeaf = function (baseColor, length) {
        var outlineColor = baseColor.color().ladd(-20).hex();
        var leaf = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0], [20, -20], [20, 30]], [[60, 0], , [-30, -20]]));
        leaf.closePath();
        leaf.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), outlineColor);
        leaf.setGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(baseColor.color()));
        var stem = new paper__WEBPACK_IMPORTED_MODULE_5__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-15, -15]], [[0, 0], [-5, -2], [15, 6]], [[length, 0]]));
        stem.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), outlineColor);
        leaf.scale(length / 60, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        return new paper__WEBPACK_IMPORTED_MODULE_5__["Group"]([leaf, stem]);
    };
    Leaf.properties = {
        label: "Leaf",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            color: DEFAULT_COLOR,
            length: 60,
        },
        appearanceSpecs: [
            {
                spec: "color", key: "color", label: "Colour",
                swatches: {
                    "Green": DEFAULT_COLOR,
                    "Yellow": "#f3f338",
                },
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 40, max: 120, unit: "mm",
            }
        ],
    };
    return Leaf;
}());



/***/ }),

/***/ "WWCi":
/*!****************************************************!*\
  !*** ./src/apparatus/library/accessories/smoke.ts ***!
  \****************************************************/
/*! exports provided: Smoke, smokeTwirl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Smoke", function() { return Smoke; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "smokeTwirl", function() { return smokeTwirl; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Smoke = /** @class */ (function () {
    function Smoke() {
        this.smokeLazyRaster = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["LazyRaster"]("./images/smoke.png");
        this.vapourLazyRaster = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["LazyRaster"]("./images/vapour.png");
    }
    Smoke.prototype.render = function (appearance) {
        switch (appearance.style) {
            case "trails": return this.renderTrails(appearance);
            case "smoke-real": return this.renderSmokeReal(appearance);
            case "vapour-real": return this.renderVapourReal(appearance);
        }
    };
    Smoke.prototype.renderTrails = function (appearance) {
        var baseColor = (appearance.color === "default" ? "#444444" : appearance.customColor).color();
        var darkerColor = baseColor.ladd(-7);
        var trail1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[1, 3], [14, -37], [26, -19]], [[-8, -124], [-2, 47], [-11, 44]])).withGradientFill("up", [[baseColor.alpha(0.2 * appearance.alpha).string(), 0.3], [baseColor.alpha(0).string(), 1.0]]).close();
        var trail2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[1, 2], [-15, -36], [-7, -32]], [[-1, -157], [51, 47], [44, 61]])).withGradientFill("up", [[darkerColor.alpha(0.2 * appearance.alpha).string(), 0.3], [darkerColor.alpha(0).string(), 1.0]]).close();
        var trail3 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[3, 4], [31, -38], [37, -26]], [[9, -97], [-6, 27], [-16, 25]])).withGradientFill("up", [[baseColor.alpha(0.3 * appearance.alpha).string(), 0.3], [baseColor.alpha(0).string(), 1.0]]).close();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([trail1, trail2, trail3]);
        graphic.scale(appearance.size * 0.5 + 0.5, appearance.size);
        graphic.opacity = appearance.alpha;
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Smoke.prototype.renderSmokeReal = function (appearance) {
        var prescale = 0.7;
        // Size of the image must be known ahead of time to set the hit shape.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([]);
        this.smokeLazyRaster.clone(function (raster) {
            raster.scale(prescale * appearance.size);
            raster.opacity = appearance.alpha;
            graphic.addChild(raster);
            if (appearance.color === "custom") {
                var filter = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 95, 250, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
                filter.scale(prescale * appearance.size);
                filter.fillColor = appearance.customColor;
                filter.blendMode = "source-atop";
                graphic.addChild(filter);
                var rasterised = graphic.rasterize();
                graphic.removeChildren();
                graphic.addChild(rasterised);
            }
        });
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 95, 250, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
        hitShape.scale(prescale * appearance.size);
        return {
            graphic: graphic,
            hitShape: hitShape,
        };
    };
    Smoke.prototype.renderVapourReal = function (appearance) {
        var prescale = 0.7;
        // Size of the image must be known ahead of time to set the hit shape.
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([]);
        this.vapourLazyRaster.clone(function (raster) {
            raster.scale(prescale * appearance.size);
            raster.opacity = appearance.alpha;
            graphic.addChild(raster);
            if (appearance.color === "custom") {
                var filter = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 95, 250, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
                filter.scale(prescale * appearance.size);
                filter.fillColor = appearance.customColor;
                filter.blendMode = "source-atop";
                graphic.addChild(filter);
                var rasterised = graphic.rasterize();
                graphic.removeChildren();
                graphic.addChild(rasterised);
            }
        });
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 95, 250, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER));
        hitShape.scale(prescale * appearance.size);
        return {
            graphic: graphic,
            hitShape: hitShape,
        };
    };
    Smoke.properties = {
        label: "Smoke",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            size: 1.0,
            style: "trails",
            alpha: 1.0,
            color: "default",
            customColor: "#e13232",
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "style", label: "Style",
                options: [
                    { value: "trails", label: "Trails" },
                    { value: "smoke-real", label: "Smoke" },
                    { value: "vapour-real", label: "Vapour" },
                ],
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 0.5, max: 1.5, step: 0.01, unit: "%",
            },
            {
                spec: "slider", key: "alpha", label: "Opacity",
                min: 0.25, max: 1.0, step: 0.01, unit: "%"
            },
            {
                spec: "radio", key: "color", label: "Color",
                options: [
                    { value: "default", label: "Default" },
                    { value: "custom", label: "Custom", tier: "boost" },
                ],
            },
            { spec: "color", key: "customColor", label: "", visible: function (a) { return a.color === "custom"; } }
        ],
    };
    return Smoke;
}());

var smokeTwirl = [
    [[0, 0], [-25, -5], [32, -5]],
    [[51, 17], [114, -7], [-9, 4]],
    [[8, 27], [-1, -8], [2, 8]],
    [[48, 31], [-6, -4], [10, 7]],
    [[17, 41], [1, -4], [-5, 10]],
    [[42, 57], [9, -15], [-15, 25]],
    [[32, 137]]
];


/***/ }),

/***/ "Wdtt":
/*!**********************************************!*\
  !*** ./src/apparatus/library/shapes/star.ts ***!
  \**********************************************/
/*! exports provided: Star */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Star", function() { return Star; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Star = /** @class */ (function () {
    function Star() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 0, maxX: 0,
                minY: -150, maxY: -8,
                toAppearance: function (p) { return ({
                    radius: -p.y,
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -a.radius); },
                scale: 1.0,
            }
        ];
    }
    Star.prototype.render = function (appearance) {
        var points = appearance.points;
        var radius = appearance.radius;
        var strideAngle = 360 / points;
        var thickness = appearance.thickness;
        var origin = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
        var outerPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -radius);
        var innerPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -radius * thickness).rotate(strideAngle / 2, origin);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({});
        graphic.moveTo(outerPoint);
        graphic.lineTo(innerPoint);
        for (var i = 0; i < points - 1; i++) {
            outerPoint = outerPoint.rotate(strideAngle, origin);
            innerPoint = innerPoint.rotate(strideAngle, origin);
            graphic.lineTo(outerPoint);
            graphic.lineTo(innerPoint);
        }
        graphic.closePath();
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic),
            watermark: outerPoint,
        };
    };
    Star.properties = {
        label: "Star",
        canContainLiquids: false,
        defaultAppearance: __assign({ radius: 50, thickness: 0.55, points: 5 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "slider", key: "points", label: "Points",
                min: 4, max: 8, step: 1,
            },
            {
                spec: "slider", key: "radius", label: "Radius",
                min: 8, max: 150
            },
            {
                spec: "slider", key: "thickness", label: "Thickness",
                min: 0.2, max: 0.8, step: 0.05,
            },
        ]),
    };
    return Star;
}());



/***/ }),

/***/ "WgaI":
/*!******************************!*\
  !*** ./src/command/basic.ts ***!
  \******************************/
/*! exports provided: DeselectAndSelect, Select, Deselect, Flip, AddApparatus, DeleteApparatus, UpdateAppearance, UpdateItemsAppearance, UpdateAppearanceProperties, UpdateLiquidAmount, UpdateLiquidColor, UpdateLiquidAlpha */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeselectAndSelect", function() { return DeselectAndSelect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Select", function() { return Select; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Deselect", function() { return Deselect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Flip", function() { return Flip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddApparatus", function() { return AddApparatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeleteApparatus", function() { return DeleteApparatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateAppearance", function() { return UpdateAppearance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateItemsAppearance", function() { return UpdateItemsAppearance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateAppearanceProperties", function() { return UpdateAppearanceProperties; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateLiquidAmount", function() { return UpdateLiquidAmount; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateLiquidColor", function() { return UpdateLiquidColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateLiquidAlpha", function() { return UpdateLiquidAlpha; });
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/store */ "uFCc");
// Basic set of commands.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


/** Changes the selection state of several items. */
var DeselectAndSelect = /** @class */ (function () {
    function DeselectAndSelect(ids) {
        var _a, _b;
        this.selectIds = (_a = ids.select) !== null && _a !== void 0 ? _a : [];
        this.deselectIds = (_b = ids.deselect) !== null && _b !== void 0 ? _b : [];
    }
    DeselectAndSelect.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("SelectDeselect", DeselectAndSelect.mutator(this.selectIds, this.deselectIds));
    };
    DeselectAndSelect.prototype.undo = function () {
        // Swap select and deselect around.
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("SelectDeselect", DeselectAndSelect.mutator(this.deselectIds, this.selectIds));
    };
    DeselectAndSelect.mutator = function (select, deselect) {
        return function (state) {
            var newState = __assign({}, state);
            newState.items = state.items.map(function (a) {
                if (select.indexOf(a.id) > -1) {
                    return __assign(__assign({}, a), { selected: true });
                }
                else if (deselect.indexOf(a.id) > -1) {
                    return __assign(__assign({}, a), { selected: false });
                }
                return a;
            });
            newState.arrows = state.arrows.map(function (a) {
                if (select.indexOf(a.id) > -1) {
                    return __assign(__assign({}, a), { selected: true });
                }
                else if (deselect.indexOf(a.id) > -1) {
                    return __assign(__assign({}, a), { selected: false });
                }
                return a;
            });
            return newState;
        };
    };
    return DeselectAndSelect;
}());

// Changes the selection state of apparatus to selected.
// Currently assumes apparatus ID.
var Select = /** @class */ (function (_super) {
    __extends(Select, _super);
    function Select(ids) {
        return _super.call(this, { select: ids }) || this;
    }
    return Select;
}(DeselectAndSelect));

var Deselect = /** @class */ (function (_super) {
    __extends(Deselect, _super);
    function Deselect(ids) {
        return _super.call(this, { deselect: ids }) || this;
    }
    return Deselect;
}(DeselectAndSelect));

var Flip = /** @class */ (function () {
    function Flip(apparatus, opts) {
        this.apparatus = apparatus;
        this.oldRotation = apparatus.rotation;
        if (opts) {
            this.newRotation = opts.vertical ? 180 - this.oldRotation : -this.oldRotation;
        }
        else {
            this.newRotation = this.oldRotation;
        }
    }
    Flip.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("Flip", function (store) { return (__assign(__assign({}, store), { items: store.items.map(function (i) { return i.id == _this.apparatus.id ? __assign(__assign({}, i), { flipped: !_this.apparatus.flipped, rotation: _this.newRotation }) : i; }) })); });
    };
    Flip.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("Undo-Flip", function (store) { return (__assign(__assign({}, store), { items: store.items.map(function (i) { return i.id == _this.apparatus.id ? __assign(__assign({}, i), { flipped: _this.apparatus.flipped, rotation: _this.oldRotation }) : i; }) })); });
    };
    return Flip;
}());

var AddApparatus = /** @class */ (function () {
    function AddApparatus(apparatuses) {
        this.apparatuses = apparatuses;
        this.groupInformation = new store_store__WEBPACK_IMPORTED_MODULE_1__["GroupsOperationData"]();
        for (var _i = 0, apparatuses_1 = apparatuses; _i < apparatuses_1.length; _i++) {
            var apparatus = apparatuses_1[_i];
            if (apparatus.parentGroup) {
                this.groupInformation.add(apparatus.parentGroup, apparatus.id);
            }
        }
    }
    AddApparatus.prototype.execute = function () {
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addToGroup"])(this.groupInformation));
        }
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addItems"])(this.apparatuses));
    };
    AddApparatus.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeItems"])(this.apparatuses.map(function (a) { return a.id; })));
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeFromGroup"])(this.groupInformation));
        }
    };
    return AddApparatus;
}());

var DeleteApparatus = /** @class */ (function () {
    function DeleteApparatus(apparatuses) {
        this.apparatuses = apparatuses;
        this.groupInformation = new store_store__WEBPACK_IMPORTED_MODULE_1__["GroupsOperationData"]();
        this.itemsWithIndex = [];
        for (var _i = 0, apparatuses_2 = apparatuses; _i < apparatuses_2.length; _i++) {
            var apparatus = apparatuses_2[_i];
            if (apparatus.parentGroup) {
                this.groupInformation.remove(apparatus.parentGroup, apparatus.id);
            }
            this.itemsWithIndex.push({ item: apparatus, index: store_store__WEBPACK_IMPORTED_MODULE_1__["default"].items().indexOf(apparatus) });
        }
    }
    DeleteApparatus.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeItems"])(this.apparatuses.map(function (a) { return a.id; })));
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeFromGroup"])(this.groupInformation));
        }
    };
    DeleteApparatus.prototype.undo = function () {
        // Add the group first. If the item is added first, it will
        // contain group information referring to a group that does
        // not yet exist.
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addToGroup"])(this.groupInformation));
        }
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addItemsAtIndices"])(this.itemsWithIndex));
    };
    return DeleteApparatus;
}());

var UpdateAppearance = /** @class */ (function () {
    function UpdateAppearance(id, key, value, previousValue) {
        this.id = id;
        this.key = key;
        this.value = value;
        this.previousValue = previousValue;
    }
    UpdateAppearance.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateAppearance"])(this.id, this.key, this.value));
    };
    UpdateAppearance.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateAppearance"])(this.id, this.key, this.previousValue));
    };
    return UpdateAppearance;
}());

var UpdateItemsAppearance = /** @class */ (function () {
    function UpdateItemsAppearance(key, values) {
        this.key = key;
        this.values = values;
        this.previousValues = values.map(function (v) { return ({ id: v.id, value: v.previousValue }); });
    }
    UpdateItemsAppearance.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateItemsAppearance"])(this.key, this.values));
    };
    UpdateItemsAppearance.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateItemsAppearance"])(this.key, this.previousValues));
    };
    return UpdateItemsAppearance;
}());

/**
 * Update multiple appearance properties on one or multiple items of the same type.
 * Note that this command only makes shallow copies!
 */
var UpdateAppearanceProperties = /** @class */ (function () {
    function UpdateAppearanceProperties(id_or_ids, newAppearance, previousAppearance) {
        this.id_or_ids = id_or_ids;
        this.newAppearance = __assign({}, newAppearance);
        this.prevAppearance = __assign({}, previousAppearance);
    }
    UpdateAppearanceProperties.prototype.execute = function () {
        if (Array.isArray(this.id_or_ids)) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateItemsAppearanceProperties"])(this.id_or_ids, this.newAppearance));
        }
        else {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateAppearanceProperties"])(this.id_or_ids, this.newAppearance));
        }
    };
    UpdateAppearanceProperties.prototype.undo = function () {
        if (Array.isArray(this.id_or_ids)) {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateItemsAppearanceProperties"])(this.id_or_ids, this.newAppearance));
        }
        else {
            store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["updateAppearanceProperties"])(this.id_or_ids, this.prevAppearance));
        }
    };
    return UpdateAppearanceProperties;
}());

var UpdateLiquidAmount = /** @class */ (function () {
    function UpdateLiquidAmount(values) {
        this.valuesMap = {};
        this.previousValuesMap = {};
        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {
            var value = values_1[_i];
            this.valuesMap[value.id.id] = value.value;
            this.previousValuesMap[value.id.id] = value.previousValue;
        }
    }
    UpdateLiquidAmount.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquid", this.mutator(this.valuesMap));
    };
    UpdateLiquidAmount.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquid", this.mutator(this.previousValuesMap));
    };
    UpdateLiquidAmount.prototype.mutator = function (mutations) {
        return (function (store) {
            var newStore = __assign({}, store);
            newStore.items = store.items.map(function (i) { return mutations[i.id.id] !== undefined && i.liquid
                ? __assign(__assign({}, i), { liquid: __assign(__assign({}, i.liquid), { amountRatio: mutations[i.id.id] }) }) : i; });
            return newStore;
        });
    };
    return UpdateLiquidAmount;
}());

var UpdateLiquidColor = /** @class */ (function () {
    function UpdateLiquidColor(values) {
        this.valuesMap = {};
        this.previousValuesMap = {};
        for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {
            var value = values_2[_i];
            this.valuesMap[value.id.id] = value.value;
            this.previousValuesMap[value.id.id] = value.previousValue;
        }
    }
    UpdateLiquidColor.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquidColor", this.mutator(this.valuesMap));
    };
    UpdateLiquidColor.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquidColor", this.mutator(this.previousValuesMap));
    };
    UpdateLiquidColor.prototype.mutator = function (mutations) {
        return (function (store) {
            var newStore = __assign({}, store);
            newStore.items = store.items.map(function (i) { return mutations[i.id.id] !== undefined && i.liquid
                ? __assign(__assign({}, i), { liquid: __assign(__assign({}, i.liquid), { color: mutations[i.id.id] }) }) : i; });
            return newStore;
        });
    };
    return UpdateLiquidColor;
}());

var UpdateLiquidAlpha = /** @class */ (function () {
    function UpdateLiquidAlpha(values) {
        this.valuesMap = {};
        this.previousValuesMap = {};
        for (var _i = 0, values_3 = values; _i < values_3.length; _i++) {
            var value = values_3[_i];
            this.valuesMap[value.id.id] = value.value;
            this.previousValuesMap[value.id.id] = value.previousValue;
        }
    }
    UpdateLiquidAlpha.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquidAlpha", this.mutator(this.valuesMap));
    };
    UpdateLiquidAlpha.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["default"].dispatchFn("UpdateLiquidAlpha", this.mutator(this.previousValuesMap));
    };
    UpdateLiquidAlpha.prototype.mutator = function (mutations) {
        return (function (store) {
            var newStore = __assign({}, store);
            newStore.items = store.items.map(function (i) { return mutations[i.id.id] !== undefined && i.liquid
                ? __assign(__assign({}, i), { liquid: __assign(__assign({}, i.liquid), { alpha: mutations[i.id.id] }) }) : i; });
            return newStore;
        });
    };
    return UpdateLiquidAlpha;
}());



/***/ }),

/***/ "X3Bg":
/*!****************************!*\
  !*** ./src/arrows/tool.ts ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var arrows_type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! arrows/type */ "fXqh");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils */ "fdqv");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};










/** Minimum length of the arrow before the arrow is shown. */
var MIN_DELTA_LENGTH_SHOW_ARROW = 20.0;
/** Arrow offset, from start to end, when no arow is shown.*/
var NO_ARROW_END_OFFSET = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 15);
var ArrowTool = /** @class */ (function (_super) {
    __extends(ArrowTool, _super);
    function ArrowTool(layers, app) {
        var _this = _super.call(this) || this;
        /** Template arrow data to use when creating new diagrams. */
        _this.templateArrow = arrows_type__WEBPACK_IMPORTED_MODULE_3__["Arrow"].defaultArrow;
        _this.onMouseDown = function (event) {
        };
        _this.onMouseDrag = function (event) {
            _this.appInterface.setArrow(_this.createArrow(event, store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].TEMP_ARROW));
        };
        _this.onMouseUp = function (event) {
            Object(utils__WEBPACK_IMPORTED_MODULE_9__["crumb"])("ui", "Add arrow");
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Add arrow");
            var id = store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].mint("arrow");
            var newArrowCommand = new arrows_command__WEBPACK_IMPORTED_MODULE_2__["AddArrow"]([_this.createArrow(event, id)]);
            command_command__WEBPACK_IMPORTED_MODULE_5__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_5__["Sequence"]([
                newArrowCommand,
                new command_basic__WEBPACK_IMPORTED_MODULE_4__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_8__["default"].selectedObjectsID()),
                new command_basic__WEBPACK_IMPORTED_MODULE_4__["Select"]([id]),
            ]));
            // Clean up temporary arrow.
            _this.appInterface.setArrow();
        };
        _this.appInterface = app;
        return _this;
    }
    ArrowTool.prototype.createArrow = function (event, id) {
        var deltaVector = event.point.subtract(event.downPoint);
        // Checks if arrow is too short.
        var showArrow = deltaVector.length > MIN_DELTA_LENGTH_SHOW_ARROW;
        // Calculates angle of arrow.
        var angle = deltaVector.angle; //Calculates angle of arrow
        if (paper__WEBPACK_IMPORTED_MODULE_6__["Key"].modifiers.shift) {
            // Snaps arrow to multiples of 45 degrees.
            var roundedAngle = ((angle / 45).round()) * 45;
            deltaVector.angle = roundedAngle;
            event.point = event.downPoint.add(deltaVector);
        }
        return __assign(__assign({}, this.templateArrow), { id: id, start: event.downPoint, end: showArrow ? event.point : event.downPoint.add(NO_ARROW_END_OFFSET), showArrow: showArrow, selected: false });
    };
    ArrowTool.prototype.updateTemplateArrow = function (data) {
        this.templateArrow = __assign(__assign({}, this.templateArrow), data);
    };
    return ArrowTool;
}(paper__WEBPACK_IMPORTED_MODULE_6__["Tool"]));
/* harmony default export */ __webpack_exports__["default"] = (ArrowTool);


/***/ }),

/***/ "X9Jd":
/*!*********************************!*\
  !*** ./src/ordering/reorder.ts ***!
  \*********************************/
/*! exports provided: reorder, createSendToBackIndices, createMoveToFrontIndices, createMoveForwardIndices, createSendBackwardIndices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reorder", function() { return reorder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSendToBackIndices", function() { return createSendToBackIndices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMoveToFrontIndices", function() { return createMoveToFrontIndices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMoveForwardIndices", function() { return createMoveForwardIndices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSendBackwardIndices", function() { return createSendBackwardIndices; });
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
/**
 * Returns a shallow copy of the input, with applied reorderings.
 * Both "from" and "to" arguments MUST be in increasing order.
 */
function reorder(input, from, to) {
    var copy = __spreadArrays(input);
    var toMove = [];
    for (var i = 0; i < from.length; i++) {
        toMove[i] = copy.splice(from[i] - i, 1)[0];
    }
    for (var i = 0; i < from.length; i++) {
        copy.splice(to[i], 0, toMove[i]);
    }
    return copy;
}
function createSendToBackIndices(indices) {
    var c = [];
    for (var i = 0; i < indices.length; i++) {
        c[i] = i;
    }
    return c;
}
function createMoveToFrontIndices(indices, length) {
    var c = [];
    for (var i = 0; i < indices.length; i++) {
        c[i] = length - indices.length + i;
    }
    return c;
}
function createMoveForwardIndices(indices, length) {
    var max = indices[indices.length - 1];
    return createMoveToFrontIndices(indices, Math.min(max + 2, length));
}
function createSendBackwardIndices(indices) {
    var min = Math.max(0, indices[0] - 1);
    var c = [];
    for (var i = 0; i < indices.length; i++) {
        c[i] = min + i;
    }
    return c;
}


/***/ }),

/***/ "XKwN":
/*!**********************************************!*\
  !*** ./src/apparatus/library/shapes/line.ts ***!
  \**********************************************/
/*! exports provided: Line */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Line", function() { return Line; });
/* harmony import */ var apparatus_driver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/driver */ "ScPQ");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var Line = /** @class */ (function () {
    function Line() {
        this.shouldUseBoundsCenter = true;
        this.drivers = [
            __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_0__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end1x: p.x, end1y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.end1x, a.end1y); }, scale: 1.0, constraints: function (a, modifiers) {
                    if (modifiers.shift) {
                        var delta = new paper__WEBPACK_IMPORTED_MODULE_3__["Point"](a.end1x, a.end1y).subtract([a.end2x, a.end2y]);
                        var axis = delta.clone();
                        axis.angle = Math.round(delta.angle / 45) * 45;
                        var modifiedDelta = delta.project(axis);
                        return {
                            end1x: a.end2x + modifiedDelta.x,
                            end1y: a.end2y + modifiedDelta.y
                        };
                    }
                    return;
                } }),
            __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_0__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end2x: p.x, end2y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.end2x, a.end2y); }, scale: 1.0, constraints: function (a, modifiers) {
                    if (modifiers.shift) {
                        var delta = new paper__WEBPACK_IMPORTED_MODULE_3__["Point"](a.end2x, a.end2y).subtract([a.end1x, a.end1y]);
                        var axis = delta.clone();
                        axis.angle = Math.round(delta.angle / 45) * 45;
                        var modifiedDelta = delta.project(axis);
                        return {
                            end2x: a.end1x + modifiedDelta.x,
                            end2y: a.end1y + modifiedDelta.y
                        };
                    }
                    return;
                } }),
        ];
    }
    Line.prototype.render = function (a) {
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[a.end1x, a.end1y]], [[a.end2x, a.end2y]]));
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].StrokeOnly.apply(graphic, a);
        if (a.dashed) {
            graphic.dashArray = [10, 8];
        }
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].bounds(graphic),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0)
        };
    };
    Line.properties = {
        label: "Line",
        canContainLiquids: false,
        defaultAppearance: __assign({ end1x: -100, end1y: 100, end2x: 100, end2y: -100, dashed: false }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].StrokeOnly.defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].StrokeOnly.specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].header,
            { spec: "checkbox", key: "dashed", label: "Dashed" },
        ]),
    };
    return Line;
}());



/***/ }),

/***/ "Xutw":
/*!**************************************************!*\
  !*** ./src/apparatus/library/heating/beehive.ts ***!
  \**************************************************/
/*! exports provided: Beehive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Beehive", function() { return Beehive; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Beehive = /** @class */ (function () {
    function Beehive() {
    }
    Beehive.prototype.render = function (appearance) {
        var height = appearance.height;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({});
        graphic.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(3, -height / 3));
        graphic.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(3, -height / 3));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(3, -height / 3));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(25, 0));
        graphic.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(25, 0));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(25, 0));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(9, height));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = graphic.bounds.toShape();
        return {
            graphic: graphic,
            hitShape: hitShape,
            snapping: [
                graphic.placeable(),
                graphic.topEdgeAsPlaceableSurface(),
            ],
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(85, 0)
        };
    };
    Beehive.properties = {
        label: "Beehive stand",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            height: 40
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 30, max: 50
            }
        ],
    };
    return Beehive;
}());



/***/ }),

/***/ "XwMJ":
/*!******************************************************!*\
  !*** ./src/apparatus/library/distillation/liebig.ts ***!
  \******************************************************/
/*! exports provided: LiebigCondenser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LiebigCondenser", function() { return LiebigCondenser; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_condensers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/condensers */ "ZaQ3");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var LiebigCondenser = /** @class */ (function () {
    function LiebigCondenser() {
    }
    LiebigCondenser.isBoostRequiredForAppearance = function (appearance) {
        return apparatus_library_condensers__WEBPACK_IMPORTED_MODULE_2__["CommonCondenser"].isBoostRequiredForAppearance(appearance);
    };
    LiebigCondenser.prototype.render = function (appearance) {
        var ports = appearance.ports, height = appearance.height;
        var _a = Object(apparatus_library_condensers__WEBPACK_IMPORTED_MODULE_2__["condenserCaseShape"])(height, 15, ports), casing = _a.group, snapping = _a.snap;
        var insideTube1 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-7.5, 0]], [[-7.5, 10]], [[-5, 25]], [[-5, height - 25]], [[-7.5, height - 10]], [[-7.5, height]]));
        var insideTube2 = insideTube1.clone();
        insideTube2.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([casing, insideTube1, insideTube2]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height / 2)
        };
    };
    LiebigCondenser.properties = {
        label: "Liebig Condenser",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: __assign({}, apparatus_library_condensers__WEBPACK_IMPORTED_MODULE_2__["CommonCondenser"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_condensers__WEBPACK_IMPORTED_MODULE_2__["CommonCondenser"].appearanceSpecs),
    };
    return LiebigCondenser;
}());



/***/ }),

/***/ "XwSK":
/*!******************************************************!*\
  !*** ./src/apparatus/library/distillation/graham.ts ***!
  \******************************************************/
/*! exports provided: GrahamCondenser2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GrahamCondenser2", function() { return GrahamCondenser2; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _condensers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../condensers */ "ZaQ3");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var GrahamCondenser2 = /** @class */ (function () {
    function GrahamCondenser2() {
    }
    GrahamCondenser2.isBoostRequiredForAppearance = function (appearance) {
        return _condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].isBoostRequiredForAppearance(appearance);
    };
    GrahamCondenser2.prototype.render = function (appearance) {
        var ports = appearance.ports, height = appearance.height;
        var _a = Object(_condensers__WEBPACK_IMPORTED_MODULE_3__["condenserCaseShape"])(height, 15, ports), casing = _a.group, snapping = _a.snap;
        var insideTube1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[7.5, 0]], [[7.5, 10]], [[5, 25]]));
        var insideTube2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-7.5, 0]], [[-7.5, 10]], [[-5, 25]]));
        var twists = Math.floor((height - 70) / 10);
        for (var i = 0; i < twists; i++) {
            insideTube1.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[3, 10 * i + 38],
                i == 0 ? [0, 0] : [10, -5],
                i == twists - 1 ? [0, 0] : [10, 5]]));
            insideTube2.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-3, 10 * i + 43],
                i == 0 ? [0, 0] : [-10, -5],
                i == twists - 1 ? [0, 0] : [-10, 5]]));
        }
        insideTube1.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[5, height - 25]], [[7.5, height - 10]], [[7.5, height]]));
        insideTube2.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, height - 25]], [[-7.5, height - 10]], [[-7.5, height]]));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([casing, insideTube1, insideTube2]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height / 2)
        };
    };
    GrahamCondenser2.properties = {
        label: "Graham Condenser",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: __assign({}, _condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].defaultAppearance),
        appearanceSpecs: __spreadArrays(_condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].appearanceSpecs),
    };
    return GrahamCondenser2;
}());



/***/ }),

/***/ "Y0Cy":
/*!*************************************************************!*\
  !*** ./src/apparatus/library/transportation/drop_funnel.ts ***!
  \*************************************************************/
/*! exports provided: DroppingFunnel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DroppingFunnel", function() { return DroppingFunnel; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_tap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/tap */ "ndDi");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};





/**
 * See https://en.wikipedia.org/wiki/Dropping_funnel
 * TODO: Add markers
 */
var DroppingFunnel = /** @class */ (function () {
    function DroppingFunnel() {
    }
    DroppingFunnel.isBoostRequiredForAppearance = function (a) {
        return a.type == "pressure-equalising";
    };
    DroppingFunnel.prototype.render = function (appearance) {
        var topInlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-11, -20]], [[11, -20]], [[9, 10]], [[-9, 10]]));
        topInlet.closePath();
        var body = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 50, 130, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 25);
        var spout = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 125, 10, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
        // Create parts for the liquid mask.
        var liquidMask;
        if (_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].isClosed(appearance.tapOpening)) {
            // Tap is closed. Create a very thin shape for the spout.
            liquidMask = body.unite(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 125, 0.001, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER)));
        }
        else {
            liquidMask = body.unite(spout);
        }
        // Outline shape.
        var shape;
        if (appearance.type == "simple") {
            var combinedShape = body.unite(topInlet);
            shape = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 4);
        }
        else { // With pressure-equalising arm.
            var arm = pressureEqualisingArm();
            var combinedShape = body.unite(topInlet).unite(arm);
            shape = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 4, 12);
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
        // "spout" is only used to create the liquid mask.
        // Visible spout is drawn separately, using 2 lines.
        var spoutLeftWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, 135]], [[-5, 225]]));
        var spoutRightWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[5, 135]], [[5, 225]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(spoutLeftWall, spoutRightWall);
        // Create stop cock.
        var stopCock = Object(_common_tap__WEBPACK_IMPORTED_MODULE_3__["createTap"])(appearance.tapOpening);
        stopCock.position.y += 135;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([shape, spoutLeftWall, spoutRightWall, stopCock]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(20, 120), 10, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10));
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(0, 4));
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
        };
    };
    DroppingFunnel.properties = {
        label: "Dropping Funnel",
        canContainLiquids: true,
        flippable: true,
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.65 }),
        defaultAppearance: __assign({ type: "simple" }, _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].defaultAppearance),
        appearanceSpecs: [
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "simple", label: "Simple" },
                    { value: "pressure-equalising", label: "Pressure-equalising", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpec,
        ],
    };
    return DroppingFunnel;
}());

function pressureEqualisingArm() {
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 5]], [[35, 5], , [7, 0]], [[45, 15]], [[45, 140], , [0, 20]], [[15, 185]], [[11, 220]], [[-11, 220]], [[-14, 180], , [-5, -18]], [[17, 174], [1, -8]], [[37, 143], [0, 10]], [[37, 20]], [[30, 12], [7, 0]], [[0, 12]]));
}


/***/ }),

/***/ "Y6iX":
/*!*******************************!*\
  !*** ./src/arrows/command.ts ***!
  \*******************************/
/*! exports provided: AddArrow, DeleteArrows, UpdateArrowProperties, addArrowMutator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddArrow", function() { return AddArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeleteArrows", function() { return DeleteArrows; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateArrowProperties", function() { return UpdateArrowProperties; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addArrowMutator", function() { return addArrowMutator; });
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var AddArrow = /** @class */ (function () {
    function AddArrow(arrows) {
        this.arrows = arrows;
        this.groupInformation = new store_store__WEBPACK_IMPORTED_MODULE_2__["GroupsOperationData"]();
        for (var _i = 0, arrows_1 = arrows; _i < arrows_1.length; _i++) {
            var arrow = arrows_1[_i];
            if (arrow.parentGroup) {
                this.groupInformation.add(arrow.parentGroup, arrow.id);
            }
        }
    }
    AddArrow.prototype.execute = function () {
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addToGroup"])(this.groupInformation));
        }
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("AddArrow", addMutator(this.arrows));
    };
    AddArrow.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("RemoveArrow", removeMutator(this.arrows.map(function (a) { return a.id; })));
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeFromGroup"])(this.groupInformation));
        }
    };
    return AddArrow;
}());

var DeleteArrows = /** @class */ (function () {
    function DeleteArrows(arrowData) {
        this.arrowData = arrowData;
        this.groupInformation = new store_store__WEBPACK_IMPORTED_MODULE_2__["GroupsOperationData"]();
        for (var _i = 0, arrowData_1 = arrowData; _i < arrowData_1.length; _i++) {
            var arrow = arrowData_1[_i];
            if (arrow.parentGroup) {
                this.groupInformation.add(arrow.parentGroup, arrow.id);
            }
        }
    }
    DeleteArrows.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("DeleteArrow", removeMutator(this.arrowData.map(function (a) { return a.id; })));
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["removeFromGroup"])(this.groupInformation));
        }
    };
    DeleteArrows.prototype.undo = function () {
        // Add group information first
        if (this.groupInformation.hasData()) {
            store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["addToGroup"])(this.groupInformation));
        }
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Undo-DeleteArrow", addMutator(this.arrowData));
    };
    return DeleteArrows;
}());

/** Generic method to update Arrow Data. Should replace all the UpdateArrowX commands. */
var UpdateArrowProperties = /** @class */ (function () {
    function UpdateArrowProperties(values) {
        this.valuesMap = {};
        this.previousValuesMap = {};
        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {
            var value = values_1[_i];
            this.valuesMap[value.id.id] = value.value;
            this.previousValuesMap[value.id.id] = value.previousValue;
        }
    }
    UpdateArrowProperties.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("UpdateArrowProperties", function (store) { return mutateArrowWithPartial(store, _this.valuesMap); });
    };
    UpdateArrowProperties.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("UpdateArrowProperties", function (store) { return mutateArrowWithPartial(store, _this.previousValuesMap); });
    };
    return UpdateArrowProperties;
}());

// Mutator methods that modify the store.
function addMutator(data) {
    return function (state) {
        var _a;
        var newState = __assign({}, state);
        (_a = newState.arrows).push.apply(_a, data);
        return newState;
    };
}
function removeMutator(ids) {
    return function (state) {
        var newState = __assign({}, state);
        newState.arrows = state.arrows.filter(store_id__WEBPACK_IMPORTED_MODULE_1__["ID"].notMatching(ids));
        return newState;
    };
}
var mutateArrowWithPartial = function (store, mutations) { return (__assign(__assign({}, store), { arrows: store.arrows.map(function (a) { return mutations[a.id.id] !== undefined ? __assign(__assign({}, a), mutations[a.id.id]) : a; }) })); };
var addArrowMutator = addMutator;


/***/ }),

/***/ "YJ2m":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/accessories/bottle.ts ***!
  \*****************************************************/
/*! exports provided: Bottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bottle", function() { return Bottle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var Bottle = /** @class */ (function () {
    function Bottle() {
    }
    Bottle.prototype.render = function (appearance) {
        var scaleFactor = appearance.height / 210;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[9, 2]], [[9, 15], , [0, 7]], [[22, 32], [-7, -9], [8, 11]], [[30, 65], , [-2, 0]], [[30, 71], [-2, 0]], [[30, 106], , [-2, 0]], [[30, 112], [-2, 0]], [[30, 200], , [-4, 14]], [[9, 207], [4, 4], [-4, 5]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        shape.scale(scaleFactor);
        var liquidMask = shape.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(shape);
        var undercap = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 10, 24, 3, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
            .withFill("#ffffff80")
            .withStroke("thinner", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke);
        var capStuff = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([undercap]);
        if (appearance.cap) {
            var capColor = "#44a8d4".color();
            var cap = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 24, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
                .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(capColor))
                .withStroke("default", capColor.ladd(-10).hex());
            capStuff.addChild(cap);
        }
        capStuff.scale(scaleFactor, shape.bounds.center);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([shape, capStuff]);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            pivot: shape.bounds.center,
            snapping: shape.placeable(),
        };
    };
    Bottle.properties = {
        label: "Plastic Bottle",
        canContainLiquids: true,
        defaultAppearance: {
            height: 210,
            cap: true,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Size",
                min: 200, max: 330
            },
            { spec: "checkbox", key: "cap", label: "Show cap" },
        ],
    };
    return Bottle;
}());



/***/ }),

/***/ "YKxB":
/*!***************************!*\
  !*** ./src/text/parse.ts ***!
  \***************************/
/*! exports provided: ChemMark */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChemMark", function() { return ChemMark; });
/* harmony import */ var ext_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ext/js */ "A5Ua");
/* harmony import */ var text_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! text/ui */ "JHtj");


var SUBSTITUTIONS = [
    [" ⟵>", " ⇌"],
    [" ->", " ⟶"],
    [" <-", " ⟵"],
    [" degC", " °C"],
    [" degF", " °F"],
];
/**
 * ChemMark is a codename for a technology for writing text
 * containing chemical formulas and other scientific
 */
var ChemMark;
(function (ChemMark) {
    /** Description to use in the UI on toggles */
    ChemMark.uiDescription = "Smart detection of units and chemical formulas";
    /** Limit on the number of characters where ChemMark will be applied. */
    ChemMark.FREE_TIER_CHAR_LIMIT = 7;
    ChemMark.Hint = text_ui__WEBPACK_IMPORTED_MODULE_1__["PropertyPanelHint"];
    /** Parse the text without ChemMark features. */
    function parseBasic(input) {
        var formattedText = { segments: [] };
        // Break it down by newlines.
        var lines = input.split("\n");
        // Insert newline between every line.
        for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
            var line = lines_1[_i];
            formattedText.segments.push({ type: "normal", text: line });
            formattedText.segments.push({ type: "newline" });
        }
        // Drop the last newline.
        formattedText.segments.pop();
        return formattedText;
    }
    ChemMark.parseBasic = parseBasic;
    function parseSmartLimited(input) {
        var text = parseSmart(input);
        if (input.length > ChemMark.FREE_TIER_CHAR_LIMIT) {
            // Add warning emojis at start and end.
            text.segments.unshift({
                type: "normal",
                text: "⚠️"
            });
            text.segments.push({
                type: "normal",
                text: "⚠️"
            });
        }
        return text;
    }
    ChemMark.parseSmartLimited = parseSmartLimited;
    function parseSmart(input) {
        var parseState = "normal";
        var segments = [];
        var currentSegment = "";
        function maybeCloseCurrentSegment() {
            if (currentSegment != "") {
                switch (parseState) {
                    case "normal":
                        segments.push({ type: "normal", text: currentSegment });
                        break;
                    case "number":
                        segments.push({ type: "subscript", text: currentSegment });
                        break;
                }
            }
        }
        for (var _i = 0, input_1 = input; _i < input_1.length; _i++) {
            var char = input_1[_i];
            if (char == "\n") {
                // Close current segment (if any), insert a newline and reset for new parsing.
                maybeCloseCurrentSegment();
                segments.push({ type: "newline" });
                currentSegment = "";
                parseState = "normal";
                continue;
            }
            switch (parseState) {
                case "normal":
                    if ((char == '2' || char == '3') && endsInUnit(currentSegment)) {
                        // This is a unit.
                        segments.push({ type: "normal", text: currentSegment });
                        segments.push({ type: "superscript", text: char });
                        parseState = "normal";
                        currentSegment = '';
                    }
                    else if (isNumeric(char) && isInsideFormula(currentSegment)) {
                        // Switch to subscript.
                        segments.push({ type: "normal", text: currentSegment });
                        parseState = "number";
                        currentSegment = char;
                    }
                    else if (isPlusMinus(char) && isInsideFormula(currentSegment)) {
                        segments.push({ type: "normal", text: currentSegment });
                        segments.push({ type: "superscript", text: char });
                        currentSegment = "";
                    }
                    else if (isPlusMinus(char) && currentSegment == "" && isLastSegmentSuperscriptCharge(segments, char)) {
                        // ++ -> 2+
                        segments[segments.length - 1].text = "2" + char;
                    }
                    else if (currentSegment.length >= 2
                        && (char === "C" || char === "F")
                        && (currentSegment.last(1) === "o")
                        && isNumeric(currentSegment[currentSegment.length - 2])) {
                        // Temperatures. (oF and oC)
                        currentSegment = currentSegment.replaceLast(1, "°") + char;
                    }
                    else {
                        currentSegment += char;
                        currentSegment = checkSubstitutions(currentSegment);
                    }
                    break;
                case "number":
                    if (isNumeric(char)) {
                        currentSegment += char;
                    }
                    else if (isPlusMinus(char)) {
                        // This is an ion.
                        // We only support single-digit charges, hence if the current
                        // segment is longer than 1, it also contains an atom count.
                        if (currentSegment.length > 1) {
                            // Charge and atom number.
                            segments.push({
                                type: "subsuperscript",
                                sub: currentSegment.first(currentSegment.length - 1),
                                super: currentSegment.last(1) + char,
                            });
                            parseState = "normal";
                            currentSegment = '';
                        }
                        else if (isChargeNumberHeuristic(currentSegment, segments[segments.length - 1])) {
                            // This is tricky! It could be a charge, or an atom
                            // number and numberless charge. Apply a heuristic.
                            // Just charge.
                            segments.push({ type: "superscript", text: currentSegment + char });
                            parseState = "normal";
                            currentSegment = '';
                        }
                        else {
                            // Charge and atom number.
                            segments.push({
                                type: "subsuperscript",
                                sub: currentSegment,
                                super: char,
                            });
                            parseState = "normal";
                            currentSegment = '';
                        }
                    }
                    else {
                        // Close number and start normal.
                        segments.push({ type: "subscript", text: currentSegment });
                        parseState = "normal";
                        if (char == ".") {
                            // Hydration interpunct. We are relying here on the fact that
                            // most hydrates have the first bit ending in a number, e.g. CuSO4, Ba(OH)2
                            currentSegment = " · ";
                        }
                        else {
                            // Normal character.
                            currentSegment = char;
                        }
                    }
                    break;
            }
        }
        // Add last segment.
        maybeCloseCurrentSegment();
        return {
            segments: segments
        };
    }
    ChemMark.parseSmart = parseSmart;
})(ChemMark || (ChemMark = {}));
function checkSubstitutions(input) {
    for (var _i = 0, SUBSTITUTIONS_1 = SUBSTITUTIONS; _i < SUBSTITUTIONS_1.length; _i++) {
        var _a = SUBSTITUTIONS_1[_i], sequence = _a[0], substitution = _a[1];
        if (input.last(sequence.length) === sequence) {
            return input.replaceLast(sequence.length, substitution);
        }
    }
    return input;
}
function isNumeric(char) {
    return (char >= '0' && char <= '9');
}
function isPlusMinus(char) {
    return (char == '+' || char == '-');
}
function isInsideFormula(segment) {
    var lastChar = segment.last(1);
    return segment.length > 0
        && (isTextCharacter(lastChar)
            || lastChar == ')'
            || lastChar == ']');
}
function isTextCharacter(char) {
    return (char >= 'A' && char <= 'Z') || (char >= 'a' && char <= 'z');
}
/** Exceptions, where the following number is NOT a charge number. */
var NOT_CHARGE_NUMBER_COMPOUNDS = ["PO", "NH", "NO", "VO", "IO"];
/**
 * Heuristic function that determines whether the current
 * number is a charge or an atom number.
 */
function isChargeNumberHeuristic(number, prevSegment) {
    // If the previous segment is quite short, it's likely it's a charge.
    // However, there are exception, such "PO", where it's not a charge number.
    if (prevSegment.type == "subsuperscript" || prevSegment.type == "newline")
        return true;
    var text = extractLastTextCharacters(prevSegment.text);
    if (text.length <= 2 && NOT_CHARGE_NUMBER_COMPOUNDS.indexOf(text) === -1) {
        return true;
    }
    return false;
}
function isLastSegmentSuperscriptCharge(segments, chargeChar) {
    if (segments.length == 0)
        return false;
    var lastSegment = segments[segments.length - 1];
    return lastSegment.type == "superscript"
        && lastSegment.text == chargeChar;
}
/**
 * Extract last part of a string made of solely text characters.
 * E.g. "6 Fe" -> "Fe"
 */
function extractLastTextCharacters(input, limit) {
    var index;
    var lowerBound = limit ? Math.max(input.length - 1 - limit, 0) : 0;
    for (index = input.length - 1; index >= lowerBound; index--) {
        if (!isTextCharacter(input[index])) {
            break;
        }
    }
    return input.substr(index + 1);
}
var UNITS = ["cm", "m", "mm", "dm"];
function endsInUnit(input) {
    var lastCharacters = extractLastTextCharacters(input, 3);
    UNITS.indexOf(lastCharacters);
    return UNITS.indexOf(lastCharacters) !== -1;
}


/***/ }),

/***/ "YNhs":
/*!*******************************************!*\
  !*** ./src/apparatus/library/cylinder.ts ***!
  \*******************************************/
/*! exports provided: Cylinder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cylinder", function() { return Cylinder; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var Cylinder = /** @class */ (function () {
    function Cylinder() {
    }
    Cylinder.prototype.render = function (appearance) {
        // let width = 30
        // let height = 200
        // let baseRadius = 35
        // let baseHeight = 10
        var height = appearance.height;
        var width = 14 + height / 12.5;
        var baseRadius = width * 1;
        var baseHeight = width / 4;
        var cylinder = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]], [[(baseRadius - width / 2), height + baseHeight]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(cylinder.segments[1], 2.0);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(cylinder, -width / 2);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLipsReversed"])(cylinder);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(cylinder);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([cylinder]);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addMarkers"])(graphic, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-5.0, height), 0, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 10.0));
        var hitShape = [
            paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-width, 0, width, height)),
            paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-width / 2 - baseRadius, height, baseRadius * 2, baseHeight))
        ];
        var liquidMask = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-width, 0, width, height));
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: graphic.placeable(),
        };
    };
    Cylinder.properties = {
        label: "Graduated cylinder",
        canContainLiquids: true,
        defaultAppearance: {
            height: 200,
        },
        appearanceSpecs: [
            {
                spec: "slider", label: "Size", key: "height",
                min: 80, max: 300,
            }
        ],
    };
    return Cylinder;
}());



/***/ }),

/***/ "YW4J":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/electrical/powerpack.ts ***!
  \*******************************************************/
/*! exports provided: PowerPack, createJack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PowerPack", function() { return PowerPack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createJack", function() { return createJack; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var JACK_STROKE = "#333333";
var switchText = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["StyledTextCreator"]({
    fontFamily: "sans-serif",
    fontSize: 7,
    fillColor: "#ffffff",
});
var markerTexts = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["StyledTextCreator"]({
    fontFamily: "sans-serif",
    fontSize: 8,
    fillColor: "#888",
    justification: "center"
});
var PowerPack = /** @class */ (function () {
    function PowerPack() {
    }
    PowerPack.prototype.render = function (appearance) {
        var casing = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 185, 100), 3.0)
            .withStroke("default")
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].box(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].deviceGrey.color(), { shift: 0.1 }));
        var dial = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), 20)
            .withStroke("default").withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#555555".color()));
        var dialGroup = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([dial]);
        var dialRange = 270;
        var maxVoltage = 12;
        var minVoltage = 0;
        for (var voltage = minVoltage; voltage <= maxVoltage; voltage++) {
            var angle = ((voltage - minVoltage) / (maxVoltage - minVoltage) - 0.5) * dialRange;
            var marker = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -24), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -27)).withStroke(1.0, "#888888");
            marker.rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
            dialGroup.addChild(marker);
            var text = markerTexts.create(voltage.toString(), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -32).rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0)).add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 3)), voltage == appearance.voltage ? { fontWeight: "bold", fillColor: "#333" } : {});
            dialGroup.addChild(text);
        }
        var currentVoltageMarker = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -6), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -18)).withStroke("default", "#ccc");
        currentVoltageMarker.rotate(((appearance.voltage - minVoltage) / (maxVoltage - minVoltage) - 0.5) * dialRange, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        dialGroup.addChild(currentVoltageMarker);
        dialGroup.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(73, 55);
        // Connection jacks.
        var acJack1 = createJack("#dbc222").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(130, 40));
        var acJack2 = createJack("#dbc222").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(160, 40));
        var dcJack1 = createJack("#f61f2f").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(130, 80));
        var dcJack2 = createJack("#414141").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(160, 80));
        var acLabel = jackLabel("ac").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(145, 25));
        var dcLabel = jackLabel("dc").withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(145, 65));
        // Switch.
        var switchButton = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(15, 20, 13, 30), 2.0)
            .withStroke(3.0, "#222222")
            .withGradientFill("down", [["#333333", 0.0], ["#555555", 0.45], ["#888888", 0.55], ["#999999", 1.0]]);
        var oText = switchText.create("O", Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(22, 29), { fillColor: "#999999" });
        var iText = switchText.create("I", Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(22, 44));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            casing, dialGroup, acJack1, acJack2, dcJack1, dcJack2, acLabel, dcLabel, switchButton,
            oText, iText,
        ]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: casing.placeable(),
        };
    };
    PowerPack.properties = {
        label: "Power pack",
        canContainLiquids: false,
        defaultAppearance: {
            voltage: 8
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "voltage", label: "Voltage",
                min: 0, max: 12
            }
        ],
    };
    return PowerPack;
}());

var createJack = function (color) { return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
    new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), 6).withStroke("thinner", JACK_STROKE).withFill(color),
    new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0), 3).withFill(JACK_STROKE)
]); };
var jackLabel = function (text) { return new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
    new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
        point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 4),
        content: text.toUpperCase(),
        fillColor: "#888",
        fontFamiy: "sans-serif",
        fontSize: 9,
        justification: "center",
    }),
    new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-15, 5]], [[-15, 0]], [[-9, 0]])).withStroke(1.0, "#888"),
    new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[15, 5]], [[15, 0]], [[9, 0]])).withStroke(1.0, "#888"),
]); };


/***/ }),

/***/ "YzqX":
/*!**************************************************!*\
  !*** ./src/apparatus/library/physics/trolley.ts ***!
  \**************************************************/
/*! exports provided: Trolley */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Trolley", function() { return Trolley; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var wheelColor = "#444444".color();
var Trolley = /** @class */ (function () {
    function Trolley() {
    }
    Trolley.prototype.render = function (appearance) {
        var length = appearance.length;
        var height = length / 10 + 20;
        var wheelRadius = height * 0.6;
        var wheelFill = [
            [wheelColor.hex(), 0.6],
            [wheelColor.darken(0.2).hex(), 0.79],
            [wheelColor.hex(), 0.8],
        ];
        var innerWheel = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(length - wheelRadius - 10, height - 10), wheelRadius)
            .withStroke("default")
            .setRadialGradientFill(wheelFill);
        var outerWheel = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(10 + wheelRadius, height - 10), wheelRadius)
            .withStroke("default")
            .setRadialGradientFill(wheelFill);
        var bars = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
            new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(length / 2, 0, 15, length / 3, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].BOTTOM_CENTER))
                .withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedGradients"].cylinderMetal)
        ]);
        var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, length, height), 2.0)
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].wood.stroke)
            .withGradientFill("down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].wood.gradient);
        var stopper = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
            new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 10, 80, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_RIGHT)).withGradientFill("down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedGradients"].metal),
            new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-80, 9]], [[-95, 7]])).mirrorY(15).close().withFill("#111111")
        ]);
        // Assemble.
        var trolleyGroup = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([innerWheel, body, outerWheel]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([stopper, bars, trolleyGroup]);
        return {
            graphic: graphic,
            hitShape: [
                trolleyGroup.bounds.toShape(),
                bars.bounds.toShape(),
                stopper.bounds.toShape(),
            ],
            pivot: body.bounds.center,
            snapping: [
                trolleyGroup.placeable(),
                body.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    Trolley.properties = {
        label: "Trolley",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            length: 300
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 200, max: 350, step: 5, unit: "mm",
            }
        ],
    };
    return Trolley;
}());



/***/ }),

/***/ "Z/tB":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/electrical/voltmeter.ts ***!
  \*******************************************************/
/*! exports provided: SimpleVoltmeter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SimpleVoltmeter", function() { return SimpleVoltmeter; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var SimpleVoltmeter = /** @class */ (function () {
    function SimpleVoltmeter() {
        this.textStyler = new apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["StyledTextCreator"]({
            fontFamily: "sans-serif",
            fillColor: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke
        });
    }
    SimpleVoltmeter.prototype.render = function (appearance) {
        var circle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), appearance.size / 2)
            .withStroke("default").withFill("white");
        var text = this.textStyler.create("V", Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, appearance.size * 0.44 * 0.7), { fontSize: appearance.size * 0.7 });
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([circle, text]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    SimpleVoltmeter.properties = {
        label: "Voltmeter (Symbol)",
        canContainLiquids: false,
        defaultAppearance: {
            size: 60
        },
        appearanceSpecs: [],
    };
    return SimpleVoltmeter;
}());



/***/ }),

/***/ "ZPUE":
/*!*****************************************!*\
  !*** ./src/view/keyboard_shortucts.tsx ***!
  \*****************************************/
/*! exports provided: formatShortcuts, ctrlKey, Key, FAKey, CtrlKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatShortcuts", function() { return formatShortcuts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ctrlKey", function() { return ctrlKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Key", function() { return Key; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FAKey", function() { return FAKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CtrlKey", function() { return CtrlKey; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
// Selection of tools to visually indicate keyboard shorcuts.

/** Converts an array of strings representing keys to look like keyboard keys. */
function formatShortcuts() {
    var shortcuts = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        shortcuts[_i] = arguments[_i];
    }
    return shortcuts.map(function (s) { return formatShortcut(s); }).join(" or ");
}
/** Formats a single keyboard shortcutp. */
function formatShortcut(shortcut) {
    var formatted = "";
    if (shortcut.ctrl) {
        formatted += "<span class=\"keyboardKey\">" + ctrlKey() + "</span> + ";
    }
    formatted += "<span class=\"keyboardKey\">" + shortcut.key + "</span>";
    return formatted;
}
/** Returns true if the current system is a Mac. */
function isMac() {
    return navigator.userAgent.indexOf('Mac') !== -1;
}
/** Returns ⌘ for Macs, Ctrl otherwise. */
function ctrlKey() {
    return isMac() ? "⌘" : "Ctrl";
}
var Key = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
    props.ctrl ? react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](CtrlKey, null),
        " + ") : null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "keyboardKey" }, props.k))); };
var FAKey = function (props) { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "keyboardKey" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa" + props.icon })))); };
var CtrlKey = function () { return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "keyboardKey" }, ctrlKey())); };


/***/ }),

/***/ "ZY6G":
/*!**************************************!*\
  !*** ./src/panel/arrow_panel_ui.tsx ***!
  \**************************************/
/*! exports provided: arrowPanelUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrowPanelUI", function() { return arrowPanelUI; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/text/appearance */ "P6qo");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! panel/appearance_spec_converter */ "Vv2H");
/* harmony import */ var panel_propertyPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! panel/propertyPanel */ "5IfQ");
/* harmony import */ var panel_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! panel/shared */ "fGEM");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var text_parse__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! text/parse */ "YKxB");
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};









var MIN_FONT_SIZE = 8;
var MAX_FONT_SIZE = 25;
function createUpdateCommand(arrows, key, newValue) {
    return new arrows_command__WEBPACK_IMPORTED_MODULE_2__["UpdateArrowProperties"](arrows.map(function (a) {
        var _a, _b;
        return ({ id: a.id, value: (_a = {}, _a[key] = newValue, _a), previousValue: (_b = {}, _b[key] = a[key], _b) });
    }));
}
function getConsistentValue(arrows, key) {
    var value = arrows[0][key];
    if (arrows.length == 1)
        return value;
    for (var _i = 0, arrows_1 = arrows; _i < arrows_1.length; _i++) {
        var arrow = arrows_1[_i];
        if (arrow[key] !== value)
            return;
    }
    return value;
}
/** Creates Panel UI for arrows. */
function arrowPanelUI(selected, arrows, app, tiers) {
    var _a, _b;
    // TODO: Fix this casting.
    var components = arrows.map(function (a) { return app.getObjectComponent(a.id); });
    var styleElements = [
        {
            spec: "slider",
            key: "arrow_font",
            label: "Text size",
            min: MIN_FONT_SIZE,
            max: MAX_FONT_SIZE,
            initialValue: arrows[0].fontSize,
            onStart: function () { return app.setIsInteracting(true); },
            onChange: function (value) {
                components.forEach(function (c) { return c === null || c === void 0 ? void 0 : c.setState({ fontSize: value }); });
            },
            onEnd: function (_, final) {
                app.setIsInteracting(false);
                app.setArrowTemplate({ fontSize: final });
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "fontSize", final));
            }
        },
        {
            spec: "select",
            key: "fontFace",
            label: "Font",
            value: arrows[0].fontFamily,
            options: apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["FONT_FAMILY_OPTIONS"],
            onSelectChange: function (_, value) {
                app.setArrowTemplate({ fontFamily: value });
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "fontFamily", value));
            },
            id: "fontFace",
        },
        tiers.allow("boost") ?
            {
                spec: "color",
                key: "color",
                label: "Colour",
                value: arrows[0].textColor,
                swatches: apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["TEXT_COLOUR_SWATCHES"],
                onColorChange: function (value) {
                    components.forEach(function (c) { return c.setState({ textColor: value }); });
                },
                onColorEnd: function (finalValue) {
                    if (finalValue == arrows[0].textColor)
                        return;
                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "textColor", finalValue));
                },
            } : {
            spec: "radio",
            id: "labelColor",
            key: "color-radio",
            label: "Colour",
            options: Object(panel_shared__WEBPACK_IMPORTED_MODULE_6__["convertDemoSwatchesToRadioOptions"])(apparatus_text_appearance__WEBPACK_IMPORTED_MODULE_1__["DEMO_COLOUR_SWATCHES"]),
            value: (_a = getConsistentValue(arrows, "textColor")) !== null && _a !== void 0 ? _a : panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_4__["SENTINEL_INDETERMINATE_RADIO"],
            onChange: function (previous, final) {
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "textColor", final));
            }
        },
        textAlignToggleButtons(arrows),
    ];
    var consistentShowArrow = getConsistentValue(arrows, "showArrow");
    var consistentEndStyle = getConsistentValue(arrows, "endStyle");
    var arrowSection = [
        {
            spec: "checkbox-group",
            label: "Arrow",
            key: "arrow",
            checkboxes: __spreadArrays([
                {
                    label: "Enable", value: consistentShowArrow, id: "show-arrow",
                    onCheckedChange: function (value) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::showArrow");
                        command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "showArrow", value));
                    }
                }
            ], consistentShowArrow ? [{
                    label: "Show head",
                    value: consistentEndStyle !== undefined ? consistentEndStyle == "triangle" : undefined,
                    id: "show_arrow_head",
                    onCheckedChange: function (value) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::endStyle");
                        var endStyle = value ? "triangle" : "none";
                        command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "endStyle", endStyle));
                        // Update the arrow so that next arrow drawn uses this style.
                        app.setArrowTemplate({ endStyle: endStyle });
                    },
                }] : []),
        }
    ];
    if (consistentShowArrow) {
        arrowSection.push({
            spec: "slider",
            label: "Thickness",
            key: "arrowThickness",
            min: 1.5, max: 6.0, step: 0.5,
            initialValue: arrows[0].arrowThickness,
            tier: "boost",
            onChange: function (value) {
                components.forEach(function (c) { return c === null || c === void 0 ? void 0 : c.setState({ arrowThickness: value }); });
            },
            onEnd: function (_, final) {
                command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "arrowThickness", final));
                // Update template so next arrow uses this thickness.
                app.setArrowTemplate({ arrowThickness: final });
            }
        });
    }
    var currentLabel = getConsistentValue(arrows, "label");
    return {
        title: "Label",
        icon: "font",
        tabs: __spreadArrays([
            {
                type: "text",
                sections: [
                    {
                        header: "Label",
                        icon: "font",
                        elements: [
                            {
                                spec: "textarea",
                                rows: 3,
                                label: "Text",
                                key: "arrow_text",
                                text: currentLabel !== null && currentLabel !== void 0 ? currentLabel : "",
                                placeholder: panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_4__["SENTINEL_TEXT_PLACEHOLDER"].if(currentLabel === undefined),
                                enableReplacements: true,
                                onFocus: function () { app.setIsInteracting(true); },
                                onChange: function (value) {
                                    components.forEach(function (c) { return c === null || c === void 0 ? void 0 : c.setState({ label: value }); });
                                },
                                onEnd: function (previous, final) {
                                    app.setIsInteracting(false);
                                    if (previous == final)
                                        return;
                                    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::text");
                                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "label", final));
                                },
                            },
                        ],
                    },
                    {
                        header: "ChemText",
                        icon: "subscript",
                        elements: [
                            {
                                spec: "checkbox-group",
                                key: "is_chem_mark_enabled",
                                label: text_parse__WEBPACK_IMPORTED_MODULE_8__["ChemMark"].uiDescription,
                                wideLabel: true,
                                checkboxes: [{
                                        label: "",
                                        useSwitch: true,
                                        id: "is_chem_mark_enabled",
                                        value: getConsistentValue(arrows, "isChemMarkEnabled"),
                                        tier: "boost",
                                        allowWhenLocked: true,
                                        onCheckedChange: function (value) {
                                            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("UpdateAppearance", "Arrow::ChemMark");
                                            command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "isChemMarkEnabled", value));
                                        }
                                    }]
                            },
                            react__WEBPACK_IMPORTED_MODULE_7__["createElement"](text_parse__WEBPACK_IMPORTED_MODULE_8__["ChemMark"].Hint, { key: "chemmark_hint", showUpgradeHint: (_b = getConsistentValue(arrows, "isChemMarkEnabled")) !== null && _b !== void 0 ? _b : false })
                        ]
                    }
                ]
            },
            {
                type: "text-style",
                colorDot: getConsistentValue(arrows, "textColor"),
                sections: [
                    {
                        header: "Style",
                        icon: "font",
                        elements: styleElements
                    },
                    {
                        header: "Arrow",
                        icon: "long-arrow-alt-right",
                        elements: arrowSection,
                    },
                ]
            }
        ], (arrows.length > 1 ? Object(panel_propertyPanel__WEBPACK_IMPORTED_MODULE_5__["sectionsForMultipleItems"])(selected, app).tabs : []))
    };
}
var TEXT_ALIGN_OPTIONS = ["left", "center", "right"];
function textAlignToggleButtons(arrows) {
    var consistentValue = getConsistentValue(arrows, "textAlign");
    var currentIndex = consistentValue ? TEXT_ALIGN_OPTIONS.indexOf(consistentValue) : -1;
    return {
        spec: "toggle-horizontal-buttons",
        highlightIndex: currentIndex,
        key: "textAlign",
        label: "Text Align",
        size: "small",
        tier: "boost",
        buttons: TEXT_ALIGN_OPTIONS.map(function (align) {
            return {
                buttonLabel: align.capitalise(),
                icon: "align-" + align,
                onClick: function () {
                    command_command__WEBPACK_IMPORTED_MODULE_3__["commandProcessor"].execute(createUpdateCommand(arrows, "textAlign", align));
                }
            };
        })
    };
}


/***/ }),

/***/ "Za09":
/*!************************************************!*\
  !*** ./src/editing/rotation/rotate_command.ts ***!
  \************************************************/
/*! exports provided: RotateItems */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotateItems", function() { return RotateItems; });
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/store */ "uFCc");


var RotateItems = /** @class */ (function () {
    function RotateItems(values) {
        var _this = this;
        this.executeRotations = {};
        this.undoRotations = {};
        values.forEach(function (value) {
            _this.executeRotations[value.id.id] = value.rotation;
            _this.undoRotations[value.id.id] = value.originalRotation;
        });
    }
    RotateItems.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["setItemsRotation"])(this.executeRotations));
    };
    RotateItems.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_1__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_0__["setItemsRotation"])(this.undoRotations));
    };
    return RotateItems;
}());



/***/ }),

/***/ "ZaQ3":
/*!*********************************************!*\
  !*** ./src/apparatus/library/condensers.ts ***!
  \*********************************************/
/*! exports provided: condenserCaseShape, CommonCondenser, FractionatingColumn, AllihnCondenser, GrahamCondenser, LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "condenserCaseShape", function() { return condenserCaseShape; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommonCondenser", function() { return CommonCondenser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FractionatingColumn", function() { return FractionatingColumn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AllihnCondenser", function() { return AllihnCondenser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GrahamCondenser", function() { return GrahamCondenser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS", function() { return LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




function condenserCaseShape(height, sideletRadius, sidelets) {
    if (sidelets === void 0) { sidelets = "none"; }
    var inletRadius = 15;
    var body = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 36, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 20);
    var inlet = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 3, inletRadius, 23, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER));
    var outlet = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, height - 3, inletRadius, 23, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
    var combinedShape = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["uniteAll"])(body, outlet, inlet);
    var snap = [
        { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height + 20), facing: 180 },
        { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -20), facing: 0 },
    ];
    var graphic;
    if (sidelets == "none") {
        graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 4, 10);
        return { group: graphic, snap: snap };
    }
    // Create sidelets.
    var sidelet = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 30, 50, sideletRadius, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT));
    combinedShape = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["uniteAll"])(combinedShape, sidelet);
    snap.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, 30), facing: 90 });
    if (sidelets != "top-only") {
        var sidelet2 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, height - 30, 50, sideletRadius, sidelets == "same" ? apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT : apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT));
        combinedShape = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["uniteAll"])(combinedShape, sidelet2);
        if (sidelets == "same") {
            graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 4, 9, 13, 18);
            snap.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, height - 30), facing: 90 });
        }
        else {
            graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 3, 8, 13, 18);
            snap.push({ type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-50, height - 30), facing: 270 });
        }
    }
    else {
        graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(combinedShape, 4, 9, 14);
    }
    return {
        group: graphic,
        snap: snap,
    };
}
var CommonCondenser;
(function (CommonCondenser) {
    var NoPorts;
    (function (NoPorts) {
        NoPorts.defaultAppearance = {
            height: 240
        };
        NoPorts.appearanceSpecs = [
            {
                spec: "slider", key: "height", label: "Height",
                min: 200, max: 350, unit: "mm"
            }
        ];
    })(NoPorts = CommonCondenser.NoPorts || (CommonCondenser.NoPorts = {}));
    CommonCondenser.defaultAppearance = {
        ports: "same",
        height: 240,
    };
    CommonCondenser.appearanceSpecs = __spreadArrays(NoPorts.appearanceSpecs, [
        {
            spec: "radio", key: "ports", label: "Ports",
            options: [
                { value: "same", label: "Same side" },
                { value: "opposite", label: "Opposite sides", tier: "boost" },
            ],
            allowSelectingTierLockedOptions: true,
        }
    ]);
    function isBoostRequiredForAppearance(appearance) {
        return appearance.ports === "opposite";
    }
    CommonCondenser.isBoostRequiredForAppearance = isBoostRequiredForAppearance;
})(CommonCondenser || (CommonCondenser = {}));
var FractionatingColumn = /** @class */ (function () {
    function FractionatingColumn() {
    }
    FractionatingColumn.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].fractionating();
        graphic.scale(1.5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        var snapping = { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(77, 10.5), facing: 90 };
        return { graphic: graphic, hitShape: hitShape, snapping: snapping };
    };
    FractionatingColumn.properties = {
        label: "Fractionating Column",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return FractionatingColumn;
}());

var AllihnCondenser = /** @class */ (function () {
    function AllihnCondenser() {
    }
    AllihnCondenser.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].allihn();
        graphic.scale(1.5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape, snapping: LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS };
    };
    AllihnCondenser.properties = {
        label: "Allihn Condenser",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return AllihnCondenser;
}());

var GrahamCondenser = /** @class */ (function () {
    function GrahamCondenser() {
    }
    GrahamCondenser.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].graham();
        graphic.scale(1.5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape, snapping: LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS };
    };
    GrahamCondenser.properties = {
        label: "Graham Condenser",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return GrahamCondenser;
}());

var LIEBIG_GRAHAM_ALLIHN_CONDENSER_SNAPPINGS = [
    { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(51, 26.5), facing: 90 },
    { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(51, 200.5), facing: 90 },
    { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(8, -27), facing: 0 },
    { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(9.25, 247), facing: 180 },
];


/***/ }),

/***/ "Zhen":
/*!****************************************************!*\
  !*** ./src/apparatus/library/biology/other/sun.ts ***!
  \****************************************************/
/*! exports provided: Sun */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sun", function() { return Sun; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var Sun = /** @class */ (function () {
    function Sun() {
    }
    Sun.prototype.render = function (appearance) {
        var sun = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 70);
        sun.setRadialGradientFill([
            ["#face75", 0.5],
            ["#face75aa", 0.51],
            ["#face7500", 1.0]
        ]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([sun]);
        if (appearance.showRays) {
            var arrow = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
                new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(50, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(120, 0)),
                new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[115, -5]], [[120, 0]], [[115, 5]])),
            ]);
            arrow.withStroke(3.0, "#face75");
            var arrow1 = arrow.clone();
            arrow1.position.y += 20;
            var arrow2 = arrow.clone();
            arrow2.position.y -= 20;
            graphic.addChildren([arrow, arrow1, arrow2]);
        }
        graphic.scale(appearance.scale, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)
        };
    };
    Sun.properties = {
        label: "Sun",
        canContainLiquids: false,
        defaultAppearance: {
            showRays: false,
            scale: 1.0,
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "showRays", label: "Rays", subLabel: "Show" },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 1.5, step: 0.01, unit: "%",
            }
        ],
    };
    return Sun;
}());



/***/ }),

/***/ "a0VA":
/*!******************************************************!*\
  !*** ./src/apparatus/library/accessories/balloon.ts ***!
  \******************************************************/
/*! exports provided: Balloon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Balloon", function() { return Balloon; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var DEFLATED_SHAPE = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])(
// v1
// [[39, 40],[-16, -6],[24, -3]],
// [[48, -15],[25, 20],[-42, -2]],
// v2
// [[46, 29],[-33, 13],[22, 1]],
// [[48, -15],[27, 13],[-45, -8]]
// v3
// [[42, 39],[-40, -28],[18, 13]],
// [[48, -15],[18, 12],[-38, -26]],
// v4
[[40, 30], [-33, -7], [15, 3]], [[35, -30], [19, 4], [-40, -9]]);
var Balloon = /** @class */ (function () {
    function Balloon() {
    }
    Balloon.isBoostRequiredForAppearance = function (appearance) {
        return appearance.inflation < 1.0;
    };
    Balloon.prototype.render = function (appearance) {
        var size = appearance.size * 10 / 1.833333;
        var lipRadius = appearance.lipDiameter / 2;
        var neckLength = appearance.neckLength;
        var fillColor = appearance.color.color();
        var strokeColor = fillColor.darken(0.4);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[lipRadius, neckLength], , [5, 0]], [[lipRadius, neckLength - 5]], [[lipRadius, 0]], [[size * appearance.roundness, -size], [0, size / 70 * 40], [0, -size / 70 * 80]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        graphic.close();
        graphic.withStroke("default", strokeColor.hex());
        interpolateSegment(graphic.segments[3], DEFLATED_SHAPE[0], 1.0 - appearance.inflation);
        interpolateSegment(graphic.segments[4], DEFLATED_SHAPE[1], 1.0 - appearance.inflation);
        graphic.fillColor = new paper__WEBPACK_IMPORTED_MODULE_3__["Color"](new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"](apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(fillColor, -20), true), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(graphic.bounds.right * Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(0.8, -0.7, appearance.inflation), graphic.bounds.top * 0.7), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        return {
            graphic: graphic,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
            hitShape: graphic.bounds.toShape()
        };
    };
    Balloon.properties = {
        label: "Balloon",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            size: 14,
            neckLength: 20,
            lipDiameter: 16,
            roundness: 0.7,
            color: "#6ca5ba",
            inflation: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 4, max: 25, step: 0.1, unit: "cm"
            },
            {
                spec: "slider", key: "roundness", label: "Roundness",
                min: 0.5, max: 0.9, step: 0.01, tier: "boost"
            },
            {
                spec: "slider", key: "neckLength", label: "Neck length",
                min: 15, max: 50, unit: "mm", tier: "boost"
            },
            {
                spec: "slider", key: "lipDiameter", label: "Lip diameter",
                min: 10, max: 40, unit: "mm",
            },
            {
                spec: "color", key: "color", label: "Colour",
            },
            // {
            //     spec: "slider", key: "inflation", label: "Air inflation",
            //     min: 0.0, max: 1.0, step: 0.01, unit: "%"
            // },
            {
                spec: "radio", key: "inflation", label: "Shape",
                options: [
                    { value: 1.0, label: "Inflated" },
                    { value: 0.81, label: "Almost inflated", tier: "boost" },
                    { value: 0.42, label: "Semi-inflated", tier: "boost" },
                    { value: 0.08, label: "Deflated", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            }
        ],
    };
    return Balloon;
}());

/** Interpolate between 2 segments. Assumes that both handleIn and handleOut are set.  */
function interpolateSegment(from, to, ratio) {
    var newSegment = new paper__WEBPACK_IMPORTED_MODULE_3__["Segment"](interpolatePointLinear(from.point, to.point, ratio), interpolatePointPolar(from.handleIn, to.handleIn, ratio), interpolatePointPolar(from.handleOut, to.handleOut, ratio));
    from.handleIn = newSegment.handleIn;
    from.handleOut = newSegment.handleOut;
    from.point = newSegment.point;
    return newSegment;
}
function interpolatePointLinear(start, end, ratio) {
    return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(start.x, end.x, ratio), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(start.y, end.y, ratio));
}
function interpolatePointPolar(start, end, ratio) {
    var point = new paper__WEBPACK_IMPORTED_MODULE_3__["Point"]([0, 1]);
    point.angle = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(start.angle, end.angle + (end.angle < 0 ? 360 : 0), ratio);
    point.length = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["lerp"])(start.length, end.length, ratio);
    return point;
}
/**
 * Deflated shape, original.
 * [[40, -20],[-29, -7],[23, 6]],
 * [[76, 30],[1, -19],[-1, 21]],
 * [[35, 32],[8, 15],[-10, -18]],
 */
/**
 * Deflated shape. 2 points only.
 * [[40, -19],[-29, -6],[20, 4]],
 * [[35, 32],[20, 0],[-21, 0]],
 */ 


/***/ }),

/***/ "a5uI":
/*!*****************************************!*\
  !*** ./src/apparatus/library/thiele.ts ***!
  \*****************************************/
/*! exports provided: ThieleTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThieleTube", function() { return ThieleTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var ThieleTube = /** @class */ (function () {
    function ThieleTube() {
    }
    ThieleTube.prototype.render = function (appearance) {
        var outer = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, 130], undefined, [3, 15]], [[30, 130], [-10, 5]], [[100, 90]], [[25, 50]], [[25, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(outer.segments[3], 30.0);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(outer);
        var inner = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[25, 62]], [[80, 90]], [[25, 118]]));
        inner.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(inner.segments[1], 15.0);
        var tube = outer.subtract(inner);
        tube.scale(appearance.scale);
        var hitShape = outer.clone();
        outer.scale(appearance.scale);
        var liquidMask = tube;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([inner, outer]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: hitShape, liquidMask: liquidMask };
    };
    ThieleTube.properties = {
        label: "Thiele Tube",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {
            scale: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 1.5, step: 0.05,
            }
        ],
    };
    return ThieleTube;
}());



/***/ }),

/***/ "aGdU":
/*!******************************************************!*\
  !*** ./src/apparatus/library/accessories/goggles.ts ***!
  \******************************************************/
/*! exports provided: Goggles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Goggles", function() { return Goggles; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var Goggles = /** @class */ (function () {
    function Goggles() {
    }
    Goggles.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].goggles();
        graphic.scale(1.8 * appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Goggles.properties = {
        label: "Goggles",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 3, step: 0.1
            }
        ],
    };
    return Goggles;
}());



/***/ }),

/***/ "aHDU":
/*!***************************************************!*\
  !*** ./src/apparatus/library/volumetric_flask.ts ***!
  \***************************************************/
/*! exports provided: VolumetricFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VolumetricFlask", function() { return VolumetricFlask; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var VolumetricFlask = /** @class */ (function () {
    function VolumetricFlask() {
    }
    VolumetricFlask.prototype.render = function (appearance) {
        var neckRadius = 10;
        var flask = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[neckRadius, 0]], [[neckRadius, 160], undefined, [0, 5]], [[55, 225], [-6, -24], [4, 16]], [[32, 260], [10, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(flask);
        flask.scale(appearance.size / 260);
        var hitShape = flask.clone();
        var liquidMask = flask.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLipsReversed"])(flask);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(flask);
        var spiritLine = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-7, 100]], [[7, 100]]));
        spiritLine.strokeColor = _common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].mark;
        spiritLine.strokeWidth = 2.0;
        spiritLine.strokeCap = "butt";
        var scale = appearance.size / 260;
        spiritLine.scale(scale, flask.bounds.center);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([flask, spiritLine]);
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "placeable", at: graphic.bounds.bottomCenter },
                { type: "neck", top: graphic.bounds.topCenter, diameter: neckRadius * 2 * scale, facing: 0 }
            ]
        };
    };
    VolumetricFlask.properties = {
        label: "VolumetricFlask",
        canContainLiquids: true,
        defaultAppearance: {
            size: 260
        },
        appearanceSpecs: [{
                spec: "slider", key: "size", label: "Size",
                min: 180, max: 500,
            }],
    };
    return VolumetricFlask;
}());



/***/ }),

/***/ "aaxn":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/electrical/battery.ts ***!
  \*****************************************************/
/*! exports provided: Battery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Battery", function() { return Battery; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var ORANGE_CYLINDER = apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#e8a271".color());
var BLACK_CYLINDER = apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#444444".color());
var ORANGE_BOX = apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box("#e8a271".color());
var BLACK_BOX = apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box("#444444".color());
var Battery = /** @class */ (function () {
    function Battery() {
    }
    Battery.prototype.render = function (appearance) {
        var scale = appearance.scale;
        var strokeWidth = Math.min(5.0, 2.0 * scale);
        var graphic = (function () {
            switch (appearance.type) {
                case "aa": return batteryCylinder(15, 51, strokeWidth);
                case "aaa": return batteryCylinder(11, 45, strokeWidth);
                case "c": return batteryCylinder(26, 50, strokeWidth);
                case "d": return batteryCylinder(34, 62, strokeWidth);
                case "pp3": return batteryRectangle(27, 49, strokeWidth, "terminal");
                case "4.5v": return batteryRectangle(62, 67, strokeWidth, "strip");
                case "lantern6v": return batteryRectangle(68, 115, strokeWidth, "spring");
            }
        })();
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    Battery.properties = {
        label: "Battery",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            type: "aa"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 4.0, step: 0.1, unit: "%",
            },
            {
                spec: "radio", key: "type", label: "Battery Type",
                options: [
                    { value: "aa", label: "AA (1.5V)" },
                    { value: "aaa", label: "AAA (1.5V)" },
                    { value: "pp3", label: "PP3 (9V)" },
                    { value: "c", label: "C (1.5V)" },
                    { value: "d", label: "D (1.5V)" },
                    { value: "4.5v", label: "4.5V" },
                    { value: "lantern6v", label: "Lantern (6V)" },
                ],
            }
        ],
    };
    return Battery;
}());

function batteryCylinder(width, height, strokeWidth) {
    var orangeBitHeight = height * 0.3;
    var up = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, orangeBitHeight, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0);
    var below = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, orangeBitHeight - 4, width, height - orangeBitHeight + 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0);
    var tip = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 2, 6, 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 1);
    var outline = up.toPath(false).unite(below.toPath(false)).unite(tip.toPath(false));
    up.withGradientFill("right", ORANGE_CYLINDER);
    up.position.y += 0.5;
    below.withGradientFill("right", BLACK_CYLINDER);
    tip.withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].cylinderMetal);
    outline.withStroke(strokeWidth, "#333333");
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([tip, below, up, outline]);
}
function batteryRectangle(width, height, strokeWidth, top) {
    var orangeBitHeight = width * 0.32;
    var extrasPre = [];
    var extrasPost = [];
    var up = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, orangeBitHeight, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0);
    var below = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, orangeBitHeight - 4, width, height - orangeBitHeight + 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 2.0);
    var outline = up.toPath(false)
        .unite(below.toPath(false));
    if (top == "terminal") {
        var tip = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-7, 2, 5, 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 0);
        var tip2 = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-7, -1, 7, 2, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 0);
        var tip3 = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(8, 2, 6, 4, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 1);
        outline = outline.unite(tip.toPath(false))
            .unite(tip2.toPath(false))
            .unite(tip3.toPath(false));
        tip.withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].cylinderMetal);
        tip2.withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].cylinderMetal);
        tip3.withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].cylinderMetal);
        extrasPre.push(tip, tip2, tip3);
    }
    up.withGradientFill("right", ORANGE_BOX);
    up.position.y += 0.5;
    below.withGradientFill("right", BLACK_BOX);
    if (top == "strip") {
        var leftStrip = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-width / 2 + 3, -0.5), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(2, -5)).withStroke(strokeWidth * 1.5, "#333333");
        leftStrip.strokeCap = "round";
        var rightStrip = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2 - 3, -0.5), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(7, -5)).withStroke(strokeWidth * 1.5, "#333333");
        rightStrip.strokeCap = "round";
        extrasPost.push(leftStrip, rightStrip);
    }
    else if (top == "spring") {
        var spring = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0], [0, 2.5], [0, -2.5]], [[8, -3], [0, 2.5], [0, -2.5]], [[0, -6], [0, 2.5], [0, -2.5]], [[8, -9], [0, 2.5], [0, -2.5]], [[0, -12], [0, 2.5], [0, -2.5]]));
        spring.withStroke(strokeWidth, "#333333");
        var spring2 = spring.clone();
        spring.position.x = -4;
        spring2.position.x = width / 2 - 11;
        extrasPost.push(spring, spring2);
    }
    outline.withStroke(strokeWidth, "#333333");
    return new paper__WEBPACK_IMPORTED_MODULE_2__["Group"](__spreadArrays(extrasPre, [below, up, outline], extrasPost));
}


/***/ }),

/***/ "b/l1":
/*!********************************************************!*\
  !*** ./src/apparatus/library/accessories/cork_ring.ts ***!
  \********************************************************/
/*! exports provided: CorkRing */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CorkRing", function() { return CorkRing; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var ext_color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ext/color */ "zyMn");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! random/random */ "PJ3I");






var BASE_COLOR = "#e29866".color();
var CorkRing = /** @class */ (function () {
    function CorkRing() {
        /** Older version for calculating the diameter of the circular cutout. */
        this.diameterInterpolator = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Interpolator"]([80, 210], [80, 320]);
        this.cutoutOffsetInterpolator = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Interpolator"]([80, 210], [8, 16]);
    }
    CorkRing.prototype.render = function (appearance) {
        var width = appearance.width;
        var base = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, width, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER), 2.0);
        var shape;
        if (appearance.crossSection) {
            // Calculate the circular hole cutout as follows:
            // https://math.stackexchange.com/questions/564058/calculate-the-radius-of-a-circle-given-the-chord-length-and-height-of-a-segment
            // where h = 30 - 8 = 22
            // and l = width - (some small offset)
            var h = 22, l = width - this.cutoutOffsetInterpolator.interpolate(width);
            var radius = (4 * h * h + l * l) / (8 * h);
            var hole1 = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 10, width - 50, 50, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER));
            var hole2 = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -8 - radius), radius);
            shape = base.subtract(hole1).subtract(hole2);
        }
        else {
            shape = base;
        }
        var graphic = applyCorkTexture(shape);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "placeable_surface", start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-1, -8), end: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(1, -8) },
                graphic.placeable(),
            ],
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(width / 2, -5)
        };
    };
    CorkRing.properties = {
        label: "Cork ring",
        canContainLiquids: false,
        defaultAppearance: {
            width: 120,
            crossSection: false
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 80, max: 210, unit: "mm"
            },
            {
                spec: "checkbox", key: "crossSection", label: "Cross-section", subLabel: "Show"
            }
        ],
    };
    return CorkRing;
}());

/**
 * Creates a cork-looking object from input of plain shapes.
 * Output contains the original input shape, modified.
 */
function applyCorkTexture(shape) {
    var r = new random_random__WEBPACK_IMPORTED_MODULE_5__["Random"](166212);
    var mask = shape.clone();
    // Create a clipped group, containing the cork texture
    var corkLayer = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([mask]);
    corkLayer.clipped = true;
    // Generate cork texture
    for (var x = mask.bounds.left; x < mask.bounds.right; x += 20) {
        for (var y = mask.bounds.top; y < mask.bounds.bottom; y += 20) {
            var size = r.randomUnitValue(2.0) + 4.0;
            var corkSpot = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(x, y).add(r.randomUnitVector(8.0)), size);
            corkSpot.fillColor = "#00000010";
            corkLayer.addChild(corkSpot);
        }
    }
    // Set up shape.
    shape.setGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(BASE_COLOR));
    shape.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), BASE_COLOR.ladd(-20).sadd(-20).hex());
    // Assemble.
    var finalGroup = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([shape, corkLayer]);
    return finalGroup;
}


/***/ }),

/***/ "b2Yu":
/*!**********************!*\
  !*** ./src/setup.ts ***!
  \**********************/
/*! exports provided: setUpToastr */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setUpToastr", function() { return setUpToastr; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! version */ "8hKs");
/* harmony import */ var _vars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vars */ "nHh6");



// Set up various libraries and plugins
// Sentry
if (_vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].isProd) {
    _sentry_react__WEBPACK_IMPORTED_MODULE_0__["init"]({
        dsn: _vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].sentryDsn,
        release: version__WEBPACK_IMPORTED_MODULE_1__["default"],
        environment: _vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].isDev ? "Dev" : (_vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].isBeta ? "Beta" : "Prod")
    });
}
// Toastr
function setUpToastr() {
    toastr.options.positionClass = "toast-bottom-center";
    toastr.options.timeOut = 5000;
    toastr.options.extendedTimeOut = 4000;
    toastr.options.showDuration = 200;
    toastr.options.hideDuration = 400;
    toastr.options.showEasing = "linear";
    toastr.options.hideEasing = "linear";
    toastr.options.showMethod = "fadeIn";
    toastr.options.hideMethod = "fadeOut";
    toastr.options.preventDuplicates = true;
}


/***/ }),

/***/ "bAC0":
/*!************************************!*\
  !*** ./src/api/querystringlite.ts ***!
  \************************************/
/*! exports provided: querystring */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "querystring", function() { return querystring; });
/** Lightweight implementation of querystring */
var querystring;
(function (querystring) {
    querystring.stringify = function (obj) {
        if (!obj) {
            return "";
        }
        var arrayFormatter = function (key, value) {
            return value === null
                ? encode(key)
                : [encode(key), "=", encode(value)].join("");
        };
        return Object.keys(obj)
            .map(function (key) {
            var val = obj[key];
            if (val === undefined) {
                return "";
            }
            if (val === null) {
                return encode(key);
            }
            if (Array.isArray(val)) {
                var result = [];
                val.slice().forEach(function (val2) {
                    if (val2 === undefined) {
                        return;
                    }
                    result.push(arrayFormatter(key, val2));
                });
                return result.join("&");
            }
            return encode(key) + "=" + encode(val);
        })
            .filter(function (x) {
            return x.length > 0;
        })
            .join("&");
    };
})(querystring || (querystring = {}));
function encode(value) {
    return strictUriEncode(value);
}
function strictUriEncode(str) {
    return encodeURIComponent(str).replace(/[!'()*]/g, function (x) {
        return "%" + x
            .charCodeAt(0)
            .toString(16)
            .toUpperCase();
    });
}


/***/ }),

/***/ "bPYb":
/*!****************************************!*\
  !*** ./src/layout/top_bar/toolbox.tsx ***!
  \****************************************/
/*! exports provided: Toolbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Toolbox", function() { return Toolbox; });
/* harmony import */ var components_icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/icon */ "oh6M");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var tools__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tools */ "7vmD");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var _view_tooltips__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../view/tooltips */ "6T3+");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






var toolMenuItems = [
    {
        name: "select",
        icon: "mouse-pointer",
        hint: "Select & Move Items",
        shortcuts: [{ key: "1" }, { key: "V" }]
    },
    {
        name: "pan",
        icon: "arrows-alt",
        hint: "Pan workspace",
        shortcuts: [{ key: "2" }, { key: "P" }]
    },
    {
        name: "arrow",
        icon: "font",
        hint: "Label diagram <br/>with text and arrows",
        shortcuts: [{ key: "3" }, { key: "T" }]
    },
];
if (flags__WEBPACK_IMPORTED_MODULE_1__["default"].isFreeHandToolEnabled) {
    toolMenuItems.push({
        name: "freehand",
        icon: "pencil-alt",
        hint: "Draw an item by hand",
        shortcuts: [{ key: "4" }, { key: "D" }]
    });
}
if (vars__WEBPACK_IMPORTED_MODULE_4__["Consts"].isDev) {
    toolMenuItems.push({
        name: "pathedit",
        icon: "bezier-curve",
        hint: "Edit paths. DEV ONLY",
        shortcuts: []
    });
}
/**
 * Toolbox is a button group that allows the user
 * to select a tool. Unlike a regular "group of buttons",
 * toolbox highlights the currently selected tool and only
 * one tool can be selected.
 */
var Toolbox = function (props) { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { id: "toolbox", className: "toolboxGroup", key: "toolbox" }, toolMenuItems.map(function (i) { return react__WEBPACK_IMPORTED_MODULE_2__["createElement"](Item, __assign({ key: i.name }, i, { active: props.tool === i.name })); }))); };
var Item = function (item) { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { key: item.name, id: "tool-" + item.name, className: item.active ? "active" : "", onClick: function () { return Object(tools__WEBPACK_IMPORTED_MODULE_3__["selectTool"])(item.name, "click"); }, title: Object(_view_tooltips__WEBPACK_IMPORTED_MODULE_5__["formatTooltip"])(item.hint, item.shortcuts) },
    react__WEBPACK_IMPORTED_MODULE_2__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_0__["Icon"], { name: item.icon, fullWidth: true }))); };


/***/ }),

/***/ "bPe7":
/*!***************************************************************!*\
  !*** ./src/apparatus/library/distillation/dean_stark_trap.ts ***!
  \***************************************************************/
/*! exports provided: DeanStarTrap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeanStarTrap", function() { return DeanStarTrap; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common/tap */ "ndDi");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var DeanStarTrap = /** @class */ (function () {
    function DeanStarTrap() {
    }
    DeanStarTrap.prototype.render = function (appearance) {
        var bottomPart = [
            [[-10, 76]],
            [[-10, 150], , [0, 10]],
            [[-5, 200], [0, -40]],
            [[5, 200], , [0, -40]],
            [[10, 150], [0, 10]]
        ];
        var basicShape = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, __spreadArrays([[[-10, 0]],
            [[-10, 57]],
            [[-107, 85]],
            [[-107, 142], , [-3, 0]],
            [[-105, 172]],
            [[-91, 172]],
            [[-89, 142], [3, 0]],
            [[-89, 99]]], bottomPart, [[[10, 0]]])));
        var liquidMask = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, __spreadArrays(bottomPart, [[[10, 76]]])));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(basicShape.segments[8], 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(basicShape.segments[7], 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(basicShape.segments[2], 10);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(basicShape.segments[1], 4);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(basicShape);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(basicShape, 8, 16);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        // Add a glass fold at the T-junction.
        graphic.addChild(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["glassFold"])(-8, 67, { rotation: -90 }));
        // Add a tap.
        var tap = Object(apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["createTap"])(appearance.tapOpening);
        graphic.addChild(tap);
        tap.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 165);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            liquidMask: liquidMask,
            pivot: basicShape.bounds.center
        };
    };
    DeanStarTrap.properties = {
        label: "Dean-Stark Trap",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: __assign({}, apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].defaultAppearance),
        appearanceSpecs: [
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].appearanceSpec,
        ],
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.75 })
    };
    return DeanStarTrap;
}());



/***/ }),

/***/ "bQBo":
/*!*******************************!*\
  !*** ./src/tiers/currency.ts ***!
  \*******************************/
/*! exports provided: currencySymbol, currencyLabel, countryCodeToCurrency */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currencySymbol", function() { return currencySymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currencyLabel", function() { return currencyLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "countryCodeToCurrency", function() { return countryCodeToCurrency; });
function currencySymbol(currency) {
    switch (currency) {
        case "gbp": return "£";
        case "eur": return "€";
        case "usd": return "$";
        case "aud": return "A$";
        case "sgd": return "S$";
        case "mxn": return "Mex$";
        case "cop": return "$";
    }
}
function currencyLabel(currency) {
    switch (currency) {
        case "gbp": return "British Pound - GBP";
        case "eur": return "Euro - EUR";
        case "usd": return "US Dollar - USD";
        case "aud": return "Australian Dollar - AUD";
        case "sgd": return "Singapore Dollar - SGD";
        case "mxn": return "Peso Mexicano - MXN";
        case "cop": return "Peso Colombiano  - COP";
    }
}
/**
 * Converts an ISO Country code to the currency they use.
 * https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes
 * Or http://country.io/names.json
 */
function countryCodeToCurrency(country) {
    switch (country) {
        case "GB":
            return "gbp";
        case "AT":
        case "BE":
        case "CY":
        case "EE":
        case "FI":
        case "FR":
        case "DE":
        case "GR":
        case "IE":
        case "IT":
        case "LV":
        case "LT":
        case "LU":
        case "MT":
        case "NL":
        case "PT":
        case "SK":
        case "SI":
        case "ES":
            return "eur";
        case "AU":
            return "aud";
        case "SG":
            return "sgd";
        case "MX":
            return "mxn";
        case "CO":
            return "cop";
        default:
            return "usd";
    }
}


/***/ }),

/***/ "bi6v":
/*!****************************************************!*\
  !*** ./src/apparatus/library/devices/fume_hood.ts ***!
  \****************************************************/
/*! exports provided: FumeHood */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FumeHood", function() { return FumeHood; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var BAFFLE_COLOR = "#999999";
var FumeHood = /** @class */ (function () {
    function FumeHood() {
    }
    FumeHood.prototype.render = function (appearance) {
        var strokeThickness = 10.0;
        var sashHeight = 600;
        var sashSlide = appearance.sashOpening * 0.95 * sashHeight;
        var fumeX = 430;
        var outer1 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, 620]], [[-5, 620]], [[-30, 580]], [[-30, 0]], [[fumeX, 0]], [[fumeX, -100]])).withStroke(strokeThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke);
        outer1.strokeCap = "butt";
        var outer2 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[fumeX + 80, -100]], [[fumeX + 80, 0]], [[600, 0]], [[600, 1200]])).withStroke(strokeThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke);
        var baffle1 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(100, 20), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(500, 350)).withStroke("thick", BAFFLE_COLOR);
        var baffle2 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(550, 400), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(550, 750)).withStroke("thick", BAFFLE_COLOR);
        var baffle3 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(550, 800), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(550, 1150)).withStroke("thick", BAFFLE_COLOR);
        var sash = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(1, 1200 - sashHeight - strokeThickness / 2, 10, sashHeight), 3.0)
            .withStroke("thinner", "#56acd1").withFill("#7bcbed50");
        sash.position.y -= sashSlide;
        var workbench = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 1200, 600, 200))
            .withStroke(strokeThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke)
            .withFill("#777777");
        var fumeHood = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([outer1, outer2, baffle1, baffle2, baffle3, sash, workbench]);
        var graphic;
        switch (appearance.display) {
            case "full":
                graphic = fumeHood;
                break;
            case "clipped":
                var mask = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-50, 500, 700, 800));
                var faders = mask.clone();
                mask.withFill("black");
                faders.setGradientFill("down", [
                    ["#ffffffff", 0.0],
                    ["#ffffff00", 0.05],
                    ["#ffffff00", 0.95],
                    ["#ffffffff", 1.0],
                ]);
                graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([mask, fumeHood, faders]);
                graphic.clipped = true;
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: fumeHood.bounds.center,
            snapping: [
                { type: "placeable_surface", start: workbench.strokeBounds.topLeft, end: workbench.strokeBounds.topRight }
            ]
        };
    };
    FumeHood.properties = {
        label: "Fume Hood",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            sashOpening: 0.5,
            display: "clipped"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "display", label: "Display",
                options: [
                    { value: "full", label: "Full" },
                    { value: "clipped", label: "Clipped" },
                ],
            },
            {
                spec: "slider", key: "sashOpening", label: "Sash Opening",
                min: 0.0, max: 1.0, step: 0.01,
            }
        ],
    };
    return FumeHood;
}());



/***/ }),

/***/ "bo2j":
/*!**************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/potometer.ts ***!
  \**************************************************************/
/*! exports provided: Potometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Potometer", function() { return Potometer; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Potometer = /** @class */ (function () {
    function Potometer() {
    }
    Potometer.prototype.render = function (appearance) {
        var length = appearance.length;
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -80]], [[0, 0]], [[130 + length, 0]], [[130 + length, 35]], [[130 + length + 10, 35]], [[130 + length + 10, -10]], [[120, -10]], [[120, -50]], [[130, -70], [0, 10]], [[130, -120]], [[100, -120]], [[100, -70], , [0, 10]], [[110, -50]], [[110, -10]], [[50, -10]], [[50, -80]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(path.segments[14], 5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(path.segments[5], 10);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(path.segments[2], 5);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["smoothCorner"])(path.segments[1], 10);
        var liquid = path.clone();
        var hitShape = path.clone();
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(path, 6, 13);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        // Adjust the liquid level
        liquid.segments[13].point.y += 10;
        liquid.segments[12].point.y += 10;
        liquid.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].color.color().alpha(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].alpha).string();
        graphic.insertChild(0, liquid);
        return {
            graphic: graphic,
            hitShape: hitShape,
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-5, -10)
        };
    };
    Potometer.properties = {
        label: "Potometer",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            length: 160
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 100, max: 300, unit: "mm"
            }
        ],
    };
    return Potometer;
}());



/***/ }),

/***/ "bs/A":
/*!********************************!*\
  !*** ./src/command/command.ts ***!
  \********************************/
/*! exports provided: CommandProcessor, invert, Sequence, commandProcessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommandProcessor", function() { return CommandProcessor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sequence", function() { return Sequence; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commandProcessor", function() { return commandProcessor; });
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! log */ "3Tcl");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

// Implementation of commands - undoable operations on the application store. */
var DEBUG = false;
var MAX_UNDOS = 50;
var CommandProcessor = /** @class */ (function () {
    function CommandProcessor() {
        /** Undo stack. Items should be pushed and popped. */
        this.undoStack = [];
        /** Red stack. Items should be pushed and popped. */
        this.redoStack = [];
        /** Whether current change are dirty. */
        this.isDirty = false;
    }
    /**
     * Executes a command. The command will be placed onto the undo stack.
     * Redo stack is cleared. If a sequence is being recorded, the command
     * is executed and added to the current sequence.
     */
    CommandProcessor.prototype.execute = function (command) {
        command.execute();
        if (DEBUG)
            Object(log__WEBPACK_IMPORTED_MODULE_0__["clog"])("Command:", command);
        if (this.recordingCommands) {
            this.recordingCommands.push(command);
        }
        else {
            this.pushToUndoStack(command);
        }
        // Destroy the redo stack.
        this.redoStack.length = 0;
        this.markDirty();
    };
    /**
     * Executes a command, potentially replacing last command on the undo stack.
     * @param replaceCommmand Returns a command to replace the last command, {@code false) otherwise
     * @param newCommand Default new command if there is no command to replace.
     */
    CommandProcessor.prototype.executeReplacingLastCommand = function (replaceCommand, newCommand) {
        if (this.undoStack.length == 0) {
            this.execute(newCommand);
            return;
        }
        var lastCommand = this.undoStack[this.undoStack.length - 1];
        var maybeNewCommand = replaceCommand(lastCommand);
        if (maybeNewCommand) {
            // Replace the last command on the undo stack.
            lastCommand.undo();
            this.undoStack.pop();
            this.execute(maybeNewCommand);
        }
        else {
            this.execute(newCommand);
        }
    };
    /**
     * Starts recording a sequence of commands. All commands executed using execute() will be
     * added to the sequence. The sequence is then put on the undo queue when calling finishRecording()
     */
    CommandProcessor.prototype.startRecording = function () {
        if (this.recordingCommands) {
            throw new Error("Command processor: already recording a sequence");
        }
        this.recordingCommands = [];
    };
    /**
     * Finishes recording current sequence and places all commands executed while recording onto
     * the undo stack as a single command.
     */
    CommandProcessor.prototype.finishRecording = function () {
        if (!this.recordingCommands) {
            // TODO: We used to throw an error but this is too spammy. Reinvestigate if needed.
            // throw new Error("Command processor: not currently recording a sequence")
            return;
        }
        switch (this.recordingCommands.length) {
            case 0:
                break;
            case 1:
                this.pushToUndoStack(this.recordingCommands[0]);
                break;
            default:
                var sequence = new Sequence(this.recordingCommands);
                this.pushToUndoStack(sequence);
        }
        this.recordingCommands = undefined;
    };
    /**
     * Performs an undo.
     * @returns false if the undo stack is empty.
     */
    CommandProcessor.prototype.undo = function () {
        var command = this.undoStack.pop();
        if (!command)
            return false;
        command.undo();
        this.redoStack.push(command);
        return true;
    };
    /**
     * Performs a redo.
     * @returns false if the redo stack is empty
     */
    CommandProcessor.prototype.redo = function () {
        var command = this.redoStack.pop();
        if (!command)
            return false;
        command.execute();
        this.undoStack.push(command);
        return true;
    };
    /** Clears both undo and redo stacks. */
    CommandProcessor.prototype.clear = function () {
        if (this.recordingCommands) {
            console.error("Recording commands in progress, aborting recording.");
            this.recordingCommands.length = 0;
        }
        this.redoStack.length = 0;
        this.undoStack.length = 0;
        this.markClean();
    };
    /**
     * Returns true if there are "dirty" (i.e unsaved) changes. Not always reliable,
     * may return true even when clean.
     */
    CommandProcessor.prototype.hasDirtyChanges = function () {
        return this.isDirty;
    };
    /** Mark changes as clean. */
    CommandProcessor.prototype.markClean = function () {
        this.isDirty = false;
    };
    CommandProcessor.prototype.markDirty = function () {
        this.isDirty = true;
    };
    /** Only use this to push new commands. Pushing as a result of e.g. redo should push directly. */
    CommandProcessor.prototype.pushToUndoStack = function (command) {
        this.undoStack.push(command);
        // Restrict the number of undo commands.
        if (this.undoStack.length > MAX_UNDOS) {
            this.undoStack.splice(0, this.undoStack.length - MAX_UNDOS);
        }
        this.markDirty();
    };
    return CommandProcessor;
}());

// Returns a command class that does the inverse of another command class.
function invert(commandClass) {
    return /** @class */ (function (_super) {
        __extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.execute = function () {
            _super.prototype.undo.call(this);
        };
        class_1.prototype.undo = function () {
            _super.prototype.execute.call(this);
        };
        return class_1;
    }(commandClass));
}
/** A command consisting of a sequence of commands. */
var Sequence = /** @class */ (function () {
    function Sequence(commands) {
        // Process the incoming commands, hoisting up any singleton sequences.
        this.commands = commands.map(function (command) {
            if (command instanceof Sequence && command.commands.length == 1) {
                return command.commands[0];
            }
            else {
                return command;
            }
        });
    }
    Sequence.prototype.execute = function () {
        this.commands.forEach(function (command) { return command.execute(); });
    };
    Sequence.prototype.undo = function () {
        for (var i = this.commands.length - 1; i >= 0; i--) {
            this.commands[i].undo();
        }
    };
    return Sequence;
}());

var commandProcessor = new CommandProcessor();


/***/ }),

/***/ "c+g7":
/*!*****************************!*\
  !*** ./src/editing/move.ts ***!
  \*****************************/
/*! exports provided: Move, MoveIndividual */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Move", function() { return Move; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MoveIndividual", function() { return MoveIndividual; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var editing_grouping_operations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/grouping/operations */ "VqZE");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! types */ "p21n");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




/** Move an apparatus or an arrow. */
var Move = /** @class */ (function () {
    /** IDs must be arrows or items. Groups are not supported. */
    function Move(ids, delta) {
        this.ids = ids;
        this.delta = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pp"])(delta);
    }
    Move.prototype.execute = function () {
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Move", Move.moveItem(this.ids, this.delta));
    };
    Move.prototype.undo = function () {
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Move", Move.moveItem(this.ids, this.delta.multiply(-1)));
    };
    Move.moveItem = function (ids, delta) {
        return function (state) { return (__assign(__assign({}, state), { items: state.items.map(function (item) {
                if (ids.indexOf(item.id) === -1) {
                    return item;
                }
                return __assign(__assign({}, item), Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(item, delta));
            }), arrows: state.arrows.map(function (arrow) {
                if (ids.indexOf(arrow.id) === -1) {
                    return arrow;
                }
                return __assign(__assign({}, arrow), { start: Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(arrow.start, delta), end: Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(arrow.end, delta) });
            }) })); };
    };
    /** Moves a group. */
    Move.group = function (groupId, delta) {
        var group = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].groups().filter(function (g) { return g.id == groupId; })[0];
        return new Move(Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_1__["getDescendantIDs"])(group), delta);
    };
    /** Moves one item. It can be an item, arrow or a group. */
    Move.one = function (id, delta) {
        if (id.type == "group") {
            return Move.group(id, delta);
        }
        return new Move([id], delta);
    };
    return Move;
}());

/** Move individual items by different deltas. */
var MoveIndividual = /** @class */ (function () {
    /** IDs must be arrows or items. Groups are not supported. */
    function MoveIndividual(deltas) {
        this.itemDeltaMap = {};
        this.arrowDeltaMap = {};
        for (var _i = 0, deltas_1 = deltas; _i < deltas_1.length; _i++) {
            var d = deltas_1[_i];
            switch (d.id.type) {
                case "apparatus":
                    this.itemDeltaMap[d.id.id] = d.delta;
                    break;
                case "arrow":
                    this.arrowDeltaMap[d.id.id] = d.delta;
                    break;
                case "group": continue;
            }
        }
    }
    MoveIndividual.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Move", function (state) { return _this.moveItems(state, 1); });
    };
    MoveIndividual.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Move", function (state) { return _this.moveItems(state, -1); });
    };
    MoveIndividual.prototype.moveItems = function (state, multiplier) {
        var _this = this;
        return __assign(__assign({}, state), { items: state.items.map(function (item) {
                var delta = _this.itemDeltaMap[item.id.id];
                if (delta === undefined)
                    return item;
                return __assign(__assign({}, item), Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(item, delta.multiply(multiplier)));
            }), arrows: state.arrows.map(function (arrow) {
                var delta = _this.arrowDeltaMap[arrow.id.id];
                if (delta === undefined)
                    return arrow;
                return __assign(__assign({}, arrow), { start: Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(arrow.start, delta), end: Object(types__WEBPACK_IMPORTED_MODULE_3__["add"])(arrow.end, delta.multiply(multiplier)) });
            }) });
    };
    return MoveIndividual;
}());



/***/ }),

/***/ "c1LU":
/*!***************************!*\
  !*** ./src/shim-types.ts ***!
  \***************************/
/*! exports provided: RemodalStates, IntroJs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemodalStates", function() { return RemodalStates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntroJs", function() { return IntroJs; });
// This file contains shimmy types for libraries that don't provide typescript typings
var RemodalStates;
(function (RemodalStates) {
    RemodalStates["OPENED"] = "opened";
    RemodalStates["CLOSED"] = "closed";
})(RemodalStates || (RemodalStates = {}));
var IntroJs;
(function (IntroJs) {
    var Position;
    (function (Position) {
        Position["LEFT"] = "left";
        Position["RIGHT"] = "right";
        Position["TOP"] = "top";
    })(Position = IntroJs.Position || (IntroJs.Position = {}));
})(IntroJs || (IntroJs = {}));


/***/ }),

/***/ "c91M":
/*!*************************************************!*\
  !*** ./src/apparatus/library/capillary_tube.ts ***!
  \*************************************************/
/*! exports provided: CapillaryTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CapillaryTube", function() { return CapillaryTube; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var CapillaryTube = /** @class */ (function () {
    function CapillaryTube() {
    }
    CapillaryTube.prototype.render = function (appearance) {
        var width = appearance.width;
        var length = appearance.length;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, width, length));
        var liquidMask = shape.clone();
        shape.remove();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([
            new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, length]])),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[width, 0]], [[width, length]]))
        ]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thinner", graphic);
        return { graphic: graphic, hitShape: graphic.bounds.expand(20).toShape(), liquidMask: liquidMask };
    };
    CapillaryTube.properties = {
        label: "Capillary Tube",
        canContainLiquids: true,
        defaultAppearance: {
            width: 6,
            length: 150
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Diameter",
                min: 4, max: 8, step: 0.5
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 60, max: 250,
            }
        ],
    };
    return CapillaryTube;
}());



/***/ }),

/***/ "cNNV":
/*!**************************!*\
  !*** ./less/styles.less ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "cPNO":
/*!********************************************************!*\
  !*** ./src/apparatus/library/heating/stick_lighter.ts ***!
  \********************************************************/
/*! exports provided: StickLighter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StickLighter", function() { return StickLighter; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var StickLighter = /** @class */ (function () {
    function StickLighter() {
    }
    StickLighter.prototype.render = function (appearance) {
        var casing = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[6, 0]], [[8, 15]], [[23, 46], [2, -13], [-3, 20]], [[16, 93], [0, -7], [1, 20]], [[17, 130], [3, -9], [-5, 17]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(casing);
        casing.close()
            .withStroke("default", "#999999")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#dddddd".color()));
        var nozzle = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 10, 90, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#444444".color()));
        var button = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 40, 24, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 12);
        button.fillColor = new paper.Color(new paper__WEBPACK_IMPORTED_MODULE_3__["Gradient"]([["#eeeeee", 0.6], ["#ffffff", 0.63], ["#bbbbbb", 1.0]], true), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 40 + 30 - 12), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 40 + 3));
        button.withStroke("thinner", "#aaaaaa");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([nozzle, casing, button]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    StickLighter.properties = {
        label: "Stick Lighter",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return StickLighter;
}());



/***/ }),

/***/ "cUHu":
/*!************************************!*\
  !*** ./src/components/remodal.tsx ***!
  \************************************/
/*! exports provided: Remodal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Remodal", function() { return Remodal; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

/**
 * React wrapper around Remodal dialogs.
 *
 * How to use:
 *
 *   interface Props extends Remodal.Props {
 *     ...
 *   }
 *   export class MyModal extends Remodal<Props, State> {
 *    ...
 *     render = () => {
 *       <Remodal.Container {...this.props} ref={this.ref}>
 *        ...
 *       </Remodal.Container>
 *     }
 *   }
 */
var Remodal = /** @class */ (function (_super) {
    __extends(Remodal, _super);
    function Remodal(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_0__["createRef"]();
        _this.modalId = generateModalId();
        return _this;
    }
    Remodal.prototype.UNSAFE_componentWillMount = function () {
        this.setState({ isOpened: false });
    };
    Remodal.prototype.componentDidMount = function () {
        var _this = this;
        var jqElement = $(this.ref.current);
        this.remodal = jqElement.remodal();
        var selector = "[data-remodal-id=" + this.modalId + "]";
        $(document).on("opened", selector, function () {
            _this.setState({ isOpened: true });
        });
        $(document).on("closed", selector, function () {
            _this.setState({ isOpened: false });
        });
    };
    Remodal.prototype.onOpen = function () {
    };
    Remodal.prototype.open = function () {
        this.remodal.open();
        this.onOpen();
    };
    Remodal.prototype.close = function () {
        this.remodal.close();
    };
    Remodal.defaultState = { isOpened: false };
    return Remodal;
}(react__WEBPACK_IMPORTED_MODULE_0__["PureComponent"]));

(function (Remodal) {
    var Container = /** @class */ (function (_super) {
        __extends(Container, _super);
        function Container() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.render = function () {
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "remodal " + _this.props.class || false, "data-remodal-id": _this.props.parent.modalId, ref: _this.props.parent.ref },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { "data-remodal-action": "close", className: "remodal-close" }),
                    /** Display title with icon, if title is set.  */
                    _this.props.title
                        ? react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null,
                            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "mr-2 fa-fw fa" + _this.iconCss }),
                            _this.props.title,
                            " ",
                            _this.badge)
                        : null,
                    _this.props.center === true
                        ? react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "text-center" }, _this.props.children)
                        : _this.props.children);
            };
            return _this;
        }
        Object.defineProperty(Container.prototype, "iconCss", {
            get: function () { var _a; return this.props.icon == "loading" ? "l fa-spinner fa-pulse" : (_a = "d " + this.props.icon) !== null && _a !== void 0 ? _a : ""; },
            enumerable: false,
            configurable: true
        });
        Object.defineProperty(Container.prototype, "badge", {
            get: function () {
                if (!this.props.badge)
                    return;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { className: "badge badge-secondary align-top small" }, this.props.badge);
            },
            enumerable: false,
            configurable: true
        });
        return Container;
    }(react__WEBPACK_IMPORTED_MODULE_0__["Component"]));
    Remodal.Container = Container;
})(Remodal || (Remodal = {}));
/** Generates a random ID to use as a remodal ID */
function generateModalId() {
    return '_' + Math.random().toString(36).substr(2, 9);
}


/***/ }),

/***/ "dUPR":
/*!******************************************!*\
  !*** ./src/apparatus/library/cuvette.ts ***!
  \******************************************/
/*! exports provided: Cuvette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cuvette", function() { return Cuvette; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

//import { setDefaultStyle } from "apparatus/draw";



var Cuvette = /** @class */ (function () {
    function Cuvette() {
    }
    Cuvette.prototype.render = function (appearance) {
        // Standard cuvettes are 45 by 12.5mm. We round here for clarity.
        var width = 10;
        var height = 50;
        var graphic;
        var liquidMask;
        if (appearance.view == "side") {
            // This is simple, just draw  abox
            var depth = appearance.depth;
            var outline = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]], [[depth, height]], [[depth, 0]]));
            liquidMask = outline.clone();
            graphic = outline;
        }
        else {
            var outside = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]], [[width, height]], [[width, 0]]));
            graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([outside]);
            var inside = (function () {
                switch (appearance.type) {
                    case "macro":
                        return new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, height]]));
                    case "semi-micro":
                        return new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, 20]], [[2.5, 23]], [[2.5, 46]]));
                    case "micro":
                        return new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0]], [[0, 20]], [[3.5, 24]], [[3.5, 46]]));
                }
            })();
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(inside, width / 2);
            liquidMask = inside.clone();
            graphic.addChild(inside);
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thinner", graphic);
        graphic.scale(appearance.scale);
        liquidMask.scale(appearance.scale, graphic.bounds.center);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(20).toShape(),
            liquidMask: liquidMask,
            snapping: graphic.placeable()
        };
    };
    Cuvette.properties = {
        label: "Cuvette",
        canContainLiquids: true,
        defaultAppearance: {
            depth: 20,
            scale: 1.5,
            type: "semi-micro",
            view: "side"
        },
        defaultLiquidData: __assign(__assign({}, _common__WEBPACK_IMPORTED_MODULE_2__["DEFAULT_LIQUID_DATA"]), { color: "#ff2020", amountRatio: 0.85 }),
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 5.0, step: 0.1,
            },
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "side", label: "From the side" },
                    { value: "front", label: "Front view" },
                ],
            },
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "macro", label: "Macro" },
                    { value: "semi-micro", label: "Semi-Micro" },
                    { value: "micro", label: "Micro", tier: "boost" },
                ],
                visible: function (a) { return a.view == "front"; }
            },
            {
                spec: "slider", key: "depth", label: "Depth",
                min: 5, max: 100,
                visible: function (a) { return a.view == "side"; }
            },
        ],
    };
    return Cuvette;
}());



/***/ }),

/***/ "e06R":
/*!********************************!*\
  !*** ./src/apparatus/index.ts ***!
  \********************************/
/*! exports provided: commonSpecsForApparatusKind */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "commonSpecsForApparatusKind", function() { return commonSpecsForApparatusKind; });
/* harmony import */ var apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/tubes */ "TmSb");
// Base library pieces for defining new apparatus.
//
// 1. ApparatusComponent vs Apparatus
//     - ApparatusComponent is a React component that gives access to the
//    data and lifecycle routines. Each apparatus is housed inside this,
//    regardless of its type.
//     - Apparatus is the base class that can be extended to define
//       how a specific apparatus type is rendered and styled.
// 2. Creating new Apparatus
//    Specific apparatus are defined inside the ./library folder
//    and registered by the createApparatus method.

function commonSpecsForApparatusKind(kind) {
    switch (kind) {
        case "tube": return [apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_0__["TUBE_DIAMETER_SPEC"]];
    }
}


/***/ }),

/***/ "e6DQ":
/*!********************************!*\
  !*** ./src/api/auth/reauth.ts ***!
  \********************************/
/*! exports provided: reauthFromCurrentLogin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reauthFromCurrentLogin", function() { return reauthFromCurrentLogin; });
/* harmony import */ var api_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! api/api */ "3kYy");
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");



/**
 * Executes reauth, using currently logged in credentials.
 * A no-op if currently user is not logged in.
 *
 * Use this to update the current tier after a purchase etc.
 */
function reauthFromCurrentLogin() {
    var state = store_store__WEBPACK_IMPORTED_MODULE_2__["default"].loggedInState();
    if (!state)
        return;
    Object(api_api__WEBPACK_IMPORTED_MODULE_0__["callApi"])("reauth", "GET", state.jwtToken, undefined, {
        success: function (response) {
            if (response.type == "success") {
                store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_1__["logIn"])({
                    provider: response.provider,
                    jwtToken: response.jwt,
                    user: response.user,
                    // This should presumably be false.
                    firstTimeLogin: response.firstTimeLogin,
                    tier: response.tier,
                    // Silence popups here, let the parent call handle this.
                    silencePopup: true
                }));
            }
        }
    });
}


/***/ }),

/***/ "ecbh":
/*!********************************************!*\
  !*** ./src/apparatus/library/bench_mat.ts ***!
  \********************************************/
/*! exports provided: BenchMat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BenchMat", function() { return BenchMat; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var BenchMat = /** @class */ (function () {
    function BenchMat() {
    }
    BenchMat.prototype.render = function (appearance) {
        var size = appearance.size;
        var graphic = (function () {
            switch (appearance.view) {
                case "top":
                    return paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, size, size), 4);
                case "side":
                    return paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, size, 10), 3);
            }
        })();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        switch (appearance.color) {
            case "ceramic":
                graphic.strokeColor = "#c2a690";
                graphic.fillColor = "#d9c8b9";
                break;
            case "white":
                graphic.strokeColor = "#bbbbbb";
                graphic.fillColor = "#eeeeee";
                break;
        }
        var hitBounds = graphic.bounds;
        if (appearance.view == "side") {
            hitBounds = hitBounds.expand(10);
        }
        return {
            graphic: graphic,
            hitShape: hitBounds.toShape(),
            snapping: appearance.view == "side"
                ? [graphic.topEdgeAsPlaceableSurface(), graphic.placeable()]
                : undefined
        };
    };
    BenchMat.properties = {
        label: "Bench Mat (Tile)",
        canContainLiquids: false,
        defaultAppearance: {
            view: "side",
            color: "ceramic",
            size: 150,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 70, max: 200
            },
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "ceramic", label: "Ceramic" },
                    { value: "white", label: "White" },
                ],
            },
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "top", label: "From top" },
                    { value: "side", label: "From side" },
                ],
            }
        ],
    };
    return BenchMat;
}());



/***/ }),

/***/ "ef20":
/*!************************************************!*\
  !*** ./src/apparatus/library/heating/torch.ts ***!
  \************************************************/
/*! exports provided: TorchBurner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TorchBurner", function() { return TorchBurner; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var RED = "#d93021";
var RED_STROKE = "#992d23";
var TorchBurner = /** @class */ (function () {
    function TorchBurner() {
    }
    TorchBurner.prototype.render = function (appearance) {
        var body = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 50, 130, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER))
            .withStroke("default", "#888888")
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#aaaaaa".color()));
        var mount = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -130, 30, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER))
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box("#444444".color()));
        var button = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-15, -144, 12, 18, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT))
            .withStroke("thin", RED_STROKE)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box(RED.color(), { delta: 15, shift: 0.3 }));
        var nozzleCasing = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 50, 18, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT))
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke)
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#444444".color()));
        var dial = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(48, 0, 18, 22, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT))
            .withStroke("default", RED_STROKE)
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].box(RED.color(), { delta: 15, shift: 0.3 }));
        var nozzle = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 50, 16, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_RIGHT))
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#aaaaaa".color(), 15));
        var topPart = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([nozzle, nozzleCasing, dial]);
        topPart.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(25, 0);
        if (appearance.flame) {
            var flame = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].blueFlame();
            flame.rotate(-90);
            flame.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-49, 0);
            flame.scale(appearance.flameScale);
            topPart.insertChild(0, flame);
        }
        topPart.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, -160);
        topPart.rotate(15);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([button, mount, body, topPart]);
        return {
            graphic: graphic,
            pivot: body.bounds.center,
            hitShape: graphic.bounds.toShape(),
            snapping: body.placeable(),
        };
    };
    TorchBurner.properties = {
        label: "Torch Burner",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            flame: true,
            flameScale: 1.0
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "flame", label: "Flame", subLabel: "Show" },
            {
                spec: "slider", key: "flameScale", label: "Flame Size",
                min: 0.7, max: 1.5, step: 0.05,
                visible: function (a) { return a.flame; }
            }
        ],
    };
    return TorchBurner;
}());



/***/ }),

/***/ "euwi":
/*!******************************************************!*\
  !*** ./src/apparatus/library/measure/oxsat_probe.ts ***!
  \******************************************************/
/*! exports provided: OxSatProbe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OxSatProbe", function() { return OxSatProbe; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var OxSatProbe = /** @class */ (function () {
    function OxSatProbe() {
        this.drivers = [
            {
                type: "rectangle",
                minX: -150, maxX: 150,
                minY: 0, maxY: 200,
                toAppearance: function (p) { return ({ probeX: p.x, probeY: p.y }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.probeX, a.probeY); },
                scale: 1.0,
            }
        ];
    }
    OxSatProbe.prototype.render = function (appearance) {
        var probeOffsetX = appearance.probeX;
        var probeOffsetY = appearance.probeY;
        // Create a reader
        var casing = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 60, 100, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 4);
        casing.fillColor = "#dddddd";
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(casing);
        var screen = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 15, 50, 40, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2)
            .withStroke(2.0, "white")
            .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].lcdScreen);
        var screenClip = screen.clone();
        var button = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-10, 80), 7);
        button.fillColor = "#a9b2b7";
        button.strokeWidth = 2.0;
        button.strokeColor = "#777c7f";
        var button2 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(10, 80), 7);
        button2.fillColor = "#a9b2b7";
        button2.strokeWidth = 2.0;
        button2.strokeColor = "#777c7f";
        var satText = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(21, 32),
            content: appearance.saturation,
            fillColor: 'black',
            fontFamily: 'sans-serif',
            fontSize: 14,
            justification: "right",
        });
        var satTextLabel = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(23, 11),
            content: "mg/L",
            fillColor: "#555555",
            fontFamily: 'sans-serif',
            fontSize: 9,
            justification: "right",
        });
        var tempText = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"]({
            point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-18, 48),
            content: appearance.temperature + "°" + appearance.tempUnit,
            fillColor: 'black',
            fontFamily: 'sans-serif',
            fontSize: 11,
            justification: "left",
        });
        var screenDisplay = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([screenClip, satText, tempText]);
        screenDisplay.clipped = true;
        var reader = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([casing, screen, screenDisplay, satTextLabel, button, button2]);
        // Create the probe
        var probe = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[10, 0], [0, -2]], [[10, 70]], [[5, 77]], [[5, 110], , [0, 2]])).close();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(probe);
        probe.withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#333333".color()));
        probe.position = probe.position.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(probeOffsetX, probeOffsetY));
        // Create the wire.
        var wire = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 100], undefined, [0, 50]], // Connects to the casing.
        [[probeOffsetX, probeOffsetY], [0, -50]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(wire);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([reader, probe, wire]);
        var hitShapes = [
            probe.bounds.toShape(),
            reader.bounds.toShape(),
        ];
        return {
            graphic: graphic,
            hitShape: hitShapes,
            pivot: casing.bounds.center,
        };
    };
    OxSatProbe.properties = {
        label: "Oxygen Saturation Probe",
        canContainLiquids: false,
        defaultAppearance: {
            temperature: "20",
            tempUnit: "C",
            saturation: "8.5",
            probeX: 150,
            probeY: 100,
        },
        appearanceSpecs: [
            {
                spec: "text", key: "saturation", label: "Saturation",
                numbersOnly: true, maxLength: 5,
            },
            {
                spec: "text", key: "temperature", label: "Temperature",
                numbersOnly: true, maxLength: 5,
            },
            {
                spec: "toggle-buttons", key: "tempUnit", label: "Temperature unit", size: "text",
                options: [
                    { value: "C", label: "C", icon: "" },
                    { value: "F", label: "F", icon: "" },
                ]
            },
        ],
    };
    return OxSatProbe;
}());



/***/ }),

/***/ "eyfQ":
/*!*************************************************************!*\
  !*** ./src/apparatus/library/measurement/pipette_bottle.ts ***!
  \*************************************************************/
/*! exports provided: PipetteBottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PipetteBottle", function() { return PipetteBottle; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "UCWy");



var PipetteBottle = /** @class */ (function () {
    function PipetteBottle() {
    }
    PipetteBottle.prototype.render = function (appearance) {
        var bottle = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[9, 0]], [[10, 5], undefined, [0, 5]], [[20, 25], [0, -10]], [[20, 100]], [[0, 100]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(bottle);
        var liquidMask = bottle.clone();
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(bottle);
        return {
            graphic: bottle,
            liquidMask: liquidMask,
            hitShape: bottle.bounds.toShape(),
            snapping: bottle.placeable(),
        };
    };
    PipetteBottle.properties = {
        label: "Pipette Bottle",
        canContainLiquids: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return PipetteBottle;
}());



/***/ }),

/***/ "eymq":
/*!*********************************!*\
  !*** ./src/apparatus/search.ts ***!
  \*********************************/
/*! exports provided: searchApparatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "searchApparatus", function() { return searchApparatus; });
/* harmony import */ var _specList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./specList */ "OsNy");

function searchApparatus(term) {
    if (term.length == 0) {
        return [];
    }
    // Search is case-insensitive.
    term = term.toLowerCase();
    var results = [];
    var _loop_1 = function (a) {
        if (a.type.indexOf(term) !== -1) {
            // Lower score means better match.
            a.searchScore = 0;
            results.push(a);
        }
        else if (a.lowerCaseName.indexOf(term) !== -1) {
            // Search in the name as well.
            // Lower score means better match.
            a.searchScore = 0;
            results.push(a);
        }
        else {
            // search in additional terms
            a.search.some(function (searchTerms, i) {
                if (searchTerms.indexOf(term) !== -1) {
                    a.searchScore = 1 + i;
                    results.push(a);
                    return true;
                }
                return false;
            });
        }
    };
    for (var _i = 0, apparatusSpecList_1 = _specList__WEBPACK_IMPORTED_MODULE_0__["default"]; _i < apparatusSpecList_1.length; _i++) {
        var a = apparatusSpecList_1[_i];
        _loop_1(a);
    }
    // Sort the results
    results.sort(function (a, b) {
        // Compare by search score first
        var scoreDiff = (a.searchScore || 0) - (b.searchScore || 0);
        if (scoreDiff !== 0) {
            return scoreDiff;
        }
        // Compare based on name
        if (a.type < b.type) {
            return -1;
        }
        return 1; // Equal names are (technically) not possible
    });
    return results;
}


/***/ }),

/***/ "f9Hg":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/measurement/beam_balance.ts ***!
  \***********************************************************/
/*! exports provided: BeamBalance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BeamBalance", function() { return BeamBalance; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var BeamBalance = /** @class */ (function () {
    function BeamBalance() {
    }
    BeamBalance.prototype.render = function (appearance) {
        var tilt = appearance.tilt, size = appearance.size;
        var plateWidth = size / 2.5 - 8; // (120)
        var height = size; // (320)
        var width = size / 2 + 126; // (286)
        var halfWidth = width / 2; // (143)
        var base = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height, width + plateWidth / 2 + 20, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke)
            .withFill("#878c91");
        var pillar = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 25, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#aaaaaa".color()))
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke);
        var beam = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[halfWidth - 64, -24], [-10, -8]], [[halfWidth - 31, -3], [-6, 0]], [[halfWidth, -3], , [2, 0]], [[halfWidth, 8], [3, 0]], [[halfWidth - 30, 8], , [-10, 0]], [[halfWidth - 70, -10], [7, -2]], [[3, 3]], [[0, 15]])).close().withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke).withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#777777".color()));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(beam);
        beam.rotate(tilt, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var plate = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, height - 70, plateWidth, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 2.0)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#cccccc".color()))
            .withStroke("thin", "#888888");
        var wire = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-plateWidth / 2, height - 70]], [[-plateWidth / 2, plateWidth * 0.6]], [[0, 0]], [[plateWidth / 2, plateWidth * 0.6]], [[plateWidth / 2, height - 70]])).withStroke("thin", "#888888");
        var scaleL = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([wire, plate]);
        scaleL.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
        scaleL.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-halfWidth + 18, 2).rotate(tilt, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var scaleR = scaleL.clone();
        scaleR.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(halfWidth - 18, 2).rotate(tilt, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        // add markings.
        var line_0 = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 23), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 30)).withStroke(1.0, "#555555");
        var line_1 = line_0.clone();
        line_1.rotate(-10, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var line_2 = line_0.clone();
        line_2.rotate(10, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            pillar,
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["softShade"])("full", null, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -20), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 25), "#777777", 10.0),
            base, scaleL, scaleR, beam, line_0, line_1, line_2
        ]);
        return {
            graphic: graphic,
            hitShape: [
                base.bounds.toShape(),
                beam.bounds.toShape(),
                pillar.bounds.toShape(),
                plate.bounds.toShape(),
                scaleR.children[1].bounds.toShape(),
            ],
            pivot: pillar.bounds.center,
            snapping: [
                base.placeable(),
                scaleL.children[1].topEdgeAsPlaceableSurface(),
                scaleR.children[1].topEdgeAsPlaceableSurface(),
            ]
        };
    };
    BeamBalance.properties = {
        label: "Beam Balance",
        canContainLiquids: false,
        defaultAppearance: {
            tilt: 0,
            size: 240
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 180, max: 320,
            },
            {
                spec: "slider", key: "tilt", label: "Tilt",
                min: -10, max: 10, step: 0.1,
            }
        ],
    };
    return BeamBalance;
}());



/***/ }),

/***/ "fGEM":
/*!*****************************!*\
  !*** ./src/panel/shared.ts ***!
  \*****************************/
/*! exports provided: convertDemoSwatchesToRadioOptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertDemoSwatchesToRadioOptions", function() { return convertDemoSwatchesToRadioOptions; });
function convertDemoSwatchesToRadioOptions(swatches) {
    var options = [];
    for (var label in swatches) {
        options.push({ value: swatches[label], label: label });
    }
    // Push final option for More colours.
    options.push({ value: "____", label: "More colours", tier: "boost" });
    return options;
}


/***/ }),

/***/ "fJ6o":
/*!*****************************************!*\
  !*** ./src/apparatus/library/beaker.ts ***!
  \*****************************************/
/*! exports provided: Beaker, DisplacementBeaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Beaker", function() { return Beaker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisplacementBeaker", function() { return DisplacementBeaker; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "UCWy");



var Beaker = /** @class */ (function () {
    function Beaker() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 30, maxX: 120,
                minY: 40, maxY: 160,
                fromAppearance: function (a) { return Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.width, a.height); },
                toAppearance: function (p) { return ({ width: p.x, height: p.y }); },
                scale: 2.0,
            }
        ];
    }
    Beaker.prototype.render = function (appearance) {
        var beakerPath = createBasicBeaker(appearance);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(beakerPath);
        // Clone this path as a liquid mask too.
        var liquidMask = beakerPath.clone();
        // Create a container for the graphic
        var beakerGraphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([beakerPath]);
        markers(appearance, beakerGraphic);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(beakerGraphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(beakerPath.bounds);
        return {
            graphic: beakerGraphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.width / 2, 0), diameter: appearance.width, facing: 0 },
                beakerGraphic.placeable(),
            ]
        };
    };
    Beaker.properties = {
        label: "Beaker",
        canContainLiquids: true,
        defaultAppearance: {
            width: 80,
            height: 100,
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "width",
                label: "Width",
                min: 30,
                max: 120,
            },
            {
                spec: "slider",
                key: "height",
                label: "Height",
                min: 40,
                max: 160,
            },
        ]
    };
    return Beaker;
}());

var DisplacementBeaker = /** @class */ (function () {
    function DisplacementBeaker() {
    }
    DisplacementBeaker.prototype.render = function (appearance) {
        var beakerPath = createBasicBeaker(appearance);
        var width = appearance.width;
        // let height = appearance.height
        // Add a spout, winding anti clockwise
        beakerPath.insertSegments(5, Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[width, 25]], [[width + 15, 28]], [[width + 15, 18]], [[width, 10]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addEdgeLips"])(beakerPath);
        // Clone this path as a liquid mask too.
        var liquidMask = beakerPath.clone();
        // Create a container for the graphic
        var beakerGraphic = Object(_draw__WEBPACK_IMPORTED_MODULE_1__["breakPath"])(beakerPath, 8);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyle"])(beakerGraphic);
        markers(appearance, beakerGraphic);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Rectangle(beakerPath.bounds);
        return {
            graphic: beakerGraphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
            snapping: [
                beakerGraphic.placeable(),
                { type: "neck", top: Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.width / 2, 0), diameter: appearance.width, facing: 0 },
            ]
        };
    };
    DisplacementBeaker.properties = {
        label: "Displacement Beaker",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: Beaker.properties.defaultAppearance,
        appearanceSpecs: Beaker.properties.appearanceSpecs,
    };
    return DisplacementBeaker;
}());

/** Creates a basic beaker shape, without styles or edge lips. */
function createBasicBeaker(appearance) {
    var width = appearance.width;
    var height = appearance.height;
    var beakerPath = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])(
    // beaker side
    [[0, 0]], [[0, height]], 
    // beaker bottom
    [[width / 2, height]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(beakerPath.segments[1]);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["removeLastSegment"])(beakerPath);
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(beakerPath, width / 2);
    return beakerPath;
}
function markers(appearance, group) {
    Object(_draw__WEBPACK_IMPORTED_MODULE_1__["addMarkers"])(group, new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](appearance.width - 5, appearance.height), 8, new paper__WEBPACK_IMPORTED_MODULE_0__["Point"](0, _common__WEBPACK_IMPORTED_MODULE_2__["markerSpacing"]));
}


/***/ }),

/***/ "fVCq":
/*!****************************************************!*\
  !*** ./src/apparatus/library/devices/sonicator.ts ***!
  \****************************************************/
/*! exports provided: Sonicator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sonicator", function() { return Sonicator; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




// https://www.sonicator.com/products/q2000-sonicator
var Sonicator = /** @class */ (function () {
    function Sonicator() {
        this.drivers = [
            {
                type: "rectangle",
                minX: -500, maxX: 500,
                minY: -600, maxY: 0,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.probeX, a.probeY); },
                toAppearance: function (p) { return ({ probeX: p.x, probeY: p.y }); },
                scale: 1.0,
            }
        ];
    }
    Sonicator.prototype.render = function (appearance) {
        var probePosition = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.probeX, appearance.probeY);
        var widthAndHeights = [
            // Wire connector.
            [10, 8],
            // Top part.
            [28, 35],
            [32, 20],
            [18, 15],
            // Bottom part.
            [18, 30],
            [12, 25],
            [16, 32],
            [8, 40],
            [6, 40],
        ];
        var y = 0;
        var parts = widthAndHeights.map(function (_a) {
            var width = _a[0], height = _a[1];
            var shape = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, y, width, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER));
            y += height;
            return shape;
        });
        parts[0].fillColor = "black";
        for (var i = 1; i < 4; i++)
            parts[i].withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#bbbbbb".color(), 10));
        for (var i = 4; i < parts.length; i++)
            parts[i].withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#9a8d87".color(), 10));
        // Add together to a group.
        var probe = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"](parts);
        // Create outline.
        var outline = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"]().withStroke("default");
        outline.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var totalY = 0;
        for (var _i = 0, widthAndHeights_1 = widthAndHeights; _i < widthAndHeights_1.length; _i++) {
            var _a = widthAndHeights_1[_i], x = _a[0], y_1 = _a[1];
            outline.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(x / 2, totalY));
            totalY += y_1;
            outline.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(x / 2, totalY));
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(outline);
        probe.addChild(outline);
        probe.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
        probe.position = probePosition;
        if (!appearance.showBase) {
            return {
                graphic: probe,
                hitShape: probe.bounds.toShape(),
            };
        }
        // Panel.
        var panel = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 100, 100), 3.0)
                .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].devicePanel.stroke)
                .withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].devicePanel.fill),
            // Screen.
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(10, 10, 80, 15), 3.0).withStroke(4.0, "white").withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].lcdScreen)
        ]);
        for (var i = 0; i < 4; i++) {
            for (var j = 0; j < 3; j++) {
                panel.addChild(paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(27 + j * 16, 32 + i * 16, 12, 12), 2.0).withFill("white"));
            }
        }
        // Box.
        var box = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            // Body.
            paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 240, 120, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 4.0).withStroke("default", "#8e9499").withFill("#c0c6cb"),
            // Panel.
            panel.withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(60, 0))
        ]);
        var wire = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0], , [Math.min(100, probePosition.x), 0]], [[probePosition.x, probePosition.y], [0, -85]])).withStroke(2.0, "black");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([wire, box, probe]);
        return {
            graphic: graphic,
            pivot: box.bounds.center,
            hitShape: [box.bounds.toShape(), probe.bounds.toShape()],
            snapping: box.placeable(),
            watermark: probePosition.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(8, 40)),
        };
    };
    Sonicator.properties = {
        label: "Sonicator",
        canContainLiquids: false,
        defaultAppearance: {
            probeX: 250,
            probeY: -260,
            showBase: true,
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "showBase", label: "Show Base" }
        ],
    };
    return Sonicator;
}());



/***/ }),

/***/ "fWxf":
/*!***********************************************!*\
  !*** ./src/apparatus/library/shapes/cross.ts ***!
  \***********************************************/
/*! exports provided: Cross */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cross", function() { return Cross; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var Cross = /** @class */ (function () {
    function Cross() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 10, maxX: 80,
                minY: 5, maxY: 30,
                toAppearance: function (p) { return ({
                    thickness: Math.min(p.y, p.x - 10),
                    length: p.x,
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(a.length, a.thickness); },
                scale: 1.0,
            }
        ];
    }
    Cross.prototype.render = function (appearance) {
        var thickness = appearance.thickness, length = appearance.length;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[thickness, length]], [[thickness, thickness]], [[length, thickness]], [[length, -thickness]], [[thickness, -thickness]], [[thickness, -length]]));
        graphic.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        var shape = graphic.clone();
        // Styling.
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: shape,
        };
    };
    Cross.properties = {
        label: "Cross",
        canContainLiquids: false,
        defaultAppearance: __assign({ thickness: 10, length: 50 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_2__["BasicShapes"].specs),
    };
    return Cross;
}());



/***/ }),

/***/ "fXqh":
/*!****************************!*\
  !*** ./src/arrows/type.ts ***!
  \****************************/
/*! exports provided: DEFAULT_FONT_SIZE, Arrow */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_FONT_SIZE", function() { return DEFAULT_FONT_SIZE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Arrow", function() { return Arrow; });
var DEFAULT_FONT_SIZE = 12;
var Arrow;
(function (Arrow) {
    Arrow.defaultArrow = {
        selected: false,
        label: "Label",
        fontSize: DEFAULT_FONT_SIZE,
        endStyle: "triangle",
        isChemMarkEnabled: false,
        fontFamily: "sans-serif",
        textColor: "#000000",
        showArrow: true,
        arrowThickness: 3.0,
        textAlign: "left",
    };
})(Arrow || (Arrow = {}));


/***/ }),

/***/ "fdqv":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: pluralize, crumb, equals, getUrlParameter, isIEOrEdge, isIOS, isSafari, opensWindow, saveBlobHack, assertUnreachable, Lazy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pluralize", function() { return pluralize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "crumb", function() { return crumb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrlParameter", function() { return getUrlParameter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIEOrEdge", function() { return isIEOrEdge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIOS", function() { return isIOS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSafari", function() { return isSafari; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "opensWindow", function() { return opensWindow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveBlobHack", function() { return saveBlobHack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "assertUnreachable", function() { return assertUnreachable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lazy", function() { return Lazy; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var ext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ext/js */ "A5Ua");
/* harmony import */ var _vars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vars */ "nHh6");



/** Returns correctly pluralized term for given count */
function pluralize(count, term, useNo) {
    if (useNo === void 0) { useNo = false; }
    if (count === 0) {
        return (useNo ? "No" : "0") + " " + term + "s";
    }
    if (count === 1) {
        return "1 " + term;
    }
    return count + " " + term + "s";
}
function crumb(category, message) {
    _sentry_react__WEBPACK_IMPORTED_MODULE_0__["addBreadcrumb"]({ category: category, message: message });
}
/** Compares two floats to be "equal" enough */
function equals(a, b) {
    return Math.abs(a - b) < _vars__WEBPACK_IMPORTED_MODULE_2__["Consts"].epsilon;
}
function getUrlParameter(paramName) {
    var pageUrl = decodeURIComponent(window.location.search.substring(1));
    var params = pageUrl.split('&');
    for (var i = 0; i < params.length; i++) {
        var param = params[i].split('=');
        if (param[0] === paramName) {
            return params[1] === undefined ? true : params[1];
        }
    }
}
/** Returns true if the current browser is IE or Edge. */
function isIEOrEdge() {
    var uaString = window.navigator.userAgent;
    var match = /\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(uaString);
    if (match)
        return true;
    return false;
}
var isIOS = window.navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
function isSafari() {
    var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);
    // var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    return isSafari;
}
/** Execute a block of code that may open a window. Use opener to open the window. */
function opensWindow(fn) {
    var opener;
    if (isSafari()) {
        // On Safari, we need to open the window immediately, otherwise it gets
        // blocked and it's hard to open it.
        // https://stackoverflow.com/questions/20696041/window-openurl-blank-not-working-on-imac-safari
        var windowReferenceForSafari_1 = window.open();
        if (windowReferenceForSafari_1 != null) {
            windowReferenceForSafari_1.document.write("<html><body><center style='margin-top:5em'>Retrieving information, please wait...</center></body></html>");
            opener = function (url) {
                windowReferenceForSafari_1.location.href = url;
            };
        }
        else {
            opener = function (url) { return window.open(url); };
        }
    }
    else {
        opener = function (url) { return window.open(url); };
    }
    fn(opener);
}
/** IE cannot download images directly so have use this method. */
function saveBlobHack(el, mime) {
    // Based on:
    // https://github.com/mholt/PapaParse/issues/175
    if (window.navigator.msSaveOrOpenBlob !== undefined) {
        var data = $(el).attr("href") || "";
        // Remove the data URI header. Convert to binary.
        var rawData = atob(data.replace("data:" + mime + ";base64,", ""));
        var rawLength = rawData.length;
        var dataArray = new Uint8Array(rawLength);
        for (var i = 0; i < rawLength; i++) {
            dataArray[i] = rawData.charCodeAt(i);
        }
        var blob = new Blob([dataArray], { type: mime });
        // IE hack; see http://msdn.microsoft.com/en-us/library/ie/hh779016.aspx
        var filename = (function () {
            switch (mime) {
                case "image/svg":
                    return "chemix.svg";
                case "image/png":
                default:
                    return "chemix.png";
            }
        })();
        window.navigator.msSaveBlob(blob, filename);
    }
}
/** Use after a switch to make sure all cases have been handled. */
function assertUnreachable(e) {
    throw new Error("Non-exhaustive switch");
}
var Lazy = /** @class */ (function () {
    function Lazy(initializer) {
        this.instance = null;
        this.initializer = initializer;
    }
    Object.defineProperty(Lazy.prototype, "value", {
        get: function () {
            if (this.instance == null) {
                this.instance = this.initializer();
            }
            return this.instance;
        },
        enumerable: false,
        configurable: true
    });
    return Lazy;
}());



/***/ }),

/***/ "gJPE":
/*!*************************!*\
  !*** ./src/view/pan.ts ***!
  \*************************/
/*! exports provided: PanTool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PanTool", function() { return PanTool; });
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_move__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/move */ "c+g7");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! store/store */ "uFCc");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var PanTool = /** @class */ (function (_super) {
    __extends(PanTool, _super);
    function PanTool(app) {
        var _this = _super.call(this) || this;
        _this.app = app;
        _this.components = [];
        _this.onMouseDown = function (event) {
            _this.app.setIsInteracting(true);
            var allIds = __spreadArrays(store_store__WEBPACK_IMPORTED_MODULE_3__["default"].items().map(function (i) { return i.id; }), store_store__WEBPACK_IMPORTED_MODULE_3__["default"].arrows().map(function (a) { return a.id; }));
            _this.components = allIds.map(function (id) { return _this.app.getObjectComponent(id); });
        };
        _this.onMouseDrag = function (event) {
            var delta = event.point.subtract(event.downPoint);
            _this.components.map(function (c) { return c.setPositionDelta(delta); });
        };
        _this.onMouseUp = function (event) {
            _this.app.setIsInteracting(false);
            var delta = event.point.subtract(event.downPoint);
            if (delta.isZero())
                return;
            command_command__WEBPACK_IMPORTED_MODULE_0__["commandProcessor"].execute(new editing_move__WEBPACK_IMPORTED_MODULE_1__["Move"](_this.components.map(function (c) { return c.id; }), delta));
            _this.components.length = 0;
        };
        return _this;
    }
    return PanTool;
}(paper__WEBPACK_IMPORTED_MODULE_2__["Tool"]));



/***/ }),

/***/ "gKR8":
/*!*********************************************************!*\
  !*** ./src/apparatus/library/measurement/protractor.ts ***!
  \*********************************************************/
/*! exports provided: Protractor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Protractor", function() { return Protractor; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var MARKING_COLOR = "#666666";
var Protractor = /** @class */ (function () {
    function Protractor() {
    }
    Protractor.prototype.render = function (appearance) {
        var markings = appearance.labels;
        var base = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]();
        base.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-50, 10));
        base.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-50, 0));
        base.arcTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(50, 0));
        base.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(50, 10));
        base.close();
        base.withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke).withGradientFill("right-down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedGradients"].glass);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
            base,
            new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Arc(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-10, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -10), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(10, 0)).withStroke(1.0, MARKING_COLOR),
            new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Arc(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-35, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -35), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(35, 0)).withStroke(1.0, MARKING_COLOR),
        ]);
        // Add markings.
        var innerLineBase = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-10, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-35, 0)).withStroke(1.0, MARKING_COLOR);
        var outerLineBase = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-47, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-50, 0)).withStroke(1.0, MARKING_COLOR);
        for (var i = 0; i <= 18; i++) {
            var angle = i * 10;
            var innerLine = innerLineBase.clone();
            if (i % 9 == 0)
                innerLine.segments[0].point.x = 0;
            innerLine.rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
            var outerLine = outerLineBase.clone();
            outerLine.rotate(angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
            graphic.addChild(innerLine);
            graphic.addChild(outerLine);
            if (markings == "all" || (markings == "every-second" && i % 2 == 0)) {
                // Larger font if only every second marking is shown.
                var fontSize = markings == "all" ? 4 : 5.5;
                var compression = markings == "all" ? 0.8 : 0.9;
                var label = new paper__WEBPACK_IMPORTED_MODULE_1__["PointText"]({
                    point: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -40),
                    content: angle,
                    fillColor: 'black',
                    fontFamily: 'sans-serif',
                    fontSize: fontSize,
                    justification: 'center'
                });
                if (i == 9) {
                    label.fontWeight = 'bold';
                }
                label.scale(compression, 1.0);
                label.rotate(-90 + angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
                graphic.addChild(label);
            }
        }
        if (appearance.degree45) {
            var degree45 = innerLineBase.clone();
            degree45.segments[0].point.x = 0;
            degree45.dashArray = [5, 3];
            degree45.rotate(45, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
            var degree135 = degree45.clone();
            degree135.rotate(90, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
            graphic.addChildren([degree45, degree135]);
        }
        innerLineBase.remove();
        outerLineBase.remove();
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Protractor.properties = {
        label: "Protractor",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 2.0,
            labels: "every-second",
            degree45: true,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 1.0, max: 3.0, step: 0.1, unit: "%",
            },
            {
                spec: "radio", key: "labels", label: "Labels",
                options: [
                    { value: "off", label: "None" },
                    { value: "every-second", label: "Every second" },
                    { value: "all", label: "All" },
                ],
            },
            {
                spec: "checkbox-group", label: "Markings", checkboxes: [
                    { key: "degree45", label: "Show 45°/135°" }
                ]
            },
        ],
    };
    return Protractor;
}());



/***/ }),

/***/ "gLyJ":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/container/pear_flask.ts ***!
  \*******************************************************/
/*! exports provided: PearFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PearFlask", function() { return PearFlask; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);




var PearFlask = /** @class */ (function () {
    function PearFlask() {
    }
    PearFlask.prototype.render = function (appearance) {
        var s = appearance.size / 100;
        var shape = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[10, -20]], [[10, 0], , [15 * s, 5 * s]], [[30 * s, 30 * s], [0, -15 * s], [0, 20 * s]], [[0, 90 * s], [10 * s, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(shape);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLipsReversed"])(shape);
        var liquidMask = shape.clone();
        var graphic = shape;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape()
        };
    };
    PearFlask.properties = {
        label: "Pear-shaped flask",
        canContainLiquids: true,
        defaultAppearance: {
            size: 120,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 80, max: 180,
            }
        ],
    };
    return PearFlask;
}());



/***/ }),

/***/ "gOb7":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/heating/combustion_spoon.ts ***!
  \***********************************************************/
/*! exports provided: CombustionSpoon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CombustionSpoon", function() { return CombustionSpoon; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



/**
 * http://unisciencelab.com/product/combustion-spoon-nuffield/
 * https://www.sciencelab.co.ke/products/deflagrating-spoon-with-lid
 */
var CombustionSpoon = /** @class */ (function () {
    function CombustionSpoon() {
    }
    CombustionSpoon.prototype.render = function (appearance) {
        var bend = appearance.bend, cover = appearance.cover, shaded = appearance.shaded, largeSpoon = appearance.largeSpoon;
        var spoon = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](largeSpoon
            ? Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 380], [0, 0], [0, 16]], [[22, 380], [0, 16], [0, 0]])
            : Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 380], [0, 0], [0, 3]], [[7, 380], [0, 3], [0, 0]])).withStroke("default");
        if (largeSpoon && shaded) {
            spoon.close().withGradientFill("right", apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedGradients"].cylinderMetal);
        }
        var handle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"].apply(void 0, __spreadArrays([[[0, 0]]], (!bend ? [] :
            [[[0, 240], , [0, 10]],
                [[-12, 280], [0, -10]],
                [[-12, 370], , [0, 5]]]), [[[0, 380], [0, -5]]]))).withStroke("default");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([spoon, handle]);
        if (cover) {
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-35, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(35, 0))
                .withStroke("thick")
                .setGradientStroke("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#f7ca6c".color()))
                .withPosition(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, appearance.coverPosition)));
        }
        return {
            graphic: graphic,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 200),
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    CombustionSpoon.properties = {
        label: "Combustion spoon",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            bend: false,
            cover: false,
            shaded: true,
            largeSpoon: true,
            coverPosition: 200,
        },
        appearanceSpecs: [
            {
                spec: "checkbox-group", label: "Spoon",
                checkboxes: [
                    { key: "largeSpoon", label: "Large" },
                    { key: "shaded", label: "Shaded", visible: function (a) { return a.largeSpoon; } },
                ]
            },
            {
                spec: "checkbox-group", label: "Shaft", checkboxes: [
                    { key: "bend", label: "Show bend" },
                    { key: "cover", label: "Show cover" },
                ]
            },
            {
                spec: "slider", key: "coverPosition", label: "Cover position",
                min: 160, max: 230,
                visible: function (a) { return a.cover; }
            },
        ],
    };
    return CombustionSpoon;
}());



/***/ }),

/***/ "gQ5z":
/*!********************************************!*\
  !*** ./src/layout/modals/export_image.tsx ***!
  \********************************************/
/*! exports provided: ExportImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportImage", function() { return ExportImage; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tiers/badge */ "2UKY");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "fdqv");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







/** Export image modal dialog. */
var ExportImage = /** @class */ (function (_super) {
    __extends(ExportImage, _super);
    function ExportImage(props) {
        var _this = _super.call(this, props) || this;
        _this.imageContainerRef = react__WEBPACK_IMPORTED_MODULE_2__["createRef"]();
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"].Container, { parent: _this, title: _this.title, icon: _this.state.isExportInProgress ? "loading" : "fa-image", center: true }, _this.state.exportedImages
            ? _this.content_finished(_this.state.exportedImages)
            : _this.content_inProgress())); };
        /** Content to show when in progress. */
        _this.content_inProgress = function () { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", { key: "a" }, "Larger images can take several seconds. Please be patient.")); };
        /** Content to show when export is finished. */
        _this.content_finished = function (output) { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_5__["TierContext"].Consumer, null, function (tiers) { return ([
            // Upgrade notice for higher quality.
            !tiers.tier ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"](ImageQualityUpgrade, { key: "image_quality_upgrade", tiers: tiers }) : null,
            // Container to hold the exported image, as a preview.
            // This is empty and filled with an SVG in componentDidUpdate
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { key: "imageContainer", id: "exported-image-container", ref: _this.imageContainerRef }),
            // On IE or Edge browser, show a notice.
            Object(utils__WEBPACK_IMPORTED_MODULE_6__["isIEOrEdge"])() ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"](InternetExplorerNotice, { key: "ieNotice" }) : null,
            // Instructions.
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", { key: "a" }, "Select a file format to download the image."),
            // Export buttons.
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", { key: "export_buttons", className: "horizontal-button-group exportImageButtons" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"](DownloadButton, { key: "jpg", label: "JPG", mime: "image/jpeg", suffix: "jpg", data: output.jpgDataUrl, extraCss: "highlight" }),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"](DownloadButton, { key: "png", label: "PNG", mime: "image/png", suffix: "png", data: output.pngDataUrl }),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"](DownloadButton, { key: "svg", label: "SVG", mime: "image/svg", suffix: "svg", data: output.svgDataUrl, tiers: tiers })),
            // Hint on which format to pick.
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", { key: "hint", className: "hint" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { href: "#", "data-beacon-article-sidebar": support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].IMAGE_FORMATS },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-question-circle mr-1" }),
                    "If unsure, select \"",
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-download" }),
                    " JPG\""))
        ]); })); };
        _this.state = __assign(__assign({}, components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"].defaultState), { isExportInProgress: false });
        return _this;
    }
    Object.defineProperty(ExportImage.prototype, "title", {
        get: function () {
            return this.state.isExportInProgress
                ? "Exporting diagram, please wait..."
                : "Your diagram is ready!";
        },
        enumerable: false,
        configurable: true
    });
    ExportImage.prototype.componentDidUpdate = function () {
        // Append the SVG image element if set.
        var imageContainer = this.imageContainerRef.current;
        if (imageContainer) {
            if (this.state.exportedImages) {
                imageContainer.appendChild(this.state.exportedImages.svgElement);
            }
            else {
                // Remove children.
                if (imageContainer.firstChild) {
                    while (imageContainer.firstChild) {
                        imageContainer.removeChild(imageContainer.firstChild);
                    }
                }
            }
        }
    };
    return ExportImage;
}(components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"]));

/** Download button for a particular image format. */
var DownloadButton = function (props) {
    var isLocked = props.tiers && !props.tiers.allow("boost");
    return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { className: "remodal-confirm ui-button " + props.extraCss || false, href: !isLocked ? props.data : undefined, onClick: function (e) { return !isLocked ? downloadImage(e.target, props.mime, props.label) : props.tiers.popup("SVG"); }, download: "chemix." + props.suffix },
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("i", { className: "fa fa-download" }),
        " ",
        props.label,
        " \u00A0",
        isLocked ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_4__["Badge"], { tier: "boost" }) : null));
};
/** IE has a rendering bug. Notify users of this. */
var InternetExplorerNotice = function () { return (react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null,
    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("b", null, "Internet Explorer/EDGE users:"),
    " The preview may appear incorrect. ",
    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("br", null),
    "Do not worry, this does not affect the downloaded file.")); };
/** Handles downloading an image. */
function downloadImage(element, mime, actionLog) {
    Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SaveImage", actionLog);
    Object(utils__WEBPACK_IMPORTED_MODULE_6__["saveBlobHack"])(element, mime);
}
var ImageQualityUpgrade = function (props) {
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "inline-toast toast toast-info d-flex mb-3" },
        "Your current image quality is Standard.",
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontal-button-group ml-auto pl-2", style: { marginTop: "-6px", marginBottom: "-6px" } },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { className: "ui-button px-2", href: "#", "data-beacon-article-sidebar": support_beacon__WEBPACK_IMPORTED_MODULE_3__["Articles"].IMAGE_QUALITY }, "Learn more"),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "ui-button px-2", onClick: function () { return props.tiers.popup("ImageExport"); } },
                "Upgrade to High Quality ",
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_4__["Badge"], { tier: "boost" }))));
};


/***/ }),

/***/ "gXS/":
/*!****************************************!*\
  !*** ./src/apparatus/library/index.ts ***!
  \****************************************/
/*! exports provided: createApparatus, apparatusClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createApparatus", function() { return createApparatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "apparatusClass", function() { return apparatusClass; });
/* harmony import */ var apparatus_library_accessories_balloon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/accessories/balloon */ "a0VA");
/* harmony import */ var apparatus_library_accessories_candle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/accessories/candle */ "Q2/V");
/* harmony import */ var apparatus_library_accessories_cork_ring__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/accessories/cork_ring */ "b/l1");
/* harmony import */ var apparatus_library_accessories_goggles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/accessories/goggles */ "aGdU");
/* harmony import */ var apparatus_library_accessories_lamp__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! apparatus/library/accessories/lamp */ "uMwy");
/* harmony import */ var apparatus_library_accessories_paper_clip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! apparatus/library/accessories/paper_clip */ "Js+g");
/* harmony import */ var apparatus_library_accessories_scissors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! apparatus/library/accessories/scissors */ "N5IU");
/* harmony import */ var apparatus_library_accessories_sellotape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! apparatus/library/accessories/sellotape */ "30Lh");
/* harmony import */ var apparatus_library_accessories_smoke__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! apparatus/library/accessories/smoke */ "WWCi");
/* harmony import */ var apparatus_library_accessories_splint__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! apparatus/library/accessories/splint */ "NrkT");
/* harmony import */ var apparatus_library_accessories_tap__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! apparatus/library/accessories/tap */ "JkqK");
/* harmony import */ var apparatus_library_accessories_tlc_chamber__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! apparatus/library/accessories/tlc_chamber */ "Q4rv");
/* harmony import */ var apparatus_library_accessories_tlc_plate__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! apparatus/library/accessories/tlc_plate */ "9ift");
/* harmony import */ var apparatus_library_accessories_tlc_spot__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! apparatus/library/accessories/tlc_spot */ "Mnl2");
/* harmony import */ var apparatus_library_accessories_wool__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! apparatus/library/accessories/wool */ "wOKs");
/* harmony import */ var apparatus_library_balance__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! apparatus/library/balance */ "Rbn7");
/* harmony import */ var apparatus_library_bench_mat__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! apparatus/library/bench_mat */ "ecbh");
/* harmony import */ var apparatus_library_biology_equipment_choice_chamber__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! apparatus/library/biology/equipment/choice_chamber */ "0A45");
/* harmony import */ var apparatus_library_biology_equipment_cover_slip__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! apparatus/library/biology/equipment/cover_slip */ "KqdT");
/* harmony import */ var apparatus_library_biology_equipment_microplates__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! apparatus/library/biology/equipment/microplates */ "/OBm");
/* harmony import */ var apparatus_library_biology_equipment_microscope_slide__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! apparatus/library/biology/equipment/microscope_slide */ "RUr7");
/* harmony import */ var apparatus_library_biology_equipment_petri_top__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! apparatus/library/biology/equipment/petri_top */ "97DK");
/* harmony import */ var apparatus_library_biology_equipment_potometer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! apparatus/library/biology/equipment/potometer */ "bo2j");
/* harmony import */ var apparatus_library_biology_equipment_quadrat__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! apparatus/library/biology/equipment/quadrat */ "lJUC");
/* harmony import */ var apparatus_library_biology_equipment_scalpel__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! apparatus/library/biology/equipment/scalpel */ "0awj");
/* harmony import */ var apparatus_library_biology_equipment_tweezers__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! apparatus/library/biology/equipment/tweezers */ "129a");
/* harmony import */ var apparatus_library_biology_equipment_water_bath__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! apparatus/library/biology/equipment/water_bath */ "/nic");
/* harmony import */ var apparatus_library_biology_organic_agar__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! apparatus/library/biology/organic/agar */ "/V77");
/* harmony import */ var apparatus_library_biology_organic_bacteria__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! apparatus/library/biology/organic/bacteria */ "AAbs");
/* harmony import */ var apparatus_library_biology_organic_bug__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! apparatus/library/biology/organic/bug */ "n7Dw");
/* harmony import */ var apparatus_library_biology_organic_leaf__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! apparatus/library/biology/organic/leaf */ "WNWG");
/* harmony import */ var apparatus_library_biology_organic_plant_shoot__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! apparatus/library/biology/organic/plant_shoot */ "lfcP");
/* harmony import */ var apparatus_library_biology_organic_pond_weed__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! apparatus/library/biology/organic/pond_weed */ "i0a2");
/* harmony import */ var apparatus_library_biology_organic_potato__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! apparatus/library/biology/organic/potato */ "JCGD");
/* harmony import */ var apparatus_library_biology_organic_root__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! apparatus/library/biology/organic/root */ "rhfF");
/* harmony import */ var apparatus_library_biology_organic_seed__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! apparatus/library/biology/organic/seed */ "G2dW");
/* harmony import */ var apparatus_library_biology_organic_shoot__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! apparatus/library/biology/organic/shoot */ "0iBZ");
/* harmony import */ var apparatus_library_biology_organic_streaked_bacteria__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! apparatus/library/biology/organic/streaked_bacteria */ "qCHL");
/* harmony import */ var apparatus_library_biology_other_dirt__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! apparatus/library/biology/other/dirt */ "FvJs");
/* harmony import */ var apparatus_library_biology_other_plant_pot__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! apparatus/library/biology/other/plant_pot */ "FXHV");
/* harmony import */ var apparatus_library_biology_other_sun__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! apparatus/library/biology/other/sun */ "Zhen");
/* harmony import */ var apparatus_library_borked__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! apparatus/library/borked */ "6enR");
/* harmony import */ var apparatus_library_bung__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! apparatus/library/bung */ "k1bn");
/* harmony import */ var apparatus_library_burette__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! apparatus/library/burette */ "3DAD");
/* harmony import */ var apparatus_library_capillary_tube__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! apparatus/library/capillary_tube */ "c91M");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_container_cell_flask__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! apparatus/library/container/cell_flask */ "1guU");
/* harmony import */ var apparatus_library_container_centrifugeTube__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! apparatus/library/container/centrifugeTube */ "KBmw");
/* harmony import */ var apparatus_library_container_eppendorfTube__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! apparatus/library/container/eppendorfTube */ "FH+X");
/* harmony import */ var apparatus_library_container_thermos_flask__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! apparatus/library/container/thermos_flask */ "Pnck");
/* harmony import */ var apparatus_library_container_weight_boat__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! apparatus/library/container/weight_boat */ "1Ljk");
/* harmony import */ var apparatus_library_crucible__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! apparatus/library/crucible */ "8yGs");
/* harmony import */ var apparatus_library_cuvette__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! apparatus/library/cuvette */ "dUPR");
/* harmony import */ var apparatus_library_decorative_camera__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! apparatus/library/decorative/camera */ "5kh9");
/* harmony import */ var apparatus_library_decorative_drop__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! apparatus/library/decorative/drop */ "W4c3");
/* harmony import */ var apparatus_library_decorative_eye__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! apparatus/library/decorative/eye */ "oa1K");
/* harmony import */ var apparatus_library_decorative_mirror__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! apparatus/library/decorative/mirror */ "+l7M");
/* harmony import */ var apparatus_library_decorative_particles__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! apparatus/library/decorative/particles */ "ie8W");
/* harmony import */ var apparatus_library_desiccator__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! apparatus/library/desiccator */ "tSsG");
/* harmony import */ var apparatus_library_devices_centrifuge__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! apparatus/library/devices/centrifuge */ "xAtF");
/* harmony import */ var apparatus_library_devices_hofmann__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! apparatus/library/devices/hofmann */ "BhwB");
/* harmony import */ var apparatus_library_devices_rotavap__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! apparatus/library/devices/rotavap */ "ufRn");
/* harmony import */ var apparatus_library_devices_spectrophotometer__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! apparatus/library/devices/spectrophotometer */ "9dkF");
/* harmony import */ var apparatus_library_devices_spectrophotometer_schematic__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! apparatus/library/devices/spectrophotometer_schematic */ "GUaT");
/* harmony import */ var apparatus_library_distillation_allihn__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! apparatus/library/distillation/allihn */ "gn+y");
/* harmony import */ var apparatus_library_distillation_cow_type__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! apparatus/library/distillation/cow_type */ "UtFm");
/* harmony import */ var apparatus_library_distillation_dean_stark_trap__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! apparatus/library/distillation/dean_stark_trap */ "bPe7");
/* harmony import */ var apparatus_library_distillation_fractionating__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! apparatus/library/distillation/fractionating */ "sk/T");
/* harmony import */ var apparatus_library_distillation_liebig__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! apparatus/library/distillation/liebig */ "XwMJ");
/* harmony import */ var apparatus_library_distillation_oil_bubbler__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! apparatus/library/distillation/oil_bubbler */ "xSC3");
/* harmony import */ var apparatus_library_distillation_receiver_adaptor__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! apparatus/library/distillation/receiver_adaptor */ "O8CP");
/* harmony import */ var apparatus_library_distillation_soxhlet__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! apparatus/library/distillation/soxhlet */ "VIBT");
/* harmony import */ var apparatus_library_distillation_splash_head__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! apparatus/library/distillation/splash_head */ "Me3J");
/* harmony import */ var apparatus_library_distillation_vigreux__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! apparatus/library/distillation/vigreux */ "kSdA");
/* harmony import */ var apparatus_library_dropper__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! apparatus/library/dropper */ "V1Zj");
/* harmony import */ var apparatus_library_electrical_ammeter__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! apparatus/library/electrical/ammeter */ "4df5");
/* harmony import */ var apparatus_library_electrical_battery__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! apparatus/library/electrical/battery */ "aaxn");
/* harmony import */ var apparatus_library_electrical_crocodile_clip__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! apparatus/library/electrical/crocodile_clip */ "kxzD");
/* harmony import */ var apparatus_library_electrical_magnet__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! apparatus/library/electrical/magnet */ "msuj");
/* harmony import */ var apparatus_library_electrical_powerpack__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! apparatus/library/electrical/powerpack */ "YW4J");
/* harmony import */ var apparatus_library_electrical_voltmeter__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! apparatus/library/electrical/voltmeter */ "Z/tB");
/* harmony import */ var apparatus_library_evaporating_dish__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! apparatus/library/evaporating_dish */ "mLwR");
/* harmony import */ var apparatus_library_filter__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! apparatus/library/filter */ "Pp6V");
/* harmony import */ var apparatus_library_gas_jar__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! apparatus/library/gas_jar */ "D6l8");
/* harmony import */ var apparatus_library_gas_syringe__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! apparatus/library/gas_syringe */ "NXUG");
/* harmony import */ var apparatus_library_gas_wash_bottle__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! apparatus/library/gas_wash_bottle */ "DiD4");
/* harmony import */ var apparatus_library_glass_wool__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! apparatus/library/glass_wool */ "sA3r");
/* harmony import */ var apparatus_library_heating_boilingtube__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! apparatus/library/heating/boilingtube */ "ED6b");
/* harmony import */ var apparatus_library_heating_combustion_spoon__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! apparatus/library/heating/combustion_spoon */ "gOb7");
/* harmony import */ var apparatus_library_heating_peg__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! apparatus/library/heating/peg */ "83yG");
/* harmony import */ var apparatus_library_heating_stick_lighter__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! apparatus/library/heating/stick_lighter */ "cPNO");
/* harmony import */ var apparatus_library_heating_testTubeHolder__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! apparatus/library/heating/testTubeHolder */ "R2/k");
/* harmony import */ var apparatus_library_heating_torch__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! apparatus/library/heating/torch */ "ef20");
/* harmony import */ var apparatus_library_hot_plate__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! apparatus/library/hot_plate */ "ATPK");
/* harmony import */ var apparatus_library_magnetic_stirrer__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! apparatus/library/magnetic_stirrer */ "LSFp");
/* harmony import */ var apparatus_library_measure_oxsat_probe__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! apparatus/library/measure/oxsat_probe */ "euwi");
/* harmony import */ var apparatus_library_measurement_beam_balance__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! apparatus/library/measurement/beam_balance */ "f9Hg");
/* harmony import */ var apparatus_library_measurement_digital_meters__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! apparatus/library/measurement/digital_meters */ "P3FS");
/* harmony import */ var apparatus_library_measurement_hydrometer__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! apparatus/library/measurement/hydrometer */ "///F");
/* harmony import */ var apparatus_library_measurement_manometer__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! apparatus/library/measurement/manometer */ "x9fu");
/* harmony import */ var apparatus_library_measurement_micropipette__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! apparatus/library/measurement/micropipette */ "UqWn");
/* harmony import */ var apparatus_library_measurement_protractor__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! apparatus/library/measurement/protractor */ "gKR8");
/* harmony import */ var apparatus_library_measurement_suction_pear__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! apparatus/library/measurement/suction_pear */ "UuRN");
/* harmony import */ var apparatus_library_measurement_tape__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! apparatus/library/measurement/tape */ "2lH5");
/* harmony import */ var apparatus_library_measurement_triple_beam_balance__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! apparatus/library/measurement/triple_beam_balance */ "13yt");
/* harmony import */ var apparatus_library_measurement_vernier__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! apparatus/library/measurement/vernier */ "AWwk");
/* harmony import */ var apparatus_library_metallic_hoffman_clamp__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! apparatus/library/metallic/hoffman_clamp */ "6K3b");
/* harmony import */ var apparatus_library_metallic_nichrome_loops__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! apparatus/library/metallic/nichrome_loops */ "5m1n");
/* harmony import */ var apparatus_library_metallic_steel_wool__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! apparatus/library/metallic/steel_wool */ "4gVM");
/* harmony import */ var apparatus_library_metalstrip__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! apparatus/library/metalstrip */ "CF+F");
/* harmony import */ var apparatus_library_mortar__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! apparatus/library/mortar */ "FT31");
/* harmony import */ var apparatus_library_nail__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! apparatus/library/nail */ "UVr1");
/* harmony import */ var apparatus_library_physics_cable__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! apparatus/library/physics/cable */ "KJd4");
/* harmony import */ var apparatus_library_physics_glass_block__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(/*! apparatus/library/physics/glass_block */ "s02+");
/* harmony import */ var apparatus_library_physics_light_gates__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(/*! apparatus/library/physics/light_gates */ "5ByY");
/* harmony import */ var apparatus_library_physics_pulley__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(/*! apparatus/library/physics/pulley */ "tJTw");
/* harmony import */ var apparatus_library_physics_ramp__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(/*! apparatus/library/physics/ramp */ "lcEn");
/* harmony import */ var apparatus_library_physics_raybox__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(/*! apparatus/library/physics/raybox */ "1HjL");
/* harmony import */ var apparatus_library_physics_slotted_weight__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(/*! apparatus/library/physics/slotted_weight */ "FDe9");
/* harmony import */ var apparatus_library_physics_solenoid__WEBPACK_IMPORTED_MODULE_119__ = __webpack_require__(/*! apparatus/library/physics/solenoid */ "NQjl");
/* harmony import */ var apparatus_library_physics_spring__WEBPACK_IMPORTED_MODULE_120__ = __webpack_require__(/*! apparatus/library/physics/spring */ "l2QM");
/* harmony import */ var apparatus_library_physics_trolley__WEBPACK_IMPORTED_MODULE_121__ = __webpack_require__(/*! apparatus/library/physics/trolley */ "YzqX");
/* harmony import */ var apparatus_library_pipette__WEBPACK_IMPORTED_MODULE_122__ = __webpack_require__(/*! apparatus/library/pipette */ "PSxR");
/* harmony import */ var apparatus_library_pump__WEBPACK_IMPORTED_MODULE_123__ = __webpack_require__(/*! apparatus/library/pump */ "I6sZ");
/* harmony import */ var apparatus_library_raster_image__WEBPACK_IMPORTED_MODULE_124__ = __webpack_require__(/*! apparatus/library/raster_image */ "BIaz");
/* harmony import */ var apparatus_library_reagent_bottle__WEBPACK_IMPORTED_MODULE_125__ = __webpack_require__(/*! apparatus/library/reagent_bottle */ "C2TN");
/* harmony import */ var apparatus_library_retort__WEBPACK_IMPORTED_MODULE_126__ = __webpack_require__(/*! apparatus/library/retort */ "8QbX");
/* harmony import */ var apparatus_library_ruler__WEBPACK_IMPORTED_MODULE_127__ = __webpack_require__(/*! apparatus/library/ruler */ "uHyz");
/* harmony import */ var apparatus_library_schlenk_flask__WEBPACK_IMPORTED_MODULE_128__ = __webpack_require__(/*! apparatus/library/schlenk_flask */ "mQL2");
/* harmony import */ var apparatus_library_shapes_arrow__WEBPACK_IMPORTED_MODULE_129__ = __webpack_require__(/*! apparatus/library/shapes/arrow */ "zTgj");
/* harmony import */ var apparatus_library_shapes_cross__WEBPACK_IMPORTED_MODULE_130__ = __webpack_require__(/*! apparatus/library/shapes/cross */ "fWxf");
/* harmony import */ var apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_131__ = __webpack_require__(/*! apparatus/library/shapes/curve */ "t5XS");
/* harmony import */ var apparatus_library_shapes_ellipse__WEBPACK_IMPORTED_MODULE_132__ = __webpack_require__(/*! apparatus/library/shapes/ellipse */ "UESe");
/* harmony import */ var apparatus_library_shapes_line__WEBPACK_IMPORTED_MODULE_133__ = __webpack_require__(/*! apparatus/library/shapes/line */ "XKwN");
/* harmony import */ var apparatus_library_shapes_rectangle__WEBPACK_IMPORTED_MODULE_134__ = __webpack_require__(/*! apparatus/library/shapes/rectangle */ "U+Wy");
/* harmony import */ var apparatus_library_shapes_star__WEBPACK_IMPORTED_MODULE_135__ = __webpack_require__(/*! apparatus/library/shapes/star */ "Wdtt");
/* harmony import */ var apparatus_library_shapes_tick__WEBPACK_IMPORTED_MODULE_136__ = __webpack_require__(/*! apparatus/library/shapes/tick */ "j+1L");
/* harmony import */ var apparatus_library_shapes_triangle__WEBPACK_IMPORTED_MODULE_137__ = __webpack_require__(/*! apparatus/library/shapes/triangle */ "6Bwk");
/* harmony import */ var apparatus_library_spatula__WEBPACK_IMPORTED_MODULE_138__ = __webpack_require__(/*! apparatus/library/spatula */ "ITsu");
/* harmony import */ var apparatus_library_storage_plastic_reagent_bottle__WEBPACK_IMPORTED_MODULE_139__ = __webpack_require__(/*! apparatus/library/storage/plastic_reagent_bottle */ "lYKe");
/* harmony import */ var apparatus_library_structure_burette_clamp__WEBPACK_IMPORTED_MODULE_140__ = __webpack_require__(/*! apparatus/library/structure/burette_clamp */ "vH3o");
/* harmony import */ var apparatus_library_syringe__WEBPACK_IMPORTED_MODULE_141__ = __webpack_require__(/*! apparatus/library/syringe */ "qRtN");
/* harmony import */ var apparatus_library_test_tube_rack__WEBPACK_IMPORTED_MODULE_142__ = __webpack_require__(/*! apparatus/library/test_tube_rack */ "kjz7");
/* harmony import */ var apparatus_library_timer__WEBPACK_IMPORTED_MODULE_143__ = __webpack_require__(/*! apparatus/library/timer */ "MLxQ");
/* harmony import */ var apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_144__ = __webpack_require__(/*! apparatus/library/transportation/osmosis_tube */ "GZua");
/* harmony import */ var apparatus_library_transportation_schlenk_lines__WEBPACK_IMPORTED_MODULE_145__ = __webpack_require__(/*! apparatus/library/transportation/schlenk_lines */ "+g11");
/* harmony import */ var apparatus_library_tripod__WEBPACK_IMPORTED_MODULE_146__ = __webpack_require__(/*! apparatus/library/tripod */ "+vqO");
/* harmony import */ var apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__ = __webpack_require__(/*! apparatus/library/tubes */ "TmSb");
/* harmony import */ var apparatus_library_volumetric_flask__WEBPACK_IMPORTED_MODULE_148__ = __webpack_require__(/*! apparatus/library/volumetric_flask */ "aHDU");
/* harmony import */ var apparatus_library_watch_glass__WEBPACK_IMPORTED_MODULE_149__ = __webpack_require__(/*! apparatus/library/watch_glass */ "UuPG");
/* harmony import */ var apparatus_library_wire_gauze__WEBPACK_IMPORTED_MODULE_150__ = __webpack_require__(/*! apparatus/library/wire_gauze */ "AqD8");
/* harmony import */ var freehand_apparatus__WEBPACK_IMPORTED_MODULE_151__ = __webpack_require__(/*! freehand/apparatus */ "AZ3F");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_152__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var _accessories_bottle__WEBPACK_IMPORTED_MODULE_153__ = __webpack_require__(/*! ./accessories/bottle */ "YJ2m");
/* harmony import */ var _accessories_drop_counter__WEBPACK_IMPORTED_MODULE_154__ = __webpack_require__(/*! ./accessories/drop_counter */ "Jgwi");
/* harmony import */ var _accessories_faucet__WEBPACK_IMPORTED_MODULE_155__ = __webpack_require__(/*! ./accessories/faucet */ "20ot");
/* harmony import */ var _accessories_felt_tip_pen__WEBPACK_IMPORTED_MODULE_156__ = __webpack_require__(/*! ./accessories/felt_tip_pen */ "xx+b");
/* harmony import */ var _accessories_ghs_hazard_symbol__WEBPACK_IMPORTED_MODULE_157__ = __webpack_require__(/*! ./accessories/ghs_hazard_symbol */ "nCVi");
/* harmony import */ var _accessories_glass_stopper__WEBPACK_IMPORTED_MODULE_158__ = __webpack_require__(/*! ./accessories/glass_stopper */ "h7rg");
/* harmony import */ var _accessories_glove__WEBPACK_IMPORTED_MODULE_159__ = __webpack_require__(/*! ./accessories/glove */ "MUtg");
/* harmony import */ var _accessories_joint_clip__WEBPACK_IMPORTED_MODULE_160__ = __webpack_require__(/*! ./accessories/joint_clip */ "4poY");
/* harmony import */ var _accessories_microscope__WEBPACK_IMPORTED_MODULE_161__ = __webpack_require__(/*! ./accessories/microscope */ "13Da");
/* harmony import */ var _accessories_pencil__WEBPACK_IMPORTED_MODULE_162__ = __webpack_require__(/*! ./accessories/pencil */ "r/qO");
/* harmony import */ var _accessories_ph_paper__WEBPACK_IMPORTED_MODULE_163__ = __webpack_require__(/*! ./accessories/ph_paper */ "9xfh");
/* harmony import */ var _beaker__WEBPACK_IMPORTED_MODULE_164__ = __webpack_require__(/*! ./beaker */ "fJ6o");
/* harmony import */ var _buchner__WEBPACK_IMPORTED_MODULE_165__ = __webpack_require__(/*! ./buchner */ "OjqD");
/* harmony import */ var _bunsen__WEBPACK_IMPORTED_MODULE_166__ = __webpack_require__(/*! ./bunsen */ "MhfZ");
/* harmony import */ var _clamp__WEBPACK_IMPORTED_MODULE_167__ = __webpack_require__(/*! ./clamp */ "BoMl");
/* harmony import */ var _coldfinger__WEBPACK_IMPORTED_MODULE_168__ = __webpack_require__(/*! ./coldfinger */ "MSq7");
/* harmony import */ var _container_gas_cylinder__WEBPACK_IMPORTED_MODULE_169__ = __webpack_require__(/*! ./container/gas_cylinder */ "QT3L");
/* harmony import */ var _container_pear_flask__WEBPACK_IMPORTED_MODULE_170__ = __webpack_require__(/*! ./container/pear_flask */ "gLyJ");
/* harmony import */ var _container_thistle__WEBPACK_IMPORTED_MODULE_171__ = __webpack_require__(/*! ./container/thistle */ "tYwG");
/* harmony import */ var _cylinder__WEBPACK_IMPORTED_MODULE_172__ = __webpack_require__(/*! ./cylinder */ "YNhs");
/* harmony import */ var _decorative_beads__WEBPACK_IMPORTED_MODULE_173__ = __webpack_require__(/*! ./decorative/beads */ "1SsU");
/* harmony import */ var _decorative_bubbles__WEBPACK_IMPORTED_MODULE_174__ = __webpack_require__(/*! ./decorative/bubbles */ "hkwF");
/* harmony import */ var _decorative_crystals__WEBPACK_IMPORTED_MODULE_175__ = __webpack_require__(/*! ./decorative/crystals */ "C86e");
/* harmony import */ var _decorative_flame__WEBPACK_IMPORTED_MODULE_176__ = __webpack_require__(/*! ./decorative/flame */ "UVm1");
/* harmony import */ var _decorative_ice_cube__WEBPACK_IMPORTED_MODULE_177__ = __webpack_require__(/*! ./decorative/ice_cube */ "hduo");
/* harmony import */ var _decorative_label__WEBPACK_IMPORTED_MODULE_178__ = __webpack_require__(/*! ./decorative/label */ "O+47");
/* harmony import */ var _decorative_powder__WEBPACK_IMPORTED_MODULE_179__ = __webpack_require__(/*! ./decorative/powder */ "zFxe");
/* harmony import */ var _devices_fume_hood__WEBPACK_IMPORTED_MODULE_180__ = __webpack_require__(/*! ./devices/fume_hood */ "bi6v");
/* harmony import */ var _devices_sonicator__WEBPACK_IMPORTED_MODULE_181__ = __webpack_require__(/*! ./devices/sonicator */ "fVCq");
/* harmony import */ var _distillation_distillation_flask__WEBPACK_IMPORTED_MODULE_182__ = __webpack_require__(/*! ./distillation/distillation_flask */ "Ju2P");
/* harmony import */ var _distillation_distillation_head__WEBPACK_IMPORTED_MODULE_183__ = __webpack_require__(/*! ./distillation/distillation_head */ "H7op");
/* harmony import */ var _distillation_graham__WEBPACK_IMPORTED_MODULE_184__ = __webpack_require__(/*! ./distillation/graham */ "XwSK");
/* harmony import */ var _distillation_waterless_condenser__WEBPACK_IMPORTED_MODULE_185__ = __webpack_require__(/*! ./distillation/waterless_condenser */ "V4sx");
/* harmony import */ var _flask__WEBPACK_IMPORTED_MODULE_186__ = __webpack_require__(/*! ./flask */ "HNhp");
/* harmony import */ var _heating_beehive__WEBPACK_IMPORTED_MODULE_187__ = __webpack_require__(/*! ./heating/beehive */ "Xutw");
/* harmony import */ var _heating_calorimetry_cup__WEBPACK_IMPORTED_MODULE_188__ = __webpack_require__(/*! ./heating/calorimetry_cup */ "/dpX");
/* harmony import */ var _heating_clay_triangle__WEBPACK_IMPORTED_MODULE_189__ = __webpack_require__(/*! ./heating/clay_triangle */ "ussf");
/* harmony import */ var _heating_mantle__WEBPACK_IMPORTED_MODULE_190__ = __webpack_require__(/*! ./heating/mantle */ "us5W");
/* harmony import */ var _heating_sandbath__WEBPACK_IMPORTED_MODULE_191__ = __webpack_require__(/*! ./heating/sandbath */ "CEde");
/* harmony import */ var _heating_spirit_lamp__WEBPACK_IMPORTED_MODULE_192__ = __webpack_require__(/*! ./heating/spirit_lamp */ "RJVQ");
/* harmony import */ var _heating_tongs__WEBPACK_IMPORTED_MODULE_193__ = __webpack_require__(/*! ./heating/tongs */ "sC0y");
/* harmony import */ var _lamp__WEBPACK_IMPORTED_MODULE_194__ = __webpack_require__(/*! ./lamp */ "InFj");
/* harmony import */ var _live_apparatus__WEBPACK_IMPORTED_MODULE_195__ = __webpack_require__(/*! ./live_apparatus */ "3lL+");
/* harmony import */ var _measure_conductimeter__WEBPACK_IMPORTED_MODULE_196__ = __webpack_require__(/*! ./measure/conductimeter */ "Jotj");
/* harmony import */ var _measure_digital_themormeter__WEBPACK_IMPORTED_MODULE_197__ = __webpack_require__(/*! ./measure/digital_themormeter */ "HN7f");
/* harmony import */ var _measure_ph_probe__WEBPACK_IMPORTED_MODULE_198__ = __webpack_require__(/*! ./measure/ph_probe */ "10Ty");
/* harmony import */ var _measurement_pipette_bottle__WEBPACK_IMPORTED_MODULE_199__ = __webpack_require__(/*! ./measurement/pipette_bottle */ "eyfQ");
/* harmony import */ var _petri__WEBPACK_IMPORTED_MODULE_200__ = __webpack_require__(/*! ./petri */ "Q6X1");
/* harmony import */ var _roundBottomFlask__WEBPACK_IMPORTED_MODULE_201__ = __webpack_require__(/*! ./roundBottomFlask */ "Rcq3");
/* harmony import */ var _separatory__WEBPACK_IMPORTED_MODULE_202__ = __webpack_require__(/*! ./separatory */ "v88i");
/* harmony import */ var _shapes_cuboid__WEBPACK_IMPORTED_MODULE_203__ = __webpack_require__(/*! ./shapes/cuboid */ "xI9I");
/* harmony import */ var _shapes_cylinder__WEBPACK_IMPORTED_MODULE_204__ = __webpack_require__(/*! ./shapes/cylinder */ "EbaH");
/* harmony import */ var _shapes_sphere__WEBPACK_IMPORTED_MODULE_205__ = __webpack_require__(/*! ./shapes/sphere */ "wXI6");
/* harmony import */ var _spotting_tile__WEBPACK_IMPORTED_MODULE_206__ = __webpack_require__(/*! ./spotting_tile */ "3hX5");
/* harmony import */ var _stirringRod__WEBPACK_IMPORTED_MODULE_207__ = __webpack_require__(/*! ./stirringRod */ "RGHk");
/* harmony import */ var _structure_burette_holder__WEBPACK_IMPORTED_MODULE_208__ = __webpack_require__(/*! ./structure/burette_holder */ "vnI9");
/* harmony import */ var _structure_jack__WEBPACK_IMPORTED_MODULE_209__ = __webpack_require__(/*! ./structure/jack */ "mk3e");
/* harmony import */ var _table__WEBPACK_IMPORTED_MODULE_210__ = __webpack_require__(/*! ./table */ "h8ah");
/* harmony import */ var _tank__WEBPACK_IMPORTED_MODULE_211__ = __webpack_require__(/*! ./tank */ "L0oq");
/* harmony import */ var _testTube__WEBPACK_IMPORTED_MODULE_212__ = __webpack_require__(/*! ./testTube */ "RHVt");
/* harmony import */ var _thermometer__WEBPACK_IMPORTED_MODULE_213__ = __webpack_require__(/*! ./thermometer */ "QoY0");
/* harmony import */ var _thiele__WEBPACK_IMPORTED_MODULE_214__ = __webpack_require__(/*! ./thiele */ "a5uI");
/* harmony import */ var _transportation_dialysis__WEBPACK_IMPORTED_MODULE_215__ = __webpack_require__(/*! ./transportation/dialysis */ "S/0Z");
/* harmony import */ var _transportation_drop_funnel__WEBPACK_IMPORTED_MODULE_216__ = __webpack_require__(/*! ./transportation/drop_funnel */ "Y0Cy");
/* harmony import */ var _utility_wash_bottle__WEBPACK_IMPORTED_MODULE_217__ = __webpack_require__(/*! ./utility/wash_bottle */ "MuHm");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



























































































































































































































function createApparatus(type, position) {
    var properties = apparatusClass(type).properties;
    var liquidData = properties.defaultLiquidData || apparatus_library_common__WEBPACK_IMPORTED_MODULE_45__["DEFAULT_LIQUID_DATA"];
    return {
        id: store_id__WEBPACK_IMPORTED_MODULE_152__["ID"].mint("apparatus"),
        type: type,
        x: position.x,
        y: position.y,
        rotation: properties.defaultRotation || 0,
        selected: false,
        flipped: false,
        appearance: __assign({}, properties.defaultAppearance),
        liquid: properties.canContainLiquids ? liquidData : undefined
    };
}
function apparatusClass(id) {
    switch (id) {
        case "__live edit__": return _live_apparatus__WEBPACK_IMPORTED_MODULE_195__["LiveEditApparatus"];
        case "__brk": return apparatus_library_borked__WEBPACK_IMPORTED_MODULE_41__["Borked"];
        case "__raster image__": return apparatus_library_raster_image__WEBPACK_IMPORTED_MODULE_124__["RasterImage"];
        case "__freehand": return freehand_apparatus__WEBPACK_IMPORTED_MODULE_151__["FreehandDrawing"];
        case "beaker": return _beaker__WEBPACK_IMPORTED_MODULE_164__["Beaker"];
        case "test tube": return _testTube__WEBPACK_IMPORTED_MODULE_212__["TestTube"];
        case "test tube with side arm": return _testTube__WEBPACK_IMPORTED_MODULE_212__["TestTubeWithSideArm"];
        case "thermometer": return _thermometer__WEBPACK_IMPORTED_MODULE_213__["Thermometer"];
        case "conical flask": return _flask__WEBPACK_IMPORTED_MODULE_186__["ConicalFlask"];
        case "table": return _table__WEBPACK_IMPORTED_MODULE_210__["Table"];
        case "petri dish": return _petri__WEBPACK_IMPORTED_MODULE_200__["PetriDish"];
        case "round bottom flask": return _roundBottomFlask__WEBPACK_IMPORTED_MODULE_201__["RoundBottomFlask"];
        case "retort stand": return apparatus_library_retort__WEBPACK_IMPORTED_MODULE_126__["RetortStand"];
        case "tank": return _tank__WEBPACK_IMPORTED_MODULE_211__["Tank"];
        case "cylinder": return _cylinder__WEBPACK_IMPORTED_MODULE_172__["Cylinder"];
        case "stirring rod": return _stirringRod__WEBPACK_IMPORTED_MODULE_207__["StirringRod"];
        case "clamp": return _clamp__WEBPACK_IMPORTED_MODULE_167__["Clamp"];
        case "clamp front": return _clamp__WEBPACK_IMPORTED_MODULE_167__["FrontClamp"];
        case "bunsen": return _bunsen__WEBPACK_IMPORTED_MODULE_166__["BunsenBurner"];
        case "bung": return apparatus_library_bung__WEBPACK_IMPORTED_MODULE_42__["Bung"];
        case "volumetric flask": return apparatus_library_volumetric_flask__WEBPACK_IMPORTED_MODULE_148__["VolumetricFlask"];
        case "reagent bottle": return apparatus_library_reagent_bottle__WEBPACK_IMPORTED_MODULE_125__["ReagentBottle"];
        case "balance": return apparatus_library_balance__WEBPACK_IMPORTED_MODULE_15__["Balance"];
        case "pipette": return apparatus_library_pipette__WEBPACK_IMPORTED_MODULE_122__["Pipette"];
        case "tube bend": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["TubeBend"];
        case "tube": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["Tube"];
        case "eye": return apparatus_library_decorative_eye__WEBPACK_IMPORTED_MODULE_55__["Eye"];
        case "dropper pipette": return apparatus_library_dropper__WEBPACK_IMPORTED_MODULE_74__["Dropper"];
        case "magnetic stirrer-heater": return apparatus_library_magnetic_stirrer__WEBPACK_IMPORTED_MODULE_94__["MagneticStirrer"];
        case "glass wool": return apparatus_library_glass_wool__WEBPACK_IMPORTED_MODULE_86__["GlassWool"];
        case "tripod": return apparatus_library_tripod__WEBPACK_IMPORTED_MODULE_146__["Tripod"];
        case "hot plate": return apparatus_library_hot_plate__WEBPACK_IMPORTED_MODULE_93__["HotPlate"];
        case "magnetic stir bar": return apparatus_library_magnetic_stirrer__WEBPACK_IMPORTED_MODULE_94__["StirBar"];
        case "liebig condenser": return apparatus_library_distillation_liebig__WEBPACK_IMPORTED_MODULE_68__["LiebigCondenser"];
        case "burette": return apparatus_library_burette__WEBPACK_IMPORTED_MODULE_43__["Burette"];
        case "pump": return apparatus_library_pump__WEBPACK_IMPORTED_MODULE_123__["Pump"];
        case "fractionating column": return apparatus_library_distillation_fractionating__WEBPACK_IMPORTED_MODULE_67__["FractionatingColumn2"];
        case "filter funnel": return apparatus_library_filter__WEBPACK_IMPORTED_MODULE_82__["FilterFunnel"];
        case "drop": return apparatus_library_decorative_drop__WEBPACK_IMPORTED_MODULE_54__["Drop"];
        case "displacement beaker": return _beaker__WEBPACK_IMPORTED_MODULE_164__["DisplacementBeaker"];
        case "filter paper": return apparatus_library_filter__WEBPACK_IMPORTED_MODULE_82__["FilterPaper"];
        case "fluted filter paper": return apparatus_library_filter__WEBPACK_IMPORTED_MODULE_82__["FlutedFilterPaper"];
        case "boiling flask": return _roundBottomFlask__WEBPACK_IMPORTED_MODULE_201__["BoilingFlask"];
        case "wire gauze": return apparatus_library_wire_gauze__WEBPACK_IMPORTED_MODULE_150__["WireGauze"];
        case "spatula": return apparatus_library_spatula__WEBPACK_IMPORTED_MODULE_138__["Spatula"];
        case "gas jar": return apparatus_library_gas_jar__WEBPACK_IMPORTED_MODULE_83__["GasJar"];
        case "pestle": return apparatus_library_mortar__WEBPACK_IMPORTED_MODULE_110__["Pestle"];
        case "mortar": return apparatus_library_mortar__WEBPACK_IMPORTED_MODULE_110__["Mortar"];
        case "test tube rack": return apparatus_library_test_tube_rack__WEBPACK_IMPORTED_MODULE_142__["TestTubeRack"];
        case "thiele tube": return _thiele__WEBPACK_IMPORTED_MODULE_214__["ThieleTube"];
        case "crucible": return apparatus_library_crucible__WEBPACK_IMPORTED_MODULE_51__["Crucible"];
        case "cuvette": return apparatus_library_cuvette__WEBPACK_IMPORTED_MODULE_52__["Cuvette"];
        case "crucible cover": return apparatus_library_crucible__WEBPACK_IMPORTED_MODULE_51__["CrucileCover"];
        case "desiccator": return apparatus_library_desiccator__WEBPACK_IMPORTED_MODULE_58__["Desiccator"];
        case "evaporating dish": return apparatus_library_evaporating_dish__WEBPACK_IMPORTED_MODULE_81__["EvaporatingDish"];
        case "lamp": return _lamp__WEBPACK_IMPORTED_MODULE_194__["Lamp"];
        case "timer": return apparatus_library_timer__WEBPACK_IMPORTED_MODULE_143__["Timer"];
        case "label": return _decorative_label__WEBPACK_IMPORTED_MODULE_178__["Label"];
        case "spotting tile": return _spotting_tile__WEBPACK_IMPORTED_MODULE_206__["SpottingTile"];
        case "retort ring": return _clamp__WEBPACK_IMPORTED_MODULE_167__["Ring"];
        case "plastic pipette": return apparatus_library_pipette__WEBPACK_IMPORTED_MODULE_122__["PlasticPipette"];
        case "watch glass": return apparatus_library_watch_glass__WEBPACK_IMPORTED_MODULE_149__["WatchGlass"];
        case "nail": return apparatus_library_nail__WEBPACK_IMPORTED_MODULE_111__["Nail"];
        case "bench mat": return apparatus_library_bench_mat__WEBPACK_IMPORTED_MODULE_16__["BenchMat"];
        case "wooden splint": return apparatus_library_accessories_splint__WEBPACK_IMPORTED_MODULE_9__["Splint"];
        case "capillary tube": return apparatus_library_capillary_tube__WEBPACK_IMPORTED_MODULE_44__["CapillaryTube"];
        case "gas wash bottle": return apparatus_library_gas_wash_bottle__WEBPACK_IMPORTED_MODULE_85__["GasWashBottle"];
        case "4-way crossing": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["FourWayCrossing"];
        case "3-way crossing": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["ThreeWayCrossing"];
        case "u-bent tube": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["UTube"];
        case "s-bent tube": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["STube"];
        case "glove": return _accessories_glove__WEBPACK_IMPORTED_MODULE_159__["Glove"];
        case "goggles": return apparatus_library_accessories_goggles__WEBPACK_IMPORTED_MODULE_3__["Goggles"];
        case "gas syringe": return apparatus_library_gas_syringe__WEBPACK_IMPORTED_MODULE_84__["GasSyringe"];
        case "tube adapter": return apparatus_library_tubes__WEBPACK_IMPORTED_MODULE_147__["AdapterTube"];
        case "ruler": return apparatus_library_ruler__WEBPACK_IMPORTED_MODULE_127__["Ruler"];
        case "allihn": return apparatus_library_distillation_allihn__WEBPACK_IMPORTED_MODULE_64__["AllihnCondenser2"];
        case "graham": return _distillation_graham__WEBPACK_IMPORTED_MODULE_184__["GrahamCondenser2"];
        case "cold finger": return _coldfinger__WEBPACK_IMPORTED_MODULE_168__["ColdFinger"];
        case "conical flask with side arm": return _flask__WEBPACK_IMPORTED_MODULE_186__["ConicalFlaskWithSideArm"];
        case "buchner": return _buchner__WEBPACK_IMPORTED_MODULE_165__["BuchnerFunnel"];
        case "separatory funnel": return _separatory__WEBPACK_IMPORTED_MODULE_202__["SeparatoryFunnel"];
        case "tongs": return _heating_tongs__WEBPACK_IMPORTED_MODULE_193__["Tongs"];
        case "bubbles": return _decorative_bubbles__WEBPACK_IMPORTED_MODULE_174__["Bubbles"];
        case "crystals": return _decorative_crystals__WEBPACK_IMPORTED_MODULE_175__["Crystals"];
        case "sand bath": return _heating_sandbath__WEBPACK_IMPORTED_MODULE_191__["SandBath"];
        case "beehive stand": return _heating_beehive__WEBPACK_IMPORTED_MODULE_187__["Beehive"];
        case "clay triangle": return _heating_clay_triangle__WEBPACK_IMPORTED_MODULE_189__["ClayTriangle"];
        case "digital thermometer": return _measure_digital_themormeter__WEBPACK_IMPORTED_MODULE_197__["DigitalThermometer"];
        case "calorimetry cup": return _heating_calorimetry_cup__WEBPACK_IMPORTED_MODULE_188__["CalorimetryCup"];
        case "boiling tube": return apparatus_library_heating_boilingtube__WEBPACK_IMPORTED_MODULE_87__["BoilingTube"];
        case "boiling tube with sidearm": return apparatus_library_heating_boilingtube__WEBPACK_IMPORTED_MODULE_87__["BoilingTubeWithSideArm"];
        case "wash bottle": return _utility_wash_bottle__WEBPACK_IMPORTED_MODULE_217__["WashBottle"];
        case "metal strip": return apparatus_library_metalstrip__WEBPACK_IMPORTED_MODULE_109__["MetalStrip"];
        case "thistle tube": return _container_thistle__WEBPACK_IMPORTED_MODULE_171__["ThistleTube"];
        case "pipette bottle": return _measurement_pipette_bottle__WEBPACK_IMPORTED_MODULE_199__["PipetteBottle"];
        case "ice cube": return _decorative_ice_cube__WEBPACK_IMPORTED_MODULE_177__["IceCube"];
        case "spirit lamp": return _heating_spirit_lamp__WEBPACK_IMPORTED_MODULE_192__["SpiritLamp"];
        case "powder": return _decorative_powder__WEBPACK_IMPORTED_MODULE_179__["Powder"];
        case "heating mantle": return _heating_mantle__WEBPACK_IMPORTED_MODULE_190__["HeatingMantle"];
        case "waterless condenser": return _distillation_waterless_condenser__WEBPACK_IMPORTED_MODULE_185__["WaterlessCondenser"];
        case "burette holder": return _structure_burette_holder__WEBPACK_IMPORTED_MODULE_208__["BuretteHolder"];
        case "ph probe": return _measure_ph_probe__WEBPACK_IMPORTED_MODULE_198__["PhProbe"];
        case "conductimeter": return _measure_conductimeter__WEBPACK_IMPORTED_MODULE_196__["Conductimeter"];
        case "ghs hazard": return _accessories_ghs_hazard_symbol__WEBPACK_IMPORTED_MODULE_157__["GHSHazardSymbol"];
        case "flame": return _decorative_flame__WEBPACK_IMPORTED_MODULE_176__["Flame"];
        case "peg": return apparatus_library_heating_peg__WEBPACK_IMPORTED_MODULE_89__["Peg"];
        case "test tube holder": return apparatus_library_heating_testTubeHolder__WEBPACK_IMPORTED_MODULE_91__["TestTubeHolder"];
        case "centrifuge tube": return apparatus_library_container_centrifugeTube__WEBPACK_IMPORTED_MODULE_47__["CentrifugeTube"];
        case "eppendorf tube": return apparatus_library_container_eppendorfTube__WEBPACK_IMPORTED_MODULE_48__["EppendorfTube"];
        case "lab jack": return _structure_jack__WEBPACK_IMPORTED_MODULE_209__["LabJack"];
        case "gas cylinder": return _container_gas_cylinder__WEBPACK_IMPORTED_MODULE_169__["GasCylinder"];
        case "distillation head": return _distillation_distillation_head__WEBPACK_IMPORTED_MODULE_183__["DistillationHead"];
        case "dropping funnel": return _transportation_drop_funnel__WEBPACK_IMPORTED_MODULE_216__["DroppingFunnel"];
        case "plastic joint clip": return _accessories_joint_clip__WEBPACK_IMPORTED_MODULE_160__["PlasticJointClip"];
        case "glass stopper": return _accessories_glass_stopper__WEBPACK_IMPORTED_MODULE_158__["GlassStopper"];
        case "distillation flask": return _distillation_distillation_flask__WEBPACK_IMPORTED_MODULE_182__["DistillationFlask"];
        case "pear-shaped flask": return _container_pear_flask__WEBPACK_IMPORTED_MODULE_170__["PearFlask"];
        case "microscope": return _accessories_microscope__WEBPACK_IMPORTED_MODULE_161__["Microscope"];
        case "receiver adaptor": return apparatus_library_distillation_receiver_adaptor__WEBPACK_IMPORTED_MODULE_70__["ReceiverAdaptor"];
        case "schlenk flask": return apparatus_library_schlenk_flask__WEBPACK_IMPORTED_MODULE_128__["SchlenkFlask"];
        case "dean-stark trap": return apparatus_library_distillation_dean_stark_trap__WEBPACK_IMPORTED_MODULE_66__["DeanStarTrap"];
        case "croc clips": return apparatus_library_electrical_crocodile_clip__WEBPACK_IMPORTED_MODULE_77__["CrocodileClips"];
        case "soxhlet extractor": return apparatus_library_distillation_soxhlet__WEBPACK_IMPORTED_MODULE_71__["SoxhletExtractor"];
        case "rectangle": return apparatus_library_shapes_rectangle__WEBPACK_IMPORTED_MODULE_134__["Rectangle"];
        case "ellipse": return apparatus_library_shapes_ellipse__WEBPACK_IMPORTED_MODULE_132__["Ellipse"];
        case "schlenk lines": return apparatus_library_transportation_schlenk_lines__WEBPACK_IMPORTED_MODULE_145__["SchlenkLines"];
        case "particles": return apparatus_library_decorative_particles__WEBPACK_IMPORTED_MODULE_57__["Particles"];
        case "plastic reagent bottle": return apparatus_library_storage_plastic_reagent_bottle__WEBPACK_IMPORTED_MODULE_139__["PlasticReagentBottle"];
        case "cork ring": return apparatus_library_accessories_cork_ring__WEBPACK_IMPORTED_MODULE_2__["CorkRing"];
        case "rotavap": return apparatus_library_devices_rotavap__WEBPACK_IMPORTED_MODULE_61__["Rotavap"];
        case "nichrome loop": return apparatus_library_metallic_nichrome_loops__WEBPACK_IMPORTED_MODULE_107__["NichromeLoop"];
        case "leaf": return apparatus_library_biology_organic_leaf__WEBPACK_IMPORTED_MODULE_30__["Leaf"];
        case "potato": return apparatus_library_biology_organic_potato__WEBPACK_IMPORTED_MODULE_33__["Potato"];
        case "hofmann": return apparatus_library_devices_hofmann__WEBPACK_IMPORTED_MODULE_60__["Hofmann"];
        case "tlc plate": return apparatus_library_accessories_tlc_plate__WEBPACK_IMPORTED_MODULE_12__["TLCPlate"];
        case "tlc spot": return apparatus_library_accessories_tlc_spot__WEBPACK_IMPORTED_MODULE_13__["TLCSpot"];
        case "seed": return apparatus_library_biology_organic_seed__WEBPACK_IMPORTED_MODULE_35__["Seed"];
        case "petri top": return apparatus_library_biology_equipment_petri_top__WEBPACK_IMPORTED_MODULE_21__["PetriTop"];
        case "cotton wool": return apparatus_library_accessories_wool__WEBPACK_IMPORTED_MODULE_14__["CottonWool"];
        case "agar": return apparatus_library_biology_organic_agar__WEBPACK_IMPORTED_MODULE_27__["Agar"];
        case "microscope slide": return apparatus_library_biology_equipment_microscope_slide__WEBPACK_IMPORTED_MODULE_20__["MicroscopeSlide"];
        case "cover slip": return apparatus_library_biology_equipment_cover_slip__WEBPACK_IMPORTED_MODULE_18__["CoverSlip"];
        case "potometer": return apparatus_library_biology_equipment_potometer__WEBPACK_IMPORTED_MODULE_22__["Potometer"];
        case "tweezers": return apparatus_library_biology_equipment_tweezers__WEBPACK_IMPORTED_MODULE_25__["Tweezers"];
        case "plant shoot": return apparatus_library_biology_organic_plant_shoot__WEBPACK_IMPORTED_MODULE_31__["PlantShoot"];
        case "shoot": return apparatus_library_biology_organic_shoot__WEBPACK_IMPORTED_MODULE_36__["Shoot"];
        case "pot": return apparatus_library_biology_other_plant_pot__WEBPACK_IMPORTED_MODULE_39__["PlantPot"];
        case "pond weed": return apparatus_library_biology_organic_pond_weed__WEBPACK_IMPORTED_MODULE_32__["PondWeed"];
        case "sun": return apparatus_library_biology_other_sun__WEBPACK_IMPORTED_MODULE_40__["Sun"];
        case "quadrat": return apparatus_library_biology_equipment_quadrat__WEBPACK_IMPORTED_MODULE_23__["Quadrat"];
        case "scalpel": return apparatus_library_biology_equipment_scalpel__WEBPACK_IMPORTED_MODULE_24__["Scalpel"];
        case "dirt": return apparatus_library_biology_other_dirt__WEBPACK_IMPORTED_MODULE_38__["Dirt"];
        case "bacteria": return apparatus_library_biology_organic_bacteria__WEBPACK_IMPORTED_MODULE_28__["Bacteria"];
        case "cross": return apparatus_library_shapes_cross__WEBPACK_IMPORTED_MODULE_130__["Cross"];
        case "desk lamp": return apparatus_library_accessories_lamp__WEBPACK_IMPORTED_MODULE_4__["DeskLamp"];
        case "splash head": return apparatus_library_distillation_splash_head__WEBPACK_IMPORTED_MODULE_72__["SplashHead"];
        case "tick": return apparatus_library_shapes_tick__WEBPACK_IMPORTED_MODULE_136__["Tick"];
        case "arrow": return apparatus_library_shapes_arrow__WEBPACK_IMPORTED_MODULE_129__["Arrow"];
        case "beads": return _decorative_beads__WEBPACK_IMPORTED_MODULE_173__["Beads"];
        case "water bath": return apparatus_library_biology_equipment_water_bath__WEBPACK_IMPORTED_MODULE_26__["WaterBath"];
        case "tape measure": return apparatus_library_measurement_tape__WEBPACK_IMPORTED_MODULE_103__["TapeMeasure"];
        case "root": return apparatus_library_biology_organic_root__WEBPACK_IMPORTED_MODULE_34__["Root"];
        case "syringe": return apparatus_library_syringe__WEBPACK_IMPORTED_MODULE_141__["Syringe"];
        case "bug": return apparatus_library_biology_organic_bug__WEBPACK_IMPORTED_MODULE_29__["Bug"];
        case "3dcylinder": return _shapes_cylinder__WEBPACK_IMPORTED_MODULE_204__["Cylinder"];
        case "scissors": return apparatus_library_accessories_scissors__WEBPACK_IMPORTED_MODULE_6__["Scissors"];
        case "tap": return apparatus_library_accessories_tap__WEBPACK_IMPORTED_MODULE_10__["Tap"];
        case "curve": return apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_131__["Curve"];
        case "curved arrow": return apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_131__["CurvedArrow"];
        case "stir arrow": return apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_131__["StirArrow"];
        case "line": return apparatus_library_shapes_line__WEBPACK_IMPORTED_MODULE_133__["Line"];
        case "cowtype": return apparatus_library_distillation_cow_type__WEBPACK_IMPORTED_MODULE_65__["CowType"];
        case "oil bubbler": return apparatus_library_distillation_oil_bubbler__WEBPACK_IMPORTED_MODULE_69__["OilBubbler"];
        case "vigreux": return apparatus_library_distillation_vigreux__WEBPACK_IMPORTED_MODULE_73__["Vigreux"];
        case "mohr": return apparatus_library_pipette__WEBPACK_IMPORTED_MODULE_122__["MohrPipette"];
        case "micropipette": return apparatus_library_measurement_micropipette__WEBPACK_IMPORTED_MODULE_100__["Micropipette"];
        case "microplate": return apparatus_library_biology_equipment_microplates__WEBPACK_IMPORTED_MODULE_19__["Microplate"];
        case "suction pear": return apparatus_library_measurement_suction_pear__WEBPACK_IMPORTED_MODULE_102__["SuctionPear"];
        case "steel wool": return apparatus_library_metallic_steel_wool__WEBPACK_IMPORTED_MODULE_108__["SteelWool"];
        case "hoffman clamp": return apparatus_library_metallic_hoffman_clamp__WEBPACK_IMPORTED_MODULE_106__["HoffmanClamp"];
        case "cell flask": return apparatus_library_container_cell_flask__WEBPACK_IMPORTED_MODULE_46__["CellCultureFlask"];
        case "burette clamp": return apparatus_library_structure_burette_clamp__WEBPACK_IMPORTED_MODULE_140__["BuretteClamp"];
        case "battery": return apparatus_library_electrical_battery__WEBPACK_IMPORTED_MODULE_76__["Battery"];
        case "camera": return apparatus_library_decorative_camera__WEBPACK_IMPORTED_MODULE_53__["Camera"];
        case "videocamera": return apparatus_library_decorative_camera__WEBPACK_IMPORTED_MODULE_53__["VideoCamera"];
        case "thermos": return apparatus_library_container_thermos_flask__WEBPACK_IMPORTED_MODULE_49__["ThermosFlask"];
        case "stick lighter": return apparatus_library_heating_stick_lighter__WEBPACK_IMPORTED_MODULE_90__["StickLighter"];
        case "torch burner": return apparatus_library_heating_torch__WEBPACK_IMPORTED_MODULE_92__["TorchBurner"];
        case "hydrometer": return apparatus_library_measurement_hydrometer__WEBPACK_IMPORTED_MODULE_98__["Hydrometer"];
        case "balloon": return apparatus_library_accessories_balloon__WEBPACK_IMPORTED_MODULE_0__["Balloon"];
        case "star": return apparatus_library_shapes_star__WEBPACK_IMPORTED_MODULE_135__["Star"];
        case "streaked bacteria": return apparatus_library_biology_organic_streaked_bacteria__WEBPACK_IMPORTED_MODULE_37__["StreakedBacteria"];
        case "manometer": return apparatus_library_measurement_manometer__WEBPACK_IMPORTED_MODULE_99__["Manometer"];
        case "osmosis tube": return apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_144__["OsmosisTube"];
        case "dialysis tube": return _transportation_dialysis__WEBPACK_IMPORTED_MODULE_215__["DialysisTube"];
        case "faucet": return _accessories_faucet__WEBPACK_IMPORTED_MODULE_155__["Faucet"];
        case "adhesive tape": return apparatus_library_accessories_sellotape__WEBPACK_IMPORTED_MODULE_7__["Sellotape"];
        case "sonicator": return _devices_sonicator__WEBPACK_IMPORTED_MODULE_181__["Sonicator"];
        case "bottle": return _accessories_bottle__WEBPACK_IMPORTED_MODULE_153__["Bottle"];
        case "cuboid": return _shapes_cuboid__WEBPACK_IMPORTED_MODULE_203__["Cuboid"];
        case "ph paper": return _accessories_ph_paper__WEBPACK_IMPORTED_MODULE_163__["PhPaper"];
        case "ph paper pack": return _accessories_ph_paper__WEBPACK_IMPORTED_MODULE_163__["PhPaperPack"];
        case "drop counter": return _accessories_drop_counter__WEBPACK_IMPORTED_MODULE_154__["DropCounter"];
        case "sphere": return _shapes_sphere__WEBPACK_IMPORTED_MODULE_205__["Sphere"];
        case "fume hood": return _devices_fume_hood__WEBPACK_IMPORTED_MODULE_180__["FumeHood"];
        case "triangle": return apparatus_library_shapes_triangle__WEBPACK_IMPORTED_MODULE_137__["Triangle"];
        case "pencil": return _accessories_pencil__WEBPACK_IMPORTED_MODULE_162__["Pencil"];
        case "felt tip pen": return _accessories_felt_tip_pen__WEBPACK_IMPORTED_MODULE_156__["FeltTipPen"];
        case "spectrophotometer": return apparatus_library_devices_spectrophotometer__WEBPACK_IMPORTED_MODULE_62__["Spectrophotometer"];
        case "spectrophotometer-s": return apparatus_library_devices_spectrophotometer_schematic__WEBPACK_IMPORTED_MODULE_63__["SpetrophotometerSchematic"];
        case "candle": return apparatus_library_accessories_candle__WEBPACK_IMPORTED_MODULE_1__["Candle"];
        case "triple beam balance": return apparatus_library_measurement_triple_beam_balance__WEBPACK_IMPORTED_MODULE_104__["TripleBeamBalance"];
        case "smoke": return apparatus_library_accessories_smoke__WEBPACK_IMPORTED_MODULE_8__["Smoke"];
        case "protractor": return apparatus_library_measurement_protractor__WEBPACK_IMPORTED_MODULE_101__["Protractor"];
        case "beam balance": return apparatus_library_measurement_beam_balance__WEBPACK_IMPORTED_MODULE_96__["BeamBalance"];
        case "oxsat probe": return apparatus_library_measure_oxsat_probe__WEBPACK_IMPORTED_MODULE_95__["OxSatProbe"];
        case "powerpack": return apparatus_library_electrical_powerpack__WEBPACK_IMPORTED_MODULE_79__["PowerPack"];
        case "spring": return apparatus_library_physics_spring__WEBPACK_IMPORTED_MODULE_120__["Spring"];
        case "mirror": return apparatus_library_decorative_mirror__WEBPACK_IMPORTED_MODULE_56__["Mirror"];
        case "combustion spoon": return apparatus_library_heating_combustion_spoon__WEBPACK_IMPORTED_MODULE_88__["CombustionSpoon"];
        case "magnet": return apparatus_library_electrical_magnet__WEBPACK_IMPORTED_MODULE_78__["Magnet"];
        case "voltmeter-s": return apparatus_library_electrical_voltmeter__WEBPACK_IMPORTED_MODULE_80__["SimpleVoltmeter"];
        case "ammeter-s": return apparatus_library_electrical_ammeter__WEBPACK_IMPORTED_MODULE_75__["SimpleAmmeter"];
        case "pulley": return apparatus_library_physics_pulley__WEBPACK_IMPORTED_MODULE_115__["Pulley"];
        case "cable": return apparatus_library_physics_cable__WEBPACK_IMPORTED_MODULE_112__["Cable"];
        case "glass block": return apparatus_library_physics_glass_block__WEBPACK_IMPORTED_MODULE_113__["GlassBlock"];
        case "slotted weight": return apparatus_library_physics_slotted_weight__WEBPACK_IMPORTED_MODULE_118__["SlottedWeight"];
        case "raybox": return apparatus_library_physics_raybox__WEBPACK_IMPORTED_MODULE_117__["RayBox"];
        case "choice chamber": return apparatus_library_biology_equipment_choice_chamber__WEBPACK_IMPORTED_MODULE_17__["ChoiceChamber"];
        case "vernier": return apparatus_library_measurement_vernier__WEBPACK_IMPORTED_MODULE_105__["VernierCaliper"];
        case "digital voltmeter": return apparatus_library_measurement_digital_meters__WEBPACK_IMPORTED_MODULE_97__["DigitalVoltmeter"];
        case "digital ammeter": return apparatus_library_measurement_digital_meters__WEBPACK_IMPORTED_MODULE_97__["DigitalAmmemter"];
        case "solenoid": return apparatus_library_physics_solenoid__WEBPACK_IMPORTED_MODULE_119__["Solenoid"];
        case "centrifuge": return apparatus_library_devices_centrifuge__WEBPACK_IMPORTED_MODULE_59__["Centrifuge"];
        case "weight boat": return apparatus_library_container_weight_boat__WEBPACK_IMPORTED_MODULE_50__["WeightBoat"];
        case "paperclip": return apparatus_library_accessories_paper_clip__WEBPACK_IMPORTED_MODULE_5__["PaperClip"];
        case "trolley": return apparatus_library_physics_trolley__WEBPACK_IMPORTED_MODULE_121__["Trolley"];
        case "ramp": return apparatus_library_physics_ramp__WEBPACK_IMPORTED_MODULE_116__["Ramp"];
        case "light gate": return apparatus_library_physics_light_gates__WEBPACK_IMPORTED_MODULE_114__["LightGate"];
        case "tlc chamber": return apparatus_library_accessories_tlc_chamber__WEBPACK_IMPORTED_MODULE_11__["TLCChamber"];
    }
}


/***/ }),

/***/ "gn+y":
/*!******************************************************!*\
  !*** ./src/apparatus/library/distillation/allihn.ts ***!
  \******************************************************/
/*! exports provided: AllihnCondenser2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AllihnCondenser2", function() { return AllihnCondenser2; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _condensers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../condensers */ "ZaQ3");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var AllihnCondenser2 = /** @class */ (function () {
    function AllihnCondenser2() {
    }
    AllihnCondenser2.isBoostRequiredForAppearance = function (appearance) {
        return _condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].isBoostRequiredForAppearance(appearance);
    };
    AllihnCondenser2.prototype.render = function (appearance) {
        var ports = appearance.ports, height = appearance.height;
        var _a = Object(_condensers__WEBPACK_IMPORTED_MODULE_3__["condenserCaseShape"])(height, 15, ports), casing = _a.group, snapping = _a.snap;
        var insideTube1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-7.5, 0]], [[-7.5, 10]], [[-5, 25]]));
        var repeats = Math.floor((height - 60) / 35);
        var offset = (height - repeats * 35) / 2 + 5;
        for (var i = 0; i < repeats; i++) {
            var y = 35 * i + offset;
            insideTube1.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, y], , [-7, 4]], [[-5, y + 25], [-7, -4]]));
        }
        insideTube1.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-5, height - 25]], [[-7.5, height - 10]], [[-7.5, height]]));
        var insideTube2 = insideTube1.clone();
        insideTube2.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([casing, insideTube1, insideTube2]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height / 2)
        };
    };
    AllihnCondenser2.properties = {
        label: "Allihn Condenser",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: __assign({}, _condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].defaultAppearance),
        appearanceSpecs: __spreadArrays(_condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].appearanceSpecs),
    };
    return AllihnCondenser2;
}());



/***/ }),

/***/ "h/Eg":
/*!*******************************!*\
  !*** ./src/store/reducers.ts ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/auth/login_button */ "uYhG");
/* harmony import */ var api_auth_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/auth/storage */ "+GPU");
/* harmony import */ var ext_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ext/array */ "3pNw");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var typesafe_actions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! typesafe-actions */ "hkBr");
/* harmony import */ var typesafe_actions__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./actions */ "/GBr");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};








/* harmony default export */ __webpack_exports__["default"] = (function (state, action) {
    switch (action.type) {
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["addItems"]): {
            return __assign(__assign({}, state), { items: __spreadArrays(state.items, action.payload) });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["addItemsAtIndices"]): {
            return (function () {
                var newState = __assign({}, state);
                var sortedByIndex = action.payload.sort(function (a, b) { return a.index - b.index; });
                sortedByIndex.forEach(function (_a) {
                    var item = _a.item, index = _a.index;
                    newState.items.splice(index, 0, item);
                });
                return newState;
            })();
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["updateAppearance"]): {
            var _a = action.payload, id_1 = _a.id, key_1 = _a.key, value_1 = _a.value;
            var newState = __assign({}, state);
            newState.items = state.items.map(function (item) {
                if (item.id === id_1) {
                    var newAppearance = __assign({}, item.appearance);
                    newAppearance[key_1] = value_1;
                    return __assign(__assign({}, item), { appearance: newAppearance });
                }
                return item;
            });
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["updateItemsAppearance"]): {
            var _b = action.payload, key_2 = _b.key, idsToValuesMap_1 = _b.idsToValuesMap;
            var newState = __assign({}, state);
            newState.items = state.items.map(function (item) {
                var _a;
                var newValue = idsToValuesMap_1[item.id.id];
                if (newValue !== undefined) {
                    return __assign(__assign({}, item), { appearance: __assign(__assign({}, item.appearance), (_a = {}, _a[key_2] = newValue, _a)) });
                }
                return item;
            });
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["updateAppearanceProperties"]): {
            var _c = action.payload, id_2 = _c.id, props_1 = _c.props;
            var newState = __assign({}, state);
            newState.items = state.items.map(function (item) {
                return item.id === id_2
                    ? __assign(__assign({}, item), { appearance: __assign(__assign({}, item.appearance), props_1) }) : item;
            });
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["updateItemsAppearanceProperties"]): {
            var _d = action.payload, ids_1 = _d.ids, props_2 = _d.props;
            var newState = __assign({}, state);
            newState.items = state.items.map(function (item) {
                return ext_array__WEBPACK_IMPORTED_MODULE_3__["Arrays"].includes(ids_1, item.id)
                    ? __assign(__assign({}, item), { appearance: __assign(__assign({}, item.appearance), props_2) }) : item;
            });
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["removeItems"]): {
            var ids = action.payload.ids;
            var newState = __assign({}, state);
            newState.items = state.items.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].notMatching(ids));
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["addToGroup"]): {
            var groupsOperationData_1 = action.payload.data;
            var newState = __assign({}, state);
            var existingGroupIdNumbers_1 = [];
            newState.groups = newState.groups.map(function (group) {
                var _a;
                if (!(group.id.id in groupsOperationData_1)) {
                    return group;
                }
                existingGroupIdNumbers_1.push(group.id.id);
                var childIdsToAdd = groupsOperationData_1[group.id.id];
                (_a = group.items).push.apply(_a, childIdsToAdd);
                return group;
            });
            // Add any new groups.
            for (var groupIdNumber in groupsOperationData_1) {
                var groupIdNumberAsNumber = +groupIdNumber;
                if (existingGroupIdNumbers_1.indexOf(groupIdNumberAsNumber) === -1) {
                    // Group does not exist yet.
                    newState.groups.push({
                        id: action.payload.groupIds[groupIdNumber],
                        items: groupsOperationData_1[groupIdNumber]
                    });
                }
            }
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["removeFromGroup"]): {
            var groupsOperationData = action.payload.data;
            var newState = __assign({}, state);
            var newGroups = [];
            var _loop_1 = function (group) {
                if (group.id.id in groupsOperationData) {
                    var childIdsTorRemove_1 = groupsOperationData[group.id.id];
                    group.items = group.items.filter(function (i) { return childIdsTorRemove_1.indexOf(i) === -1; });
                    // Only keep this group if it still has any children.
                    if (group.items.length > 0) {
                        newGroups.push(group);
                    }
                }
                else {
                    // This group is not concerned. Keep it.
                    newGroups.push(group);
                }
            };
            for (var _i = 0, _e = newState.groups; _i < _e.length; _i++) {
                var group = _e[_i];
                _loop_1(group);
            }
            newState.groups = newGroups;
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["setItemsRotation"]): {
            var rotations_1 = action.payload.rotations;
            var newState = __assign({}, state);
            newState.items = state.items.map(function (item) {
                if (item.id.id in rotations_1) {
                    return __assign(__assign({}, item), { rotation: rotations_1[item.id.id] });
                }
                return item;
            });
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["switchTool"]): {
            var toolName = action.payload;
            return __assign(__assign({}, state), { tool: toolName });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["setThemeStrokeThickness"]): {
            return __assign(__assign({}, state), { theme: __assign(__assign({}, state.theme), { strokeThickness: action.payload }) });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["generic"]): {
            var actionFn = action.payload.actionFn;
            var newState = actionFn(state);
            return newState;
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["logIn"]): {
            support_beacon__WEBPACK_IMPORTED_MODULE_5__["Bcn"].setSessionData(action.payload.provider, action.payload.user, action.payload.tier);
            _sentry_react__WEBPACK_IMPORTED_MODULE_0__["setUser"]({ id: action.payload.user.id, email: action.payload.user.email });
            if (!(action.payload.silencePopup === true)) {
                var title = action.payload.firstTimeLogin ? "Thank you for signing up with Chemix!" : "Welcome back!";
                toastr.success("You are now signed in using\n                " + Object(api_auth_login_button__WEBPACK_IMPORTED_MODULE_1__["loginProviderDisplayName"])(action.payload.provider) + "\n                as " + action.payload.user.handle, title);
            }
            return __assign(__assign({}, state), { auth: {
                    state: "logged_in",
                    provider: action.payload.provider,
                    jwtToken: action.payload.jwtToken,
                    user: action.payload.user,
                }, tier: action.payload.tier });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["logOut"]): {
            support_beacon__WEBPACK_IMPORTED_MODULE_5__["Bcn"].unsetSessionData();
            _sentry_react__WEBPACK_IMPORTED_MODULE_0__["setUser"](null);
            toastr.info("You have been signed out.", "Signed out.");
            Object(api_auth_storage__WEBPACK_IMPORTED_MODULE_2__["clearToken"])();
            return __assign(__assign({}, state), { auth: {
                    state: "logged_out",
                }, tier: undefined });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["eraseItems"]): {
            return __assign(__assign({}, state), { items: [], arrows: [], groups: [] });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["replace"]): {
            // Merge current state with the one in the given document.
            // If the diagram is a template, do not set up information
            // about current diagram.
            var _f = action.payload, diagram = _f.diagram, isTemplate = _f.isTemplate;
            return __assign(__assign(__assign({}, state), diagram.data), { currentCloudDiagram: !isTemplate
                    ? {
                        id: diagram.id,
                        title: diagram.title,
                    }
                    : undefined });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["setCloudDiagram"]): {
            return __assign(__assign({}, state), { currentCloudDiagram: action.payload });
        }
        case Object(typesafe_actions__WEBPACK_IMPORTED_MODULE_6__["getType"])(_actions__WEBPACK_IMPORTED_MODULE_7__["_TESTONLY_resetState"]): {
            // Override in tests only.
            return state;
        }
        default: return state; // Needed for initial store state.
    }
});


/***/ }),

/***/ "h7rg":
/*!************************************************************!*\
  !*** ./src/apparatus/library/accessories/glass_stopper.ts ***!
  \************************************************************/
/*! exports provided: GlassStopper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlassStopper", function() { return GlassStopper; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var GlassStopper = /** @class */ (function () {
    function GlassStopper() {
    }
    GlassStopper.prototype.render = function (appearance) {
        var d = appearance.diameter - 3.0;
        var handle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, -5, d + 15, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].BOTTOM_CENTER), 2.0);
        var handle2 = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 3, d / 2 + 4, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].BOTTOM_CENTER));
        var stopper = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-d / 2 - 2, 0], , [2, -2]], [[d / 2 + 2, 0], [-2, -2]], [[d / 2 + 1, 30]], [[-d / 2 - 1, 30]]));
        stopper.closePath();
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["smoothCorner"])(stopper.segments[3], 2.0);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["smoothCorner"])(stopper.segments[2], 2.0);
        var groundJoint = stopper.clone();
        var outline = handle.unite(handle2).unite(stopper);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyleWithStroke"])("thin", outline);
        outline.strokeColor = "#666666";
        outline.fillColor = "#ffffff60";
        groundJoint.setGradientFill("right", [["#888888", 0.0], ["#ffffff", 0.5], ["#888888", 1.0]]);
        groundJoint.opacity = 0.5;
        groundJoint.strokeWidth = 0;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([groundJoint, outline]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(20).toShape(),
        };
    };
    GlassStopper.properties = {
        label: "Glass Stopper",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: 15
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 10, max: 35, step: 0.1,
            }
        ],
    };
    return GlassStopper;
}());



/***/ }),

/***/ "h8ah":
/*!****************************************!*\
  !*** ./src/apparatus/library/table.ts ***!
  \****************************************/
/*! exports provided: Table */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Table", function() { return Table; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../draw */ "hHoh");



var Table = /** @class */ (function () {
    function Table() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 400, maxX: 1500,
                minY: 0, maxY: 20,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width, 20); },
                toAppearance: function (p) { return ({ width: p.x }); },
                scale: 2.0,
            }
        ];
    }
    Table.prototype.render = function (appearance) {
        var width = appearance.width;
        var corner = 10.0;
        var legOffset = appearance.legOffset;
        var thickness = 40;
        var legHeight = getLegHeight(appearance);
        var tableTopRect = new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](0, 0, width, thickness);
        var leftLegRect = new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](legOffset, corner, thickness, legHeight);
        var rightLegRect = new paper__WEBPACK_IMPORTED_MODULE_1__["Rectangle"](width - thickness - legOffset, corner, thickness, legHeight);
        var tableTop = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(tableTopRect, corner);
        var leftLeg = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(leftLegRect);
        var rightLeg = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(rightLegRect);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(tableTop, leftLeg, rightLeg);
        switch (appearance.color) {
            case "white":
                tableTop.fillColor = "white";
                leftLeg.fillColor = "white";
                rightLeg.fillColor = "white";
                break;
            case "brown":
                var gradient = new paper__WEBPACK_IMPORTED_MODULE_1__["Gradient"]([
                    ["#ce9158", 0.2],
                    ["#ad7847", 0.21],
                    ["#704e2f", 1.0]
                ]);
                tableTop.fillColor = new paper__WEBPACK_IMPORTED_MODULE_1__["Color"](gradient, tableTopRect.topCenter, tableTopRect.bottomCenter);
                leftLeg.fillColor = new paper__WEBPACK_IMPORTED_MODULE_1__["Color"](gradient, leftLegRect.leftCenter, leftLegRect.rightCenter);
                rightLeg.fillColor = new paper__WEBPACK_IMPORTED_MODULE_1__["Color"](gradient, rightLegRect.leftCenter, rightLegRect.rightCenter);
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        var legs = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        var hitShapes = [tableTopRect];
        if (appearance.legs == "left") {
            legs.addChild(leftLeg);
            hitShapes.push(leftLegRect);
            rightLeg.remove();
        }
        else if (appearance.legs == "right") {
            legs.addChild(rightLeg);
            hitShapes.push(rightLegRect);
            leftLeg.remove();
        }
        else if (appearance.legs == "both") {
            legs.addChild(leftLeg);
            legs.addChild(rightLeg);
            hitShapes.push(rightLegRect);
            hitShapes.push(leftLegRect);
        }
        else {
            rightLeg.remove();
            leftLeg.remove();
        }
        graphic.addChild(legs);
        graphic.addChild(tableTop);
        return {
            graphic: graphic,
            pivot: tableTopRect.center,
            hitShape: hitShapes.map(paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle),
            snapping: tableTop.topEdgeAsPlaceableSurface(),
        };
    };
    Table.properties = {
        label: "Table",
        canContainLiquids: false,
        defaultAppearance: {
            height: "short",
            width: 700,
            legs: "both",
            color: "brown",
            legOffset: 100,
        },
        appearanceSpecs: [
            {
                spec: "slider",
                key: "width",
                label: "Width",
                min: 400,
                max: 1500,
            },
            {
                spec: "radio",
                key: "color",
                label: "Colour",
                options: [
                    { value: "white", label: "White" },
                    { value: "brown", label: "Brown" },
                ]
            },
            {
                spec: "radio",
                key: "legs",
                label: "Legs",
                options: [
                    { value: "none", label: "No legs" },
                    { value: "both", label: "Both legs" },
                    { value: "left", label: "Left only" },
                    { value: "right", label: "Right only" },
                ]
            },
            {
                spec: "radio",
                key: "height",
                label: "Legs display",
                options: [
                    { value: "short", label: "Very short" },
                    { value: "medium", label: "Short" },
                    { value: "full", label: "Full height" },
                ],
                visible: function (a) { return a.legs != "none"; },
            },
            {
                spec: "slider",
                key: "legOffset",
                label: "Leg offset",
                min: 0,
                max: 100,
                visible: function (a) { return a.legs != "none"; },
            }
        ],
    };
    return Table;
}());

function getLegHeight(appearance) {
    switch (appearance.height) {
        case "short": return 75;
        case "medium":
            return 150;
        case "full": return 400;
    }
}


/***/ }),

/***/ "hHoh":
/*!*******************************!*\
  !*** ./src/apparatus/draw.ts ***!
  \*******************************/
/*! exports provided: defaultStrokeWidth, setDefaultStyle, breakPath, breakPathClosed, setDefaultStyleWithStroke, strokeWidth, addEdgeLips, addEdgeLipsReversed, mirrorX, mirrorY, smoothCorner, smoothCornersIndividual, removeLastSegment, addMarkers, addMarkers2, glassFold, markSymbol, disposeMarkSymbol, metalRod, simpleGradient, unitVector, uniteAll, createOutlinedGroup, setLiquidStyle, softShade, StyledTextCreator, MoreShapes, LazyRaster */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultStrokeWidth", function() { return defaultStrokeWidth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDefaultStyle", function() { return setDefaultStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "breakPath", function() { return breakPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "breakPathClosed", function() { return breakPathClosed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDefaultStyleWithStroke", function() { return setDefaultStyleWithStroke; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strokeWidth", function() { return strokeWidth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addEdgeLips", function() { return addEdgeLips; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addEdgeLipsReversed", function() { return addEdgeLipsReversed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mirrorX", function() { return mirrorX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mirrorY", function() { return mirrorY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "smoothCorner", function() { return smoothCorner; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "smoothCornersIndividual", function() { return smoothCornersIndividual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeLastSegment", function() { return removeLastSegment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addMarkers", function() { return addMarkers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addMarkers2", function() { return addMarkers2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glassFold", function() { return glassFold; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "markSymbol", function() { return markSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disposeMarkSymbol", function() { return disposeMarkSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metalRod", function() { return metalRod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simpleGradient", function() { return simpleGradient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unitVector", function() { return unitVector; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uniteAll", function() { return uniteAll; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createOutlinedGroup", function() { return createOutlinedGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLiquidStyle", function() { return setLiquidStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "softShade", function() { return softShade; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyledTextCreator", function() { return StyledTextCreator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MoreShapes", function() { return MoreShapes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyRaster", function() { return LazyRaster; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _library_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./library/common */ "UCWy");
// Utilities for ensuring an uniform visual style across all apparatus.
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





var defaultStrokeWidth = 4.0;
/** Sets the default style. */
function setDefaultStyle() {
    var items = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        items[_i] = arguments[_i];
    }
    setDefaultStyleWithStroke.apply(void 0, __spreadArrays(["default"], items));
}
/**
 * Breaks a continuous path into multiple parts and returns them as a group.
 * Note this does not transfer any styles (e.g. stroke colour or width).
 * It is therefore recommended to break a path that has not yet been
 * styled. It also deletes the original path.
 */
function breakPath(path) {
    var indices = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        indices[_i - 1] = arguments[_i];
    }
    return breakPathInternal.apply(void 0, __spreadArrays([path, false], indices));
}
/** Same as breakPath, but the path is closed. */
function breakPathClosed(path) {
    var indices = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        indices[_i - 1] = arguments[_i];
    }
    return breakPathInternal.apply(void 0, __spreadArrays([path, true], indices));
}
function breakPathInternal(path, closePath) {
    var indices = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        indices[_i - 2] = arguments[_i];
    }
    var newGroup = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
    var previousIndex = 0;
    for (var _a = 0, indices_1 = indices; _a < indices_1.length; _a++) {
        var index = indices_1[_a];
        newGroup.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](path.segments.slice(previousIndex, index)));
        previousIndex = index;
    }
    // Add the final segment.
    var lastSegment = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](path.segments.slice(previousIndex, path.segments.length));
    if (closePath) {
        lastSegment.segments.push(path.segments[0]);
    }
    newGroup.addChild(lastSegment);
    // Delete the original path.
    path.remove();
    return newGroup;
}
/** Sets the default style but with a custom stroke width. */
function setDefaultStyleWithStroke(style) {
    var items = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        items[_i - 1] = arguments[_i];
    }
    for (var _a = 0, items_1 = items; _a < items_1.length; _a++) {
        var item = items_1[_a];
        item.strokeColor = _library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].stroke;
        item.strokeWidth = strokeWidth(style);
        item.strokeCap = "round";
    }
}
function strokeWidth(style) {
    return Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])(style);
}
function addEdgeLipsInternal(path, lipSize, reverse) {
    addEdgeLipsInternalOpen(path, lipSize, reverse);
}
// @ts-ignore: alternative edge lips implementation.
function addEdgeLipsInternalClosed(path, lipSize, reverse) {
    var lipAnchor = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-1.0, 0).multiply(lipSize);
    var lipRaise = -lipSize * 0.8;
    var left = !reverse ? path.firstSegment : path.lastSegment;
    var leftLip = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(left.point.x, left.point.y), !reverse ? undefined : lipAnchor, !reverse ? lipAnchor : undefined);
    left.point.y += 10;
    left[!reverse ? "handleIn" : "handleOut"] = lipAnchor.add([0, lipRaise]);
    var rightLipAnchor = lipAnchor.multiply([-1, 1]);
    var right = !reverse ? path.lastSegment : path.firstSegment;
    var rightLip = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(right.point.x, right.point.y), !reverse ? rightLipAnchor : undefined, !reverse ? undefined : rightLipAnchor);
    right.point.y += 10;
    right[reverse ? "handleIn" : "handleOut"] = rightLipAnchor.add([0, lipRaise]);
    path.insertSegments(0, !reverse ? [leftLip] : [rightLip]);
    path.addSegments(!reverse ? [rightLip] : [leftLip]);
    path.closed = true;
}
// @ts-ignore: alternative edge lips implementation.
function addEdgeLipsInternalOpen(path, lipSize, reverse) {
    var lipAnchor = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0.6, 0.5).multiply(lipSize);
    var left = !reverse ? path.firstSegment : path.lastSegment;
    var leftLip = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_2__["Point"](left.point.x - lipSize, left.point.y), !reverse ? undefined : lipAnchor, !reverse ? lipAnchor : undefined);
    left.point.y += lipSize * 2.5;
    left[!reverse ? "handleIn" : "handleOut"] = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, -6);
    var right = !reverse ? path.lastSegment : path.firstSegment;
    var rightLipAnchor = lipAnchor.multiply([-1, 1]);
    var rightLip = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](new paper__WEBPACK_IMPORTED_MODULE_2__["Point"](right.point.x + lipSize, right.point.y), !reverse ? rightLipAnchor : undefined, !reverse ? undefined : rightLipAnchor);
    right.point.y += lipSize * 2.5;
    right[reverse ? "handleIn" : "handleOut"] = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, -6);
    path.insertSegments(0, !reverse ? [leftLip] : [rightLip]);
    path.addSegments(!reverse ? [rightLip] : [leftLip]);
}
/** Add "lips" to the apparatus. Use on e.g beakers, test tubes etc. */
function addEdgeLips(path, lipSize) {
    if (lipSize === void 0) { lipSize = _library_common__WEBPACK_IMPORTED_MODULE_3__["lipSize"]; }
    addEdgeLipsInternal(path, lipSize, false);
}
function addEdgeLipsReversed(path, lipSize) {
    if (lipSize === void 0) { lipSize = _library_common__WEBPACK_IMPORTED_MODULE_3__["lipSize"]; }
    addEdgeLipsInternal(path, lipSize, true);
}
/** Mirrors existing segments, along an x= line. */
function mirrorX(path, x) {
    if (x === void 0) { x = 0; }
    var newSegments = path.segments.map(function (segment) {
        return new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](segment.point.multiply([-1, 1]).add([x * 2, 0]), segment.handleOut ? segment.handleOut.multiply([-1, 1]) : undefined, segment.handleIn ? segment.handleIn.multiply([-1, 1]) : undefined);
    });
    newSegments.reverse();
    path.addSegments(newSegments);
}
/** Mirrors existing segments, along an y= line. */
function mirrorY(path, y) {
    if (y === void 0) { y = 0; }
    var newSegments = path.segments.map(function (segment) {
        return new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](segment.point.multiply([1, -1]).add([0, y * 2]), segment.handleOut ? segment.handleOut.multiply([1, -1]) : undefined, segment.handleIn ? segment.handleIn.multiply([1, -1]) : undefined);
    });
    newSegments.reverse();
    path.addSegments(newSegments);
}
/**
 * Smoothes out a corner into a rounded corner. Works for
 * all corners, not just 90 degree ones.
 */
function smoothCorner(segment, size) {
    if (size === void 0) { size = _library_common__WEBPACK_IMPORTED_MODULE_3__["cornerSize"]; }
    // Determine directions to which to shift the points
    // to create a rounded corner.
    var previousVector = segment.previous.point.subtract(segment.point).normalize();
    var nextVector = segment.next.point.subtract(segment.point).normalize();
    // Create new points to replace this segment.
    var segment1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](segment.point.add(previousVector.multiply(size)), undefined, new paper__WEBPACK_IMPORTED_MODULE_2__["Point"](previousVector.multiply(-size * 0.5)));
    var segment2 = new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](segment.point.add(nextVector.multiply(size)), new paper__WEBPACK_IMPORTED_MODULE_2__["Point"](nextVector.multiply(-size * 0.5)));
    // Find position of the current segment in the path.
    var path = segment.path;
    var segmentIndexToRemove = findSegmentIndexInPath(segment);
    path.removeSegment(segmentIndexToRemove);
    path.insertSegments(segmentIndexToRemove, [segment1, segment2]);
}
function smoothCornersIndividual(path, corners) {
    var indices = Object.keys(corners).map(Number);
    var sortedIndices = indices.sort().reverse();
    for (var _i = 0, sortedIndices_1 = sortedIndices; _i < sortedIndices_1.length; _i++) {
        var index = sortedIndices_1[_i];
        smoothCorner(path.segments[index], corners[index]);
    }
}
function removeLastSegment(path) {
    path.removeSegment(path.segments.length - 1);
}
function findSegmentIndexInPath(segment) {
    var path = segment.path;
    for (var i = 0; i < path.segments.length; i++) {
        if (segment == path.segments[i]) {
            return i;
        }
    }
    return -1;
}
/** Adds markers (from the bottom) at regular intervals. The first one is skipped. */
function addMarkers(group, start, stopY, step, size) {
    if (step.y == 0)
        return;
    // If the step is specified as positive, invert it.
    if (step.y > 0) {
        step.x *= -1;
        step.y *= -1;
    }
    var point = start.add(step); // Skip the first one, as it's usually the bottom of the apparatus.
    var mark = markSymbol();
    var count = 0;
    while (point.y > stopY && count < 50) {
        var markPlaced = mark.place(point);
        if (size) {
            markPlaced.scale(size / _library_common__WEBPACK_IMPORTED_MODULE_3__["markerSize"], 1.0, markPlaced.bounds.rightCenter);
        }
        group.addChild(markPlaced);
        point = point.add(step);
        count++;
    }
}
function addMarkers2(group, opts) {
    var _a;
    var start = opts.start, step = opts.step, count = opts.count;
    var majorEvery = (_a = opts.majorEvery) !== null && _a !== void 0 ? _a : 1;
    var mark = markSymbol();
    var point = new paper__WEBPACK_IMPORTED_MODULE_2__["Point"](start);
    for (var i = 0; i < count; i++) {
        var isMajor = i % majorEvery === 0;
        var symbol = group.addChild(mark.place(point));
        if (!isMajor) {
            symbol.scale(0.5, 1.0);
        }
        point.x += step.x;
        point.y += step.y;
    }
}
/** A u-shape visual hint to indicate 3-D-ness. */
function glassFold(x, y, props) {
    var _a, _b;
    var size = (_a = props === null || props === void 0 ? void 0 : props.size) !== null && _a !== void 0 ? _a : 10;
    var rotation = (_b = props === null || props === void 0 ? void 0 : props.rotation) !== null && _b !== void 0 ? _b : 0;
    var fold = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[-0.5 * size, 0], , [0.2 * size, 0.2 * size]], [[0.5 * size, 0], [-0.2 * size, 0.2 * size]]));
    fold.rotate(rotation);
    fold.strokeWidth = strokeWidth("thinner");
    fold.position = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(x, y);
    fold.strokeColor = _library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].glassFold;
    return fold;
}
var _markSymbol;
function markSymbol() {
    if (_markSymbol)
        return _markSymbol;
    // Create mark
    var mark = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-_library_common__WEBPACK_IMPORTED_MODULE_3__["markerSize"], 0), new paper__WEBPACK_IMPORTED_MODULE_2__["Size"](_library_common__WEBPACK_IMPORTED_MODULE_3__["markerSize"], strokeWidth("thinner")));
    mark.fillColor = _library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].mark;
    _markSymbol = new paper__WEBPACK_IMPORTED_MODULE_2__["Symbol"](mark, true);
    return _markSymbol;
}
function disposeMarkSymbol() {
    if (_markSymbol)
        _markSymbol.definition.remove();
    _markSymbol = undefined;
}
function metalRod(from, to) {
    var normal = from.subtract(to).rotate(90).normalize().multiply(2.0);
    var rod = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(from, to);
    rod.strokeWidth = 12.0;
    rod.strokeColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"]([
        [_library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].darkMetal.color().ladd(20).hex(), 0.0],
        [_library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].darkMetal.color().ladd(10).hex(), 1.0]
    ]), from.add(normal), from.subtract(normal));
    rod.strokeCap = "round";
    var rodHighlight = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(from.add(normal), to.add(normal));
    rodHighlight.strokeWidth = 2.0;
    rodHighlight.strokeColor = "#aaaaaa";
    rodHighlight.strokeCap = "round";
    return [rod, rodHighlight];
}
// Creates a simple gradient from a single color.
function simpleGradient(colorString) {
    var baseColor = color__WEBPACK_IMPORTED_MODULE_1__(colorString);
    var lightColor = baseColor.lighten(0.3);
    return [[lightColor.hex(), 0.0], [baseColor.hex(), 1.0]];
}
/** Returns a unit vector pointing in given direction. */
function unitVector(direction) {
    switch (direction) {
        case "down": return Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 1);
        case "up": return Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, -1);
        case "left": return Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-1, 0);
        case "right": return Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(1, 0);
    }
}
/**
 * Creates a new path, containing all the paths, united. The ordering should ensure
 * that at every step a single shape is created.
 */
function uniteAll() {
    var items = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        items[_i] = arguments[_i];
    }
    var path = items[0].unite(items[1], { insert: false });
    for (var i = 2; i < items.length; i++) {
        var newPath = path.unite(items[i], { insert: false });
        path.remove();
        path = newPath;
    }
    path.fillColor = null;
    return path;
}
function createOutlinedGroup(width, strokeColor) {
    var items = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        items[_i - 2] = arguments[_i];
    }
    var group = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"](items);
    var outline = uniteAll.apply(void 0, items);
    outline.strokeColor = strokeColor;
    outline.strokeWidth = typeof (width) === "string" ? strokeWidth(width) : width;
    group.addChild(outline);
    return group;
}
function setLiquidStyle(item, color, opacity) {
    if (opacity === void 0) { opacity = _library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].defaultLiquidAlpha; }
    item.strokeWidth = strokeWidth("liquid");
    item.strokeColor = color;
    item.fillColor = color.color().alpha(opacity).string();
}
/**
 * Creates a soft-shaded effect. It can either be "edge" (one-sided, used for edges) or "full"
 * for internal shading. Best described as a "blurred pill" shaped.
 *
 * Specify offsetThickness to offset "edge" shades by the thickness
 */
function softShade(type, offsetThickness, from, to, color, radius, strength) {
    if (strength === void 0) { strength = 0.0; }
    var delta = from.subtract(to);
    var length = delta.length;
    // Clamp radius.
    radius = Math.min(radius, length / 2 - 1);
    var width = type == "edge" ? radius : radius * 2;
    // Render a group of 3 parts.
    var gradient = [[color, strength], [color.substr(0, 7) + "00", 1.0]];
    var topPart = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["R"])(radius, 0, width, radius, _library_common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_RIGHT));
    topPart.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"](gradient, true), Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, radius), Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0));
    var middlePart = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["R"])(radius, radius, width, length - 2 * radius, _library_common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_RIGHT));
    if (type == "edge") {
        middlePart.withGradientFill("right", gradient);
    }
    else {
        middlePart.withGradientFill("right", [
            [color.substr(0, 7) + "00", 0.0], [color, 0.5 - strength / 2], [color, 0.5 + strength / 2], [color.substr(0, 7) + "00", 1.0],
        ]);
    }
    var bottomPart = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["R"])(radius, length, width, radius, _library_common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].BOTTOM_RIGHT));
    bottomPart.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"](gradient, true), Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, length - radius), Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, length));
    var group = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([topPart, middlePart, bottomPart]);
    group.pivot = Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0);
    group.rotate(delta.angle - 90);
    group.position = to;
    // Offset by thickness.
    if (offsetThickness && type == "edge") {
        var distance = strokeWidth(offsetThickness) / 2;
        group.position = group.position.add(delta.rotate(-90).normalize(distance));
    }
    return group;
}
var StyledTextCreator = /** @class */ (function () {
    function StyledTextCreator(style) {
        this.style = style;
    }
    StyledTextCreator.prototype.create = function (content, position, override, align) {
        if (override === void 0) { override = {}; }
        if (align === void 0) { align = "center"; }
        return new paper__WEBPACK_IMPORTED_MODULE_2__["PointText"](__assign(__assign({ point: position, content: content, style: this.style }, override), { justification: align }));
    };
    return StyledTextCreator;
}());

var MoreShapes;
(function (MoreShapes) {
    function diamond(x, y, size) {
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_library_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[-size / 2, 0]], [[0, size / 2]], [[size / 2, 0]], [[0, -size / 2]]));
        path.position.x = x;
        path.position.y = y;
        path.closePath();
        return path;
    }
    MoreShapes.diamond = diamond;
})(MoreShapes || (MoreShapes = {}));
var LazyRaster = /** @class */ (function () {
    function LazyRaster(url) {
        this.url = url;
    }
    LazyRaster.prototype.clone = function (callback) {
        if (!this.raster) {
            var raster_1 = new paper__WEBPACK_IMPORTED_MODULE_2__["Raster"](this.url);
            this.raster = raster_1;
            raster_1.onLoad = function () {
                callback(raster_1.clone());
            };
            // Remove from scene.
            this.raster.remove();
        }
        else {
            callback(this.raster.clone());
        }
    };
    return LazyRaster;
}());



/***/ }),

/***/ "hXn/":
/*!************************************!*\
  !*** ./src/editing/interaction.ts ***!
  \************************************/
/*! exports provided: Interactable, graftInteraction, InteractableMatcher, SelectAndMove, Adjustable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Interactable", function() { return Interactable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "graftInteraction", function() { return graftInteraction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InteractableMatcher", function() { return InteractableMatcher; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectAndMove", function() { return SelectAndMove; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Adjustable", function() { return Adjustable; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
// Mixin that extends an existing class, to be Interactable.
// Usage: Interactable(paper.Shape, this)(...)
function Interactable(Base, interaction) {
    return /** @class */ (function (_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var _this = _super.apply(this, args) || this;
            _this.interaction = interaction;
            return _this;
        }
        return class_1;
    }(Base));
}
function graftInteraction(item, interaction) {
    item.interaction = interaction;
}
// Match function that can be used for paper's hitTest or getItems
// to retrieve an interactable.
function InteractableMatcher(hit) {
    var item = ('item' in hit ? hit.item : hit);
    return 'interaction' in item && item.visible === true;
}
// Helper method to create a selectAndMove interaction
function SelectAndMove(c) {
    return { type: "selectAndMove", component: c };
}
// Helper method to create an adjustable interaction.
function Adjustable(c) {
    return { type: "adjust", component: c };
}


/***/ }),

/***/ "hduo":
/*!******************************************************!*\
  !*** ./src/apparatus/library/decorative/ice_cube.ts ***!
  \******************************************************/
/*! exports provided: IceCube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IceCube", function() { return IceCube; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var IceCube = /** @class */ (function () {
    function IceCube() {
    }
    IceCube.prototype.render = function (appearance) {
        var size = appearance.size;
        var graphic = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, size, size), 5).withStroke("thin", "#bbf0f2");
        graphic.setRadialGradientFill([["#f2ffffee", 0.2], ["#e6fcfcaa", 1]]);
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, size, size).expand(10));
        return { graphic: graphic, hitShape: hitShape };
    };
    IceCube.properties = {
        label: "Ice cube",
        canContainLiquids: false,
        defaultAppearance: {
            size: 24
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 15, max: 40
            }
        ],
    };
    return IceCube;
}());



/***/ }),

/***/ "hhmX":
/*!***********************************!*\
  !*** ./src/components/button.tsx ***!
  \***********************************/
/*! exports provided: Button, StackButton, IconButton, HorizontalIconButtons, ToggleHorizontalButtons, VerticalButtons, HorizontalButtonsSwitcher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Button", function() { return Button; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StackButton", function() { return StackButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IconButton", function() { return IconButton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalIconButtons", function() { return HorizontalIconButtons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToggleHorizontalButtons", function() { return ToggleHorizontalButtons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VerticalButtons", function() { return VerticalButtons; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalButtonsSwitcher", function() { return HorizontalButtonsSwitcher; });
/* harmony import */ var components_icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/icon */ "oh6M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tiers/badge */ "2UKY");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



/**
 * A regular button that can optionally display an icon, on the left.
 */
var Button = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "ui-button " + ((_a = props.extraClass) !== null && _a !== void 0 ? _a : ""), onClick: props.onClick, style: props.widthCss ? { width: props.widthCss } : undefined },
        props.icon ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_0__["Icon"], { name: props.icon, spacing: true }) : null,
        props.buttonLabel,
        props.tierLock ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_2__["Badge"], { tier: props.tierLock }) : null));
};
/**
 * A button that displays an icon on the top, with text below.
 */
var StackButton = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "ui-button ui-stack-button " + ((_a = props.extraClass) !== null && _a !== void 0 ? _a : ""), style: { width: props.widthCss }, onClick: props.onClick },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_0__["Icon"], { name: props.icon, extraClass: "my-1 fa-2x", spacing: false }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
        props.buttonLabel));
};
/**
 * A button that consists of an icon only.
 */
var IconButton = function (props) {
    var _a;
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "ui-button " + ((_a = props.extraClass) !== null && _a !== void 0 ? _a : ""), onClick: props.onClick, style: { width: props.widthCss }, title: props.buttonLabel },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_0__["Icon"], { name: props.icon, spacing: false })));
};
/**
 * Horizontal row of {@link IconButton}s.
 */
var HorizontalIconButtons = function (props) {
    var items = props.buttons.length;
    var widthCss = Math.round(100 / items) + "%";
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-button-group" }, props.buttons.map(function (b, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](IconButton, __assign({ key: i, widthCss: widthCss }, b)); }));
};
/**
 * Horizontal row of {@link StackButton}s, i.e. buttons with icons on top, text below.
 */
var ToggleHorizontalButtons = function (props) {
    var items = props.buttons.length;
    var widthCss = Math.round(100 / items) + "%";
    switch (props.size) {
        case "small":
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-button-group" }, props.buttons.map(function (b, i) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](IconButton, __assign({ key: i, widthCss: widthCss, extraClass: i == props.highlightIndex ? "highlight" : undefined }, b));
            }));
        case "large":
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-button-group" }, props.buttons.map(function (b, i) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](StackButton, __assign({ key: i, widthCss: widthCss, extraClass: i == props.highlightIndex ? "highlight" : undefined }, b));
            }));
        case "text":
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-button-group" }, props.buttons.map(function (b, i) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Button, __assign({ key: i, widthCss: widthCss, extraClass: i == props.highlightIndex ? "highlight" : undefined }, b, { icon: undefined }));
            }));
    }
};
/**
 * Vertically arranged {@link Buttons}s.
 */
var VerticalButtons = function (props) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "verticalButtonGroup" }, props.buttons.map(function (b, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Button, __assign({ key: i }, b)); }))); };
/**
 * Horizontal buttons where 1 item is highlighted. Basically behaves
 * like a radio button group but using buttons.
 */
var HorizontalButtonsSwitcher = /** @class */ (function (_super) {
    __extends(HorizontalButtonsSwitcher, _super);
    function HorizontalButtonsSwitcher(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { value: props.defaultValue };
        return _this;
    }
    HorizontalButtonsSwitcher.prototype.render = function () {
        var _this = this;
        var _a;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (_a = "horizontal-button-group " + this.props.className) !== null && _a !== void 0 ? _a : "" }, this.props.options.map(function (o) {
            var _a;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Button, { key: o.value, icon: o.icon, onClick: function () { _this.setState({ value: o.value }); _this.props.onSwitch(o.value); }, extraClass: ((_a = _this.props.extraClass) !== null && _a !== void 0 ? _a : "") + (_this.state.value == o.value ? " highlight" : ""), buttonLabel: o.buttonLabel });
        }));
    };
    return HorizontalButtonsSwitcher;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "hkwF":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/decorative/bubbles.ts ***!
  \*****************************************************/
/*! exports provided: Bubbles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bubbles", function() { return Bubbles; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! random/random */ "PJ3I");



var COLOR_SWATCHES = {
    "Default": "#cccccc",
    "Red": "#E16060",
    "Green": "#5EC63D",
    "Blue": "#68B7D7",
};
var Bubbles = /** @class */ (function () {
    function Bubbles() {
    }
    Bubbles.prototype.render = function (appearance) {
        var rows = appearance.rows;
        var bubblesPerRow = appearance.bubblesPerRow;
        var spacing = appearance.spacing;
        var baseSize = appearance.bubbleSize;
        var r = new random_random__WEBPACK_IMPORTED_MODULE_2__["Random"]();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        for (var y = 0; y < rows; y++) {
            var xShift = y % 2 == 1 ? 0.5 : 0;
            for (var x = 0; x < (bubblesPerRow - xShift * 2); x++) {
                var position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])((x + xShift) * spacing, y * spacing);
                var size = baseSize + r.randomUnitValue();
                var bubble = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(position.add(r.randomUnitVector(spacing / 4)), size);
                graphic.addChild(bubble);
            }
        }
        graphic
            .withStroke("thinner", appearance.color)
            .withFill(appearance.color.color().lighten(0.3).alpha(0.5).toString());
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Bubbles.properties = {
        label: "Bubbles",
        canContainLiquids: false,
        defaultAppearance: {
            rows: 3,
            bubblesPerRow: 4,
            spacing: 18,
            bubbleSize: 4,
            color: "#cccccc"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "rows", label: "Rows",
                min: 1, max: 5,
            },
            {
                spec: "slider", key: "bubblesPerRow", label: "Bubbles per row",
                min: 1, max: 10,
            },
            {
                spec: "slider", key: "spacing", label: "Spacing",
                min: 12, max: 30
            },
            {
                spec: "slider", key: "bubbleSize", label: "Bubble size",
                min: 3.0, max: 8.0, step: 0.1,
            },
            {
                spec: "color", key: "color", label: "Colour",
                swatches: COLOR_SWATCHES,
                demoSwatches: COLOR_SWATCHES,
                tier: "boost"
            }
        ],
    };
    return Bubbles;
}());



/***/ }),

/***/ "i0a2":
/*!************************************************************!*\
  !*** ./src/apparatus/library/biology/organic/pond_weed.ts ***!
  \************************************************************/
/*! exports provided: PondWeed */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PondWeed", function() { return PondWeed; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var LEAF_COLOR = "#56bd6e";
var OUTLINE_COLOR = LEAF_COLOR.color().ladd(-10).string();
var STEM_COLOR = "#cbd676";
var PondWeed = /** @class */ (function () {
    function PondWeed() {
    }
    PondWeed.prototype.render = function (appearance) {
        var length = appearance.length;
        var stem = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[0, length]]));
        stem.strokeWidth = 4.0;
        stem.strokeColor = STEM_COLOR;
        stem.strokeCap = "round";
        var leaf = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0], , [5, -5]], [[12, 0], [0, -5], [0, 5]]));
        leaf.scale(0.8, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        leaf.closePath();
        leaf.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), OUTLINE_COLOR).withFill(LEAF_COLOR);
        leaf.rotate(-10, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([stem]);
        for (var y = 0; y < length - 15; y += 12) {
            var r = leaf.clone();
            r.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(6, y);
            var l = r.clone();
            l.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
            graphic.addChildren([r, l]);
        }
        leaf.remove();
        return {
            graphic: graphic,
            hitShape: stem.strokeBounds.expand(30).toShape()
        };
    };
    PondWeed.properties = {
        label: "Pond weed",
        canContainLiquids: false,
        defaultAppearance: {
            length: 70
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 50, max: 120, unit: "mm",
            }
        ],
    };
    return PondWeed;
}());



/***/ }),

/***/ "ie8W":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/decorative/particles.ts ***!
  \*******************************************************/
/*! exports provided: Particles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Particles", function() { return Particles; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! random/random */ "PJ3I");



// const COLOR_SWATCHES = {
//     "Default": "#cccccc",
//     "Red": "#E16060",
//     "Green": "#5EC63D",
//     "Blue": "#68B7D7",
// }
var Particles = /** @class */ (function () {
    function Particles() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 10, maxX: 200,
                minY: 10, maxY: 200,
                toAppearance: function (p) { return ({ width: p.x, height: p.y }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width, a.height); },
                scale: 2.0,
            }
        ];
    }
    Particles.prototype.render = function (appearance) {
        var spacing = appearance.spacing;
        var rows = Math.floor(appearance.height / spacing);
        var particlesPerRow = Math.floor(appearance.width / spacing);
        var baseSize = appearance.particleSize * (1.0 - appearance.blend);
        var sizeIncreasePerRow = appearance.particleSize * appearance.blend / rows;
        var r = new random_random__WEBPACK_IMPORTED_MODULE_2__["Random"](123124);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]();
        for (var y = 0; y < rows; y++) {
            var size = baseSize + y * sizeIncreasePerRow;
            var xShift = y % 2 == 1 ? 0.5 : 0;
            for (var x = 0; x < (particlesPerRow - xShift * 2); x++) {
                var position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])((x + xShift) * spacing, y * spacing);
                var finalSize = Math.max(0.1, size + r.randomUnitValue());
                var particle = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(position.add(r.randomUnitVector(spacing / 4)), finalSize);
                graphic.addChild(particle);
            }
        }
        graphic.fillColor = appearance.color;
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(appearance.width / 2, appearance.height / 2)
        };
    };
    Particles.properties = {
        label: "Particles",
        canContainLiquids: false,
        defaultAppearance: {
            width: 50,
            height: 50,
            spacing: 10,
            particleSize: 4,
            color: "#444444",
            blend: 0.5,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Rows",
                min: 10, max: 200,
            },
            {
                spec: "slider", key: "height", label: "Particles per row",
                min: 10, max: 200,
            },
            {
                spec: "slider", key: "spacing", label: "Spacing",
                min: 6, max: 10
            },
            {
                spec: "slider", key: "particleSize", label: "Particles size",
                min: 3.0, max: 12.0, step: 0.1,
            },
            {
                spec: "slider", key: "blend", label: "Blending",
                min: 0.0, max: 1.0, step: 0.01,
            },
        ],
    };
    return Particles;
}());



/***/ }),

/***/ "imNg":
/*!*********************************************!*\
  !*** ./src/layout/editor/editor_canvas.tsx ***!
  \*********************************************/
/*! exports provided: EditorCanvasComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorCanvasComponent", function() { return EditorCanvasComponent; });
/* harmony import */ var apparatus_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/component */ "wwKz");
/* harmony import */ var arrows_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! arrows/component */ "65HY");
/* harmony import */ var editing_image_export__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editing/image_export */ "oezR");
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! keyboard */ "uSG+");
/* harmony import */ var layout_editor_context_menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! layout/editor/context_menu */ "Pr/b");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! types */ "p21n");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var _tiers_apparatus__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../tiers/apparatus */ "UT2h");
/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../tools */ "7vmD");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};














var maxPixels = function (tier) {
    if (!tier)
        return vars__WEBPACK_IMPORTED_MODULE_9__["Consts"].pngMaxRenderPixelsMedium;
    switch (tier) {
        case "boost":
        case "plus":
            return vars__WEBPACK_IMPORTED_MODULE_9__["Consts"].pngMaxRenderPixels;
    }
};
/**
 * Component that holds the canvas and everything that's drawn
 * inside it, including apparatus components.
 */
var EditorCanvasComponent = /** @class */ (function (_super) {
    __extends(EditorCanvasComponent, _super);
    function EditorCanvasComponent(props) {
        var _this = _super.call(this, props) || this;
        /** Canvas element ref. */
        _this.canvasElementRef = react__WEBPACK_IMPORTED_MODULE_6__["createRef"]();
        // TODO: Avoid this by using states?
        /** Refs to drawable components (apparatus, arrows..). */
        _this.objectRefs = {};
        _this.state = {};
        return _this;
    }
    EditorCanvasComponent.prototype.getApparatusComponent = function (id) {
        return this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(id)];
    };
    EditorCanvasComponent.prototype.getObjectComponent = function (id) {
        return this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(id)];
    };
    EditorCanvasComponent.prototype.componentDidMount = function () {
        // Set up canvas
        var canvas = this.canvasElementRef.current;
        paper.setup(canvas);
        this.isPaperReady = true;
        Object(log__WEBPACK_IMPORTED_MODULE_5__["clog"])("Paper.js set up");
        // Set up layers
        var layers = {
            exportOnlyBacking: new paper.Layer(),
            apparatus: new paper.Layer(),
            arrows: new paper.Layer(),
            overlay: new paper.Layer(),
        };
        this.layers = layers;
        // Set the apparatus layer as default.
        layers.apparatus.activate();
    };
    EditorCanvasComponent.prototype.setZoom = function (zoom) {
        paper.project.view.zoom = zoom;
    };
    EditorCanvasComponent.prototype.getProjectBounds = function () {
        var _this = this;
        // Compute bounds of the diagram from individual object bounds.
        var ids = __spreadArrays(this.props.arrows.map(function (arrow) { return arrow.id; }), this.props.items.map(function (item) { return item.id; }));
        var items = ids.map(function (id) { return _this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(id)]; });
        var bounds = new paper.Rectangle(items[0].bounds);
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            bounds.united(item.bounds);
        }
        return bounds;
    };
    EditorCanvasComponent.prototype.export = function () {
        var pixels = maxPixels(this.props.tier);
        return Object(editing_image_export__WEBPACK_IMPORTED_MODULE_2__["exportFromCanvas"])(paper.project, this.layers, this.getProjectBounds(), pixels);
    };
    EditorCanvasComponent.prototype.exportThumbnail = function () {
        return Object(editing_image_export__WEBPACK_IMPORTED_MODULE_2__["exportFromCanvasJPGThumbnail"])(paper.project, this.layers, this.getProjectBounds());
    };
    EditorCanvasComponent.prototype.componentDidUpdate = function () {
        // Reorder drawn items to match the order in the data store.
        this.ensureVisualOrder();
    };
    EditorCanvasComponent.prototype.onCanvasMouseDownOrTouchStart = function () {
        // Return focus to the app.
        Object(keyboard__WEBPACK_IMPORTED_MODULE_3__["focusMainApp"])();
    };
    EditorCanvasComponent.prototype.render = function () {
        var _this = this;
        // Set zoom on paper project.
        if (this.isPaperReady) {
            this.setZoom(this.props.zoom);
        }
        // Render main canvas.
        var canvas = Object(react__WEBPACK_IMPORTED_MODULE_6__["createElement"])("canvas", {
            key: "MainCanvas",
            className: "editor",
            style: {
                "cursor": Object(_tools__WEBPACK_IMPORTED_MODULE_11__["toolCursors"])(this.props.tool),
            },
            resize: "true",
            ref: this.canvasElementRef,
            onMouseDown: function (e) { return _this.onCanvasMouseDownOrTouchStart(); },
            onTouchStart: function (e) { return _this.onCanvasMouseDownOrTouchStart(); },
            onContextMenu: function (e) {
                e.preventDefault();
                _this.setState({ contextMenu: { position: { x: e.clientX, y: e.clientY } } });
                return false;
            }
        });
        // Render apparatus components.
        var apparatusComponents = this.props.items.map(function (item) {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](apparatus_component__WEBPACK_IMPORTED_MODULE_0__["ApparatusComponent"]
            // Use a key that includes the ID as well as type.
            // ApparatusComponent once set up for a specific
            // apparatus type can't be reused for another type.
            , __assign({ 
                // Use a key that includes the ID as well as type.
                // ApparatusComponent once set up for a specific
                // apparatus type can't be reused for another type.
                key: store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(item.id) + "/" + item.type, isWatermarkEnabled: !Object(_tiers_apparatus__WEBPACK_IMPORTED_MODULE_10__["isItemUnlocked"])(item, _this.props.tier), ref: function (r) { return r
                    ? _this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(item.id)] = r
                    : delete _this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(item.id)]; } }, item));
        });
        // Render arrows.
        var arrows = this.props.arrows.map(function (arrow) {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](arrows_component__WEBPACK_IMPORTED_MODULE_1__["default"], __assign(__assign({}, arrow), { key: store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(arrow.id), ref: function (r) { return _this.objectRefs[store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(arrow.id)] = r; }, showAdjustables: _this.props.tool == "select" && arrow.selected }));
        });
        // Temporary arrow, one that the user is currently drawing.
        var currentlyDrawnArrow = this.state.arrow
            ? react__WEBPACK_IMPORTED_MODULE_6__["createElement"](arrows_component__WEBPACK_IMPORTED_MODULE_1__["default"], __assign(__assign({ key: "__DrawnArrow" }, this.state.arrow), { showAdjustables: false }))
            : null;
        return __spreadArrays([
            canvas,
            react__WEBPACK_IMPORTED_MODULE_6__["createElement"](layout_editor_context_menu__WEBPACK_IMPORTED_MODULE_4__["EditorContextMenu"], { key: "ContextMenu", contextMenu: this.state.contextMenu, onClose: function () { return _this.setState({ contextMenu: undefined }); }, selected: this.props.selected }),
            // The following are "virtual components", they don't
            // contain any DOM, because the drawing is handled
            // within the components, via paper.
            currentlyDrawnArrow
        ], apparatusComponents, arrows);
    };
    /**
     * Ensure that paper items order matches the order in data store. Higher index
     * in the data store implies the apparatus is drawn later/above lower index
     * apparatus. (index 0 => drawn first | at the bottom)
     */
    EditorCanvasComponent.prototype.ensureVisualOrder = function () {
        // Reorder Paper elements according to position.
        for (var i = 1; i < this.props.items.length; i++) {
            var id = store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(this.props.items[i].id);
            var prevId = store_id__WEBPACK_IMPORTED_MODULE_7__["ID"].string(this.props.items[i - 1].id);
            var component = this.objectRefs[id];
            var previousComponent = this.objectRefs[prevId];
            component.item.moveAbove(previousComponent.item);
        }
    };
    /** Compute the bounds on the current active selection. */
    EditorCanvasComponent.prototype.computeSelectionMetrics = function () {
        var _this = this;
        var _a;
        var ids = __spreadArrays(this.props.selected.arrows.map(function (arrow) { return arrow.id; }), this.props.selected.items.map(function (item) { return item.id; }));
        var items = ids.map(function (id) { return _this.getObjectComponent(id); });
        if (items.length == 0) {
            return types__WEBPACK_IMPORTED_MODULE_8__["NULL_SELECTION_METRICS"];
        }
        if (items.length == 1) {
            var item = items[0];
            // For certain items, calculate the bounds center and use that as the pivot.
            var shouldUseBoundsCenter = (item instanceof apparatus_component__WEBPACK_IMPORTED_MODULE_0__["ApparatusComponent"]) ? (_a = item.apparatus.shouldUseBoundsCenter) !== null && _a !== void 0 ? _a : false : false;
            // Only one selected apparatus, take its natural position as pivot
            // and bounds.
            return {
                pivot: shouldUseBoundsCenter ? items[0].bounds.center : items[0].currentPosition,
                bounds: items[0].bounds
            };
        }
        else {
            // Multiple items. Calculate the encompassing bounds
            // and take its center as pivot.
            var encompassingBounds = new paper.Rectangle(items[0].bounds);
            for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {
                var item = items_2[_i];
                encompassingBounds.united(item.bounds);
            }
            return {
                pivot: encompassingBounds.center,
                bounds: encompassingBounds,
            };
        }
    };
    return EditorCanvasComponent;
}(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));



/***/ }),

/***/ "its7":
/*!******************************!*\
  !*** ./src/editing/zoom.tsx ***!
  \******************************/
/*! exports provided: ZoomSlider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoomSlider", function() { return ZoomSlider; });
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var view_zoom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! view/zoom */ "IFqG");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/**
 * Component to display the zoom slider.
 */
var ZoomSlider = /** @class */ (function (_super) {
    __extends(ZoomSlider, _super);
    function ZoomSlider() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        /** Ref to the DOM element. */
        _this.elementRef = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        return _this;
    }
    ZoomSlider.prototype.executeZoomCommand = function (zoom) {
        if (store_store__WEBPACK_IMPORTED_MODULE_2__["default"].zoom() != zoom) {
            // Don't set zero zoom.
            zoom = Math.max(0.01, zoom);
            command_command__WEBPACK_IMPORTED_MODULE_0__["commandProcessor"].execute(new view_zoom__WEBPACK_IMPORTED_MODULE_3__["ZoomCommand"](store_store__WEBPACK_IMPORTED_MODULE_2__["default"].zoom(), zoom));
        }
    };
    ZoomSlider.prototype.componentDidMount = function () {
        var slider = $(this.elementRef.current);
        var self = this;
        slider.slider({
            value: 0.7,
            min: -2,
            max: 1,
            step: 0.01,
            animate: "fast",
        }).slider("pips", {
            rest: "label",
            step: 100,
            labels: ["25%", "50%", "100%", "150%"]
        }).slider("float", {
            formatLabel: function (value) {
                return Math.floor(getZoomFromSliderValue(value) * 100) + "%";
            }
        }).on("slidestart", function (e, ui) {
            self.props.onStartZoom();
        }).on("slide", function (e, ui) {
            // Convert to zoom level.
            var zoomLevel = getZoomFromSliderValue(ui.value);
            self.props.onUpdateZoom(zoomLevel);
        }).on("slidestop", function (e, ui) {
            var newZoom = getZoomFromSliderValue(ui.value);
            self.executeZoomCommand(newZoom);
            self.props.onEndZoom();
        }).on("slidechange", function (e, ui) {
            var newZoom = getZoomFromSliderValue(ui.value);
            self.executeZoomCommand(newZoom);
            self.props.onEndZoom();
        });
    };
    ZoomSlider.prototype.componentDidUpdate = function () {
        var currentSliderValue = $(this.elementRef.current).slider("value");
        var currentZoom = getZoomFromSliderValue(currentSliderValue);
        if (currentZoom != this.props.zoom) {
            var newZoomSlider = getSliderValueFromZoom(this.props.zoom);
            $(this.elementRef.current).slider("value", newZoomSlider);
        }
    };
    ZoomSlider.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { id: "zoom-slider", key: "zoomSlider", ref: this.elementRef });
    };
    return ZoomSlider;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

/** Converts a slider value to Zoom value.  */
function getZoomFromSliderValue(value) {
    return (value < 0 ? Math.pow(2, value) : 1 + value / 2);
}
/** Converts zoom value to slider value. */
function getSliderValueFromZoom(zoom) {
    return zoom <= 1 ? Math.log(zoom) / Math.log(2) : 2 * zoom - 1;
}


/***/ }),

/***/ "j+1L":
/*!**********************************************!*\
  !*** ./src/apparatus/library/shapes/tick.ts ***!
  \**********************************************/
/*! exports provided: Tick */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tick", function() { return Tick; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Tick = /** @class */ (function () {
    function Tick() {
        this.drivers = [
            // Length.
            {
                type: "rectangle",
                minX: 40, maxX: 250,
                minY: 40, maxY: 250,
                toAppearance: function (p) { return ({
                    length: (p.x + p.y) / 2 * Math.SQRT2,
                }); },
                fromAppearance: function (a) {
                    var x = a.length / Math.SQRT2;
                    return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, -x);
                },
                scale: 1.0,
            },
            {
                type: "rectangle",
                minX: 0, maxX: 0,
                minY: 5, maxY: 50,
                toAppearance: function (p) { return ({
                    thickness: p.y / Math.SQRT2 * 2,
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, a.thickness / 2 * Math.SQRT2); },
                scale: 1.0,
            }
        ];
    }
    Tick.prototype.render = function (appearance) {
        var thickness = appearance.thickness, length = appearance.length;
        var semiLength = length * 0.5;
        var halfThick = thickness * 0.5;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-halfThick, -halfThick]], [[-halfThick, -length]], [[halfThick, -length]], [[halfThick, halfThick]], [[-semiLength, halfThick]], [[-semiLength, -halfThick]]));
        graphic.closePath();
        graphic.rotate(45, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
        var shape = graphic.clone();
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            hitShape: shape,
        };
    };
    Tick.properties = {
        label: "Tick",
        canContainLiquids: false,
        defaultAppearance: __assign({ thickness: 40, length: 120 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs),
    };
    return Tick;
}());



/***/ }),

/***/ "k1bn":
/*!***************************************!*\
  !*** ./src/apparatus/library/bung.ts ***!
  \***************************************/
/*! exports provided: Bung */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bung", function() { return Bung; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common */ "UCWy");




var HOLE_GAP = 10;
var MIN_GAP = 2;
var MIN_DIAMETER = 8;
var MAX_DIAMETER = 100;
var TAPERING = 0.9;
var Bung = /** @class */ (function () {
    function Bung() {
    }
    Bung.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var height = 25;
        var bung = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[diameter / 2, 0]], [[diameter / 2 * TAPERING, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorX"])(bung);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(bung.segments[2], 3.0);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["smoothCorner"])(bung.segments[1], 3.0);
        bung.closed = true;
        var graphic = bung;
        if (appearance.hole == "one") {
            var holeDiameter = Math.min(appearance.holeDiameter, diameter * TAPERING - 5);
            var topLeft = Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-holeDiameter / 2, -10);
            var size = new paper__WEBPACK_IMPORTED_MODULE_2__["Size"](holeDiameter, 50);
            var holeSubtract = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(topLeft, size);
            graphic = bung.subtract(holeSubtract);
        }
        else if (appearance.hole == "two") {
            var space = diameter * TAPERING - 5;
            var holeDiameter = appearance.holeDiameter, holeDiameter2 = appearance.holeDiameter2;
            var excess = holeDiameter + holeDiameter2 + HOLE_GAP - space;
            var gap = HOLE_GAP;
            if (excess > 0) {
                // Too cramped. Need to distribute the excess evenly.
                // First, absorb it in the gap.
                if (excess < (HOLE_GAP - MIN_GAP)) {
                    // All absorbed in the gap.
                    gap -= excess;
                }
                else {
                    // Absorb in the gap and distribute between the two holes evenly.
                    gap = MIN_GAP;
                    excess -= (HOLE_GAP - MIN_GAP);
                    var totalDiameter = holeDiameter + holeDiameter2;
                    holeDiameter -= excess * (holeDiameter / totalDiameter);
                    holeDiameter2 -= excess * (holeDiameter2 / totalDiameter);
                }
            }
            var totalSpace = holeDiameter + holeDiameter2 + gap;
            var leftHoleSubtract = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["R"])(-totalSpace / 2, -10, holeDiameter, 50, _common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_LEFT));
            var rightHoleSubtract = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(_common__WEBPACK_IMPORTED_MODULE_3__["R"])(totalSpace / 2, -10, holeDiameter2, 50, _common__WEBPACK_IMPORTED_MODULE_3__["Pivot"].TOP_RIGHT));
            graphic = bung.subtract(leftHoleSubtract).subtract(rightHoleSubtract);
        }
        graphic
            .withGradientFill("right", Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["simpleGradient"])(appearance.color))
            .withStroke("thinner", appearance.color.color().darken(0.1).hex());
        return {
            graphic: graphic, hitShape: graphic.bounds.expand(5).toShape(),
            snapping: {
                type: "pluggable", at: Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, height / 2),
                requestDiameter: requestDiameter
            }
        };
    };
    Bung.properties = {
        label: "Bung / Stopper",
        canContainLiquids: false,
        defaultAppearance: {
            diameter: 22,
            color: "#dd7d2e",
            hole: "none",
            holeDiameter: 15,
            holeDiameter2: 15,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: MIN_DIAMETER, max: MAX_DIAMETER, unit: "mm",
            },
            {
                spec: "radio", key: "color", label: "Material",
                options: [
                    { value: "#dd7d2e", label: "Orange Rubber" },
                    { value: "#aaaaaa", label: "White Rubber" },
                    { value: "#824b20", label: "Cork" },
                ]
            },
            {
                spec: "toggle-buttons", key: "hole", label: "Holes", size: "text",
                options: [
                    { value: "none", label: "0", icon: "" },
                    { value: "one", label: "1", icon: "" },
                    { value: "two", label: "2", icon: "" },
                ]
            },
            {
                spec: "slider", key: "holeDiameter", label: "Hole diameter",
                min: 5, max: 40,
                visible: function (a) { return a.hole == "one"; },
            },
            {
                spec: "slider", key: "holeDiameter", label: "#1 diameter",
                min: 5, max: 40,
                visible: function (a) { return a.hole == "two"; },
            },
            {
                spec: "slider", key: "holeDiameter2", label: "#2 diameter",
                min: 5, max: 40,
                visible: function (a) { return a.hole == "two"; },
            }
        ],
    };
    return Bung;
}());

function requestDiameter(diameter) {
    var newDiameter = diameter / (0.5 + TAPERING / 2) - Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
    return { diameter: Object(_common__WEBPACK_IMPORTED_MODULE_3__["clamp"])(newDiameter, MIN_DIAMETER, MAX_DIAMETER).round(0) };
}


/***/ }),

/***/ "kSdA":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/distillation/vigreux.ts ***!
  \*******************************************************/
/*! exports provided: Vigreux */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vigreux", function() { return Vigreux; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _condensers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../condensers */ "ZaQ3");




var Vigreux = /** @class */ (function () {
    function Vigreux() {
    }
    Vigreux.prototype.render = function (appearance) {
        var _a = Object(_condensers__WEBPACK_IMPORTED_MODULE_3__["condenserCaseShape"])(230, 15), graphic = _a.group, snap = _a.snap;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var perf = new paper__WEBPACK_IMPORTED_MODULE_2__["Symbol"](perforation());
        for (var y = 40; y < 200; y += 30) {
            graphic.addChild(perf.place(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, y)));
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snap,
        };
    };
    Vigreux.properties = {
        label: "Vigreux Column",
        canContainLiquids: false,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return Vigreux;
}());

function perforation() {
    // Straight triangles.
    var triangle1l = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-18, 0]], [[-8, 5]], [[-18, 10]]));
    var triangle1r = triangle1l.clone();
    triangle1r.scale(-1, 1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
    var circle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 5), 4);
    // Bent triangles
    var triangle2l = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-18, 15]], [[-8, 25], [0, -9], [0, -6]], [[-18, 25]]));
    var triangle2r = triangle2l.clone();
    triangle2r.scale(-1, 1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
    var drop = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 15], [-8, 0], [8, 0]], [[0, 25]])).close();
    var group = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([triangle1l, triangle1r, triangle2l, triangle2r, circle, drop]);
    group.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thinner"), apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].glassFold);
    return group;
}


/***/ }),

/***/ "ka5u":
/*!*****************************!*\
  !*** ./src/tiers/promo.tsx ***!
  \*****************************/
/*! exports provided: MAX_BOOST_DIAGRAM_LAYERS, BOOST_TOTAL_DIAGRAMS, FREE_TOTAL_DIAGRAMS, ITEM_CUSTOMISATIONS, PlusPromoModal, fadColors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MAX_BOOST_DIAGRAM_LAYERS", function() { return MAX_BOOST_DIAGRAM_LAYERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BOOST_TOTAL_DIAGRAMS", function() { return BOOST_TOTAL_DIAGRAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FREE_TOTAL_DIAGRAMS", function() { return FREE_TOTAL_DIAGRAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITEM_CUSTOMISATIONS", function() { return ITEM_CUSTOMISATIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlusPromoModal", function() { return PlusPromoModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fadColors", function() { return fadColors; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! api/auth/login_button */ "uYhG");
/* harmony import */ var api_auth_reauth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! api/auth/reauth */ "e6DQ");
/* harmony import */ var api_auth_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! api/auth/storage */ "+GPU");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var layout_top_bar_account__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! layout/top_bar/account */ "Gv/G");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_currency__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! tiers/currency */ "bQBo");
/* harmony import */ var tiers_promo_plus__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! tiers/promo_plus */ "11Wx");
/* harmony import */ var tiers_promo_table__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! tiers/promo_table */ "SOVK");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var view_tooltips__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! view/tooltips */ "6T3+");
/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../api/api */ "3kYy");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../utils */ "fdqv");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



















/** Maximum number of layers that Boost users can add to a container. */
var MAX_BOOST_DIAGRAM_LAYERS = 5;
/** Maximum number of diagrams that Boost users can store in cloud. */
var BOOST_TOTAL_DIAGRAMS = 75;
/** Maximum number of diagrams that free users can store in cloud. */
var FREE_TOTAL_DIAGRAMS = 3;
/** Number of item customisations */
var ITEM_CUSTOMISATIONS = "100+";
var WAIT_FOR_CURRENCY_THRESHOLD_MS = 500;
var PlusPromoModal = /** @class */ (function (_super) {
    __extends(PlusPromoModal, _super);
    function PlusPromoModal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isOpened: false,
            staySignedIn: false,
            schoolPlanStudents: 0,
            schoolPlanMaxDiagrams: 0,
        };
        return _this;
    }
    PlusPromoModal.prototype.onLoginSuccess = function (token, tier) {
        if (this.state.staySignedIn) {
            Object(log__WEBPACK_IMPORTED_MODULE_8__["clog"])("Token written to storage");
            Object(api_auth_storage__WEBPACK_IMPORTED_MODULE_4__["storeToken"])(token);
        }
        // Check if the user has a plan
        if (tier) {
            // This user has a plan already. Close promo.
            this.close();
        }
        else {
            // Leave this open if the user is not signed up to a plan
            // Hide the sign in section.
            $('#promoSignInSection').hide();
        }
    };
    PlusPromoModal.prototype.toggleStayLoggedIn = function (stayLoggedIn) {
        this.setState({
            staySignedIn: stayLoggedIn
        });
    };
    PlusPromoModal.prototype.checkout = function (plan, currency, interval) {
        var _this = this;
        Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("CheckoutButtonClick", this.state.analyticsTag);
        var request = {
            plan: plan,
            currency: currency,
            interval: interval,
        };
        // On Safari, we need to open the window immediately, otherwise it gets
        // blocked and it's hard to open it.
        // https://stackoverflow.com/questions/20696041/window-openurl-blank-not-working-on-imac-safari
        var windowReferenceForSafari;
        if (Object(_utils__WEBPACK_IMPORTED_MODULE_18__["isSafari"])()) {
            windowReferenceForSafari = window.open();
            windowReferenceForSafari === null || windowReferenceForSafari === void 0 ? void 0 : windowReferenceForSafari.document.write("<html><body><center style='margin-top:5em'>Retrieving information, please wait...</center></body></html>");
        }
        Object(_api_api__WEBPACK_IMPORTED_MODULE_17__["callApi"])("plans/createCheckoutSession", "POST", store_store__WEBPACK_IMPORTED_MODULE_10__["default"].loggedInState(), request, {
            success: function (response) {
                // There are two cases:
                if (response.sessionId) {
                    // 1) User does not yet have a plan. Checkout session has been created.
                    var sessionId = response.sessionId;
                    var checkoutUrl = "./checkout.html?sessionId=" + sessionId + "&stripePk=" + vars__WEBPACK_IMPORTED_MODULE_15__["Consts"].stripePublicKey;
                    if (windowReferenceForSafari) {
                        // For Safari, just assign the location.
                        windowReferenceForSafari.location.href = checkoutUrl;
                    }
                    else {
                        // Otherwise use window.open.
                        window.open(checkoutUrl);
                    }
                    Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("CheckoutWindowOpen", _this.state.analyticsTag);
                }
                else if (response.tier) {
                    var tier = response.tier;
                    Object(api_auth_reauth__WEBPACK_IMPORTED_MODULE_3__["reauthFromCurrentLogin"])();
                    toastr.success("You can now enjoy full features of Chemix!", "Congratulations! You are now a " + tier.capitalise() + " user!");
                    _this.close();
                    Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("CheckoutWindowOpen", "RecoverSuccess");
                }
                else {
                    // Unknown case.
                    _sentry_react__WEBPACK_IMPORTED_MODULE_0__["captureMessage"]("Unexpected response from createCheckoutSession", _sentry_react__WEBPACK_IMPORTED_MODULE_0__["Severity"].Error);
                }
            },
        });
    };
    PlusPromoModal.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_9__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_5__["Remodal"].Container, { parent: this, class: "promo-modal wide", title: "Get more done with Chemix!", icon: "fa-bolt" },
            flags__WEBPACK_IMPORTED_MODULE_6__["default"].isPromoEnabled ? react__WEBPACK_IMPORTED_MODULE_9__["createElement"](PromoBanner, null) : null,
            react__WEBPACK_IMPORTED_MODULE_9__["createElement"](tiers_promo_plus__WEBPACK_IMPORTED_MODULE_13__["PlansGrid"], { defaultCurrency: this.state.defaultCurrency, onCheckout: function (plan, currency, interval) { return _this.checkout(plan, currency, interval); }, signedIn: this.props.auth.state == "logged_in", onClose: function () { return _this.close(); }, onUpdateSchoolPlan: function (_a) {
                    var students = _a.students, maxDiagrams = _a.maxDiagrams;
                    return _this.setState({ schoolPlanStudents: students, schoolPlanMaxDiagrams: maxDiagrams });
                }, analyticsTag: this.state.analyticsTag }),
            react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("div", { className: "collapse text-center", id: "promoSignInSection" },
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("p", null, "Signing in takes less than a minute and you'll be able to pick up from where you left off."),
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["LoginButton"], { providerName: "google", auth: this.props.auth, active: this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("SignInButton", "promo:google"); }, onSuccess: function (token, tier) { return _this.onLoginSuccess(token, tier); } }),
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["LoginButton"], { providerName: "microsoft", auth: this.props.auth, active: this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("SignInButton", "promo:microsoft"); }, onSuccess: function (token, tier) { return _this.onLoginSuccess(token, tier); } }),
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["LoginButton"], { providerName: "twitter", auth: this.props.auth, active: this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("SignInButton", "promo:twitter"); }, onSuccess: function (token, tier) { return _this.onLoginSuccess(token, tier); } }),
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"](api_auth_login_button__WEBPACK_IMPORTED_MODULE_2__["LoginButton"], { providerName: "facebook", auth: this.props.auth, active: this.state.isOpened, onClick: function () { return Object(analytics__WEBPACK_IMPORTED_MODULE_1__["g"])("SignInButton", "promo:facebook"); }, onSuccess: function (token, tier) { return _this.onLoginSuccess(token, tier); } }),
                react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("div", { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_9__["createElement"](layout_top_bar_account__WEBPACK_IMPORTED_MODULE_7__["StaySignedInCheckbox"], { key: "stayLoggedIn", value: this.state.staySignedIn, onChange: function (v) { return _this.toggleStayLoggedIn(v); } }))),
            react__WEBPACK_IMPORTED_MODULE_9__["createElement"](tiers_promo_plus__WEBPACK_IMPORTED_MODULE_13__["Disclaimer"], null),
            react__WEBPACK_IMPORTED_MODULE_9__["createElement"](tiers_promo_table__WEBPACK_IMPORTED_MODULE_14__["ComparisonTable"], { students: this.state.schoolPlanStudents, maxDiagrams: this.state.schoolPlanMaxDiagrams }));
    };
    PlusPromoModal.prototype.componentDidMount = function () {
        _super.prototype.componentDidMount.call(this);
        Object(view_tooltips__WEBPACK_IMPORTED_MODULE_16__["setUpQTip"])(this.ref);
    };
    PlusPromoModal.prototype.triggerOpen = function (analyticsTag) {
        var _this = this;
        this.setState({ analyticsTag: analyticsTag });
        // Attempt to prefetch user's country to determine currency.
        // However if this takes too long, open anyway.
        // If already fetched, don't fetch again.
        if (this.state.defaultCurrency || vars__WEBPACK_IMPORTED_MODULE_15__["Consts"].isDev) {
            this.open();
            return;
        }
        setTimeout(function () { return _this.open(); }, WAIT_FOR_CURRENCY_THRESHOLD_MS);
        var self = this;
        $.get("https://ipinfo.io?token=a91f57b3b0b7ec", function (response) {
            var countryCode = response.country;
            var selectedCurrency = Object(tiers_currency__WEBPACK_IMPORTED_MODULE_12__["countryCodeToCurrency"])(countryCode);
            self.setState({ defaultCurrency: selectedCurrency });
            // Trigger open, but only if we already haven't opened.
            if (!self.state.isOpened) {
                _this.open();
            }
        }, "jsonp");
    };
    return PlusPromoModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_5__["Remodal"]));

var PromoBanner = function () { return react__WEBPACK_IMPORTED_MODULE_9__["createElement"](react__WEBPACK_IMPORTED_MODULE_9__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("div", { className: "inline-toast custom-icon toast toast-warning mt-3 mb-1 mx-5" },
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("i", { className: "fad fa-hat-santa fa-lg mr-1 align-middle", style: __assign(__assign({}, fadColors("white", "crimson")), { "textShadow": "0 0 5px #ffffffaa" }) }),
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("i", { className: "fad fa-tree-decorated fa-lg mr-1 align-middle", style: __assign(__assign({}, fadColors("mediumseagreen", "gold")), { "textShadow": "0 0 5px #ffffffaa" }) }),
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("i", { className: "fad fa-snowman fa-lg mr-2 align-middle", style: __assign(__assign({}, fadColors("brown", "white")), { "textShadow": "0 0 5px #ffffffaa" }) }),
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("b", null, "Holiday Deal: 15% off for 1 year!"),
        "\u00A0Simply enter the promo code ",
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("b", { className: "text-danger" }, "WINTERHOLIDAY"),
        " during checkout.",
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("br", null)),
    react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("div", { className: "text-muted mx-5 mb-3" },
        "Offer available until 14th January 2021. New subscribers only. ",
        react__WEBPACK_IMPORTED_MODULE_9__["createElement"]("a", { "data-beacon-article-modal": support_beacon__WEBPACK_IMPORTED_MODULE_11__["Articles"].CHRISTMAS_PROMO, className: "text-muted", href: "#" }, "Click for more details"))); };
var fadColors = function (primary, secondary) { return ({
    "--fa-primary-color": primary,
    "--fa-secondary-color": secondary,
    "--fa-secondary-opacity": 1.0,
}); };


/***/ }),

/***/ "kjz7":
/*!*************************************************!*\
  !*** ./src/apparatus/library/test_tube_rack.ts ***!
  \*************************************************/
/*! exports provided: TestTubeRack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TestTubeRack", function() { return TestTubeRack; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_testTube__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/testTube */ "RHVt");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};





var WOOD_STROKE = "#382b1e";
var TestTubeRack = /** @class */ (function () {
    function TestTubeRack() {
    }
    TestTubeRack.convertToLatest = function (a) {
        if (!a.type) {
            a.type = "simple";
        }
        return __assign(__assign({}, TestTubeRack.properties.defaultAppearance), a);
    };
    TestTubeRack.prototype.render = function (appearance) {
        return (function () {
            switch (appearance.type) {
                case "simple": return renderSimple(appearance);
                case "wooden": return renderWooden(appearance);
            }
        })();
    };
    TestTubeRack.properties = {
        label: "Test Tube Rack",
        canContainLiquids: false,
        defaultAppearance: {
            slots: 4,
            gap: apparatus_library_testTube__WEBPACK_IMPORTED_MODULE_3__["TestTube"].properties.defaultAppearance.width,
            height: 100,
            type: "wooden"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "wooden", label: "Wooden" },
                    { value: "simple", label: "Simple" },
                ],
            },
            {
                spec: "slider", key: "slots", label: "Number of slots",
                min: 4, max: 8, step: 1
            },
            {
                spec: "slider", key: "height", label: "Height",
                min: 60, max: 200,
            },
            {
                spec: "slider", key: "gap", label: "Gap size",
                min: 8, max: 30,
                visible: function (a) { return a.type === "simple"; }
            }
        ],
    };
    return TestTubeRack;
}());

function renderSimple(appearance) {
    var height = appearance.height;
    var slots = appearance.slots;
    var step = 40;
    var gap = appearance.gap;
    var wall = step - gap;
    var sideWall = 20;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["CompoundPath"]({});
    graphic.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
    graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -height));
    graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(sideWall, 0));
    for (var i = 0; i < slots; i++) {
        graphic.moveBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(gap, 0));
        graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(wall, 0));
    }
    graphic.lastSegment.remove();
    graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(sideWall, 0));
    graphic.lineBy(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, height)),
        graphic.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
    graphic.strokeCap = "butt";
    return {
        graphic: graphic,
        hitShape: graphic.bounds.toShape(),
        snapping: graphic.placeable(),
    };
}
function renderWooden(appearance) {
    var height = appearance.height;
    var width = 30 + (appearance.slots - 1) * 50;
    var horizontalPartThickness = 8;
    var verticalPartThickness = 12;
    // Calculate the offset needed for the gradient,
    // to give the horizontal bars have a subtle shadow
    var gradientOffset = 18 / width;
    var top = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 20, width, horizontalPartThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_LEFT), 3.0)
        .withStroke("default", WOOD_STROKE)
        .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].reflected(["#704e2f", gradientOffset], ["#916943", gradientOffset + 0.03]));
    var bottom = top.clone();
    bottom.position.y = height - horizontalPartThickness;
    var left = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, verticalPartThickness, height, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_LEFT), 3.0)
        .withStroke("default", WOOD_STROKE)
        .withGradientFill("right", [
        ["#ce9158", 0.2],
        ["#ad7847", 0.21],
        ["#704e2f", 1.0]
    ]);
    var right = left.clone();
    right.position.x += width - verticalPartThickness;
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([top, bottom, left, right]);
    return {
        graphic: graphic,
        hitShape: graphic.bounds.toShape(),
        snapping: graphic.placeable()
    };
}


/***/ }),

/***/ "kxzD":
/*!************************************************************!*\
  !*** ./src/apparatus/library/electrical/crocodile_clip.ts ***!
  \************************************************************/
/*! exports provided: CrocodileClips */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CrocodileClips", function() { return CrocodileClips; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var METAL = [
    ["#dddddd", 0.2],
    ["#aaaaaa", 0.9],
];
var CrocodileClips = /** @class */ (function () {
    function CrocodileClips() {
    }
    CrocodileClips.prototype.render = function (appearance) {
        var topPart = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-185, -14], [-4, 0]], [[120, -48], , [10, -1]], [[122, -34], [10, -1]], [[98, -31]], [[35, -16], , [-10, 2]], [[0, 10], [20, 0], [-40, 0]], [[-44, -10], , [-7, -10]], [[-65, -9], [7, -10]], [[-76, 3]], [[-86, -7]], [[-96, 4]], [[-106, -6]], [[-116, 5]], [[-126, -5]], [[-136, 6]], [[-146, -4]], [[-156, 7]], [[-166, -3]], [[-176, 8]], [[-186, -5]]));
        topPart.closePath();
        topPart.setGradientFill("right-down", METAL);
        var bottomPart = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[-176, 20]], [[-166, 9]], [[-156, 19]], [[-146, 7]], [[-136, 18]], [[-127, 6]], [[-117, 17]], [[-108, 5]], [[-98, 16]], [[-89, 4]], [[-79, 14]], [[-69, 3], , [30, 30]], [[-30, 0], [-5, 10], [25, -50]], [[36, 13], [-5, -20], [2, 8]], [[110, 15]], [[140, 10]], [[200, 8]], [[200, 31]], [[-170, 31], , [-6, 0]]));
        bottomPart.closePath();
        bottomPart.setGradientFill("right-up", METAL);
        topPart.rotate(appearance.opening * 20, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([topPart, bottomPart]);
        graphic.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
        graphic.strokeWidth = Math.min(3.0, appearance.scale * 1.5);
        graphic.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].darkMetal;
        var pivot = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-2, 2), 12);
        pivot.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].mediumMetal;
        graphic.addChild(pivot);
        graphic.scale(0.2 * appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0)
        };
    };
    CrocodileClips.properties = {
        label: "Crocodile Clips",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            scale: 1.0,
            opening: 0.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 2.0, step: 0.05
            },
            {
                spec: "slider", key: "opening", label: "Opening",
                min: 0, max: 1, step: 0.1
            }
        ],
    };
    return CrocodileClips;
}());



/***/ }),

/***/ "l2QM":
/*!*************************************************!*\
  !*** ./src/apparatus/library/physics/spring.ts ***!
  \*************************************************/
/*! exports provided: Spring */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spring", function() { return Spring; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var Spring = /** @class */ (function () {
    function Spring() {
    }
    // static isBoostRequiredForAppearance(appearance: SpringAppearance) {
    //     return appearance.shade /*TIERLOCK*/
    // }
    Spring.prototype.render = function (appearance) {
        var spring = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]().withStroke("thick", appearance.shade ? "#777777" : apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].stroke);
        var radius = appearance.diameter / 2;
        var distance = radius * Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["lerp"])(5, 0.0, Math.pow(appearance.compression, 0.5)) + 7;
        var handle = distance / 3;
        var loops = appearance.loops;
        for (var i = 0; i < loops; i++) {
            spring.addSegments([
                new paper__WEBPACK_IMPORTED_MODULE_1__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-radius, i * distance), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Polar"])(handle, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Polar"])(handle, 180)),
                new paper__WEBPACK_IMPORTED_MODULE_1__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(radius, (i + 0.5) * distance), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Polar"])(handle, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Polar"])(handle, -180))
            ]);
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([spring]);
        if (appearance.shade) {
            var shade1 = spring.clone();
            var gradient1 = [];
            var gradientStep = 1.0 / (loops * 2 - 1) * 2.0;
            for (var i = 0; i < loops; i++) {
                gradient1.push(["#00000000", (i + 0.0) * gradientStep], ["#000000cc", Math.min(1, (i + 0.15) * gradientStep)], ["#000000cc", Math.min(1, (i + 0.35) * gradientStep)], ["#00000000", Math.min(1, (i + 0.5) * gradientStep)]);
            }
            shade1.setGradientStroke("down", gradient1);
            var shade2 = spring.clone();
            shade2.strokeWidth = Math.max(1, shade2.strokeWidth - 2);
            shade2.setGradientStroke("right", [["#ffffff00", 0.1], ["#ffffff60", 0.4], ["#ffffff00", 0.7]]);
            graphic.addChildren([shade1, shade2]);
        }
        spring.addSegments([new paper__WEBPACK_IMPORTED_MODULE_1__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, loops * distance + 7.5), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -15))]);
        spring.insertSegments(0, [new paper__WEBPACK_IMPORTED_MODULE_1__["Segment"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -distance * 0.5 - 7.5), undefined, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 15))]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(5).toShape()
        };
    };
    Spring.properties = {
        label: "Spring",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            diameter: 15,
            loops: 6,
            compression: 0.3,
            shade: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "loops", label: "Loops",
                min: 3, max: 20, step: 1,
            },
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 10, max: 50, step: 1.0, unit: "mm"
            },
            {
                spec: "slider", key: "compression", label: "Compression",
                min: 0, max: 1, step: 0.01, unit: "%",
            },
            {
                spec: "checkbox", key: "shade", label: "Shading", subLabel: "3D", allowWhenLocked: true,
            }
        ],
    };
    return Spring;
}());



/***/ }),

/***/ "lC4y":
/*!*******************************!*\
  !*** ./src/browser/cookie.ts ***!
  \*******************************/
/*! exports provided: Cookie */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cookie", function() { return Cookie; });
var Cookie;
(function (Cookie) {
    /** How many days to store the cookie for. */
    var DAYS = 365;
    function read(name) {
        var result = new RegExp('(?:^|; )' + encodeURIComponent(name) + '=([^;]*)').exec(document.cookie);
        return result ? result[1] : null;
    }
    Cookie.read = read;
    function write(name, value, days) {
        if (days === void 0) { days = DAYS; }
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toUTCString();
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    Cookie.write = write;
    function remove(name) {
        write(name, "", -1);
    }
    Cookie.remove = remove;
})(Cookie || (Cookie = {}));


/***/ }),

/***/ "lJ/s":
/*!*********************************************!*\
  !*** ./src/components/text_replacements.ts ***!
  \*********************************************/
/*! exports provided: TextReplacements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextReplacements", function() { return TextReplacements; });
/* harmony import */ var keyboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! keyboard */ "uSG+");

var TextReplacements;
(function (TextReplacements) {
    function onKeyPress(input, event) {
        var _a;
        input.undoReplacement = null;
        var text = input.ref.current.value;
        var selectionEnd = (_a = input.ref.current.selectionEnd) !== null && _a !== void 0 ? _a : 0;
        var r = textReplacement(event.key, text, selectionEnd);
        if (r) {
            switch (r.action) {
                case "replace":
                    var pre = text.substring(0, selectionEnd - r.length);
                    var post = text.substring(selectionEnd, text.length);
                    var newCursorPosition = selectionEnd - r.length + r.text.length;
                    input.manuallySetText(pre + r.text + post, newCursorPosition);
                    input.undoReplacement = { original: text.substring(0, selectionEnd) + ")" + post, position: selectionEnd + 1 };
                    event.preventDefault();
            }
        }
    }
    TextReplacements.onKeyPress = onKeyPress;
    function onKeyDown(input, event) {
        if (input.undoReplacement && event.keyCode == keyboard__WEBPACK_IMPORTED_MODULE_0__["Keys"].BACKSPACE) {
            var _a = input.undoReplacement, original = _a.original, position = _a.position;
            input.manuallySetText(original, position);
            input.undoReplacement = null;
            event.preventDefault();
            return;
        }
    }
    TextReplacements.onKeyDown = onKeyDown;
})(TextReplacements || (TextReplacements = {}));
function textReplacement(key, text, selection) {
    if (key != ")")
        return;
    var startBracketLocation = text.substring(0, selection).lastIndexOf("(");
    if (startBracketLocation === -1)
        return;
    var toReplace = text.substring(startBracketLocation + 1, selection);
    // Check replacements.
    var capitalGreek = replaceGreek(toReplace);
    if (capitalGreek) {
        return { action: "replace", text: capitalGreek, length: toReplace.length + 1 };
    }
    return;
}
function replaceGreek(replace) {
    var found = CAPITAL_GREEK_LETTERS.indexOf(replace);
    if (found > -1)
        return String.fromCharCode(CAPITAL_GREEK_ALPHA + found);
    var found2 = SMALL_GREEK_LETTERS.indexOf(replace);
    if (found2 > -1)
        return String.fromCharCode(SMALL_GREEK_ALPHA + found2);
}
var CAPITAL_GREEK_ALPHA = 913;
var CAPITAL_GREEK_LETTERS = [
    "Alpha",
    "Beta",
    "Gamma",
    "Delta",
    "Epsilon",
    "Zeta",
    "Eta",
    "Theta",
    "Iota",
    "Kappa",
    "Lambda",
    "Mu",
    "Nu",
    "Xi",
    "Omicron",
    "Pi",
    "Rho",
    "___GAP___",
    "Sigma",
    "Tau",
    "Upsilon",
    "Phi",
    "Chi",
    "Psi",
    "Omega",
];
var SMALL_GREEK_ALPHA = 945;
var SMALL_GREEK_LETTERS = [
    "alpha",
    "beta",
    "gamma",
    "delta",
    "epsilon",
    "zeta",
    "eta",
    "theta",
    "iota",
    "kappa",
    "lambda",
    "mu",
    "nu",
    "xi",
    "omicron",
    "pi",
    "rho",
    "___GAP___",
    "sigma",
    "tau",
    "upsilon",
    "___phi___",
    "chi",
    "psi",
    "omega",
    "__iotadialytika__",
    "__upsilondialytika__",
    "__omicrontonos__",
    "__upsilontonos__",
    "__omegatonos__",
    "__kai__",
    "beta2",
    "theta2",
    "__upsilonhook__",
    "__upsilonhookacute__",
    "__upsilondiaeresis__",
    "phi",
];


/***/ }),

/***/ "lJUC":
/*!************************************************************!*\
  !*** ./src/apparatus/library/biology/equipment/quadrat.ts ***!
  \************************************************************/
/*! exports provided: Quadrat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Quadrat", function() { return Quadrat; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Quadrat = /** @class */ (function () {
    function Quadrat() {
    }
    Quadrat.prototype.render = function (appearance) {
        var size = appearance.scale * appearance.size;
        var grid = Number(appearance.gridType);
        var step = size / grid;
        var frame = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, size, size));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]();
        // Vertical.
        for (var i = 1; i < grid; i++) {
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(i * step, 0), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(i * step, size)));
            graphic.addChild(new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, i * step), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(size, i * step)));
        }
        graphic.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#aaaaaa");
        frame.withStroke(10.0, "#b37132");
        graphic.addChild(frame);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Quadrat.properties = {
        label: "Quadrat",
        canContainLiquids: false,
        defaultAppearance: {
            size: 300,
            scale: 0.75,
            gridType: "5"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 300, max: 600, unit: "mm"
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.25, max: 1, step: 0.01, unit: "%",
            },
            {
                spec: "radio", key: "gridType", label: "Grid",
                options: [
                    { value: "3", label: "3x3" },
                    { value: "5", label: "5x5" },
                    { value: "7", label: "7x7", tier: "boost" },
                    { value: "10", label: "10x10", tier: "boost" },
                ],
            }
        ],
    };
    return Quadrat;
}());



/***/ }),

/***/ "lY6V":
/*!******************************************!*\
  !*** ./src/editing/grouping/commands.ts ***!
  \******************************************/
/*! exports provided: GroupObjects, BreakGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupObjects", function() { return GroupObjects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BreakGroup", function() { return BreakGroup; });
/* harmony import */ var ext_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ext/array */ "3pNw");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! store/store */ "uFCc");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var GroupObjects = /** @class */ (function () {
    /** Creates a group from given child IDs. The group's ID can be optionally specified. */
    function GroupObjects(ids, groupId) {
        this.newGroup = {
            id: groupId !== null && groupId !== void 0 ? groupId : store_id__WEBPACK_IMPORTED_MODULE_1__["ID"].mint("group"),
            items: ids,
        };
    }
    GroupObjects.prototype.execute = function () {
        var _this = this;
        /** Pass a shallow copy, not a reference. */
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Group", function (store) { return createGroup(store, __assign({}, _this.newGroup)); });
    };
    GroupObjects.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Ungroup", function (store) { return ungroup(store, _this.newGroup); });
    };
    return GroupObjects;
}());

var BreakGroup = /** @class */ (function () {
    function BreakGroup(group) {
        this.group = group;
    }
    BreakGroup.prototype.execute = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Ungroup", function (store) { return ungroup(store, _this.group); });
    };
    BreakGroup.prototype.undo = function () {
        var _this = this;
        store_store__WEBPACK_IMPORTED_MODULE_2__["default"].dispatchFn("Group", function (store) { return createGroup(store, _this.group); });
    };
    return BreakGroup;
}());

function createGroup(store, parent) {
    var childIds = parent.items;
    var newStore = __assign(__assign({}, store), { arrows: store.arrows.map(function (a) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, a.id) ? __assign(__assign({}, a), { parentGroup: parent.id }) : a; }), items: store.items.map(function (i) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, i.id) ? __assign(__assign({}, i), { parentGroup: parent.id }) : i; }), groups: store.groups.map(function (g) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, g.id) ? __assign(__assign({}, g), { parentGroup: parent.id }) : g; }) });
    newStore.groups.push(parent);
    return newStore;
}
function ungroup(store, group) {
    var childIds = group.items;
    return __assign(__assign({}, store), { arrows: store.arrows.map(function (a) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, a.id) ? __assign(__assign({}, a), { parentGroup: undefined }) : a; }), items: store.items.map(function (i) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, i.id) ? __assign(__assign({}, i), { parentGroup: undefined }) : i; }), groups: store.groups.filter(function (g) { return g.id !== group.id; }).map(function (g) { return ext_array__WEBPACK_IMPORTED_MODULE_0__["Arrays"].includes(childIds, g.id) ? __assign(__assign({}, g), { parentGroup: undefined }) : g; }) });
}


/***/ }),

/***/ "lYKe":
/*!*****************************************************************!*\
  !*** ./src/apparatus/library/storage/plastic_reagent_bottle.ts ***!
  \*****************************************************************/
/*! exports provided: PlasticReagentBottle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlasticReagentBottle", function() { return PlasticReagentBottle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var PlasticReagentBottle = /** @class */ (function () {
    function PlasticReagentBottle() {
        this.radiusInterpolator = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Interpolator"]([60, 180], [30, 60]);
    }
    PlasticReagentBottle.prototype.render = function (appearance) {
        var radius = this.radiusInterpolator.interpolate(appearance.size);
        var height = appearance.size;
        var bottleBackPart = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[radius, 0], [0, radius * -0.75]], [[radius, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bottleBackPart);
        bottleBackPart.closePath();
        var outline = bottleBackPart.clone().withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#888888");
        bottleBackPart.setGradientFill("right", [["#dddddd", 0.0], ["#eeeeee", 0.15], ["#eeeeee", 0.85], ["#dddddd", 1.0]]);
        // const bottleFrontPart = new Path(Segments(
        //     [[radius, 10],[-20, radius * -0.5]],
        //     [[radius, height]],
        // ))
        // mirrorX(bottleFrontPart)
        // bottleFrontPart.closePath()
        // bottleFrontPart.setGradientFill("right", [["#dddddd", 0.0], ["#eeeeee", 0.15], ["#eeeeee", 0.85], ["#dddddd", 1.0]])
        var lightLine = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-radius, height - 20]], [[radius, height - 20]])).withStroke(2.0, "#f6f6f6");
        var darkLine = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-radius, 10 + height / 10]], [[radius, 10 + height / 10]])).withStroke(2.0, "#cccccc");
        var cap = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[radius - 10, 0]], [[radius - 10, 14]], [[radius - 5, 14]], [[radius - 5, 22]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(cap);
        cap.closePath();
        cap.position.y -= 30 + height / 10;
        cap.setGradientFill("right", [["#5668e3", 0.0], ["#7e9cfc", 0.3], ["#5668e3", 1.0]]);
        cap.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#2b3aa3");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bottleBackPart, darkLine, lightLine, outline, cap]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: graphic.placeable(),
        };
    };
    PlasticReagentBottle.properties = {
        label: "Plastic Reagent Bottle",
        canContainLiquids: false,
        defaultAppearance: {
            size: 100
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 60, max: 180
            }
        ],
    };
    return PlasticReagentBottle;
}());



/***/ }),

/***/ "lcEn":
/*!***********************************************!*\
  !*** ./src/apparatus/library/physics/ramp.ts ***!
  \***********************************************/
/*! exports provided: Ramp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ramp", function() { return Ramp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Ramp = /** @class */ (function () {
    function Ramp() {
        this.shouldUseBoundsCenter = true;
    }
    Ramp.prototype.render = function (appearance) {
        var lengthM = appearance.length, angle = appearance.angle;
        var length = lengthM * 1000;
        var height = length * Math.sin(angle.toRadians());
        var width = length * Math.cos(angle.toRadians());
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[width, height]], [[0, height]])).close()
            .withStroke("default")
            .withFill("#aaaaaa");
        var hitShape = graphic.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: hitShape,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width, height),
            snapping: [
                { type: "placeable_surface", start: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), end: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width, height), facing: "auto" },
                { type: "placeable", at: graphic.strokeBounds.bottomCenter }
            ]
        };
    };
    Ramp.properties = {
        label: "Ramp",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            length: 1.0,
            angle: 25
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 0.5, max: 2.5, step: 0.05, unit: "m"
            },
            {
                spec: "slider", key: "angle", label: "Angle",
                min: 5, max: 45, step: 5, unit: "°",
            }
        ],
    };
    return Ramp;
}());



/***/ }),

/***/ "lfcP":
/*!**************************************************************!*\
  !*** ./src/apparatus/library/biology/organic/plant_shoot.ts ***!
  \**************************************************************/
/*! exports provided: PlantShoot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlantShoot", function() { return PlantShoot; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var PlantShoot = /** @class */ (function () {
    function PlantShoot() {
    }
    PlantShoot.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].plant(appearance.display - 1);
        graphic.scale(appearance.scale);
        // Recolor it.
        if (appearance.color === "dead") {
            for (var _i = 0, _a = graphic.children[1].children; _i < _a.length; _i++) {
                var path = _a[_i];
                var color = path.fillColor.toCSS(true);
                path.fillColor = DEAD_RECOLOR[color];
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    PlantShoot.properties = {
        label: "Plant shoot",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            display: 3,
            scale: 1.0,
            color: "alive"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "display", label: "Growth phase",
                min: 1, max: 6
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.25, max: 2.0, step: 0.01, unit: "%"
            },
            {
                spec: "radio", key: "color", label: "Style",
                options: [
                    { value: "alive", label: "Alive" },
                    { value: "dead", label: "Dead" },
                ],
            }
        ],
    };
    return PlantShoot;
}());

var DEAD_RECOLOR = {
    "#579b3c": "#8c8069",
    "#8fc444": "#ccc389"
};
// function renderOld(appearance: PlantShootAppearance): RenderParts {
//     const stem = new Path(Segments(
//         [[-17, 31],[7, 10],[5, 1]],
//         [[-2, 37],[-8, -2],[-6, -9]],
//         [[8, -2],[-1, -9],[6, -3]],
//         [[4, 31],[-3, -19],[2, 13]],
//         [[29, 31],[-2, 0],[8, -4]],
//         [[11, 41],[20, 0],[-9, 8]],
//         [[10, 66]],
//         [[4, 66]],
//         [[1, 46],[-1, 14],[2, -4]]
//     ))
//     stem.closePath()
//     stem.position = P(1, 9)
//     stem.fillColor = DEFAULT_COLOR.color().ladd(-10).string()
//     const graphic = new Group([stem])
//     const leaf1 = Leaf.createLeaf(DEFAULT_COLOR, 60)
//     const leaf2 = leaf1.clone()
//     const leaf3 = leaf1.clone()
//     leaf1.rotate(-110)
//     leaf2.rotate(-180)
//     leaf2.scale(0.8)
//     leaf3.scale(0.7, -0.7)
//     leaf2.position = P(-50, 0)
//     leaf1.position = P(0, -60)
//     leaf3.position = P(50, 0)
//     graphic.addChildren([leaf1, leaf2, leaf3])
//     return {
//         graphic: graphic,
//         hitShape: graphic.bounds.toShape()
//     }
// }


/***/ }),

/***/ "mLwR":
/*!***************************************************!*\
  !*** ./src/apparatus/library/evaporating_dish.ts ***!
  \***************************************************/
/*! exports provided: EvaporatingDish */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EvaporatingDish", function() { return EvaporatingDish; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var EvaporatingDish = /** @class */ (function () {
    function EvaporatingDish() {
    }
    EvaporatingDish.prototype.render = function (appearance) {
        var graphic = getGraphicPath(appearance);
        var hitShape = graphic.clone();
        var liquidShape = graphic.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidShape,
            snapping: graphic.placeable(),
        };
    };
    EvaporatingDish.properties = {
        label: "Evaporating Dish",
        canContainLiquids: true,
        defaultAppearance: {
            diameter: 65,
            style: "default"
        },
        flippable: true,
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 50, max: 100
            },
            {
                spec: "radio", key: "style", label: "Style",
                options: [
                    { value: "default", label: "Default" },
                    { value: "simple", label: "Simple" },
                ],
            }
        ],
    };
    return EvaporatingDish;
}());

function getGraphicPath(appearance) {
    var diameter = appearance.diameter;
    var height;
    switch (appearance.style) {
        case "default":
            height = diameter * 0.5;
            return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[diameter / 4, height], [-diameter / 5, 0]], [[diameter / 4 * 3, height], undefined, [diameter / 5, 0]], [[diameter - 3, 5]], [[diameter + 3, -1], [-1, 3]]));
        case "simple":
            height = diameter * 0.36;
            return new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0], , [0, height / 3]], [[diameter / 2, height], [-diameter * 0.36, 0], [diameter * 0.36, 0]], [[diameter, 0], [0, height / 3]]));
    }
}


/***/ }),

/***/ "mQL2":
/*!************************************************!*\
  !*** ./src/apparatus/library/schlenk_flask.ts ***!
  \************************************************/
/*! exports provided: SchlenkFlask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchlenkFlask", function() { return SchlenkFlask; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common/tap */ "ndDi");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




var SchlenkFlask = /** @class */ (function () {
    function SchlenkFlask() {
    }
    SchlenkFlask.isBoostRequiredForAppearance = function (a) {
        return a.shape === "cylinder";
    };
    SchlenkFlask.prototype.render = function (appearance) {
        var shape = shapePath(appearance.shape);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(shape);
        var hitShape = shape.bounds.toShape();
        var liquidMask = shape.clone();
        var graphic;
        switch (appearance.shape) {
            case "cylinder":
                graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 10);
                break;
            case "sphere":
                graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(shape, 9);
                break;
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        var tap = Object(apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["createTap"])(appearance.tapOpening);
        graphic.addChild(tap);
        tap.rotate(215);
        tap.scale(0.9);
        tap.position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(52, 45);
        return {
            graphic: graphic,
            hitShape: hitShape,
            liquidMask: liquidMask,
        };
    };
    SchlenkFlask.properties = {
        label: "Schlenk Flask",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: __assign({ shape: "sphere" }, apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].defaultAppearance),
        appearanceSpecs: [
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "sphere", label: "Spherical" },
                    { value: "cylinder", label: "Cylindrical", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            apparatus_library_common_tap__WEBPACK_IMPORTED_MODULE_2__["Tap"].appearanceSpec,
        ],
    };
    return SchlenkFlask;
}());

function shapePath(shape) {
    switch (shape) {
        case "sphere":
            return new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-13, 0]], [[-13, 40], , [-3, 0]], [[-15, 60], , [-18, 5]], [[-44, 104], [0, -18], [0, 18]], [[0, 146], [-28, 0], [28, 0]], [[47, 100], [0, 22], [0, -14]], [[45, 70], [-2, 6], [5, -15]], [[90, -6]], [[85, -10]], [[30, 63], [9, 0], [-9, 0]], [[15, 55], [0, 5]], [[13, 40], [3, 0]], [[13, 0]]));
        case "cylinder":
            return new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-13, 0]], [[-13, 40], , [-3, 0]], [[-15, 60], , [-18, 10]], [[-30, 104]], // Bottom of flask
            [[-30, 260], , [0, 35]], [[30, 260], [0, 35]], [[30, 100], [0, 22], [0, -14]], [[45, 70], [-2, 6], [5, -15]], [[90, -6]], [[85, -10]], [[30, 63], [9, 0], [-9, 0]], [[15, 55], [0, 5]], [[13, 40], [3, 0]], [[13, 0]]));
    }
}


/***/ }),

/***/ "mk3e":
/*!*************************************************!*\
  !*** ./src/apparatus/library/structure/jack.ts ***!
  \*************************************************/
/*! exports provided: LabJack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabJack", function() { return LabJack; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var LabJack = /** @class */ (function () {
    function LabJack() {
    }
    LabJack.prototype.render = function (appearance) {
        var height = appearance.height;
        var halfHeight = height / 2;
        // Create basic arm.
        var armLength = 100;
        var armWidth = 10;
        var arm = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-armWidth / 2, 0, armLength + armWidth, armWidth, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_LEFT), armWidth / 2);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(arm);
        arm.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].lightMetal;
        // Calculate how much to rotate the arm by to reach desired (total) height
        var rotateBy = Math.asin(halfHeight / armLength).toDegrees();
        arm.rotate(rotateBy, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(armLength, -armWidth / 2));
        // Clone to create the second arm.
        var arm2 = arm.clone();
        arm2.position.y -= halfHeight;
        // Clone the arms to create the flipped arms, forming the "X" pattern.
        var arm3 = arm.clone();
        arm3.scale(-1.0, 1.0);
        var arm4 = arm2.clone();
        arm4.scale(-1.0, 1.0);
        // Put all the arms together and place in correct position.
        var arms = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([arm, arm2, arm3, arm4]);
        // Add base and top.
        var base = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-10, -5, 120, 15));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(base);
        base.fillColor = "#3c82c9";
        base.strokeColor = "#26527f";
        var platform = base.clone();
        platform.position.y -= height + 10;
        // Turn knob + bar.
        var bar = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-7, -halfHeight - 5]], [[120, -halfHeight - 5]]));
        bar.strokeWidth = 5.0;
        bar.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].mediumMetal;
        var knob = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(120, -halfHeight - 5, 12, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(knob);
        knob.fillColor = "#444444";
        // Assemble together.
        var jack = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([arms, base, platform]);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([bar, knob, jack]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, 0),
            snapping: [
                jack.placeable(),
                jack.topEdgeAsPlaceableSurface(),
            ]
        };
    };
    LabJack.properties = {
        label: "Scissor Jack",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            height: 50
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 30, max: 150
            }
        ],
    };
    return LabJack;
}());



/***/ }),

/***/ "msuj":
/*!****************************************************!*\
  !*** ./src/apparatus/library/electrical/magnet.ts ***!
  \****************************************************/
/*! exports provided: Magnet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Magnet", function() { return Magnet; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/transportation/osmosis_tube */ "GZua");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





var NORTH_COLOR = "#f12a2a";
var SOUTH_COLOR = "#1482f5";
var Magnet = /** @class */ (function () {
    function Magnet() {
    }
    Magnet.prototype.render = function (appearance) {
        switch (appearance.shape) {
            case "horseshoe": return this.renderHorseshoe(appearance);
            case "bar": return this.renderBar(appearance);
        }
    };
    Magnet.prototype.renderBar = function (appearance) {
        var northPole = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 45, 22, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_RIGHT))
            .withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(NORTH_COLOR.color()));
        var southPole = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 45, 22, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_LEFT))
            .withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(SOUTH_COLOR.color()));
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["createOutlinedGroup"])("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke, northPole, southPole);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Magnet.prototype.renderHorseshoe = function (appearance) {
        var thickness = 18;
        var halfShape = [
            [[0, 90 - thickness], , [apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_3__["CIRCULAR_RATIO"] * (40 - thickness), 0]],
            [[40 - thickness, 50], [0, apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_3__["CIRCULAR_RATIO"] * (40 - thickness)]],
            [[40 - thickness, 0]],
            [[40, 0]],
            [[40, 50], , [0, apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_3__["CIRCULAR_RATIO"] * 40]],
            [[0, 90], [apparatus_library_transportation_osmosis_tube__WEBPACK_IMPORTED_MODULE_3__["CIRCULAR_RATIO"] * 40, 0]]
        ];
        var southPole = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"].apply(void 0, halfShape)).close();
        var northPole = southPole.clone();
        northPole.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        northPole.withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(NORTH_COLOR.color()));
        southPole.withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(SOUTH_COLOR.color()));
        var outline = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"].apply(void 0, halfShape)).close().withStroke("default");
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(outline);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([northPole, southPole, outline]);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    Magnet.properties = {
        label: "Magnet",
        canContainLiquids: false,
        defaultAppearance: {
            shape: "bar",
            scale: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "bar", label: "Bar" },
                    { value: "horseshoe", label: "Horseshoe" },
                ],
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 3.0, step: 0.01, unit: "%"
            }
        ],
    };
    return Magnet;
}());



/***/ }),

/***/ "n7Dw":
/*!******************************************************!*\
  !*** ./src/apparatus/library/biology/organic/bug.ts ***!
  \******************************************************/
/*! exports provided: Bug */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bug", function() { return Bug; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var Bug = /** @class */ (function () {
    function Bug() {
    }
    Bug.prototype.render = function (appearance) {
        var allBugs = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].bugs();
        var index = appearance.type.split(",");
        var graphic = allBugs.children[+index[1] + 1].clone();
        graphic.scale(appearance.scale);
        allBugs.remove();
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    Bug.properties = {
        label: "Bug",
        canContainLiquids: false,
        defaultAppearance: {
            type: "0,0",
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 3, step: 0.01, unit: "%"
            },
            {
                spec: "radio", key: "type", label: "Bug type",
                options: [
                    { value: "0,0", label: "Generic" },
                    { value: "0,2", label: "Ant" },
                    { value: "0,6", label: "Spider" },
                    { value: "0,7", label: "Ladybug" },
                ],
            }
        ],
    };
    return Bug;
}());



/***/ }),

/***/ "nCVi":
/*!****************************************************************!*\
  !*** ./src/apparatus/library/accessories/ghs_hazard_symbol.ts ***!
  \****************************************************************/
/*! exports provided: GHSHazardSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GHSHazardSymbol", function() { return GHSHazardSymbol; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var GHSHazardSymbol = /** @class */ (function () {
    function GHSHazardSymbol() {
    }
    GHSHazardSymbol.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].GHS[appearance.hazard]();
        graphic.scale(0.2 * appearance.scale);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    GHSHazardSymbol.properties = {
        label: "GHS Hazard Symbol",
        canContainLiquids: false,
        defaultAppearance: {
            hazard: "flammable",
            scale: 1.0,
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "hazard", label: "Hazard",
                options: [
                    { value: "explosion", label: "01: Explosive" },
                    { value: "flammable", label: "02: Flammable" },
                    { value: "oxidising", label: "03: Oxidising" },
                    { value: "gas", label: "04: Compressed Gas" },
                    { value: "acid", label: "05: Corrosive" },
                    { value: "toxic", label: "06: Toxic" },
                    { value: "harm", label: "07: Harmful" },
                    { value: "health", label: "08: Health Hazard" },
                    { value: "pollution", label: "09: Environmental" },
                ],
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.9, max: 2.0, step: 0.01,
                tier: "boost",
            }
        ],
    };
    return GHSHazardSymbol;
}());



/***/ }),

/***/ "nDAO":
/*!********************************!*\
  !*** ./src/apparatus/specs.ts ***!
  \********************************/
/*! exports provided: APPARATUS_MODULES, moduleDisplayName, moduleDisplayIcon, apparatusCategories, categoryToModuleMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APPARATUS_MODULES", function() { return APPARATUS_MODULES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moduleDisplayName", function() { return moduleDisplayName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moduleDisplayIcon", function() { return moduleDisplayIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "apparatusCategories", function() { return apparatusCategories; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "categoryToModuleMap", function() { return categoryToModuleMap; });
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flags */ "so9M");
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

var APPARATUS_MODULES = ["chemistry", "heating", "various", "shapes", "biology", "physics", "distillation", "measurement"];
var moduleDisplayName = function (module) {
    switch (module) {
        case "chemistry":
            return "Chemistry";
        case "various":
            return "Accessories";
        case "shapes":
            return "Shapes";
        case "physics":
            return "Physics";
        case "biology":
            return "Biology";
        case "distillation":
            return "Distillation";
        case "measurement":
            return "Measurement";
        case "heating":
            return "Heating";
    }
};
var moduleDisplayIcon = function (module) {
    switch (module) {
        case "chemistry":
            return "flask";
        case "various":
            return "box-open";
        case "shapes":
            return "shapes";
        case "physics":
            return "atom";
        case "biology":
            return "leaf";
        case "distillation":
            return "tint";
        case "measurement":
            return "ruler";
        case "heating":
            return "flame";
    }
};
/** List all categories, in the desired order. */
var apparatusCategories = {
    "chemistry": __spreadArrays([
        "Containers",
        "Filtering",
        "Metallic",
        "Ceramic"
    ], (!flags__WEBPACK_IMPORTED_MODULE_0__["default"].isPhysicsEnabled ? ["Electrical"] : []), [
        "Devices",
        "Chromatography",
        "Storage",
    ]),
    "heating": [
        "Heating",
    ],
    "measurement": [
        "Measurement",
        "_Mea_Extraction",
    ],
    "biology": [
        "_Bio_Equipment",
        "Organic",
        "_Bio_Other",
    ],
    "physics": __spreadArrays([
        "Optics"
    ], (flags__WEBPACK_IMPORTED_MODULE_0__["default"].isPhysicsEnabled ? ["Electrical"] : []), [
        "Dynamics",
    ]),
    "distillation": [
        "Condensers",
        "Distillation",
        "Transportation"
    ],
    "various": [
        "Substances",
        "Accessories",
        "Labelling",
    ],
    "shapes": [
        "Basic shapes",
        "Arrows",
        "3D",
    ],
};
// Maps from category to its parent module & icon.
var categoryToModuleMap = {};
for (var _i = 0, APPARATUS_MODULES_1 = APPARATUS_MODULES; _i < APPARATUS_MODULES_1.length; _i++) {
    var module = APPARATUS_MODULES_1[_i];
    var displayName = moduleDisplayName(module);
    var icon = moduleDisplayIcon(module);
    for (var _a = 0, _b = apparatusCategories[module]; _a < _b.length; _a++) {
        var category = _b[_a];
        categoryToModuleMap[category] = { display: displayName, icon: icon };
    }
}


/***/ }),

/***/ "nErs":
/*!*******************************************!*\
  !*** ./src/editing/arrange/distribute.ts ***!
  \*******************************************/
/*! exports provided: Distribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Distribute", function() { return Distribute; });
/* harmony import */ var editing_move__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! editing/move */ "c+g7");

var Distribute;
(function (Distribute) {
    function distributeCenters(components, axis) {
        if (components.length <= 2)
            return;
        // Sort components by their centers.
        components.sort(function (a, b) { return a.alignmentBounds.center[axis] - b.alignmentBounds.center[axis]; });
        // Get the extremities and determine step.
        var high = components[components.length - 1].alignmentBounds.center[axis];
        var low = components[0].alignmentBounds.center[axis];
        var step = (high - low) / (components.length - 1);
        // Move each component to desired new location.
        return components.map(function (c, i) {
            var moveTo = low + step * i;
            var delta = { x: 0, y: 0 };
            delta[axis] = moveTo - c.alignmentBounds.center[axis];
            return editing_move__WEBPACK_IMPORTED_MODULE_0__["Move"].one(c.id, delta);
        });
    }
    Distribute.distributeCenters = distributeCenters;
    function distributeGaps(components, axis) {
        if (components.length <= 2)
            return;
        var lowEdge = axis == "x" ? "left" : "top";
        var highEdge = axis == "x" ? "right" : "bottom";
        var sizeProperty = axis == "x" ? "width" : "height";
        // Sort components by their centers.
        components.sort(function (a, b) { return a.alignmentBounds.center[axis] - b.alignmentBounds.center[axis]; });
        // Calculate total gap.
        var totalGap = 0;
        for (var i = 0; i < components.length - 1; i++) {
            totalGap += components[i + 1].alignmentBounds[lowEdge] - components[i].alignmentBounds[highEdge];
        }
        var gapStep = totalGap / (components.length - 1);
        // Move each component to desired new location.
        var desiredLowEdge = components[0].alignmentBounds[lowEdge];
        return components.map(function (c, i) {
            var delta = { x: 0, y: 0 };
            delta[axis] = desiredLowEdge - c.alignmentBounds[lowEdge];
            // Compute the next desired edge.
            desiredLowEdge += c.alignmentBounds[sizeProperty] + gapStep;
            return editing_move__WEBPACK_IMPORTED_MODULE_0__["Move"].one(c.id, delta);
        });
    }
    Distribute.distributeGaps = distributeGaps;
})(Distribute || (Distribute = {}));


/***/ }),

/***/ "nHh6":
/*!*********************!*\
  !*** ./src/vars.ts ***!
  \*********************/
/*! exports provided: Consts, Debug */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Consts", function() { return Consts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Debug", function() { return Debug; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! version */ "8hKs");


/** Stripe public keys */
var StripePublicKeys;
(function (StripePublicKeys) {
    StripePublicKeys.test = "pk_test_yDkVHgKFZSODA9gfm2TfLXbI00rCtT94nG";
    StripePublicKeys.live = "pk_live_AcpjKxoOR2Yj08DBTLm1dlaW00iCYYHpDq";
})(StripePublicKeys || (StripePublicKeys = {}));
var Consts;
(function (Consts) {
    Consts.isDev = location.hostname == "localhost";
    Consts.isProd = !Consts.isDev;
    Consts.isBeta = location.pathname.lastIndexOf("/beta", 0) === 0;
    Consts.version = version__WEBPACK_IMPORTED_MODULE_1__["default"] + (Consts.isDev ? "-dev" : (Consts.isBeta ? "-beta" : ""));
    Consts.majorVersion = Consts.version.match("[0-9]*\.[0-9]*")[0];
    Consts.epsilon = 0.0001;
    Consts.googleAnalyticsCategory = "Chemix" + Consts.version;
    Consts.firebaseAppUrl = "https://chemixapp.firebaseio.com/chemix/diagrams/";
    /** Maximum number of pixels to render in H igh Quality. */
    Consts.pngMaxRenderPixels = 3800000;
    /** Max number of pixels to use when rendering in Standard quality. */
    Consts.pngMaxRenderPixelsMedium = 480000;
    // Sentry-related configuration
    Consts.sentryDsn = "https://d95a293d03b14780a9c5051cd44a0e7e@sentry.io/154256";
    Consts.stripePublicKey = Consts.isDev ? StripePublicKeys.test : StripePublicKeys.live;
})(Consts || (Consts = {}));
// Debug consts
var Debug;
(function (Debug) {
    Debug.HIT_SHAPES = false;
    Debug.CENTERS = false;
    Debug.LIQUID_MASK = false;
    Debug.SHAPES = false;
})(Debug || (Debug = {}));
if (Consts.isDev) {
    window["Debug"] = Debug;
    window["paper"] = paper__WEBPACK_IMPORTED_MODULE_0__;
}


/***/ }),

/***/ "ndDi":
/*!*********************************************!*\
  !*** ./src/apparatus/library/common/tap.ts ***!
  \*********************************************/
/*! exports provided: Tap, createTap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tap", function() { return Tap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTap", function() { return createTap; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");



var Tap;
(function (Tap) {
    Tap.defaultAppearance = {
        tapOpening: 1.0
    };
    function appearanceSpecFor(key, label) {
        if (label === void 0) { label = "Tap position"; }
        return { spec: "slider", key: key, label: label, min: 0.0, max: 1.0, step: 0.25, pipsStep: 1 };
    }
    Tap.appearanceSpecFor = appearanceSpecFor;
    Tap.appearanceSpec = appearanceSpecFor("tapOpening");
    Tap.isClosed = function (opening) { return opening <= 0.5; };
    Tap.create = createTap;
})(Tap || (Tap = {}));
/**
 * Create a tap/stop cock commonly seen on burettes,
 * adddition funnels etc.
 */
function createTap(opening, reverseShading) {
    if (opening === void 0) { opening = 1.0; }
    if (reverseShading === void 0) { reverseShading = false; }
    var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[9.5, -5]], [[9.5, 14]], [[6.5, 24]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(body);
    body.closePath();
    Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyleWithStroke"])("thin", body);
    body.setGradientFill(reverseShading ? "left" : "right", [
        ["#c6c6c6", 0.2],
        ["#a0a0a0", 0.3],
        ["#868686", 0.7],
        ["#686868", 0.8],
    ]);
    var knob = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), 6);
    // knob.fillColor = "#888888"
    knob.setRadialGradientFill([["#dddddd", 0.4], ["#aaaaaa", 0.7]]);
    var handle1 = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(4, 0, 18, 6, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER_LEFT), 2.0);
    Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyleWithStroke"])("thinner", knob);
    // handle1.strokeColor = "#950309"
    handle1.setGradientFill("right", [["#950309", 0.2], ["#ba0206", 0.6]]);
    // handle1.fillColor = "#ba0206"
    var handle2 = handle1.clone();
    handle2.rotate(180, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
    var knobAndHandles = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([handle1, handle2, knob]);
    knobAndHandles.position.y += 8;
    knobAndHandles.rotate(90 * opening);
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([body, knobAndHandles]);
    graphic.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
    return graphic;
}


/***/ }),

/***/ "nn1V":
/*!**********************************!*\
  !*** ./src/editing/multitool.ts ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_grouping_operations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/grouping/operations */ "VqZE");
/* harmony import */ var editing_interaction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/interaction */ "hXn/");
/* harmony import */ var editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/rotation/rotate_command */ "Za09");
/* harmony import */ var editing_snapping_compute__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! editing/snapping/compute */ "9dog");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./move */ "c+g7");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};











/** Stronger snap distance for zoom level 1. */
var STRONG_SNAP_DISTANCE = 20.0;
var MultiTool = /** @class */ (function (_super) {
    __extends(MultiTool, _super);
    function MultiTool(layers, app) {
        var _this = _super.call(this) || this;
        // Selection box (visual).
        _this.selectionBox = (function () {
            var box = paper__WEBPACK_IMPORTED_MODULE_7__["Shape"].Rectangle(new paper__WEBPACK_IMPORTED_MODULE_7__["Point"](0, 0), new paper__WEBPACK_IMPORTED_MODULE_7__["Size"](0, 0));
            // Style the selection box.
            box.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].selectionGreen;
            box.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].selectionGreen + "40"; // With alpha
            box.strokeWidth = 1.0;
            box.radius = 0;
            box.visible = false;
            return box;
        })();
        _this.onMouseDown = function (event) {
            // On mouse down, there are 2 options:
            // A) Down on an apparatus
            //    a) Apparatus already selected.
            //       1) If moved, then move current selection.
            //       2) Else, no change (apparatus remains selected)
            //    b) Apparatus not already selected
            //       1) If moved, then move this apparatus only
            //       2) Else, select this apparatus
            // b) Down on empty space
            //    Draw selection box.
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].startRecording();
            _this.operation = _this.startOperation(event);
            if (_this.operation.type == "moving" || _this.operation.type == "adjusting") {
                // We hide the HTLM-based selection box, but only when moving or adjusting.
                _this.appInterface.setIsInteracting(true);
                // Set the state to moving.
                _this.appInterface.setIsMovingItems(true);
            }
        };
        _this.onMouseDrag = function (event) {
            if (!_this.operation)
                return;
            // Vector from downPoint to current point.
            var deltaVector = event.point.subtract(event.downPoint);
            switch (_this.operation.type) {
                case "moving":
                    var adjustedDelta = _this.deltaVector(deltaVector, _this.operation);
                    var moveVector_1 = adjustedDelta.delta;
                    _this.operation.movedComponents.forEach(function (c) { return c.setPositionDelta(moveVector_1); });
                    break;
                case "adjusting":
                    _this.operation.adjustable.setDelta(deltaVector);
                    break;
                case "selection":
                case "selection_on_top":
                    // Draw the selection box.
                    _this.selectionBox.visible = true;
                    _this.selectionBox.size = new paper__WEBPACK_IMPORTED_MODULE_7__["Size"](deltaVector).abs();
                    _this.selectionBox.position = event.downPoint.add(deltaVector.divide(2.0));
            }
        };
        _this.onMouseUp = function (event) {
            _this.selectionBox.visible = false;
            if (!_this.operation) {
                _this.appInterface.setIsInteracting(false);
                _this.appInterface.setIsMovingItems(false);
                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].finishRecording();
                return;
            }
            switch (_this.operation.type) {
                case "moving":
                    // Apparatus have been moved. Commit this change as a command.
                    // Vector from downPoint to current point. If it's a zero vector, skip
                    var deltaVector = event.point.subtract(event.downPoint);
                    if (deltaVector.isZero())
                        break;
                    var adjustedDelta = _this.deltaVector(deltaVector, _this.operation);
                    deltaVector = adjustedDelta.delta;
                    // Create a move command for each moved apparatus.
                    var moveCommand = new _move__WEBPACK_IMPORTED_MODULE_10__["Move"](_this.operation.movedComponents.map(function (c) { return c.id; }), deltaVector);
                    // Check if there are appearance changes.
                    var appearanceChangeCommands = [];
                    if (adjustedDelta.appearanceChange) {
                        var id = adjustedDelta.appearanceChange.id;
                        var item = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].items().filter(store_id__WEBPACK_IMPORTED_MODULE_8__["ID"].matching(id))[0];
                        if (item) {
                            var prevSpecs = item.appearance;
                            var newSpecs = adjustedDelta.appearanceChange.partialSpecs;
                            appearanceChangeCommands = [
                                new command_basic__WEBPACK_IMPORTED_MODULE_1__["UpdateAppearanceProperties"](id, newSpecs, prevSpecs),
                                new editing_rotation_rotate_command__WEBPACK_IMPORTED_MODULE_5__["RotateItems"]([{ id: id, rotation: adjustedDelta.appearanceChange.rotation, originalRotation: item.rotation }])
                            ];
                        }
                    }
                    if (appearanceChangeCommands.length > 0) {
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_command__WEBPACK_IMPORTED_MODULE_2__["Sequence"](__spreadArrays([moveCommand], appearanceChangeCommands)));
                    }
                    else {
                        command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(moveCommand);
                    }
                    break;
                case "adjusting":
                    var delta = event.point.subtract(event.downPoint);
                    if (delta.isZero()) {
                        if (_this.operation.adjustable.onNoop) {
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(_this.operation.adjustable.onNoop());
                        }
                        break;
                    }
                    var command = _this.operation.adjustable.onEnd(delta);
                    command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(command);
                    break;
                case "selection":
                case "selection_on_top":
                    // Complete selection.
                    var selectionHitRectangle = new paper__WEBPACK_IMPORTED_MODULE_7__["Rectangle"](event.downPoint, event.point);
                    if (selectionHitRectangle.isEmpty() && _this.operation.type == "selection")
                        break;
                    // If a hit rectangle is available, use getItems, otherwise hit test 1 item only.
                    var interactableItems = void 0;
                    if (!selectionHitRectangle.isEmpty()) {
                        interactableItems = paper__WEBPACK_IMPORTED_MODULE_7__["project"].getItems({
                            overlapping: selectionHitRectangle,
                            match: editing_interaction__WEBPACK_IMPORTED_MODULE_4__["InteractableMatcher"],
                        });
                    }
                    else {
                        var hitResult = paper__WEBPACK_IMPORTED_MODULE_7__["project"].hitTest(event.downPoint, {
                            fill: true,
                            bounds: true,
                            stroke: true,
                            match: editing_interaction__WEBPACK_IMPORTED_MODULE_4__["InteractableMatcher"],
                        });
                        if (hitResult) {
                            interactableItems = [hitResult.item];
                        }
                        else {
                            interactableItems = [];
                        }
                    }
                    var components = interactableItems.filter(function (i) { return i.interaction.type == "selectAndMove"; }).map(function (i) { return i.interaction.component; });
                    if (components.length > 0) {
                        if (_this.operation.type == "selection") {
                            var ids = convertToIdsExpandingGroups(components);
                            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["Select"](ids));
                        }
                        else {
                            // Check if the newly selected items are all already selected. If so,
                            // remove them from the selection. Otherwise select them.
                            var notSelectedComponents = components.filter(function (c) { return !c.isSelected; });
                            if (notSelectedComponents.length > 0) {
                                // Select these items.
                                var notSelectedIds = convertToIdsExpandingGroups(notSelectedComponents);
                                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["Select"](notSelectedIds));
                            }
                            else {
                                var ids = convertToIdsExpandingGroups(components);
                                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["Deselect"](ids));
                            }
                        }
                    }
                    break;
            }
            // Disable visualisation of snap points.
            for (var _i = 0, _a = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].items(); _i < _a.length; _i++) {
                var data = _a[_i];
                var apparatus = _this.appInterface.getApparatusComponent(data.id);
                apparatus === null || apparatus === void 0 ? void 0 : apparatus.setState({ visualiseSnapping: undefined });
            }
            _this.appInterface.setIsInteracting(false);
            _this.appInterface.setIsMovingItems(false);
            command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].finishRecording();
            _this.operation = undefined;
        };
        _this.appInterface = app;
        layers.overlay.addChild(_this.selectionBox);
        return _this;
    }
    // Private helpers.
    MultiTool.prototype.startOperation = function (event) {
        var _this = this;
        if (paper__WEBPACK_IMPORTED_MODULE_7__["Key"].modifiers.shift) {
            return { type: "selection_on_top" };
        }
        var foundTarget = paper__WEBPACK_IMPORTED_MODULE_7__["project"].hitTest(event.downPoint, {
            fill: true,
            bounds: true,
            stroke: true,
            match: editing_interaction__WEBPACK_IMPORTED_MODULE_4__["InteractableMatcher"],
        });
        // Resolve the apparatus.
        if (foundTarget == null) {
            // Down event landed on empty space.
            // Deselect currently selected items.
            var deselectIds = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].selectedObjectsID();
            if (deselectIds.length > 0) {
                command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["Deselect"](deselectIds));
            }
            return { type: "selection" };
        }
        // Otherwise down event landed on an item.
        var foundInteractable = foundTarget.item;
        // First determine what type of interaction is associated with this component.
        var interaction = foundInteractable.interaction;
        switch (interaction.type) {
            case "selectAndMove":
                // Determine if this apparatus is already selected.
                var component = interaction.component;
                if (!component.isSelected) {
                    // Deselect currently selected items, if any.
                    var deselectIds = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].selectedObjectsID();
                    // Determine if this item is part of a group.
                    var selectIds = void 0;
                    if (component.parentGroup) {
                        // This component is part of a group. Select all other
                        // grouped components.
                        var rootGroup = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_3__["getRootGroup"])(component.parentGroup);
                        selectIds = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_3__["getDescendantIDs"])(rootGroup);
                    }
                    else {
                        // Select just this apparatus.
                        selectIds = [component.id];
                    }
                    command_command__WEBPACK_IMPORTED_MODULE_2__["commandProcessor"].execute(new command_basic__WEBPACK_IMPORTED_MODULE_1__["DeselectAndSelect"]({
                        select: selectIds,
                        deselect: deselectIds
                    }));
                }
                // Retrieve components of currently selected items.
                var selectedItems = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].selectedObjectsID()
                    .map(function (id) { return _this.appInterface.getObjectComponent(id); });
                // Snapping:
                // 1) Get non-selected apparatus
                // 2) For every snap point in the selection, find the delta to every snap point
                //    in the non-selected apparatus.
                var selectedApparatus = [];
                var allApparatus = [];
                for (var _i = 0, _a = store_store__WEBPACK_IMPORTED_MODULE_9__["default"].items(); _i < _a.length; _i++) {
                    var data = _a[_i];
                    var apparatus = this.appInterface.getApparatusComponent(data.id);
                    if (!apparatus)
                        continue;
                    allApparatus.push(apparatus);
                    if (apparatus.isSelected) {
                        selectedApparatus.push(apparatus);
                    }
                }
                var snapping = [];
                snapping = Object(editing_snapping_compute__WEBPACK_IMPORTED_MODULE_6__["precomputeSnapping"])(selectedApparatus, allApparatus);
                return {
                    type: "moving",
                    movedComponents: selectedItems,
                    snapping: snapping,
                };
            case "adjust":
                return {
                    type: "adjusting",
                    adjustable: interaction.component,
                };
        }
    };
    /**
     * Returns the delta vector to use for movement, taking into account
     * potential snapping points. Potentially, other properties may also be changed.
     */
    MultiTool.prototype.deltaVector = function (rawDeltaVector, operation) {
        // If Shift is held down, snap the vector to horizontal/vertical
        if (paper__WEBPACK_IMPORTED_MODULE_7__["Key"].modifiers.shift) {
            rawDeltaVector.angle = Math.round(rawDeltaVector.angle / 90) * 90;
        }
        // Snapping is disabled by holding down Ctrl.
        if (paper__WEBPACK_IMPORTED_MODULE_7__["Key"].modifiers.control || paper__WEBPACK_IMPORTED_MODULE_7__["Key"].modifiers.command) {
            return { delta: rawDeltaVector };
        }
        // Evaluate snapping.
        if (operation.snapping.length > 0) {
            var snappedData = Object(editing_snapping_compute__WEBPACK_IMPORTED_MODULE_6__["evaluatePrecomputedSnappings"])(rawDeltaVector, operation.snapping, STRONG_SNAP_DISTANCE / store_store__WEBPACK_IMPORTED_MODULE_9__["default"].zoom());
            if (snappedData) {
                return snappedData;
            }
        }
        return { delta: rawDeltaVector };
    };
    return MultiTool;
}(paper__WEBPACK_IMPORTED_MODULE_7__["Tool"]));
/**
 * Turns a list of components into IDs. If any components are part of a group,
 * the group is expanded fully, including descednant IDs in the return value.
 */
function convertToIdsExpandingGroups(components) {
    var ids = [];
    components.forEach(function (c) {
        ids.push.apply(ids, (c.parentGroup ? Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_3__["getDescendantIDs"])(Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_3__["getRootGroup"])(c.parentGroup)) : [c.id]));
    });
    return ids;
}
/* harmony default export */ __webpack_exports__["default"] = (MultiTool);


/***/ }),

/***/ "oQwc":
/*!*********************************!*\
  !*** ./src/file/open_modal.tsx ***!
  \*********************************/
/*! exports provided: FileOpenModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileOpenModal", function() { return FileOpenModal; });
/* harmony import */ var components_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/button */ "hhmX");
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var components_searchbox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/searchbox */ "VVZF");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tiers/badge */ "2UKY");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var _api_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../api/api */ "3kYy");
/* harmony import */ var _view_formatters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../view/formatters */ "MOlx");
/* harmony import */ var _diagram__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./diagram */ "2iOx");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();









var DIAGRAMS_PER_PAGE = 12;
/** "About Chemix" modal dialog. */
var FileOpenModal = /** @class */ (function (_super) {
    __extends(FileOpenModal, _super);
    function FileOpenModal(props) {
        var _this = _super.call(this, props) || this;
        _this.showFilesRef = react__WEBPACK_IMPORTED_MODULE_3__["createRef"]();
        _this.state = {
            isOpened: false,
            isLoading: false,
        };
        return _this;
    }
    Object.defineProperty(FileOpenModal.prototype, "icon", {
        get: function () {
            return this.state.isLoading ? "loading" : "fa-cloud";
        },
        enumerable: false,
        configurable: true
    });
    FileOpenModal.prototype.render = function () {
        var auth = this.props.auth;
        return react__WEBPACK_IMPORTED_MODULE_3__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"].Container, { parent: this, class: "cloud-browse-modal", title: "Open diagram", icon: this.icon }, auth.state === "logged_in" ? react__WEBPACK_IMPORTED_MODULE_3__["createElement"](ShowFiles, { auth: auth, ref: this.showFilesRef, parent: this }) : null);
    };
    FileOpenModal.prototype.refresh = function () {
        var showFiles = this.showFilesRef.current;
        if (showFiles) {
            showFiles.setState({ page: 1, search: "" }, function () {
                return showFiles.fetch({ page: 1 });
            });
        }
    };
    return FileOpenModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_1__["Remodal"]));

var ShowFiles = /** @class */ (function (_super) {
    __extends(ShowFiles, _super);
    function ShowFiles(props) {
        var _this = _super.call(this, props) || this;
        _this.isLoading = function () { return _this.state.currentFetchToken !== undefined; };
        _this.onOpen = function (diagramId) {
            _this.props.parent.close();
            // Invoke the API to mark the diagram as opened.
            Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagram/opened", "POST", _this.props.auth, { id: diagramId }, {
                success: function () { },
                generic: function () { }
            });
        };
        _this.state = { diagrams: [], page: 0, totalPages: 0, search: "" };
        return _this;
    }
    ShowFiles.prototype.render = function () {
        var _this = this;
        var _a, _b;
        var now = new Date();
        return react__WEBPACK_IMPORTED_MODULE_3__["createElement"](react__WEBPACK_IMPORTED_MODULE_3__["Fragment"], null,
            ((_a = this.state.usage) === null || _a === void 0 ? void 0 : _a.total) === 0 ?
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("p", null, "You don't have any diagrams stored in the cloud yet.")
                : this.state.diagrams.length === 0 && !this.isLoading() && this.state.search ?
                    react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("p", null,
                        "No diagrams matching \"",
                        this.state.search,
                        "\"")
                    : undefined,
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "row mb-2 " + (((_b = this.state.usage) === null || _b === void 0 ? void 0 : _b.total) == 0 ? "d-none" : "") },
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "col-12 col-md-6 col-lg-4" },
                    react__WEBPACK_IMPORTED_MODULE_3__["createElement"](components_searchbox__WEBPACK_IMPORTED_MODULE_2__["SearchBox"], { value: this.state.search, onChange: function (value) { return _this.setState({ search: value }, function () { return _this.fetch({ page: _this.state.page }); }); }, placeholder: "Search diagrams", throttleMs: 500 }))),
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "row no-gutters file-grid " + (this.isLoading() ? "loading" : "") }, this.state.diagrams.map(function (d) {
                return react__WEBPACK_IMPORTED_MODULE_3__["createElement"](_diagram__WEBPACK_IMPORTED_MODULE_8__["DiagramFile"], { key: "" + d.created, now: now, diagram: d, 
                    // TODO: Fetch correct page after deletion/rename
                    onDelete: function () { return _this.fetch({ page: _this.state.page }); }, onRename: function () { _this.setState({ page: 1 }); _this.fetch({ page: 1 }); }, onOpen: _this.onOpen });
            })),
            this.state.usage ?
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"](UsageMeter, { limit: this.state.usage.limit, total: this.state.usage.total })
                : undefined,
            this.state.totalPages > 1 ?
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "text-center" },
                    react__WEBPACK_IMPORTED_MODULE_3__["createElement"](Pager, { currentPage: this.state.page, totalPages: this.state.totalPages, onSelectPage: function (page) { return _this.fetch({ page: page }); } }))
                : undefined);
    };
    ShowFiles.prototype.setCurrentFetchToken = function (token) {
        if (token !== undefined) {
            this.setState({ currentFetchToken: token });
            this.props.parent.setState({ isLoading: true });
        }
        else {
            this.setState({ currentFetchToken: undefined });
            this.props.parent.setState({ isLoading: false });
        }
    };
    ShowFiles.prototype.fetch = function (options) {
        var _this = this;
        var page = options.page;
        var search = this.state.search;
        // Generate a fetch token.
        var fetchToken = (Math.random() * 10000).round();
        this.setCurrentFetchToken(fetchToken);
        var request = {
            pageSize: DIAGRAMS_PER_PAGE,
            page: page - 1,
            search: search,
        };
        Object(_api_api__WEBPACK_IMPORTED_MODULE_6__["callApi"])("diagrams", "GET", this.props.auth, request, {
            success: function (response) {
                if (_this.state.currentFetchToken != fetchToken)
                    return;
                var diagrams = response.diagrams.map(function (d) { return ({
                    id: d.id,
                    title: d.title,
                    thumbnail: d.thumbnailBase64,
                    rawData: d.data,
                    created: new Date(d.created),
                    modified: new Date(d.modified),
                }); });
                _this.setState({
                    diagrams: diagrams,
                    page: response.page + 1,
                    totalPages: response.totalPages,
                    usage: response.usage,
                });
                // Only reset the fetch token if the tokens matched.
                _this.setCurrentFetchToken();
            },
        });
    };
    return ShowFiles;
}(react__WEBPACK_IMPORTED_MODULE_3__["Component"]));
var Pager = function (props) {
    var buttons = [];
    var _loop_1 = function () {
        if (props.currentPage == i) {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_3__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["Button"], { key: "page_" + i, extraClass: "narrower highlight", buttonLabel: i.toString(), onClick: function () { } }));
        }
        else {
            var page_1 = i;
            buttons.push(react__WEBPACK_IMPORTED_MODULE_3__["createElement"](components_button__WEBPACK_IMPORTED_MODULE_0__["Button"], { key: "page_" + i, extraClass: "narrower", buttonLabel: i.toString(), onClick: function () { return props.onSelectPage(page_1); } }));
        }
    };
    for (var i = 1; i <= props.totalPages; i++) {
        _loop_1();
    }
    return react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "horizontal-button-group" }, buttons);
};
var UsageMeter = function (props) {
    var percent = Object(_view_formatters__WEBPACK_IMPORTED_MODULE_7__["toPercent"])(Math.min(props.limit, props.total) / props.limit);
    var color = "secondary";
    var barColor = "info";
    var textClass = "";
    if (props.total >= props.limit) {
        color = "danger";
        textClass = "text-danger";
        barColor = "danger";
    }
    return react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "border border-" + color + " rounded text-left p-2", style: { maxWidth: 220 } },
        react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: textClass },
            "Diagrams used: ",
            props.total,
            " / ",
            props.limit),
        react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "progress bg-secondary", style: { height: 8 } },
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "progress-bar bg-" + barColor, role: "progressbar", style: { width: percent } })),
        react__WEBPACK_IMPORTED_MODULE_3__["createElement"](MaybeUpgradeButton, null));
};
var MaybeUpgradeButton = function () {
    return react__WEBPACK_IMPORTED_MODULE_3__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_5__["TierContext"].Consumer, null, function (tiers) { return (!tiers.tier
        ? react__WEBPACK_IMPORTED_MODULE_3__["createElement"](react__WEBPACK_IMPORTED_MODULE_3__["Fragment"], null,
            "Need more storage? ",
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("div", { className: "ui-button", onClick: function () { return tiers.popup('cloud'); } },
                "Upgrade",
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_4__["Badge"], { tier: "boost" })))
        : null); });
};


/***/ }),

/***/ "oa1K":
/*!*************************************************!*\
  !*** ./src/apparatus/library/decorative/eye.ts ***!
  \*************************************************/
/*! exports provided: Eye */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Eye", function() { return Eye; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Eye = /** @class */ (function () {
    function Eye() {
    }
    Eye.prototype.render = function (appearance) {
        // The eye is drawn facing upwards
        var width = 40;
        var halfWidth = width / 2;
        var height = 30;
        var outside = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, 0]], [[halfWidth, height]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(outside, halfWidth);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(outside);
        var cornea = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[5, 5], undefined, [5, -5]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(cornea, halfWidth);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(cornea);
        var lens = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Ellipse(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(10, 2, width - 20, 8));
        lens.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([outside, cornea, lens]);
        if (appearance.goggles) {
            var goggles = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -6], [7, -6], [5, -10]])).withFill("#307ed1").close();
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(goggles, halfWidth);
            graphic.addChild(goggles);
        }
        var pivot = outside.bounds.center;
        var hitShapes = [graphic.bounds.toShape()];
        // Line of sight
        var lineOfSight = appearance.line;
        if (lineOfSight > 0) {
            var line = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[halfWidth, 0]], [[halfWidth, -lineOfSight]]));
            line.strokeColor = "#808080";
            line.strokeWidth = 2.0;
            line.dashArray = [10, 12];
            graphic.addChild(line);
            hitShapes.push(paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(halfWidth - 10, -lineOfSight, 20, lineOfSight)));
        }
        return { graphic: graphic, hitShape: hitShapes, pivot: pivot };
    };
    Eye.properties = {
        label: "Eye",
        canContainLiquids: false,
        defaultAppearance: {
            line: 0,
            goggles: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", label: "Line of sight", key: "line",
                min: 0, max: 600, step: 10,
            },
            { spec: "checkbox", label: "Safety goggles", key: "goggles", subLabel: "Show" },
        ],
        defaultRotation: 90
    };
    return Eye;
}());



/***/ }),

/***/ "oezR":
/*!*************************************!*\
  !*** ./src/editing/image_export.ts ***!
  \*************************************/
/*! exports provided: exportFromCanvasJPGThumbnail, exportFromCanvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportFromCanvasJPGThumbnail", function() { return exportFromCanvasJPGThumbnail; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportFromCanvas", function() { return exportFromCanvas; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! store/store */ "uFCc");




/*
 * Functions and helpers for exporting current canvas
 * into various image formats.
 */
/** Maximum zoom level to use when exporting (retina). */
var MAX_RENDER_ZOOM = 1.2;
var THUMBNAIL_WIDTH = 450;
var THUMBNAIL_HEIGHT = 300;
var THUMBNAIL_PADDING = 15;
function exportFromCanvasJPGThumbnail(project, layers, bounds) {
    // Deselect any selected items. Do this first as this
    // will trigger a React update, setting the zoom.
    var deselectCommand = new command_basic__WEBPACK_IMPORTED_MODULE_1__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_3__["default"].selectedObjectsID());
    deselectCommand.execute();
    // Store current view properties.
    var currentViewSize = project.view.viewSize;
    var currentCenter = project.view.center;
    var currentZoom = project.view.zoom;
    // Calculate temporary render zoom, depending on the amount of
    // space the diagram takes and what's allowed.
    var _a = getExportZoomForThumbnail(bounds), scale = _a.scale, x = _a.x, y = _a.y;
    // Shift the view center to align with center of the items.
    project.view.center = bounds.center;
    // Temporarily set zoom. If the export does not stay at this zoom, it means
    // some other update is triggering setZoom back to the correct value during
    // the export (this method is called on a background thread.)
    project.view.zoom = scale;
    // Scale down to (280, 180) using values from getExportZoomForThumbnail.
    var scaledBounds = bounds.scale(x, y);
    // Expand bounds just to be sure.
    scaledBounds = scaledBounds.expand(THUMBNAIL_PADDING);
    // Shift the items so that they are moved to the top left corner
    // as opposed to centered in the view. This is important for next step.
    // Intuition: currentViewSize is zoom-independent size of the canvas. We are trying
    // to find how much space the scaled image takes up on the canvas, so we can
    // calculate the gap we need to remove. viewCenter is zoom-dependent and so
    // we need to scale by exportZoom to get the right amount of shift.
    var shift = new paper.Point(currentViewSize.subtract(scaledBounds.size).divide(2 * scale));
    project.view.center = project.view.center.add(shift);
    // Restrict render area to the scaled bounds. Note that the top-left corner stays at 0,0
    project.view.viewSize = scaledBounds.size;
    // Add a white rectangle to the backing layer before exporting JPG.
    // Expand the regular bounds by about 30 which should cover most small
    // zooms.
    var backingRectangle = scaledBounds.scale(1 / scale).expand(30).toShape();
    backingRectangle.fillColor = "white";
    layers.exportOnlyBacking.addChild(backingRectangle);
    // Trigger render then export to JPG.
    project.view.draw();
    var jpgData = project.view.element.toDataURL("image/jpeg", 0.8);
    // Revert.
    layers.exportOnlyBacking.removeChildren();
    project.view.viewSize = currentViewSize;
    project.view.center = currentCenter;
    project.view.zoom = currentZoom;
    deselectCommand.undo();
    return jpgData;
}
/**
 * Exports the current canvas contents to multiple image formats.
 *
 * This function is very delicate and assumes that
 * no other processing/editing occurs at the same time.
 * It relies on the data store, the current canvas state
 * and Paper.js operations to prepare for export.
 *
 * It will make destructive edits to the canvas itself,
 * which it then attempts to revert at the end.
 *
 * @param project Paper project to export from
 * @param layers Layers of the current project
 * @param bounds Strict bounds (no padding), in paper coordinates
 *               of the area in canvas to be exported.
 */
function exportFromCanvas(project, layers, bounds, maxPixels) {
    // Deselect any selected items. Do this first as this
    // will trigger a React update, setting the zoom.
    var deselectCommand = new command_basic__WEBPACK_IMPORTED_MODULE_1__["Deselect"](store_store__WEBPACK_IMPORTED_MODULE_3__["default"].selectedObjectsID());
    deselectCommand.execute();
    // Store current view properties.
    var currentViewSize = project.view.viewSize;
    var currentCenter = project.view.center;
    var currentZoom = project.view.zoom;
    // Calculate temporary render zoom, depending on the amount of
    // space the diagram takes and what's allowed.
    var exportZoom = getExportZoom(bounds, maxPixels);
    Object(log__WEBPACK_IMPORTED_MODULE_2__["clog"])("Rendering image at zoom level " + exportZoom);
    // Shift the view center to align with center of the items.
    project.view.center = bounds.center;
    // Temporarily set zoom. If the export does not stay at this zoom, it means
    // some other update is triggering setZoom back to the correct value during
    // the export (this method is called on a background thread.)
    project.view.zoom = exportZoom;
    // Scale the bounds to export zoom, around the view center.
    // This only works because we have adjusted the view center
    // to the bounds' center, avoiding ugly maths.
    var scaledBounds = bounds.scale(exportZoom);
    // Expand bounds just to be sure.
    scaledBounds = scaledBounds.expand(5.0);
    // Shift the items so that they are moved to the top left corner
    // as opposed to centered in the view. This is important for next step.
    // Intuition: currentViewSize is zoom-independent size of the canvas. We are trying
    // to find how much space the scaled image takes up on the canvas, so we can
    // calculate the gap we need to remove. viewCenter is zoom-dependent and so
    // we need to scale by exportZoom to get the right amount of shift.
    var shift = new paper.Point(currentViewSize.subtract(scaledBounds.size).divide(2 * exportZoom));
    project.view.center = project.view.center.add(shift);
    // Restrict render area to the scaled bounds. Note that the top-left corner stays at 0,0
    project.view.viewSize = scaledBounds.size;
    // Export SVG.
    var svgElement = project.exportSVG();
    svgElement.setAttribute("viewBox", "0 0 " + scaledBounds.width + " " + scaledBounds.height);
    // Trigger render then export to PNG.
    project.view.draw();
    var pngData = project.view.element.toDataURL("image/png");
    // Add a white rectangle to the backing layer before exporting JPG.
    // Expand the regular bounds by about 30 which should cover most small
    // zooms.
    var backingRectangle = bounds.expand(30).toShape();
    backingRectangle.fillColor = "white";
    layers.exportOnlyBacking.addChild(backingRectangle);
    // Trigger render then export to JPG.
    project.view.draw();
    var jpgData = project.view.element.toDataURL("image/jpeg", 0.8);
    // Revert.
    layers.exportOnlyBacking.removeChildren();
    project.view.viewSize = currentViewSize;
    project.view.center = currentCenter;
    project.view.zoom = currentZoom;
    deselectCommand.undo();
    // Convert SVG element to data url.
    var seralizer = new XMLSerializer();
    var svgString = seralizer.serializeToString(svgElement);
    // btoa can sometimes fail, see
    // https://stackoverflow.com/questions/23223718/failed-to-execute-btoa-on-window-the-string-to-be-encoded-contains-characte
    var svgDataUrl = "data:image/svg;base64," + btoa(unescape(encodeURIComponent(svgString)));
    return { svgElement: svgElement, svgDataUrl: svgDataUrl, pngDataUrl: pngData, jpgDataUrl: jpgData };
}
/**
 * Computes the correct zoom for given bounds. This ensures that PNGs and JPGs
 * are not overly huge. This also adjusts for display density.
 */
function getExportZoom(bounds, maxPixels) {
    var pixelRatio = paper.project.view.pixelRatio;
    var pixelRatioSquared = pixelRatio * pixelRatio;
    var currentSize = Math.max(bounds.width * bounds.height * pixelRatioSquared, 10000);
    var rawZoom = Math.sqrt(maxPixels / currentSize);
    var zoom = Math.min(rawZoom, MAX_RENDER_ZOOM * 2 / pixelRatio);
    zoom = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["clamp"])(zoom, 0.01, 10);
    return zoom;
}
/** Compute zoom for scaling down for a thumbnail. */
function getExportZoomForThumbnail(bounds) {
    var pixelRatio = paper.project.view.pixelRatio;
    var scaleY = (THUMBNAIL_HEIGHT - THUMBNAIL_PADDING * 2) / bounds.height / pixelRatio;
    var scaleX = (THUMBNAIL_WIDTH - THUMBNAIL_PADDING * 2) / bounds.width / pixelRatio;
    var scale = Math.min(scaleY, scaleX);
    scale = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["clamp"])(scale, 0.01, 10);
    return { scale: scale, x: scaleX, y: scaleY };
}


/***/ }),

/***/ "oh6M":
/*!*********************************!*\
  !*** ./src/components/icon.tsx ***!
  \*********************************/
/*! exports provided: Icon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Icon", function() { return Icon; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

/**
 * "square" -> "fas fa-square"
 * "r,square" -> "far fa-square"
 */
function fontAwesomeCss(input) {
    if (input[1] === ",") {
        return "fa" + input[0] + " fa-" + input.substring(2);
    }
    else {
        return "fas fa-" + input;
    }
}
var Icon = function (props) {
    var _a, _b, _c;
    return (props.name.indexOf("chemicons-") === 0
        ? react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "chemicons " + props.name + " " + ((_a = props.extraClass) !== null && _a !== void 0 ? _a : "") }) // Render a Chemicon
        : react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: fontAwesomeCss(props.name) + " " + (((_b = props.fullWidth) !== null && _b !== void 0 ? _b : true) ? "fa-fw" : "") + " " + (props.spacing === true ? "mr-hem" : "") + " " + ((_c = props.extraClass) !== null && _c !== void 0 ? _c : "") }) // Render a font-awesome icon
    );
};


/***/ }),

/***/ "or+g":
/*!************************************!*\
  !*** ./src/layout/modals/help.tsx ***!
  \************************************/
/*! exports provided: HelpModal, KeyboardShortcuts, Shortcut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HelpModal", function() { return HelpModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeyboardShortcuts", function() { return KeyboardShortcuts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Shortcut", function() { return Shortcut; });
/* harmony import */ var components_remodal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/remodal */ "cUHu");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var support_beacon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! support/beacon */ "JuZC");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var tutorial__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tutorial */ "xhqc");
/* harmony import */ var view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! view/keyboard_shortucts */ "ZPUE");
/* harmony import */ var _analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../analytics */ "s8ZI");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







/** Help modal dialog. */
var HelpModal = /** @class */ (function (_super) {
    __extends(HelpModal, _super);
    function HelpModal() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.render = function () { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_remodal__WEBPACK_IMPORTED_MODULE_0__["Remodal"].Container, { parent: _this, title: "Help", icon: "fa-question-circle", class: "help-modal" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "row text-left mb-4" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return Object(tutorial__WEBPACK_IMPORTED_MODULE_4__["runTutorial"])(); }, "data-remodal-action": "confirm", className: "ui-button" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-fw fa-lg fa-magic mr-2" }),
                        "Quick Tutorial")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "https://help.chemix.org", onClick: function () { return Object(_analytics__WEBPACK_IMPORTED_MODULE_6__["g"])('HelpDlg:HelpCenter'); }, className: "ui-button", target: "help" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-fw fa-lg fa-book mr-2" }),
                        "Open Help Center")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "https://help.chemix.org/faq", onClick: function () { return Object(_analytics__WEBPACK_IMPORTED_MODULE_6__["g"])('HelpDlg:FAQ'); }, className: "ui-button", target: "help" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-fw fa-lg fa-question mr-2" }),
                        "Open FAQ")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_3__["TierContext"].Consumer, null, function (tiers) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return tiers.popup("Help"); }, className: "ui-button w-100" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-fw fa-lg fa-dollar-sign mr-2" }),
                            "See Pricing"));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "https://chemix.kampsite.co/", onClick: function () { return Object(_analytics__WEBPACK_IMPORTED_MODULE_6__["g"])('HelpDlg:FAQ'); }, className: "ui-button", target: "_blank" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-fw fa-lg fa-comment-alt-plus mr-2" }),
                        "Suggest feature / item")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](HelpItemWrapper, null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { "data-remodal-action": "confirm", onClick: function () { Object(_analytics__WEBPACK_IMPORTED_MODULE_6__["g"])('HelpDlg:OpenChat'); support_beacon__WEBPACK_IMPORTED_MODULE_2__["Bcn"].ask(); }, className: "ui-button w-100" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fal fa-fw fa-lg fa-comment fa-flip-horizontal mr-2" }),
                        "Start a chat"))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fad fa-keyboard" }),
                " Keyboard shortcuts"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KeyboardShortcuts, null))); };
        return _this;
    }
    return HelpModal;
}(components_remodal__WEBPACK_IMPORTED_MODULE_0__["Remodal"]));

var KeyboardShortcuts = function () { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "row text-left" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "col-12 col-md-6 px-1" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "table text-light table-sm table-borderless" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "1" }),
                            " or ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "V" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Select and Move items.")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "2" }),
                            " or ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "P" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Pan workspace")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "3" }),
                            " or ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "T" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Label tool (draw text and arrows)")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shortcut, { ctrl: true, k: "F" }, "Search apparatus"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shortcut, { ctrl: true, k: "E" }, "Export diagram as an image"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shortcut, { ctrl: true, k: "N" }, "Create new diagram")))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "col-12 col-md-6 px-1" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "table text-light table-sm table-borderless" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            "Hold ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shift, null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Move items horizontally/vertically")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            "Hold ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["CtrlKey"], null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Temporarily disable snapping")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            "\u00A0",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Arrows, null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            "Move items by a ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("b", null, "medium"),
                            " step")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](NoWrap, null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shift, null),
                                " + "),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Arrows, null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            "Move items by a ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("b", null, "large"),
                            " step")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](NoWrap, null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["CtrlKey"], null),
                                " + ",
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shift, null),
                                " + "),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Arrows, null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            "Move items by a ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("b", null, "small"),
                            " step")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Rotate, null),
                            " + Hold ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Shift, null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Rotate with 22.5\u00B0 increments")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Rotate, null),
                            " + Hold ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["CtrlKey"], null)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Rotate with 1\u00B0 increments")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Rotate, null),
                            " + Hold ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: "Alt" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, "Rotate freely.")))))))); };
var HelpItemWrapper = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "col-12 col-sm-6 col-md-4 mb-2" }, props.children); };
var Rotate = function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-sync-alt" }); };
var Shift = function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "keyboardKey" },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "far fa-arrow-alt-up" })); };
var Arrows = function () { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](NoWrap, null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["FAKey"], { icon: "s fa-arrow-left" }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["FAKey"], { icon: "s fa-arrow-up" }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["FAKey"], { icon: "s fa-arrow-right" }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["FAKey"], { icon: "s fa-arrow-down" })))); };
var Shortcut = function (props) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "text-right" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](view_keyboard_shortucts__WEBPACK_IMPORTED_MODULE_5__["Key"], { k: props.k, ctrl: props.ctrl })),
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
        props.children,
        " "))); };
var NoWrap = function (_a) {
    var children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { style: { whiteSpace: "nowrap" } }, children));
};


/***/ }),

/***/ "p/3Y":
/*!**************************************!*\
  !*** ./src/editing/snapping/type.ts ***!
  \**************************************/
/*! exports provided: Snap, transform */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Snap", function() { return Snap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transform", function() { return transform; });
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
/**
 * Information about how this apparatus can snap to
 * other type of apparatus.
 */
var Snap;
(function (Snap) {
    /** This is ugly but converts a mask to a filter list. */
    function typeFilterFrom(mask) {
        var filter = [];
        Object.keys(mask).forEach(function (k) {
            if (mask[k])
                filter.push(k);
        });
        return filter;
    }
    Snap.typeFilterFrom = typeFilterFrom;
    /** Returns facing in degrees. */
    function getFacing(snap) {
        if (snap.facing === undefined)
            return 0;
        if (snap.facing !== "auto")
            return snap.facing;
        return snap.end.subtract(snap.start).angle;
    }
    Snap.getFacing = getFacing;
})(Snap || (Snap = {}));
/** Method that applies a coordinate transformation on all point-related items. */
function transform(snapping, flipped, transform) {
    var _a;
    switch (snapping.type) {
        case "placeable":
        case "connectable":
            return __assign(__assign({}, snapping), { facing: ((_a = snapping.facing) !== null && _a !== void 0 ? _a : 0) * (flipped ? -1 : 1), at: transform(snapping.at) });
        case "attachable":
        case "spotting_tile_placeable":
        case "tlc_spot":
        case "pluggable":
            return __assign(__assign({}, snapping), { at: transform(snapping.at) });
        case "placeable_surface":
        case "attachable_on":
        case "tlc_plate":
            return __assign(__assign({}, snapping), { start: transform(snapping.start), end: transform(snapping.end) });
        case "spotting_tile":
            return {
                type: "spotting_tile",
                at: snapping.at.map(transform),
            };
        case "neck":
            return __assign(__assign({}, snapping), { top: transform(snapping.top) });
    }
}


/***/ }),

/***/ "p21n":
/*!**********************!*\
  !*** ./src/types.ts ***!
  \**********************/
/*! exports provided: metricsEqual, convertFromPaperToHTMLCoordinates, NULL_SELECTION_METRICS, add */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metricsEqual", function() { return metricsEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertFromPaperToHTMLCoordinates", function() { return convertFromPaperToHTMLCoordinates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NULL_SELECTION_METRICS", function() { return NULL_SELECTION_METRICS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });
// Contains definitions and APIs used throughout the app
function metricsEqual(a, b) {
    return a.pivot.x == b.pivot.x &&
        a.pivot.y == b.pivot.y &&
        a.bounds.x == b.bounds.x &&
        a.bounds.y == b.bounds.y &&
        a.bounds.width == b.bounds.width &&
        a.bounds.height == b.bounds.height;
}
function convertFromPaperToHTMLCoordinates(metrics) {
    var offset = paper.project.view.bounds.topLeft;
    var zoom = paper.view.zoom;
    return {
        pivot: {
            x: (metrics.pivot.x - offset.x) * zoom,
            y: (metrics.pivot.y - offset.y) * zoom,
        },
        bounds: {
            x: (metrics.bounds.x - offset.x) * zoom,
            y: (metrics.bounds.y - offset.y) * zoom,
            width: metrics.bounds.width * zoom,
            height: metrics.bounds.height * zoom,
        },
    };
}
var NULL_SELECTION_METRICS = {
    pivot: { x: 0, y: 0 },
    bounds: { x: 0, y: 0, width: 0, height: 0 },
};
// Helper methods to work with position.
function add(p1, p2) {
    return { x: p1.x + p2.x, y: p1.y + p2.y };
}


/***/ }),

/***/ "pGZa":
/*!*******************************************!*\
  !*** ./src/panel/same_type_apparatus.tsx ***!
  \*******************************************/
/*! exports provided: sectionsForMultipleItemsOfSameType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sectionsForMultipleItemsOfSameType", function() { return sectionsForMultipleItemsOfSameType; });
/* harmony import */ var apparatus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus */ "e06R");
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! panel/apparatus_panel_ui */ "GzMk");
/* harmony import */ var panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! panel/appearance_spec_converter */ "Vv2H");
/* harmony import */ var panel_propertyPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! panel/propertyPanel */ "5IfQ");
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





function sectionsForMultipleItemsOfSameType(selected, app, tiers) {
    var sections = [];
    var apparatusKlass = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["apparatusClass"])(selected.items[0].type);
    var specs;
    if (selected.sameApparatusType) {
        specs = apparatusKlass.properties.appearanceSpecs;
    }
    else if (selected.sameApparatusKind) {
        specs = Object(apparatus__WEBPACK_IMPORTED_MODULE_0__["commonSpecsForApparatusKind"])(selected.sameApparatusKind);
    }
    else {
        // This should not happen.
        specs = apparatusKlass.properties.appearanceSpecs;
    }
    sections.push({
        header: "Style",
        icon: "sliders-h",
        hideHeaderIfFirst: true,
        elements: Object(panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_3__["convertAppearanceSpecs"])(specs, selected.items[0], selected.items, app, tiers)
    });
    // Does the apparatus support ChemMark?
    if (selected.sameApparatusType && apparatusKlass.properties.chemMarkAppearanceKey) {
        sections.push(Object(panel_appearance_spec_converter__WEBPACK_IMPORTED_MODULE_3__["chemMarkPropsSection"])(selected.items, apparatusKlass.properties.chemMarkAppearanceKey));
    }
    // Extract tools section. Extracting only from first tab.
    var multipleItemsPanelProps = Object(panel_propertyPanel__WEBPACK_IMPORTED_MODULE_4__["sectionsForMultipleItems"])(selected, app);
    sections.push.apply(sections, multipleItemsPanelProps.tabs[0].sections);
    return {
        title: apparatusKlass.properties.label + " (" + selected.items.length + ")",
        icon: "mouse-pointer",
        tabs: __spreadArrays([
            {
                type: "property",
                sections: sections,
            }
        ], (apparatusKlass.properties.canContainLiquids ? [{
                type: "liquid",
                colorDot: selected.getConsistentItemsLiquidColor(),
                sections: [
                    {
                        header: "Liquid",
                        icon: "tint",
                        hideHeaderIfFirst: true,
                        elements: Object(panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_2__["createSingleLayerLiquidPropsSection"])(selected.items, app)
                    }
                ]
            }] : []))
    };
}


/***/ }),

/***/ "pHOY":
/*!*******************************************!*\
  !*** ./src/editing/snapping/visualise.ts ***!
  \*******************************************/
/*! exports provided: visualiseSnappings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "visualiseSnappings", function() { return visualiseSnappings; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var ARC_SIZE = 6;
var Colors;
(function (Colors) {
    Colors.snapOutline = "#68a343";
    Colors.snapFill = "#fc03c2";
})(Colors || (Colors = {}));
function visualiseSnappings(layer, snappings, filter) {
    for (var _i = 0, snappings_1 = snappings; _i < snappings_1.length; _i++) {
        var snapping = snappings_1[_i];
        if (filter.length == 0 || filter.indexOf(snapping.type) !== -1) {
            layer.addChild(visualiseSnapping(snapping));
        }
    }
}
function visualiseSnapping(snap) {
    switch (snap.type) {
        case "placeable":
        case "spotting_tile_placeable":
        case "attachable":
        case "tlc_spot":
            return createPoint(snap.at);
        case "neck":
            return createTriangle(snap.top, snap.facing);
        case "pluggable":
            return createTriangle(snap.at, 0);
        case "placeable_surface":
        case "attachable_on":
        case "tlc_plate":
            return createLine(snap.start, snap.end);
        case "connectable":
            return createHalfCircle(snap.at, snap.facing);
        case "spotting_tile":
            return createGrid(snap.at);
    }
}
function createLine(start, end) {
    var line = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]([Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["S"])(start), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["S"])(end)]);
    line.strokeWidth = 2.0;
    line.strokeColor = Colors.snapFill;
    line.strokeScaling = false;
    return line;
}
function createPoint(at) {
    var circle = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(at, 1.0);
    circle.strokeWidth = 4.0;
    circle.strokeColor = Colors.snapFill;
    circle.strokeScaling = false;
    return circle;
}
function createTriangle(at, rotation) {
    var triangle = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]([Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(at.x - 2, at.y)), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(at.x + 2, at.y)), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["S"])(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(at.x, at.y + 7))]);
    triangle.close();
    triangle.strokeWidth = 4.0;
    triangle.strokeColor = Colors.snapFill;
    triangle.strokeScaling = false;
    triangle.rotate(rotation, at);
    return triangle;
}
function createHalfCircle(at, rotation) {
    var arc = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[at.x - ARC_SIZE, at.y], undefined, [0, ARC_SIZE * 1.4]], [[at.x + ARC_SIZE, at.y], [0, ARC_SIZE * 1.4]]));
    arc.closePath();
    arc.fillColor = Colors.snapFill;
    arc.rotate(rotation, at);
    return arc;
}
function createGrid(at) {
    return new paper__WEBPACK_IMPORTED_MODULE_1__["Group"](at.map(function (p) { return createPoint(p); }));
}


/***/ }),

/***/ "qCHL":
/*!********************************************************************!*\
  !*** ./src/apparatus/library/biology/organic/streaked_bacteria.ts ***!
  \********************************************************************/
/*! exports provided: StreakedBacteria */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StreakedBacteria", function() { return StreakedBacteria; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! random/random */ "PJ3I");



var RENDER_AS_POINTS = true;
/**
 * - http://microbiology4us.blogspot.com/2019/01/confirmed-test-for-coliform-bacteria.html
 */
var StreakedBacteria = /** @class */ (function () {
    function StreakedBacteria() {
    }
    StreakedBacteria.prototype.render = function (appearance) {
        var diameter = appearance.diameter;
        var radius = diameter / 2;
        var random = new random_random__WEBPACK_IMPORTED_MODULE_2__["Random"]();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([
        // Shape.Circle(P(0,0), 50).withFill("#eeeeee")
        ]);
        var colourGradient = [
            [appearance.color, 0.1],
            [appearance.color.color().alpha(0.3).string(), 1.0],
        ];
        for (var quadrant = 0; quadrant < appearance.stage; quadrant++) {
            var startAngle = -180 + quadrant * 72;
            var endAngle = startAngle + 75;
            for (var i = 0; i < 4; i++) {
                var distance = 0.9;
                var from = Po(startAngle - i * 10, distance * radius);
                var to = Po(endAngle + i * 10, (distance - streakSpread(quadrant, i)) * radius);
                graphic.addChildren(streak(from, to, random, bacteriaStepMultiplier(quadrant, i), randomFactor(quadrant, i), colourGradient));
            }
        }
        var raster = graphic.rasterize();
        graphic.remove();
        return {
            graphic: raster,
            hitShape: raster.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0),
        };
    };
    StreakedBacteria.properties = {
        label: "Bacteria (Streaked)",
        canContainLiquids: false,
        defaultAppearance: {
            stage: 4,
            color: "#cccccc",
            diameter: 100,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "diameter", label: "Diameter",
                min: 35, max: 150, step: 5, unit: "mm"
            },
            {
                spec: "slider", key: "stage", label: "Quadrants",
                min: 1, max: 4, pipsStep: 1,
            },
            { spec: "color", key: "color", label: "Colour" }
        ],
    };
    return StreakedBacteria;
}());

/* Parameters for different lines and quadrants. */
function streakSpread(quadrant, line) {
    if (quadrant < 3)
        return 0;
    return line * 0.15;
}
function bacteriaStepMultiplier(quadrant, line) {
    switch (quadrant) {
        case 0: return 1.0;
        case 1: return 1.5;
        case 2: return 2.5;
        case 3:
        default:
            return 4.0;
    }
}
function randomFactor(quadrant, line) {
    switch (quadrant) {
        default:
        case 0:
        case 1: return 1.0;
        case 2: return 0.5;
        case 3: return 0.5;
    }
}
/* Helper methods */
// Returns a Point, in polar coordinates.
function Po(angleInDegrees, length) {
    var p = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, length);
    p.angle = angleInDegrees;
    return p;
}
function streak(from, to, random, bacteriaStepMultiplier, randomFactor, gradientStops) {
    var bacteriaRadius = 1.5;
    if (RENDER_AS_POINTS) {
        var stepLength = bacteriaRadius * bacteriaStepMultiplier;
        var items = [];
        var start = from;
        var delta = to.subtract(from);
        var step = delta.normalize(stepLength);
        for (var i = 0; i < delta.length / stepLength; i++) {
            start = start.add(step);
            var position = (randomFactor > 0) ? start.add(random.randomUnitVector(randomFactor)) : start;
            var shape = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Circle(position, bacteriaRadius);
            shape.setRadialGradientFill(gradientStops);
            items.push(shape);
        }
        return items;
    }
    else {
        var line = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Line(from, to);
        line.strokeWidth = 1.0;
        line.strokeColor = "#40404080";
        return [line];
    }
}


/***/ }),

/***/ "qRtN":
/*!******************************************!*\
  !*** ./src/apparatus/library/syringe.ts ***!
  \******************************************/
/*! exports provided: Syringe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Syringe", function() { return Syringe; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var HUB_COLORS = {
    "Green": "#519e82",
    "Yellow": "#e8d387",
    "Black": "#414040",
    "Blue": "#2c82a2",
    "Pink": "#be94aa",
    "Purple": "#a185c7",
};
var DEMO_COLOURS = {
    "Green": "#519e82",
    "Yellow": "#e8d387",
    "Black": "#414040",
    "Blue": "#2c82a2",
};
var Syringe = /** @class */ (function () {
    function Syringe() {
    }
    Syringe.prototype.render = function (appearance) {
        var length = appearance.size;
        var diameter = 16;
        var outletLength = 3;
        var radius = diameter / 2;
        var plungerRadius = radius;
        var outletRadius = 3;
        var body = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])(
        // Start from the tip
        [[outletRadius, length + outletLength]], [[outletRadius, length]], [[radius, length - 3], [0, 3]], // Slight rounded corner
        [[radius, 0], undefined, [30, -2]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(body);
        var liquidMask = body.clone();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(body);
        // Plunger.
        var plunger = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[plungerRadius, length - 5], [0, 3]], [[plungerRadius, -2], undefined, [20, -1]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(plunger);
        plunger.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(plunger);
        plunger.fillColor = "#eeeeee";
        plunger.position.y -= appearance.plungerSlide * length;
        var hub = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[5, length + 2]], [[4, length + 13]], [[3, length + 14]], [[2, length + 22]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(hub);
        hub.closePath();
        hub.fillColor = appearance.hubColor;
        var needle = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, length + 2]], [[0, length + appearance.needleSize + 20]]));
        needle.strokeWidth = 2.0;
        needle.strokeColor = "black";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([body, plunger, needle, hub]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addMarkers"])(graphic, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(plungerRadius - 5, length - 2), 0.3 * length, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 10));
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.expand(10).toShape(),
            pivot: body.bounds.center,
        };
    };
    Syringe.properties = {
        label: "Syringe",
        canContainLiquids: true,
        defaultAppearance: {
            plungerSlide: 0.4,
            size: 90,
            needleSize: 30,
            hubColor: "#519e82"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 60, max: 120
            },
            {
                spec: "slider", key: "plungerSlide", label: "Plunger slide",
                min: 0.0, max: 0.7, step: 0.01,
            },
            {
                spec: "slider", key: "needleSize", label: "Needle size",
                min: 20, max: 50
            },
            { spec: "color", key: "hubColor", label: "Hub colour", swatches: HUB_COLORS, tier: "boost", demoSwatches: DEMO_COLOURS },
        ],
    };
    return Syringe;
}());



/***/ }),

/***/ "qTbH":
/*!****************************************!*\
  !*** ./src/api/specialErrorHandler.ts ***!
  \****************************************/
/*! exports provided: isSpecialError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSpecialError", function() { return isSpecialError; });
function isSpecialError(error) {
    return "error_type" in error;
}


/***/ }),

/***/ "qaw3":
/*!**********************************!*\
  !*** ./src/editing/undo_redo.ts ***!
  \**********************************/
/*! exports provided: undo, redo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "undo", function() { return undo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "redo", function() { return redo; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/command */ "bs/A");


// This method is just a wrapper around the
// command processors's undo/redo operations.
function undo(source) {
    if (command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].undo()) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Undo", source);
    }
    else {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Undo-noop", source);
        toastr.info("No more steps to undo");
    }
}
function redo(source) {
    if (command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].redo()) {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Redo", source);
    }
    else {
        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Redo-noop", source);
        toastr.info("No more steps to redo");
    }
}


/***/ }),

/***/ "r/qO":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/accessories/pencil.ts ***!
  \*****************************************************/
/*! exports provided: Pencil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pencil", function() { return Pencil; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _gradients__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../gradients */ "jf2x");



var Pencil = /** @class */ (function () {
    function Pencil() {
    }
    Pencil.isBoostRequiredForAppearance = function (a) {
        return a.eraser === true;
    };
    Pencil.prototype.render = function (appearance) {
        var length = appearance.length, scale = appearance.scale;
        var body = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[0, -5]], [[length, -5]], [[length + 24, 0]], [[length, 5]], [[0, 5]])).close();
        var outline = body.clone();
        outline.withStroke("thinner");
        body.withGradientFill("down", [["#fad368", 0.33], ["#f9c531", 0.34], ["#f9c531", 0.66], ["#e3b134", 0.67]]);
        var tip = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[length, -5]], [[length + 24, 0]], [[length, 5]])).withFill("#e39763");
        var carbon = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[length + 12, -2.5]], [[length + 24, 0]], [[length + 12, 2.5]])).withFill("#222222");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([body, tip, carbon]);
        if (appearance.eraser) {
            var metal = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(8, 0, 5, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER_LEFT))
                .withGradientFill("up", _gradients__WEBPACK_IMPORTED_MODULE_2__["Gradients"].simple("#aaaaaa".color(), 20));
            var eraser = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 10, 10, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].CENTER_LEFT))
                .withGradientFill("up", _gradients__WEBPACK_IMPORTED_MODULE_2__["Gradients"].simple("#d8706f".color(), 20));
            graphic.addChild(eraser);
            graphic.addChild(metal);
        }
        graphic.addChild(outline);
        graphic.scale(scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(10).toShape()
        };
    };
    Pencil.properties = {
        label: "Pencil",
        canContainLiquids: false,
        defaultAppearance: {
            length: 150,
            scale: 1.0,
            eraser: false,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.8, max: 2.0, step: 0.1, unit: "%",
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 80, max: 180, unit: "mm"
            },
            {
                spec: "checkbox", key: "eraser", label: "Show eraser", tier: "boost", allowWhenLocked: true,
            },
        ],
    };
    return Pencil;
}());



/***/ }),

/***/ "rTtD":
/*!*********************************!*\
  !*** ./src/apparatus/common.ts ***!
  \*********************************/
/*! exports provided: strokeWidth, setGloballyStrokeThicknessTheme */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strokeWidth", function() { return strokeWidth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setGloballyStrokeThicknessTheme", function() { return setGloballyStrokeThicknessTheme; });
function strokeWidth(style) {
    return currentStrokeWidths[style];
}
/*
 * Stroke Thickness Overriding
 */
var strokeWidthsForTheme = {
    s: {
        thicker: 4.0,
        thick: 3.0,
        default: 2.0,
        thin: 1.5,
        thinner: 1.0,
        liquid: 1.0,
    },
    m: {
        thicker: 6.0,
        thick: 4.0,
        default: 3.0,
        thin: 2.0,
        thinner: 1.5,
        liquid: 1.5,
    },
    l: {
        thicker: 8.0,
        thick: 5.0,
        default: 4.0,
        thin: 3.0,
        thinner: 2.0,
        liquid: 2.0,
    }
};
var currentStrokeWidths = strokeWidthsForTheme.m;
/** Call this to globally update thte current thickness theme */
function setGloballyStrokeThicknessTheme(theme) {
    currentStrokeWidths = strokeWidthsForTheme[theme];
}


/***/ }),

/***/ "rhfF":
/*!*******************************************************!*\
  !*** ./src/apparatus/library/biology/organic/root.ts ***!
  \*******************************************************/
/*! exports provided: Root */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Root", function() { return Root; });
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/svg */ "5L+D");

var Root = /** @class */ (function () {
    function Root() {
    }
    Root.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_0__["SVG"].root();
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            watermark: graphic.bounds.center,
        };
    };
    Root.properties = {
        label: "Root",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 2.0, step: 0.01, unit: "%",
            }
        ],
    };
    return Root;
}());



/***/ }),

/***/ "s02+":
/*!******************************************************!*\
  !*** ./src/apparatus/library/physics/glass_block.ts ***!
  \******************************************************/
/*! exports provided: GlassBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlassBlock", function() { return GlassBlock; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var GlassBlock = /** @class */ (function () {
    function GlassBlock() {
    }
    GlassBlock.prototype.render = function (appearance) {
        var ior = appearance.ior, width = appearance.width, length = appearance.length, incidentLength = appearance.incidentLength, emergentLength = appearance.emergentLength, rayThickness = appearance.rayThickness;
        var incidenceAngleD = appearance.incidenceAngleD;
        var glass = paper__WEBPACK_IMPORTED_MODULE_1__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, length, width, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Pivot"].TOP_CENTER))
            .withGradientFill("right-down", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedGradients"].glass)
            .withStroke("thin", apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].glassEdge);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([glass]);
        if (appearance.showRay) {
            // Precalculate max incidenceAngle.
            var maxRefractionAngleD = Math.atan((length - 10) / width).toDegrees();
            var maxIncidenceAngleD = Math.asin(Math.sin(maxRefractionAngleD.toRadians()) * ior).toDegrees();
            if (maxIncidenceAngleD) {
                incidenceAngleD = Math.min(maxIncidenceAngleD, incidenceAngleD);
            }
            // IOR = sin(i) / sin(r)
            var refractionAngleD = Math.asin(Math.sin(incidenceAngleD.toRadians()) / ior).toDegrees();
            // Calculate the point of entry (top) and exit (top) such that the ray passes through
            // rectangle center.
            var entryPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-Math.tan(refractionAngleD.toRadians()) * width / 2, 0);
            var exitPoint = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-entryPoint.x, width);
            var ray = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"]();
            ray.addSegments([
                entryPoint.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, -incidentLength).rotate(-incidenceAngleD)),
                entryPoint,
                exitPoint,
                exitPoint.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, emergentLength).rotate(-incidenceAngleD))
            ]);
            ray.withStroke(rayThickness, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].ray);
            graphic.insertChild(0, ray);
        }
        return {
            graphic: graphic,
            hitShape: glass.bounds.expand(5).toShape(),
            pivot: glass.bounds.center,
        };
    };
    GlassBlock.properties = {
        label: "Glass Block",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            showRay: true,
            incidenceAngleD: 40,
            ior: 1.517,
            length: 100,
            width: 40,
            incidentLength: 100,
            emergentLength: 100,
            rayThickness: 2.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "width", label: "Width",
                min: 20, max: 100,
            },
            {
                spec: "slider", key: "length", label: "Length",
                min: 80, max: 200,
            },
            { spec: "header", header: "Laser ray", icon: "sliders-h" },
            { spec: "checkbox", key: "showRay", label: "Show" },
            {
                spec: "slider", key: "incidenceAngleD", label: "Angle of incidence",
                min: 0, max: 89,
                visible: function (a) { return a.showRay; },
                unit: "°", pipsStep: 45
            },
            {
                spec: "slider", key: "ior", label: "Index of refraction",
                min: 1.0, max: 3.0,
                visible: function (a) { return a.showRay; },
                step: 0.001, pipsStep: 1000,
            },
            {
                spec: "slider", key: "incidentLength", label: "Incident ray",
                min: 10, max: 300,
                visible: function (a) { return a.showRay; }
            },
            {
                spec: "slider", key: "emergentLength", label: "Emergent ray",
                min: 10, max: 300,
                visible: function (a) { return a.showRay; }
            },
            {
                spec: "slider", key: "rayThickness", label: "Thickness",
                min: 1.0, max: 5.0,
                visible: function (a) { return a.showRay; }
            }
        ],
    };
    return GlassBlock;
}());



/***/ }),

/***/ "s8ZI":
/*!**************************!*\
  !*** ./src/analytics.ts ***!
  \**************************/
/*! exports provided: g */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return g; });
/* harmony import */ var _vars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vars */ "nHh6");

/** Shortcut for logging events via Google analytics. */
function g(action, label, value) {
    var data = { 'event_category': _vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].googleAnalyticsCategory };
    if (label) {
        data['event_label'] = label;
    }
    if (value) {
        data['value'] = value;
    }
    gtag('event', action, data);
}
// Make it globally available as "GLog"
;
window.GLog = g;


/***/ }),

/***/ "sA3r":
/*!*********************************************!*\
  !*** ./src/apparatus/library/glass_wool.ts ***!
  \*********************************************/
/*! exports provided: GlassWool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlassWool", function() { return GlassWool; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var GlassWool = /** @class */ (function () {
    function GlassWool() {
    }
    GlassWool.prototype.render = function (appearance) {
        var graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].glassWool();
        graphic.scale(1.5 * appearance.scale, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        graphic.scale(1.0, appearance.squish, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyleWithStroke"])("thinner", graphic);
        graphic.fillColor = appearance.color + '80';
        var hitShape = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(graphic.bounds);
        return { graphic: graphic, hitShape: hitShape };
    };
    GlassWool.properties = {
        label: "Glass Wool",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            squish: 1.0,
            color: "#dddddd"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 2.0, step: 0.1,
            },
            {
                spec: "slider", key: "squish", label: "Squish",
                min: 0.6, max: 1.0, step: 0.01,
            },
            {
                spec: "color", key: "color", label: "Colour",
                swatches: {
                    "White": "#ffffff",
                    "Grey": "#dddddd",
                    "Light blue": "#D1E4EB",
                }
            }
        ],
    };
    return GlassWool;
}());



/***/ }),

/***/ "sC0y":
/*!************************************************!*\
  !*** ./src/apparatus/library/heating/tongs.ts ***!
  \************************************************/
/*! exports provided: Tongs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tongs", function() { return Tongs; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../draw */ "hHoh");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "UCWy");



var Tongs = /** @class */ (function () {
    function Tongs() {
    }
    Tongs.isBoostRequiredForAppearance = function (a) {
        return a.type == "crucible";
    };
    Tongs.prototype.render = function (appearance) {
        var wing = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](wingShapes[appearance.type](appearance.size));
        wing.rotate(appearance.opening, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        // Create second wing by vertically flipping it.
        var wing2 = wing.clone();
        wing2.scale(1, -1.0, Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([wing, wing2]);
        Object(_draw__WEBPACK_IMPORTED_MODULE_1__["setDefaultStyleWithStroke"])("thick", graphic);
        if (appearance.view == "side") {
            graphic.scale(1, 0.6);
        }
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Tongs.properties = {
        label: "Beaker/Crucible Tongs",
        canContainLiquids: false,
        defaultAppearance: {
            type: "beaker",
            size: 90,
            opening: 5,
            view: "top",
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "type", label: "Type",
                options: [
                    { value: "beaker", label: "Beaker tongs" },
                    { value: "crucible", label: "Crucible tongs", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 70, max: 120,
            },
            {
                spec: "slider", key: "opening", label: "Opening",
                min: 0, max: 35,
            },
            {
                spec: "radio", key: "view", label: "View angle",
                options: [
                    { value: "top", label: "Top" },
                    { value: "side", label: "Side" },
                ],
            }
        ],
    };
    return Tongs;
}());

var wingShapes = {
    "beaker": function (size) {
        return Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-40, -10]], [[-44, -30], [5, 0]], [[-70, -30], undefined, [-15, 0]], [[-70, -5], [-15, 0]], [[-15, -5], undefined, [8, 0]], [[15, 5], undefined, [30, 10]], [[15 + size, 3], [-30, 10]]);
    },
    "crucible": function (size) {
        var gap = size - 65;
        return Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-40, -10]], [[-44, -30], [5, 0]], [[-70, -30], undefined, [-15, 0]], [[-70, -5], [-15, 0]], [[-15, -5], undefined, [8, 0]], [[15, 5], [-15, 0]], [[15 + gap, 5], undefined, [5, 0]], [[15 + gap + 25, 12], [-7, 0], [7, 0]], [[15 + gap + 50, 5], [-5, 0]], [[15 + size, 3]]);
    }
};


/***/ }),

/***/ "sk/T":
/*!*************************************************************!*\
  !*** ./src/apparatus/library/distillation/fractionating.ts ***!
  \*************************************************************/
/*! exports provided: FractionatingColumn2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FractionatingColumn2", function() { return FractionatingColumn2; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _condensers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../condensers */ "ZaQ3");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var FractionatingColumn2 = /** @class */ (function () {
    function FractionatingColumn2() {
    }
    FractionatingColumn2.prototype.render = function (appearance) {
        var height = appearance.height;
        var _a = Object(_condensers__WEBPACK_IMPORTED_MODULE_3__["condenserCaseShape"])(height, 15, "top-only"), casing = _a.group, snapping = _a.snap;
        var inside = new paper__WEBPACK_IMPORTED_MODULE_2__["CompoundPath"]({});
        inside.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 45));
        inside.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height - 20));
        var width = 20;
        for (var y = 55; y < height - 25; y += 18) {
            inside.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-width / 2, y));
            inside.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(width / 2, y));
        }
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([casing, inside]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: snapping,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, height / 2)
        };
    };
    FractionatingColumn2.properties = {
        label: "Fractionating Column",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: __assign(__assign({}, _condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].NoPorts.defaultAppearance), { height: 270 }),
        appearanceSpecs: __spreadArrays(_condensers__WEBPACK_IMPORTED_MODULE_3__["CommonCondenser"].NoPorts.appearanceSpecs),
    };
    return FractionatingColumn2;
}());



/***/ }),

/***/ "sl+6":
/*!**************************************!*\
  !*** ./src/components/text_area.tsx ***!
  \**************************************/
/*! exports provided: TextAreaInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaInput", function() { return TextAreaInput; });
/* harmony import */ var components_text_replacements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/text_replacements */ "lJ/s");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
// Wraper around <input type="text" />
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var TextAreaInput = /** @class */ (function (_super) {
    __extends(TextAreaInput, _super);
    function TextAreaInput(props) {
        var _this = _super.call(this, props) || this;
        _this.ref = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = { text: _this.props.text };
        return _this;
    }
    TextAreaInput.prototype.componentWillUnmount = function () {
        this.props.onEnd(this.props.text, this.state.text);
    };
    TextAreaInput.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {
        this.setState({ text: nextProps.text });
    };
    TextAreaInput.prototype.onChange = function (event) {
        var value = event.target.value;
        this.setState({ text: event.target.value });
        this.props.onChange(value);
    };
    TextAreaInput.prototype.onKeyPress = function (event) {
        if (this.props.enableReplacements === true)
            components_text_replacements__WEBPACK_IMPORTED_MODULE_0__["TextReplacements"].onKeyPress(this, event);
    };
    TextAreaInput.prototype.onKeyDown = function (event) {
        if (this.props.enableReplacements === true)
            components_text_replacements__WEBPACK_IMPORTED_MODULE_0__["TextReplacements"].onKeyDown(this, event);
    };
    TextAreaInput.prototype.manuallySetText = function (newText, newCursorPosition) {
        var _this = this;
        this.setState({ text: newText }, function () { return _this.ref.current.setSelectionRange(newCursorPosition, newCursorPosition); });
        this.props.onChange(newText);
    };
    TextAreaInput.prototype.onBlur = function (event) {
        this.props.onEnd(this.props.text, this.state.text);
    };
    TextAreaInput.prototype.render = function () {
        var _this = this;
        var _a;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { value: this.state.text, rows: (_a = this.props.rows) !== null && _a !== void 0 ? _a : 8, className: "ui-input", onFocus: function (e) { var _a; return (_a = _this.props.onFocus) === null || _a === void 0 ? void 0 : _a.call(null); }, onChange: function (e) { return _this.onChange(e); }, onKeyPress: function (e) { return _this.onKeyPress(e); }, onKeyDown: function (e) { return _this.onKeyDown(e); }, onBlur: function (e) { return _this.onBlur(e); }, ref: this.ref, placeholder: this.props.placeholder });
    };
    return TextAreaInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "so9M":
/*!**********************!*\
  !*** ./src/flags.ts ***!
  \**********************/
/*! exports provided: isProdFrom, isFrom, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isProdFrom", function() { return isProdFrom; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFrom", function() { return isFrom; });
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vars */ "nHh6");

/** Is Prod and meets minimum version. */
var isProdFrom = function (version) { return vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isProd && isAtLeastVersion(version); };
/** Is Prod and meets minimum version, or is Dev. */
var isFrom = function (version, extra) { return vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isDev || isProdFrom(version) || ((extra === null || extra === void 0 ? void 0 : extra.beta) == true && vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isBeta); };
var Flags;
(function (Flags) {
    /**
     * Freehand tool.
     */
    Flags.isFreeHandToolEnabled = vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isDev;
    /** Enable editing multiple items of same type. */
    Flags.isEditingMultipleItemsOfSameTypeEnabled = true;
    /** Enable Physics */
    Flags.isPhysicsEnabled = vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isDev || vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isBeta;
    Flags.isPromoEnabled = vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isDev || (currentDateBetween("2020-12-14", "2021-01-14"));
    Flags.isNewTemplatesEnabled = vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isDev || vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].isBeta;
})(Flags || (Flags = {}));
/** Returns true if the current version is at least this version. */
function isAtLeastVersion(minVersion) {
    var current = parseVersion(vars__WEBPACK_IMPORTED_MODULE_0__["Consts"].version);
    var min = parseVersion(minVersion);
    return current[0] > min[0] || (current[0] == min[0] && current[1] >= min[1]);
}
/** Parses verion as major.minor. */
function parseVersion(versionAsString) {
    var matches = versionAsString.match("([0-9]*)\.([0-9]*)");
    return [+matches[1], +matches[2]];
}
function currentDateBetween(after, before) {
    var now = new Date().getTime();
    var afterDate = Date.parse(after);
    var beforeDate = Date.parse(before);
    return now > afterDate && now < beforeDate;
}
// @ts-ignore unused
function currentDateAfter(date) {
    var now = new Date().getTime();
    return now > Date.parse(date);
}
/* harmony default export */ __webpack_exports__["default"] = (Flags);


/***/ }),

/***/ "t5XS":
/*!***********************************************!*\
  !*** ./src/apparatus/library/shapes/curve.ts ***!
  \***********************************************/
/*! exports provided: Curve, CurvedArrow, StirArrow, drawCurve, drawArrowHead */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Curve", function() { return Curve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CurvedArrow", function() { return CurvedArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StirArrow", function() { return StirArrow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawCurve", function() { return drawCurve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "drawArrowHead", function() { return drawArrowHead; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_driver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/driver */ "ScPQ");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





var Curve = /** @class */ (function () {
    function Curve() {
        this.shouldUseBoundsCenter = true;
        this.drivers = Curve.drivers;
    }
    Curve.prototype.render = function (a) {
        var _a = drawCurve(a), path = _a.path, xray = _a.xray;
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.apply(path, a);
        return {
            graphic: path,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].bounds(path),
            xray: xray,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0)
        };
    };
    Curve.properties = {
        label: "Curve",
        canContainLiquids: false,
        defaultAppearance: __assign({ end1x: -150, end1y: 0, pivot1x: -40, pivot1y: -80, end2x: 200, end2y: 0, pivot2x: 140, pivot2y: 40 }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.specs),
    };
    Curve.drivers = [
        __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end1x: p.x, end1y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.end1x, a.end1y); }, scale: 1.0 }),
        __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ pivot1x: p.x, pivot1y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.pivot1x, a.pivot1y); }, scale: 1.0 }),
        __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end2x: p.x, end2y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.end2x, a.end2y); }, scale: 1.0 }),
        __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ pivot2x: p.x, pivot2y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.pivot2x, a.pivot2y); }, scale: 1.0 }),
    ];
    return Curve;
}());

var CurvedArrow = /** @class */ (function () {
    function CurvedArrow() {
        this.shouldUseBoundsCenter = true;
        this.drivers = Curve.drivers;
    }
    CurvedArrow.prototype.render = function (a) {
        var _a = drawCurve(a), path = _a.path, xray = _a.xray;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([path]);
        var drawEndArrow = a.arrows === "both" || a.arrows === "end";
        var drawStartArrow = a.arrows === "both" || a.arrows === "start";
        if (drawEndArrow) {
            graphic.addChild(drawArrowHead(path.segments[1], "handleIn", a.size));
        }
        if (drawStartArrow) {
            graphic.addChild(drawArrowHead(path.segments[0], "handleOut", a.size));
        }
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.apply(graphic, a);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].bounds(graphic),
            xray: xray,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0)
        };
    };
    CurvedArrow.properties = {
        label: "Curved Arrow",
        canContainLiquids: false,
        defaultAppearance: __assign(__assign({}, Curve.properties.defaultAppearance), { arrows: "end", size: 15 }),
        appearanceSpecs: __spreadArrays(Curve.properties.appearanceSpecs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].header,
            {
                spec: "toggle-buttons",
                size: "small",
                key: "arrows",
                label: "Arrows",
                options: [
                    { icon: "long-arrow-left", label: "Start", value: "start" },
                    { icon: "long-arrow-right", label: "End", value: "end" },
                    { icon: "arrows-h", label: "Both", value: "both" },
                ]
            },
            {
                spec: "slider", key: "size", label: "Arrow size",
                min: 10, max: 50
            }
        ]),
    };
    return CurvedArrow;
}());

var StirArrow = /** @class */ (function () {
    function StirArrow() {
    }
    StirArrow.prototype.render = function (a) {
        var path = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[10, 0], , [19, 2]], [[16, 20], [18, -5], [-8, 2]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(path);
        var drawEndArrow = a.arrows === "both" || a.arrows === "end";
        var drawStartArrow = a.arrows === "both" || a.arrows === "start";
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([path]);
        graphic.scale(a.size / 50);
        if (drawEndArrow) {
            graphic.addChild(drawArrowHead(path.segments[path.segments.length - 1], "handleIn", 10));
        }
        if (drawStartArrow) {
            graphic.addChild(drawArrowHead(path.segments[0], "handleOut", 10));
        }
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.apply(graphic, a);
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].bounds(graphic),
            pivot: path.bounds.center,
        };
    };
    StirArrow.properties = {
        label: "Stirring motion arrow",
        canContainLiquids: false,
        defaultAppearance: {
            arrows: "both",
            size: 50,
            stroke: "#777777",
            strokeThickness: 3.0,
        },
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].StrokeOnly.specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].header,
            {
                spec: "toggle-buttons",
                size: "small",
                key: "arrows",
                label: "Arrows",
                options: [
                    { icon: "long-arrow-right", label: "Clockwise", value: "end" },
                    { icon: "long-arrow-left", label: "Anti-clockwise", value: "start" },
                    { icon: "arrows-h", label: "Both", value: "both" },
                ]
            },
            {
                spec: "slider", key: "size", label: "Size",
                min: 30, max: 120
            }
        ]),
    };
    return StirArrow;
}());

function drawCurve(a) {
    var path = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[a.end1x, a.end1y], , [a.pivot1x - a.end1x, a.pivot1y - a.end1y]], [[a.end2x, a.end2y], [a.pivot2x - a.end2x, a.pivot2y - a.end2y]]));
    var xray = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[a.end1x, a.end1y]], [[a.pivot1x, a.pivot1y]], [[a.pivot2x, a.pivot2y]], [[a.end2x, a.end2y]]));
    return { path: path, xray: xray };
}
function drawArrowHead(segment, normalKey, size, opts) {
    var _a;
    var normal = segment[normalKey].normalize();
    var adjustAngle = (_a = opts === null || opts === void 0 ? void 0 : opts.adjustAngle) !== null && _a !== void 0 ? _a : 0;
    var p1 = normal.rotate(45 + adjustAngle).multiply(size).add(segment.point);
    var p2 = normal.rotate(-45 + adjustAngle).multiply(size).add(segment.point);
    return new paper__WEBPACK_IMPORTED_MODULE_4__["Path"]([p1, segment.point, p2]);
}


/***/ }),

/***/ "tJTw":
/*!*************************************************!*\
  !*** ./src/apparatus/library/physics/pulley.ts ***!
  \*************************************************/
/*! exports provided: Pulley */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pulley", function() { return Pulley; });
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var WALL_COLOR = "#d9ab5f";
var Pulley = /** @class */ (function () {
    function Pulley() {
    }
    Pulley.prototype.render = function (appearance) {
        var radius = appearance.radius, distance = appearance.distance, wall = appearance.wall;
        var pulley = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), radius)
            .withStroke("default").withFill("#cccccc");
        var attachment = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 10, 20, radius + distance + 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 5.0)
            .withStroke("default")
            .withGradientFill("right-down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_0__["Gradients"].cylinder("#999999".color()));
        var nut = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), 3.0).withFill(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["SharedColors"].stroke);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([pulley, attachment, nut]);
        if (wall) {
            var y = -(radius + distance);
            graphic.addChildren([
                new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, y, 100, 30, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER))
                    .withGradientFill("down", [[WALL_COLOR + "00", 0.0], [WALL_COLOR, 0.8]]),
                new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Line(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-50, y), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(50, y)).withStroke("default"),
            ]);
        }
        return {
            graphic: graphic,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0),
            hitShape: graphic.bounds.toShape()
        };
    };
    Pulley.properties = {
        label: "Pulley",
        canContainLiquids: false,
        defaultAppearance: {
            radius: 50,
            distance: 50,
            wall: false
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "radius", label: "Pulley radius",
                min: 30, max: 80
            },
            {
                spec: "slider", key: "distance", label: "Distance from wall",
                min: 20, max: 200
            },
            { spec: "checkbox", label: "Wall", subLabel: "Show", key: "wall" }
        ],
    };
    return Pulley;
}());



/***/ }),

/***/ "tSsG":
/*!*********************************************!*\
  !*** ./src/apparatus/library/desiccator.ts ***!
  \*********************************************/
/*! exports provided: Desiccator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Desiccator", function() { return Desiccator; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var Desiccator = /** @class */ (function () {
    function Desiccator() {
    }
    Desiccator.prototype.render = function (appearance) {
        var desiccator = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].desiccator();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([desiccator]);
        if (appearance.lid == "on") {
            var lid = apparatus_svg__WEBPACK_IMPORTED_MODULE_1__["SVG"].desiccator_lid();
            graphic.addChild(lid);
            lid.position.y -= 25;
        }
        graphic.scale(2.0 * appearance.scale);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    Desiccator.properties = {
        label: "Desiccator",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            lid: "none"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.8, max: 2.0, step: 0.05
            },
            {
                spec: "radio", key: "lid", label: "Lid",
                options: [
                    { value: "none", label: "No lid" },
                    { value: "on", label: "Lid on" },
                ]
            }
        ],
    };
    return Desiccator;
}());



/***/ }),

/***/ "tYwG":
/*!****************************************************!*\
  !*** ./src/apparatus/library/container/thistle.ts ***!
  \****************************************************/
/*! exports provided: ThistleTube */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThistleTube", function() { return ThistleTube; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../draw */ "hHoh");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



// Based on https://www.jaytecglass.co.uk/laboratory-glassware/industry-glassware/thistle-funnels/
var ThistleTube = /** @class */ (function () {
    function ThistleTube() {
    }
    ThistleTube.prototype.render = function (appearance) {
        var height = appearance.height;
        var baseShape = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["Segments"])([[16, 0]], [[10, 10], undefined, [10, 4]], [[23, 30], [0, -8], [0, 10]], [[4, 50], [8, -1]], [[4, height]]));
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["mirrorX"])(baseShape);
        var liquidMask = baseShape.clone();
        var hitShape = baseShape.clone();
        var graphic = Object(_draw__WEBPACK_IMPORTED_MODULE_2__["breakPath"])(baseShape, 5);
        Object(_draw__WEBPACK_IMPORTED_MODULE_2__["setDefaultStyle"])(graphic);
        return { graphic: graphic, liquidMask: liquidMask, hitShape: hitShape };
    };
    ThistleTube.properties = {
        label: "Thistle tube",
        canContainLiquids: true,
        defaultAppearance: {
            height: 250,
        },
        defaultLiquidData: __assign(__assign({}, apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["DEFAULT_LIQUID_DATA"]), { amountRatio: 0.9 }),
        appearanceSpecs: [
            {
                spec: "slider", key: "height", label: "Height",
                min: 180, max: 300
            }
        ],
    };
    return ThistleTube;
}());



/***/ }),

/***/ "tya1":
/*!*******************************!*\
  !*** ./src/tiers/context.tsx ***!
  \*******************************/
/*! exports provided: TierContext, LoggedInTierContextValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TierContext", function() { return TierContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoggedInTierContextValue", function() { return LoggedInTierContextValue; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tiers_badge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tiers/badge */ "2UKY");


/** Allows access to current auth state via React context */
var TierContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({
    tier: undefined,
    popup: function (analyticsLabel) { return alert("Subscribe to Chemix plus for more features."); },
    allow: function (itemOrTier) { return false; },
    badge: function (itemOrTier) { return null; },
});
var LoggedInTierContextValue = /** @class */ (function () {
    function LoggedInTierContextValue(tier, popup) {
        this.tier = tier;
        this.popup = popup;
    }
    LoggedInTierContextValue.prototype.allow = function (itemOrTier) {
        if (typeof itemOrTier === "string") {
            return meets(itemOrTier, this.tier);
        }
        else {
            // If the item does not have a tier, it's considered basic.
            var itemTier = itemOrTier.tier;
            if (!itemTier)
                return true;
            return meets(itemTier, this.tier);
        }
    };
    LoggedInTierContextValue.prototype.badge = function (itemOrTier, extraClass) {
        if (this.allow(itemOrTier)) {
            return null;
        }
        if (typeof itemOrTier === "string") {
            return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_1__["Badge"], { tier: itemOrTier, extraClass: extraClass });
        }
        else {
            var itemTier = itemOrTier.tier;
            if (!itemTier)
                return null;
            return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](tiers_badge__WEBPACK_IMPORTED_MODULE_1__["Badge"], { tier: itemTier, extraClass: extraClass });
        }
    };
    return LoggedInTierContextValue;
}());

/**
 * Returns true if the current context meets the given tier, i.e.
 * the current user with given {@param tier} is allowed to use
 * the {@param requested} item based on its tier.
 */
function meets(requested, current) {
    if (!current)
        return false;
    // If the item is locked to plus, current tier must be plus or higher.
    if (requested == "plus")
        return current == "plus";
    // If the item is locked to boost, current tier must be boost or higher.
    if (requested == "boost")
        return (current == "plus" || current == "boost");
    // All other cases, return true.
    return true;
}


/***/ }),

/***/ "uFCc":
/*!****************************!*\
  !*** ./src/store/store.ts ***!
  \****************************/
/*! exports provided: DEFAULT_THEME, GroupsOperationData, appStore, default, extractDebugInfoFromStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_THEME", function() { return DEFAULT_THEME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupsOperationData", function() { return GroupsOperationData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "appStore", function() { return appStore; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractDebugInfoFromStore", function() { return extractDebugInfoFromStore; });
/* harmony import */ var _sentry_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/react */ "agHs");
/* harmony import */ var api_auth_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/auth/types */ "wt1j");
/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux */ "ANjH");
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var _reducers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./reducers */ "h/Eg");
// App's Store
// When adding new information, check ConnectedApp to see how the data is mapped.
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






var DEFAULT_THEME = {
    strokeThickness: "m"
};
/**
 * Stores information for operating on multiple groups, e.g. adding child IDs
 * to multiple groups at once. Effectively a dictionary, whose key is the
 * group ID number and children are IDs.
 */
var GroupsOperationData = /** @class */ (function () {
    function GroupsOperationData() {
        this.data = {};
        /** Maps from id number to the real Group ID. We must use these otherwise equality does not work. */
        this.groupIds = {};
        this.groupCache = {};
    }
    GroupsOperationData.prototype.add = function (groupId, child) {
        if (!(groupId.id in this.data)) {
            this.data[groupId.id] = [];
            this.groupIds[groupId.id] = groupId;
        }
        this.data[groupId.id].push(child);
    };
    /** Do NOT mix calls to remove and add! */
    GroupsOperationData.prototype.remove = function (groupId, child) {
        if (!(groupId.id in this.data)) {
            this.data[groupId.id] = [];
            this.groupIds[groupId.id] = groupId;
        }
        this.data[groupId.id].push(child);
        // If the group has a parent and would end up with
        // no children, remove that group too.
        var group = this.getGroup(groupId);
        if (group.items.length == this.data[groupId.id].length && group.parentGroup) {
            this.remove(group.parentGroup, groupId);
        }
    };
    GroupsOperationData.prototype.getGroup = function (groupId) {
        if (groupId.id in this.groupCache) {
            return this.groupCache[groupId.id];
        }
        var group = appStore.getState().groups.filter(store_id__WEBPACK_IMPORTED_MODULE_4__["ID"].matching(groupId))[0];
        this.groupCache[groupId.id] = group;
        return group;
    };
    GroupsOperationData.prototype.hasData = function () {
        return Object.keys(this.data).length > 0;
    };
    return GroupsOperationData;
}());

var initialState = {
    zoom: 1,
    items: [],
    arrows: [],
    groups: [],
    tool: "select",
    auth: api_auth_types__WEBPACK_IMPORTED_MODULE_1__["LOGGED_OUT_STATE"],
    theme: __assign({}, DEFAULT_THEME),
};
var sentryReduxEnhancer = _sentry_react__WEBPACK_IMPORTED_MODULE_0__["createReduxEnhancer"]({});
var appStore = Object(redux__WEBPACK_IMPORTED_MODULE_2__["createStore"])(_reducers__WEBPACK_IMPORTED_MODULE_5__["default"], initialState, sentryReduxEnhancer);
/* harmony default export */ __webpack_exports__["default"] = ({
    // Data accessors.
    items: function () { return appStore.getState().items; },
    arrows: function () { return appStore.getState().arrows; },
    groups: function () { return appStore.getState().groups; },
    // Proxy to execute actionss.
    dispatch: function (action) { appStore.dispatch(action); },
    dispatchFn: function (description, fn) { appStore.dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_3__["generic"])(description, fn)); },
    // Helper methods.
    selectedItems: function () {
        return appStore.getState().items.filter(function (item) { return item.selected; });
    },
    selectedArrows: function () {
        return appStore.getState().arrows.filter(function (arrow) { return arrow.selected; });
    },
    zoom: function () {
        return appStore.getState().zoom;
    },
    // Filters down a list of IDs to those that exist.
    filterExisting: function (ids) {
        return ids.filter(function (id) {
            switch (id.type) {
                case "arrow":
                    return appStore.getState().arrows.some(function (a) { return a.id === id; });
                case "apparatus":
                    return appStore.getState().items.some(function (a) { return a.id === id; });
                case "group":
                    return appStore.getState().groups.some(function (g) { return g.id === id; });
            }
        });
    },
    // TODO: Clean up this as well. This was a hack to return all IDs for
    // all selecpted objects.
    selectedObjectsID: function () {
        var selectedApparatusIDs = appStore.getState().items.filter(function (i) { return i.selected; }).map(function (i) { return i.id; });
        var selectedArrowsIDs = appStore.getState().arrows.filter(function (i) { return i.selected; }).map(function (i) { return i.id; });
        var allIds = [];
        allIds.push.apply(allIds, selectedApparatusIDs);
        allIds.push.apply(allIds, selectedArrowsIDs);
        return allIds;
    },
    // Returns the logged in state, or null if not logged in.
    loggedInState: function () {
        var auth = appStore.getState().auth;
        if (auth.state == "logged_in") {
            return auth;
        }
        return;
    }
});
function extractDebugInfoFromStore() {
    var state = appStore.getState();
    return {
        tier: state.tier,
        tool: state.tool,
        zoom: state.zoom,
        currentCloudDiagram: state.currentCloudDiagram,
        arrowsCount: state.arrows.length,
        itemsCount: state.items.length,
    };
}


/***/ }),

/***/ "uHyz":
/*!****************************************!*\
  !*** ./src/apparatus/library/ruler.ts ***!
  \****************************************/
/*! exports provided: Ruler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ruler", function() { return Ruler; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_1__);


var Ruler = /** @class */ (function () {
    function Ruler() {
    }
    Ruler.prototype.render = function (appearance) {
        var length = appearance.length;
        var height = 25;
        var margin = 15;
        var spacing = appearance.unit == "metric" ? 10 : 12.7;
        var bigStep = appearance.unit == "metric" ? 10 : 2; // Draw a big tick every <bigStep> mark.
        var markings = new paper__WEBPACK_IMPORTED_MODULE_1__["CompoundPath"]({});
        var x = 0;
        var i = 0;
        while (x <= length) {
            markings.moveTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, 1.5));
            markings.lineTo(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(x, i % bigStep == 0 ? 10 : 7));
            i += 1;
            x += spacing;
        }
        markings.strokeColor = "#666666";
        markings.strokeWidth = 2.0;
        var ruler = new paper__WEBPACK_IMPORTED_MODULE_1__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(-margin, 0, x - spacing + margin * 2, height));
        var _a = rulerColor(appearance.color), fill = _a.fill, stroke = _a.stroke;
        ruler.fillColor = fill;
        ruler.strokeWidth = 3.0;
        ruler.strokeColor = stroke;
        return { graphic: new paper__WEBPACK_IMPORTED_MODULE_1__["Group"]([ruler, markings]), hitShape: ruler.bounds.toShape() };
    };
    Ruler.properties = {
        label: "Ruler",
        canContainLiquids: false,
        defaultAppearance: {
            unit: "metric",
            length: 300,
            color: "beige"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "length", label: "Length",
                min: 100, max: 600,
            },
            {
                spec: "radio", key: "unit", label: "Units",
                options: [
                    { value: "metric", label: "Metric (cm)" },
                    { value: "imperial", label: "Imperial (in)" },
                ],
            },
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: "beige", label: "Beige" },
                    { value: "white", label: "White" },
                    { value: "blue", label: "Blue" },
                ],
            }
        ],
    };
    return Ruler;
}());

function rulerColor(color) {
    switch (color) {
        case "beige":
            return { fill: "#ede6d7", stroke: "#969082" };
        case "white":
            return { fill: "#eeeeee", stroke: "#444444" };
        case "blue":
            return { fill: "#becfea", stroke: "#7586a0" };
    }
}


/***/ }),

/***/ "uKu+":
/*!***********************************!*\
  !*** ./src/panel/ordering_ui.tsx ***!
  \***********************************/
/*! exports provided: createOrderingButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createOrderingButtons", function() { return createOrderingButtons; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var ordering_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ordering/actions */ "OWZY");



function createOrderingButtons(itemIds) {
    return {
        spec: "horizontal-icon-buttons",
        label: "Ordering",
        key: "orderingButtons",
        buttons: [
            {
                buttonLabel: "Bring to front", icon: "d,bring-front",
                onClick: function () {
                    var command = ordering_actions__WEBPACK_IMPORTED_MODULE_2__["ReorderItems"].create(itemIds, "bringToFront");
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("LayerOrdering", "BringToFront");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                },
            },
            {
                buttonLabel: "Bring forward", icon: "d,bring-forward",
                onClick: function () {
                    var command = ordering_actions__WEBPACK_IMPORTED_MODULE_2__["ReorderItems"].create(itemIds, "bringForward");
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("LayerOrdering", "BringForward");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                },
            },
            {
                buttonLabel: "Send backward", icon: "d,send-backward",
                onClick: function () {
                    var command = ordering_actions__WEBPACK_IMPORTED_MODULE_2__["ReorderItems"].create(itemIds, "sendBackward");
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("LayerOrdering", "SendBackward");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                },
            },
            {
                buttonLabel: "Send to back", icon: "d,send-back",
                onClick: function () {
                    var command = ordering_actions__WEBPACK_IMPORTED_MODULE_2__["ReorderItems"].create(itemIds, "sendToBack");
                    if (command) {
                        Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("LayerOrdering", "SendToBack");
                        command_command__WEBPACK_IMPORTED_MODULE_1__["commandProcessor"].execute(command);
                    }
                },
            },
        ],
    };
}


/***/ }),

/***/ "uMwy":
/*!***************************************************!*\
  !*** ./src/apparatus/library/accessories/lamp.ts ***!
  \***************************************************/
/*! exports provided: DeskLamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeskLamp", function() { return DeskLamp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var GRAY_CYLINDER = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#848489".color());
var DeskLamp = /** @class */ (function () {
    function DeskLamp() {
        this.drivers = [
            {
                type: "rectangle",
                minX: -50, maxX: 300,
                minY: -340, maxY: -100,
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.headX, -a.headY).multiply(a.scale); },
                toAppearance: function (p, a) { return ({ headX: p.x / a.scale, headY: -p.y / a.scale }); },
                scale: 1.0,
            }
        ];
    }
    DeskLamp.prototype.render = function (appearance) {
        var armLength = 170;
        var armWidth = 20;
        // Solve 2-arm IK, from 0 to (headX, -headY)
        //         +
        //         |       XXX(headX, -headY)
        //         |     XXXXX
        //         |  XXXX  X
        //         |XX
        //      XXX|
        //  XXXX   |
        //  XX     |
        //    X    |
        //    X    |
        //     X   |
        //      X  |
        //      XX |
        //       XX+
        var headVector = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.headX, -appearance.headY);
        var length = Math.min(headVector.length, armLength * 1.99);
        headVector.length = length;
        var halfX = length / 2;
        var armAngle = Math.acos(halfX / armLength).toDegrees();
        var arm1 = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(-armWidth / 2, 0, armLength + armWidth, armWidth, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_LEFT), armWidth / 2);
        arm1.rotate(-armAngle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        arm1.fillColor = "#aaaaaa";
        arm1.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#888888");
        var arm2 = arm1.clone();
        arm2.scale(-1.0, 1.0, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(halfX, 0));
        var arms = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([arm1, arm2]);
        arms.rotate(headVector.angle, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        var lampAttachment = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -8, 16, 40, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 5.0);
        lampAttachment.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#61605f").withFill("#888888");
        var lampHead = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 20], , [50, 0]], [[50, 100]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(lampHead);
        lampHead.closePath();
        lampHead.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#61605f").withGradientFill("right", GRAY_CYLINDER);
        var lightColor = this.glowColor(appearance.lightColor);
        var lightCone = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[50, 100]], [[80, 200]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(lightCone);
        lightCone.closePath();
        lightCone.withGradientFill("down", [[lightColor + "80", 0.0], [lightColor + "00", 1.0]]);
        var lampTop = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([
            lampAttachment, lightCone, lampHead
        ]);
        lampTop.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0);
        lampTop.position = headVector;
        lampTop.rotation = -appearance.angle;
        var base = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 120, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0);
        base.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#61605f").withGradientFill("right", GRAY_CYLINDER);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([arms, base, lampTop]);
        // Apply scale, around the pivot.
        graphic.scale(appearance.scale, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
            snapping: base.placeable(),
        };
    };
    DeskLamp.prototype.glowColor = function (color) {
        switch (color) {
            case "yellow": return "#fce653";
            case "red": return "#ff957a";
            case "blue": return "#5192f5";
            case "green": return "#67e22d";
        }
    };
    DeskLamp.properties = {
        label: "Desk lamp",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            headX: 10,
            headY: 300,
            angle: 30,
            scale: 1.0,
            lightColor: "yellow"
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "angle", label: "Head angle",
                min: 0, max: 90, step: 0
            },
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.6, max: 1.2, step: 0.01, unit: "%",
            },
            {
                spec: "radio", key: "lightColor", label: "Color",
                options: [
                    { value: "yellow", label: "Yellow" },
                    { value: "red", label: "Red" },
                    { value: "green", label: "Green" },
                    { value: "blue", label: "Blue" },
                ]
            },
        ],
    };
    return DeskLamp;
}());



/***/ }),

/***/ "uSG+":
/*!*************************!*\
  !*** ./src/keyboard.ts ***!
  \*************************/
/*! exports provided: Keys, focusMainApp, registerKeyboardShortcutHandler, setUpKeyboard, keyToDirection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Keys", function() { return Keys; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "focusMainApp", function() { return focusMainApp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerKeyboardShortcutHandler", function() { return registerKeyboardShortcutHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setUpKeyboard", function() { return setUpKeyboard; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keyToDirection", function() { return keyToDirection; });
/* harmony import */ var components_searchbox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/searchbox */ "VVZF");
/* harmony import */ var editing_clipboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/clipboard */ "A2/w");
/* harmony import */ var editing_deleting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! editing/deleting */ "FK9k");
/* harmony import */ var editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/undo_redo */ "qaw3");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tools */ "7vmD");







/** Key codes. */
var Keys;
(function (Keys) {
    Keys[Keys["DELETE"] = 46] = "DELETE";
    Keys[Keys["ENTER"] = 13] = "ENTER";
    Keys[Keys["ESCAPE"] = 27] = "ESCAPE";
    Keys[Keys["BACKSPACE"] = 8] = "BACKSPACE";
    Keys[Keys["_1"] = 49] = "_1";
    Keys[Keys["_2"] = 50] = "_2";
    Keys[Keys["_3"] = 51] = "_3";
    Keys[Keys["_4"] = 52] = "_4";
    Keys[Keys["C"] = 67] = "C";
    Keys[Keys["D"] = 68] = "D";
    Keys[Keys["E"] = 69] = "E";
    Keys[Keys["F"] = 70] = "F";
    Keys[Keys["N"] = 78] = "N";
    Keys[Keys["S"] = 83] = "S";
    Keys[Keys["V"] = 86] = "V";
    Keys[Keys["X"] = 88] = "X";
    Keys[Keys["Y"] = 89] = "Y";
    Keys[Keys["Z"] = 90] = "Z";
    Keys[Keys["LEFT"] = 37] = "LEFT";
    Keys[Keys["UP"] = 38] = "UP";
    Keys[Keys["RIGHT"] = 39] = "RIGHT";
    Keys[Keys["DOWN"] = 40] = "DOWN";
    Keys[Keys["QUESTION_MARK"] = 191] = "QUESTION_MARK";
})(Keys || (Keys = {}));
function isArrowKeys(e) {
    return (e.which >= Keys.LEFT && e.which <= Keys.DOWN);
}
/** Returns true if this keyboard event should not be handled by Chemix. */
function shouldHandleEvent(e) {
    // Key code not set.
    if (!e.keyCode)
        return false;
    // Do not handle if the target is a text input.
    if ($(e.target).is("input"))
        return false;
    // Also do not handle if the target is a text area.
    if ($(e.target).is("textarea"))
        return false;
    // Or a select.
    if ($(e.target).is("select"))
        return false;
    // Do not handle if the focus is on the slider handle.
    // and arrow keys are used.
    if ($(e.target).hasClass("ui-slider-handle") && isArrowKeys(e))
        return false;
    // Do not handle if tutorial is running.
    if ($(".introjs-overlay").length > 0)
        return false;
    // Do not handle while a context menu is focused.
    if ($(e.target).hasClass("rc-menu__item") && isArrowKeys(e))
        return false;
    // This event is safe to handle.
    return true;
}
/** Return focus to main app so shortcuts work. */
function focusMainApp() {
    $("body").focus();
}
function registerKeyboardShortcutHandler(handler) {
    $("body").on("keydown", function (e) {
        if (shouldHandleEvent(e)) {
            handler(e);
        }
    });
}
function setUpKeyboard() {
    $("body").attr('tabindex', 0).on("keydown", function (e) {
        if (!shouldHandleEvent(e))
            return;
        var isCtrlDown = e.ctrlKey || e.metaKey;
        var handled = true;
        // Note the precedence, keys with modifiers trump the same key without.
        if (e.keyCode == Keys.DELETE || e.keyCode == Keys.BACKSPACE) {
            Object(editing_deleting__WEBPACK_IMPORTED_MODULE_2__["deleteSelected"])("keyboard");
        }
        else if (e.keyCode == Keys.Z && isCtrlDown) {
            Object(editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__["undo"])("keyboard");
        }
        else if (e.keyCode == Keys.Y && isCtrlDown) {
            Object(editing_undo_redo__WEBPACK_IMPORTED_MODULE_3__["redo"])("keyboard");
        }
        else if (e.keyCode == Keys.X && isCtrlDown) {
            editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].cut("keyboard");
        }
        else if (e.keyCode == Keys.C && isCtrlDown) {
            editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].copy("keyboard");
        }
        else if (e.keyCode == Keys.V && isCtrlDown) {
            editing_clipboard__WEBPACK_IMPORTED_MODULE_1__["default"].paste("keyboard");
        }
        else if (e.keyCode == Keys.F && isCtrlDown) {
            $("#" + components_searchbox__WEBPACK_IMPORTED_MODULE_0__["SEARCH_BOX_ID"]).focus();
        }
        else if (e.key == "1" || e.key == "v" || e.keyCode == Keys.ESCAPE) {
            Object(_tools__WEBPACK_IMPORTED_MODULE_6__["selectTool"])("select", "keyboard");
        }
        else if (e.key == "2" || e.key == "p") {
            Object(_tools__WEBPACK_IMPORTED_MODULE_6__["selectTool"])("pan", "keyboard");
        }
        else if (e.key == "3" || e.key == "t") {
            Object(_tools__WEBPACK_IMPORTED_MODULE_6__["selectTool"])("arrow", "keyboard");
        }
        else if (flags__WEBPACK_IMPORTED_MODULE_4__["default"].isFreeHandToolEnabled && (e.key == "4" || e.key == "d")) {
            Object(_tools__WEBPACK_IMPORTED_MODULE_6__["selectTool"])("freehand", "keyboard");
        }
        else if (vars__WEBPACK_IMPORTED_MODULE_5__["Consts"].isDev && (e.key == "5")) {
            Object(_tools__WEBPACK_IMPORTED_MODULE_6__["selectTool"])("pathedit", "keyboard");
        }
        else {
            handled = false;
        }
        if (handled) {
            e.preventDefault();
        }
    });
}
function keyToDirection(key) {
    switch (key) {
        case Keys.LEFT: return "left";
        case Keys.RIGHT: return "right";
        case Keys.DOWN: return "down";
        case Keys.UP: return "up";
    }
    return "left";
}


/***/ }),

/***/ "uU7G":
/*!**********************************************!*\
  !*** ./src/panel/property_panel_adapter.tsx ***!
  \**********************************************/
/*! exports provided: PropertyPanelAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyPanelAdapter", function() { return PropertyPanelAdapter; });
/* harmony import */ var components_propertyPanel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/propertyPanel */ "6F/f");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! panel/apparatus_panel_ui */ "GzMk");
/* harmony import */ var panel_arrow_panel_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! panel/arrow_panel_ui */ "ZY6G");
/* harmony import */ var panel_propertyPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! panel/propertyPanel */ "5IfQ");
/* harmony import */ var panel_same_type_apparatus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! panel/same_type_apparatus */ "pGZa");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! tiers/context */ "tya1");
/* harmony import */ var _store_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../store/store */ "uFCc");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};










/**
 * Adapter element that basically contians a PropertyPanel
 * and is responsible for creating elements for the property
 * panel based on the current state of the app.
 */
var PropertyPanelAdapter = /** @class */ (function (_super) {
    __extends(PropertyPanelAdapter, _super);
    function PropertyPanelAdapter(props) {
        return _super.call(this, props) || this;
    }
    // Creates PropertyPanel props from current selection.
    PropertyPanelAdapter.prototype.createPropsForChild = function (tiers) {
        var _a = this.props, selected = _a.selected, app = _a.app;
        if (this.props.selected.isEmpty) {
            return sectionsForProject(this.props.theme);
        }
        else if (selected.items.length == 1 && selected.arrows.length == 0) {
            return Object(panel_apparatus_panel_ui__WEBPACK_IMPORTED_MODULE_2__["sectionsForOneApparatus"])(selected.items[0], app, tiers, selected);
        }
        else if (selected.items.length == 0 && selected.arrows.length == 1) {
            return Object(panel_arrow_panel_ui__WEBPACK_IMPORTED_MODULE_3__["arrowPanelUI"])(selected, selected.arrows, app, tiers);
        }
        else if (flags__WEBPACK_IMPORTED_MODULE_1__["default"].isEditingMultipleItemsOfSameTypeEnabled && selected.items.length == 0 && selected.arrows.length >= 1) {
            return Object(panel_arrow_panel_ui__WEBPACK_IMPORTED_MODULE_3__["arrowPanelUI"])(selected, selected.arrows, app, tiers);
        }
        else if (flags__WEBPACK_IMPORTED_MODULE_1__["default"].isEditingMultipleItemsOfSameTypeEnabled && selected.items.length > 1 && (selected.sameApparatusType || selected.sameApparatusKind)) {
            return Object(panel_same_type_apparatus__WEBPACK_IMPORTED_MODULE_5__["sectionsForMultipleItemsOfSameType"])(selected, app, tiers);
        }
        else {
            return Object(panel_propertyPanel__WEBPACK_IMPORTED_MODULE_4__["sectionsForMultipleItems"])(selected, app);
        }
    };
    PropertyPanelAdapter.prototype.render = function () {
        var _this = this;
        return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](tiers_context__WEBPACK_IMPORTED_MODULE_8__["TierContext"].Consumer, { key: "PropPanelConsumer" }, function (tiers) { return (react__WEBPACK_IMPORTED_MODULE_6__["createElement"](components_propertyPanel__WEBPACK_IMPORTED_MODULE_0__["PropertyPanel"], __assign({}, _this.createPropsForChild(tiers), { key: "PropertyPanel" }))); });
    };
    return PropertyPanelAdapter;
}(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));

var strokeThicknessThemeButtons = [
    { name: "Thin", value: "s", icon: "l,horizontal-rule" },
    { name: "Medium", value: "m", icon: "r,horizontal-rule" },
    { name: "Strong", value: "l", icon: "horizontal-rule" },
];
function sectionsForProject(theme) {
    var themeButtonIndex = 0;
    for (var i = 0; i < strokeThicknessThemeButtons.length; i++) {
        if (strokeThicknessThemeButtons[i].value == theme.strokeThickness) {
            themeButtonIndex = i;
            break;
        }
    }
    return {
        icon: "drafting-compass",
        title: "Diagram settings",
        tabs: [
            {
                type: "theme",
                sections: [
                    {
                        header: "First",
                        icon: "tint",
                        hideHeaderIfFirst: true,
                        elements: [
                            {
                                spec: "toggle-horizontal-buttons",
                                key: "strokeThicknessTheme",
                                label: "Stroke Thickness",
                                size: "large",
                                highlightIndex: themeButtonIndex,
                                buttons: strokeThicknessThemeButtons.map(function (s) { return ({
                                    icon: s.icon,
                                    buttonLabel: s.name,
                                    onClick: function () {
                                        _store_store__WEBPACK_IMPORTED_MODULE_9__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_7__["setThemeStrokeThickness"])(s.value));
                                    }
                                }); })
                            }
                        ]
                    }
                ]
            }
        ]
    };
}


/***/ }),

/***/ "uWrk":
/*!************************!*\
  !*** external "paper" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = paper;

/***/ }),

/***/ "uYhG":
/*!***************************************!*\
  !*** ./src/api/auth/login_button.tsx ***!
  \***************************************/
/*! exports provided: loginProviderIcon, loginProviderDisplayName, LoginButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loginProviderIcon", function() { return loginProviderIcon; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loginProviderDisplayName", function() { return loginProviderDisplayName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginButton", function() { return LoginButton; });
/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! analytics */ "s8ZI");
/* harmony import */ var api_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! api/api */ "3kYy");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils */ "fdqv");
// Based on:
// https://codeburst.io/react-authentication-with-twitter-google-facebook-and-github-862d59583105
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







function loginProviderIcon(provider) {
    if (provider === "facebook") {
        return "fab fa-facebook-f";
    }
    else if (provider === "code") {
        return "fas fa-key";
    }
    return "fab fa-" + provider;
}
function loginProviderDisplayName(provider) {
    return provider !== "code" ? provider.capitalise() : "access code";
}
var LoginButton = /** @class */ (function (_super) {
    __extends(LoginButton, _super);
    function LoginButton(props) {
        var _this = _super.call(this, props) || this;
        _this.render = function () {
            var providerName = _this.props.providerName;
            return react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("button", { className: "ui-button mx-auto mt-2 " + providerName, onClick: function () { return _this.onButtonClick(); } },
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("i", { className: "mr-2 " + loginProviderIcon(providerName) }),
                "Sign in with ",
                loginProviderDisplayName(providerName));
        };
        _this.state = {};
        var self = _this;
        _this.messageHandler = function (ev) {
            // Filter any messages that are not from our API,
            // don't relate to this provider or while
            // the button is not active.
            if (ev.origin != api_api__WEBPACK_IMPORTED_MODULE_1__["BACKEND_API"])
                return;
            if (!_this.props.active)
                return;
            var response = ev.data;
            if (response.provider != _this.props.providerName)
                return;
            self.onReceiveLoginResponse(ev.data);
        };
        return _this;
    }
    LoginButton.prototype.componentDidMount = function () {
        window.addEventListener("message", this.messageHandler, true);
    };
    LoginButton.prototype.componentWillUnmount = function () {
        window.removeEventListener("message", this.messageHandler);
    };
    LoginButton.prototype.onReceiveLoginResponse = function (response) {
        if (response.type == "success") {
            // Successfully signed in.
            store_store__WEBPACK_IMPORTED_MODULE_5__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_4__["logIn"])({
                provider: this.props.providerName,
                jwtToken: response.jwt,
                user: response.user,
                firstTimeLogin: response.firstTimeLogin,
                tier: response.tier,
            }));
            this.props.onSuccess(response.jwt, response.tier);
            Object(analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("SignIn", this.props.providerName);
        }
        else if (response.type == "error") {
            toastr.error("Please try again later. If problems persist, please email support@chemix.org for help.", "Failed to sign in.");
            throw new Error("Failed to sign in: Error");
        }
        else {
            toastr.error("Unknown response", "Failed to sign in.");
            throw new Error("Failed to sign in: Unknown response.");
        }
    };
    LoginButton.prototype.onButtonClick = function () {
        var provider = this.props.providerName;
        var loginUrl = api_api__WEBPACK_IMPORTED_MODULE_1__["BACKEND_API"] + "/auth/" + provider;
        if (this.props.onClick)
            this.props.onClick();
        var width = 800;
        var height = 660;
        var x = window.outerWidth / 2 + window.screenX - (width / 2);
        var y = window.screenY + 20;
        // IE/EDGE have a problem with permission denied, so use a login_redirect.html.
        var url = Object(utils__WEBPACK_IMPORTED_MODULE_6__["isIEOrEdge"])() ? "safe_redirect.html?to=" + loginUrl : loginUrl;
        var loginWindow = window.open(url, '', "toolbar=no, location=no, directories=no, status=no, menubar=no,\n            scrollbars=no, resizable=no, copyhistory=no\n            width=" + width + " height=" + height + " top=" + y + " left=" + x + "\n            ");
        loginWindow.onunload = function () {
            Object(log__WEBPACK_IMPORTED_MODULE_2__["clog"])("Log in window closed.");
        };
    };
    return LoginButton;
}(react__WEBPACK_IMPORTED_MODULE_3__["Component"]));



/***/ }),

/***/ "ufRn":
/*!**************************************************!*\
  !*** ./src/apparatus/library/devices/rotavap.ts ***!
  \**************************************************/
/*! exports provided: Rotavap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rotavap", function() { return Rotavap; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





// Main machine colours.
var OUTLINE_COLOR = Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 3, 65).string();
var FILL_GRADIENT = apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(252, 3, 80));
var GRIP_FILL_GRADIENT = [[Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(0, 0, 33).string(), 0.0], [Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(0, 0, 10).string(), 1.0]];
var Rotavap = /** @class */ (function () {
    function Rotavap() {
        this.liftLerp = new apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Interpolator"]([0, 1], [220, 350]);
    }
    Rotavap.prototype.render = function (appearance) {
        var bath = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, -140], , [0, 140]], [[30, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(bath, 100);
        bath.closePath();
        bath.position.x += 95;
        bath.position.y -= 20;
        bath.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), OUTLINE_COLOR);
        bath.setGradientFill("right", FILL_GRADIENT);
        if (appearance.translucentBath) {
            bath.opacity = 0.4;
        }
        var base = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 310, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_LEFT), 2.0);
        base.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(0, 0, 20).string());
        base.fillColor = Object(color__WEBPACK_IMPORTED_MODULE_3__["hsl"])(0, 0, 35).string();
        var lift = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 60, 360, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_LEFT), 5.0);
        lift.position.x += 20;
        lift.position.y -= 10;
        lift.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), OUTLINE_COLOR);
        lift.setGradientFill("right", FILL_GRADIENT);
        var liftTrack = paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 10, 130, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_LEFT), 5.0);
        liftTrack.position.x += 45;
        liftTrack.position.y -= 220;
        liftTrack.setGradientFill("right", [["#aaaaaa", 0.0], ["#888888", 1.0]]);
        var powerUnit = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([
            paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -23, 60, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER), 2.0).withGradientFill("right", GRIP_FILL_GRADIENT),
            paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 23, 40, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].TOP_CENTER), 2.0).withGradientFill("right", GRIP_FILL_GRADIENT),
            paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 80, 50, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER), 3.0).withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), OUTLINE_COLOR).withGradientFill("right", FILL_GRADIENT),
        ]);
        // Add a shadow
        powerUnit.insertChild(0, powerUnit.children[2].clone());
        powerUnit.children[0].fillColor = "#00000010";
        powerUnit.children[0].strokeWidth = 0;
        powerUnit.children[0].position.y += 10;
        powerUnit.children[0].position.x -= 10;
        // Move into place.
        powerUnit.position.x = 50;
        powerUnit.position.y = -this.liftLerp.interpolate(appearance.lift);
        powerUnit.rotation = -65;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([bath, lift, liftTrack, powerUnit, base]);
        return {
            graphic: graphic,
            hitShape: [bath.bounds.toShape(), lift.bounds.toShape(), base.bounds.toShape()],
            snapping: base.placeable(),
            pivot: base.strokeBounds.bottomCenter,
            watermark: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(100, -140)
        };
    };
    Rotavap.properties = {
        label: "Rotary Evaporator",
        canContainLiquids: false,
        defaultAppearance: {
            lift: 0.1,
            translucentBath: false
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "lift", label: "Lift",
                min: 0, max: 1, step: 0.01, unit: "%"
            },
            {
                spec: "checkbox", key: "translucentBath", label: "Translucent Bath",
            }
        ],
    };
    return Rotavap;
}());



/***/ }),

/***/ "uotT":
/*!**************************!*\
  !*** ./src/paper_ext.ts ***!
  \**************************/
/*! exports provided: createCompoundPath */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createCompoundPath", function() { return createCompoundPath; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var ext_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ext/js */ "A5Ua");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withScale = function (scale, center) {
    this.scale(scale, center);
    return this;
};
// Gradient fill an item.
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.setGradientFill = function (direction, stops) {
    var _a = startStop(this.bounds, direction), start = _a.start, end = _a.end;
    var gradient = new paper.Gradient(stops);
    this.fillColor = new paper.Color(gradient, start, end);
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withGradientFill = function (direction, stops) {
    this.setGradientFill(direction, stops);
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.setGradientStroke = function (direction, stops) {
    var _a = startStop(this.bounds, direction), start = _a.start, end = _a.end;
    var gradient = new paper.Gradient(stops);
    this.strokeColor = new paper.Color(gradient, start, end);
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.setRadialGradientFill = function (stops, center, edge) {
    var start = center !== null && center !== void 0 ? center : this.bounds.center;
    var end = edge !== null && edge !== void 0 ? edge : this.bounds.rightCenter;
    var gradient = new paper.Gradient(stops, true);
    this.fillColor = new paper.Color(gradient, start, end);
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.setRadialGradientStroke = function (stops) {
    var start = this.bounds.center;
    var end = this.bounds.rightCenter;
    var gradient = new paper.Gradient(stops, true);
    this.strokeColor = new paper.Color(gradient, start, end);
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.enableScalableGradient = function () {
    this.applyMatrix = false;
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withStroke = function (width, color) {
    var widthNumber = (typeof width === "string") ? Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])(width) : width;
    this.strokeColor = color !== null && color !== void 0 ? color : apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].stroke;
    this.strokeWidth = widthNumber;
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withFill = function (color) {
    this.fillColor = color;
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withPosition = function (position) {
    if (position.x !== undefined)
        this.position.x = position.x;
    if (position.y !== undefined)
        this.position.y = position.y;
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.placeable = function () {
    return {
        type: "placeable",
        at: this.strokeBounds.bottomCenter,
    };
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.topEdgeAsPlaceableSurface = function () {
    return {
        type: "placeable_surface",
        start: this.strokeBounds.topLeft,
        end: this.strokeBounds.topRight,
    };
};
paper__WEBPACK_IMPORTED_MODULE_4__["Item"].prototype.withDefaultStyle = function () {
    this.strokeWidth = Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
    this.strokeColor = "#333333";
    this.fillColor = "#ddddddcc";
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Path"].prototype.close = function () {
    this.closePath();
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Path"].prototype.mirrorY = function (y) {
    if (y === void 0) { y = 0; }
    Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_1__["mirrorY"])(this, y);
    return this;
};
paper__WEBPACK_IMPORTED_MODULE_4__["Point"].prototype.toPlain = function () {
    return { x: this.x, y: this.y };
};
paper__WEBPACK_IMPORTED_MODULE_4__["Point"].prototype.toArray = function () {
    return [this.x, this.y];
};
/**
 * Utility function that uses a compact syntax to create a CompoundPath. E.g.
 * instead of:
 *    let path = new CompoundPath({})
 *    path.moveTo(new Point(10, 10))
 *    path.lineTo(new Point(20, 20))
 * It is possible to write:
 *    let path = createCompoundPath(
 *       ["moveTo", 10, 10],
 *       ["lineTo", 20, 20],
 *    )
 */
function createCompoundPath() {
    var instructions = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        instructions[_i] = arguments[_i];
    }
    var path = new paper__WEBPACK_IMPORTED_MODULE_4__["CompoundPath"]({});
    for (var _a = 0, instructions_1 = instructions; _a < instructions_1.length; _a++) {
        var instruction = instructions_1[_a];
        var command = instruction[0], x = instruction[1], y = instruction[2];
        var point = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(x, y);
        switch (command) {
            case "lineBy":
                path.lineBy(point);
                break;
            case "moveBy":
                path.moveBy(point);
                break;
            case "moveTo":
                path.moveTo(point);
                break;
            case "lineTo":
                path.lineTo(point);
                break;
        }
    }
    return path;
}
function startStop(bounds, direction) {
    switch (direction) {
        case "up":
            return { start: bounds.bottomCenter, end: bounds.topCenter };
        case "right-up":
            return { start: bounds.bottomLeft, end: bounds.topRight };
        case "right":
            return { start: bounds.leftCenter, end: bounds.rightCenter };
        case "right-down":
            return { start: bounds.topLeft, end: bounds.bottomRight };
        case "down":
            return { start: bounds.topCenter, end: bounds.bottomCenter };
        case "left-down":
            return { start: bounds.topRight, end: bounds.bottomLeft };
        case "left":
            return { start: bounds.rightCenter, end: bounds.leftCenter };
        case "left-up":
            return { start: bounds.bottomRight, end: bounds.topLeft };
    }
}
// Expands the current rectangle, in place, to include the other rectangle.
paper__WEBPACK_IMPORTED_MODULE_4__["Rectangle"].prototype.united = function (rect) {
    this.top = Math.min(this.top, rect.top);
    this.left = Math.min(this.left, rect.left);
    this.right = Math.max(this.right, rect.right);
    this.bottom = Math.max(this.bottom, rect.bottom);
};
paper__WEBPACK_IMPORTED_MODULE_4__["Rectangle"].prototype.toShape = function () {
    return paper__WEBPACK_IMPORTED_MODULE_4__["Shape"].Rectangle(this);
};


/***/ }),

/***/ "us5W":
/*!*************************************************!*\
  !*** ./src/apparatus/library/heating/mantle.ts ***!
  \*************************************************/
/*! exports provided: HeatingMantle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HeatingMantle", function() { return HeatingMantle; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);




var HeatingMantle = /** @class */ (function () {
    function HeatingMantle() {
    }
    HeatingMantle.isBoostRequiredForAppearance = function (a) {
        return a.transparency === "clip" || a.transparency == "xsection";
    };
    HeatingMantle.prototype.render = function (appearance) {
        var graphic;
        if (appearance.transparency === "none") {
            graphic = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].mantle();
        }
        else {
            var mantle = apparatus_svg__WEBPACK_IMPORTED_MODULE_2__["SVG"].mantle();
            var mask = mantle.bounds.toShape().toPath();
            var masking = void 0;
            if (appearance.transparency === "clip") {
                var whiteout = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(mantle.bounds.topCenter.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 30)), 90);
                whiteout.setRadialGradientFill([["#ffffffdd", 0.7], ["#ffffff00", 1.0]]);
                masking = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([mask, whiteout]);
                masking.clipped = true;
                graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([mantle, masking]);
            }
            else {
                var cutOut = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[65, 0]], [[65, 30], , [0, 30]], [[0, 90], [30, 0]]));
                Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(cutOut);
                cutOut.position.x += 87;
                cutOut.fillColor = "white";
                cutOut.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default"), "#aaaaaa");
                graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([mantle, cutOut]);
            }
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: graphic.placeable(),
        };
    };
    HeatingMantle.properties = {
        label: "Heating Mantle",
        canContainLiquids: false,
        defaultAppearance: {
            transparency: "none"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "transparency", label: "Display",
                options: [
                    { value: "none", label: "Normal" },
                    { value: "clip", label: "Transparent", tier: "boost" },
                    { value: "xsection", label: "Cross-section", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            }
        ],
    };
    return HeatingMantle;
}());



/***/ }),

/***/ "ussf":
/*!********************************************************!*\
  !*** ./src/apparatus/library/heating/clay_triangle.ts ***!
  \********************************************************/
/*! exports provided: ClayTriangle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClayTriangle", function() { return ClayTriangle; });
/* harmony import */ var apparatus_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/common */ "rTtD");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../draw */ "hHoh");





var ClayTriangle = /** @class */ (function () {
    function ClayTriangle() {
    }
    ClayTriangle.prototype.render = function (appearance) {
        var graphic = (function () {
            switch (appearance.view) {
                case "side":
                    return sideView();
                case "top":
                    return topView();
            }
        })();
        return { graphic: graphic, hitShape: graphic.bounds.toShape() };
    };
    ClayTriangle.properties = {
        label: "Clay triangle",
        canContainLiquids: false,
        defaultAppearance: {
            view: "side"
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "view", label: "View",
                options: [
                    { value: "top", label: "Top" },
                    { value: "side", label: "Side" },
                ],
            },
        ],
    };
    return ClayTriangle;
}());

function createCeramic() {
    var graphic = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-30, -5, 60, 10), 3.0);
    graphic.strokeColor = "#c2a690";
    graphic.fillColor = "#d9c8b9";
    graphic.strokeWidth = Object(apparatus_common__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("default");
    return graphic;
}
function topView() {
    var ceramic = createCeramic();
    var wire = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[66, -14]], [[40, 0]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_3__["mirrorX"])(wire);
    Object(_draw__WEBPACK_IMPORTED_MODULE_3__["setDefaultStyle"])(wire);
    var part = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([wire, ceramic]);
    // Duplicate three times in a triangle arrangement.
    var pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 25);
    var part2 = part.clone();
    part2.rotate(120, pivot);
    var part3 = part.clone();
    part3.rotate(-120, pivot);
    // Assemble together.
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([part, part2, part3]);
    return graphic;
}
function sideView() {
    var ceramic = createCeramic();
    var wire = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-66, 0]], [[66, 0]]));
    Object(_draw__WEBPACK_IMPORTED_MODULE_3__["setDefaultStyle"])(wire);
    var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([wire, ceramic]);
    return graphic;
}


/***/ }),

/***/ "v88i":
/*!*********************************************!*\
  !*** ./src/apparatus/library/separatory.ts ***!
  \*********************************************/
/*! exports provided: SeparatoryFunnel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SeparatoryFunnel", function() { return SeparatoryFunnel; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_tap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/tap */ "ndDi");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




var SeparatoryFunnel = /** @class */ (function () {
    function SeparatoryFunnel() {
    }
    SeparatoryFunnel.prototype.render = function (appearance) {
        var size = appearance.size;
        var halfWidth = size * 0.25;
        var outflowHeight = 50;
        var glass = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[0, -20]], [[0, 0], undefined, [-halfWidth, 10]], // Start of arc
        [[-halfWidth, halfWidth * 0.7], undefined, [0, 20]], // end of arc
        [[7, size]], [[7, size + outflowHeight]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(glass, 12);
        var liquidMask = glass.clone();
        // Adjust liquidMask based on opening.
        if (_common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].isClosed(appearance.tapOpening)) {
            liquidMask.segments[5].point = liquidMask.segments[3].point;
        }
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["addEdgeLips"])(glass);
        var glassWalls = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPath"])(glass, 6);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(glassWalls);
        var stopCock = Object(_common_tap__WEBPACK_IMPORTED_MODULE_3__["createTap"])(appearance.tapOpening);
        stopCock.position.x += 12;
        stopCock.position.y = size + 2;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([glassWalls, stopCock]);
        var hitShapes = [
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(glass.bounds),
            paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(stopCock.bounds)
        ];
        return { graphic: graphic, hitShape: hitShapes, liquidMask: liquidMask };
    };
    SeparatoryFunnel.properties = {
        label: "Separatory Funnel",
        canContainLiquids: true,
        defaultAppearance: __assign({ size: 150 }, _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].defaultAppearance),
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 100, max: 200
            },
            _common_tap__WEBPACK_IMPORTED_MODULE_3__["Tap"].appearanceSpec,
        ],
    };
    return SeparatoryFunnel;
}());



/***/ }),

/***/ "vH3o":
/*!**********************************************************!*\
  !*** ./src/apparatus/library/structure/burette_clamp.ts ***!
  \**********************************************************/
/*! exports provided: BuretteClamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BuretteClamp", function() { return BuretteClamp; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var BLUE_COLOR = "#1828d6";
var WHITE_COLOR = "#eeeeee";
var BuretteClamp = /** @class */ (function () {
    function BuretteClamp() {
    }
    BuretteClamp.prototype.render = function (appearance) {
        var color = appearance.color.color();
        var clamp = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[16, 12], [0, 4]], [[16, -49]], [[45, -80], [-1, 16]], [[45, -104]], [[32, -104]], [[32, -77], , [0, 5]], [[26, -72]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(clamp);
        clamp.closePath();
        clamp.withFill(color.hex()).withStroke("default", color.ladd(-20).hex());
        var pad = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(29, -102, 19, 16), 2.0).withFill("#333333");
        var pad2 = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(-29, -102, 19, 16, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_RIGHT), 2.0).withFill("#333333");
        var pad3 = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -72, 18, 25, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 2.0).withFill("#333333");
        var clamp2 = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, -35, 12, 65, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].BOTTOM_CENTER), 2.0)
            .withFill(color.hex()).withStroke("default", color.ladd(-20).hex());
        var nut = paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0), 6).withStroke("thin", "#cccccc").withFill("#aaaaaa");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([clamp, clamp2, pad, pad2, pad3, nut]);
        graphic.rotate(90, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: { type: "attachable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0) }
        };
    };
    BuretteClamp.properties = {
        label: "Burette Clamp",
        canContainLiquids: true,
        defaultAppearance: {
            color: BLUE_COLOR
        },
        appearanceSpecs: [
            {
                spec: "radio", key: "color", label: "Colour",
                options: [
                    { value: BLUE_COLOR, label: "Blue" },
                    { value: WHITE_COLOR, label: "White" },
                ],
            }
        ],
    };
    return BuretteClamp;
}());



/***/ }),

/***/ "vnI9":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/structure/burette_holder.ts ***!
  \***********************************************************/
/*! exports provided: BuretteHolder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BuretteHolder", function() { return BuretteHolder; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_clamp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/clamp */ "BoMl");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common */ "UCWy");




var bodyStrokeColor = "#999999";
var bodyFillColor = "#cccccc";
var rubberFillColor = "#35a1db";
var rubberStrokeColor = "#1c719e";
var BuretteHolder = /** @class */ (function () {
    function BuretteHolder() {
    }
    BuretteHolder.prototype.render = function (appearance) {
        var body = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[20, -20], [0, 0], [20, 0]], [[60, -50], [0, 0], [10, -20]], [[80, -50], [5, -5], [-20, 20]], [[80, 50], [-20, -20], [5, 5]], [[60, 50], [10, 20]], [[20, 20], [20, 0]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(body);
        body.closePath();
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(body);
        body.strokeColor = bodyStrokeColor;
        body.fillColor = bodyFillColor;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([body]);
        // Place the rubber holders on the main body.
        var rubberPositions = [Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(71, 52), Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-71, 52), Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(71, -52), Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-71, -52)];
        rubberPositions.forEach(function (p) {
            var rubber = createRubber(p);
            graphic.addChild(rubber);
        });
        // Adjustable arms.
        var movableHand = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_3__["Segments"])([[0, 0]], [[50, -15]], [[100, -60], [0, 0], [10, -10]], [[112, -48], [10, -10]], [[105, -43]], [[110, -38], [-5, 0]], [[125, -45], [0, 0], [3, -3]], [[130, -40], [3, -3]], [[112, -31], [0, 0], [-5, 5]], [[100, -38]], [[55, -10]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(movableHand);
        movableHand.strokeColor = bodyStrokeColor;
        movableHand.fillColor = bodyFillColor;
        var rubber2 = createRubber(Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(108, -55));
        var movableRT = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([movableHand, rubber2]);
        var movableRB = movableRT.clone();
        movableRB.scale(1, -1, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0));
        var movableLT = movableRT.clone();
        movableLT.scale(-1, 1, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0));
        var movableLB = movableLT.clone();
        movableLB.scale(1, -1, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0));
        // Rotate the movable parts.
        var leftClamping = appearance.leftClamping - 10;
        var rightClamping = appearance.rightClamping - 10;
        movableRT.rotate(rightClamping, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(50, -15));
        movableRB.rotate(-rightClamping, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(50, 15));
        movableLT.rotate(-leftClamping, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-50, -15));
        movableLB.rotate(leftClamping, Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(-50, 15));
        graphic.insertChildren(0, [movableLT, movableRT, movableLB, movableRB]);
        // Center pivot
        var pivot = Object(apparatus_library_clamp__WEBPACK_IMPORTED_MODULE_1__["createBolt"])();
        graphic.addChild(pivot);
        graphic.scale(appearance.scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            pivot: Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0),
            snapping: { type: "attachable", at: Object(_common__WEBPACK_IMPORTED_MODULE_3__["P"])(0, 0) }
        };
    };
    BuretteHolder.properties = {
        label: "Burette Holder",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1,
            leftClamping: 20,
            rightClamping: 20,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.7, max: 1.1, step: 0.01, unit: "%"
            },
            {
                spec: "slider", key: "leftClamping", label: "Left Clamp",
                min: 0, max: 30, step: 0.5
            },
            {
                spec: "slider", key: "rightClamping", label: "Right Clamp",
                min: 0, max: 30, step: 0.5
            },
        ],
    };
    return BuretteHolder;
}());

function createRubber(p) {
    return paper__WEBPACK_IMPORTED_MODULE_2__["Shape"].Circle(p, 8)
        .withFill(rubberFillColor)
        .withStroke("thinner", rubberStrokeColor);
}


/***/ }),

/***/ "w7zt":
/*!***********************************!*\
  !*** ./src/components/select.tsx ***!
  \***********************************/
/*! exports provided: Select */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Select", function() { return Select; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tiers_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tiers/context */ "tya1");
// Component for group of radios


var TIER_VALUE_PLACEHOLDER = "____LOCKED_ITEM____";
var Select = function (props) {
    var _a;
    var tiers = react__WEBPACK_IMPORTED_MODULE_0__["useContext"](tiers_context__WEBPACK_IMPORTED_MODULE_1__["TierContext"]);
    function onChange(e) {
        if (e.target.value === TIER_VALUE_PLACEHOLDER) {
            tiers.popup("PP:" + props.id);
            return;
        }
        props.onSelectChange(props.value, e.target.value);
    }
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("select", { className: (_a = "custom-select " + props.extraClass) !== null && _a !== void 0 ? _a : "", id: props.id, value: props.value, onChange: function (e) { return onChange(e); } }, props.options.map(function (options) {
        return tiers.allow(options) ?
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("option", { key: options.value, value: options.value }, options.label)
            : react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("option", { key: options.value, value: TIER_VALUE_PLACEHOLDER },
                options.label,
                " - \u26A1");
    }));
};


/***/ }),

/***/ "w91z":
/*!****************************!*\
  !*** ./src/text/render.ts ***!
  \****************************/
/*! exports provided: AdvancedText */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdvancedText", function() { return AdvancedText; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var editing_interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! editing/interaction */ "hXn/");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};




var DEBUG_LOGS = false;
var DEBUG_CURSOR = false;
/** Spacing between lines, as a multiple of font size. */
var LINE_SPACING = 1.25;
/**
 * Class for rendering advanced text.
 *
 * Underneath, it opaquely uses Paper.js's PointText and Groups.
 * For performance reasons, these may be reused. The internal
 * paper structure should not be messed with.
 */
var AdvancedText = /** @class */ (function () {
    function AdvancedText(container) {
        this.container = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]();
        this.localAlignmentBounds = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, 0, 0, 0);
        this.pointTextRecycler = new PointTextRecycler();
        this.container = container !== null && container !== void 0 ? container : new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]();
        this.container.applyMatrix = false;
        this.container.selectedColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].selectionGreen;
    }
    /** Constructor that allows the container to be interactable. */
    AdvancedText.withInteraction = function (interaction) {
        var interactableGroupClass = Object(editing_interaction__WEBPACK_IMPORTED_MODULE_1__["Interactable"])(paper__WEBPACK_IMPORTED_MODULE_3__["Group"], interaction);
        return new AdvancedText(new interactableGroupClass());
    };
    AdvancedText.prototype.setText = function (text, style) {
        var _a;
        // First recycle all current items.
        (_a = this.pointTextRecycler).recycle.apply(_a, this.container.children);
        // Empty text leads to rendering bugs. If the text has no segments, render
        // a space.
        if (text.segments.length == 0) {
            text.segments.push({ type: "normal", text: " " });
        }
        if (text.segments.length == 1 && text.segments[0].type == "normal" && text.segments[0].text == "") {
            text.segments[0].text = " ";
        }
        // Convert style to internal style.
        var internalStyle = __assign(__assign({}, style), { justification: "left" });
        // Set up tracking of lines so that we can do text align properly at the end.
        var lines = [];
        var maxLineWidth = 0;
        var cursor = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
        for (var _i = 0, _b = text.segments; _i < _b.length; _i++) {
            var segment = _b[_i];
            if (DEBUG_CURSOR) {
                var point = paper__WEBPACK_IMPORTED_MODULE_3__["Shape"].Circle(cursor, 5.0);
                point.fillColor = "#ff0000";
                this.container.addChild(point);
            }
            if (segment.type == "newline") {
                var lineWidth_1 = cursor.x;
                lines.push([this.container.children.length, lineWidth_1]);
                maxLineWidth = Math.max(maxLineWidth, lineWidth_1);
            }
            var items = renderSegment(segment, cursor, this.pointTextRecycler, internalStyle);
            if (items.length > 0) {
                // Check length as newlines don't return anything.
                this.container.addChildren(items);
            }
        }
        // Track the last line.
        var lineWidth = cursor.x;
        lines.push([this.container.children.length, lineWidth]);
        maxLineWidth = Math.max(maxLineWidth, lineWidth);
        // Iterate through children and align each line to match alignment.
        if (style.textAlign == "left" || lines.length == 1) {
            // Nothing to do, by default, we left-align. Also if the text
            // consists of 1 line, nothing to do either.
        }
        else {
            var i = 0;
            for (var _c = 0, lines_1 = lines; _c < lines_1.length; _c++) {
                var _d = lines_1[_c], maxIndex = _d[0], lineWidth_2 = _d[1];
                // If this is the longest line, nothing to do.
                if (lineWidth_2 == maxLineWidth) {
                    i = maxIndex;
                    continue;
                }
                // Compute gap.
                var gap = maxLineWidth - lineWidth_2;
                if (style.textAlign == "center")
                    gap /= 2.0;
                // Shift all elements on the line by the gap.
                while (i < maxIndex) {
                    this.container.children[i].position.x += gap;
                    i++;
                }
            }
        }
        // Pre-compute alignment bounds.
        // For line height, don't quite take the full font-size.
        var lineHeight = style.fontSize * 0.7;
        var lineSpacing = LINE_SPACING * style.fontSize;
        this.localAlignmentBounds = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["R"])(0, -lineHeight, maxLineWidth, lineHeight + (lines.length - 1) * lineSpacing);
    };
    AdvancedText.prototype.setPosition = function (x, y) {
        this.container.position = new paper__WEBPACK_IMPORTED_MODULE_3__["Point"](x, y);
    };
    Object.defineProperty(AdvancedText.prototype, "bounds", {
        get: function () {
            return this.container.bounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AdvancedText.prototype, "alignmentBounds", {
        get: function () {
            // Return rectangle for text, ignoring subscripts etc.
            var origin = this.container.localToGlobal(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0));
            var alignmentBounds = this.localAlignmentBounds.clone();
            alignmentBounds.point.x += origin.x;
            alignmentBounds.point.y += origin.y;
            return alignmentBounds;
        },
        enumerable: false,
        configurable: true
    });
    AdvancedText.prototype.remove = function () {
        this.pointTextRecycler.dispose();
        this.container.remove();
    };
    return AdvancedText;
}());

/**
 * Recycles PointText instances. To put stale instances into the recycle,
 * use recycle(). To request a recycled item, use request(). If the recycler
 * has run out of recycled instances, a new instance is returned.
 *
 * Note recycled instances are returned without modification and so all
 * relevant properties must be set of them during use.
 */
var PointTextRecycler = /** @class */ (function () {
    function PointTextRecycler() {
        this.recycled = [];
    }
    PointTextRecycler.prototype.recycle = function () {
        var _a;
        var items = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            items[_i] = arguments[_i];
        }
        for (var _b = 0, items_1 = items; _b < items_1.length; _b++) {
            var item = items_1[_b];
            item.remove();
        }
        (_a = this.recycled).push.apply(_a, items);
    };
    PointTextRecycler.prototype.request = function (position) {
        // REMEMBER: Set position only once, before text is set!
        var item = this.recycled.pop();
        if (item) {
            item.pivot = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
            item.position = position;
            return item;
        }
        var newInstance = new paper__WEBPACK_IMPORTED_MODULE_3__["PointText"](position);
        // By setting the pivot we ensure the set
        // position does not move around.
        newInstance.pivot = position;
        newInstance.selectedColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["SharedColors"].selectionGreen;
        return newInstance;
    };
    PointTextRecycler.prototype.dispose = function () {
        for (var _i = 0, _a = this.recycled; _i < _a.length; _i++) {
            var recycled = _a[_i];
            recycled.remove();
        }
        this.recycled.length = 0;
    };
    return PointTextRecycler;
}());
/**
 * Renders a segment, returning items.
 * @param cursor Position to render at. Must be updated after rendering.
 */
function renderSegment(segment, cursor, pointTextRecycler, style) {
    var fontSize = style.fontSize;
    switch (segment.type) {
        case "normal":
        case "subscript":
        case "superscript":
            var pointText = pointTextRecycler.request(cursor);
            if (DEBUG_LOGS)
                Object(log__WEBPACK_IMPORTED_MODULE_2__["clog"])("before: ", pointText.position);
            pointText.content = segment.text;
            pointText.style = style;
            pointText.fontSize = fontSize;
            if (DEBUG_LOGS)
                Object(log__WEBPACK_IMPORTED_MODULE_2__["clog"])("after: ", pointText.position);
            if (segment.type == "subscript") {
                formatSubscript(pointText, style);
            }
            else if (segment.type == "superscript") {
                formatSuperscript(pointText, style);
            }
            cursor.x += pointText.bounds.width;
            return [pointText];
        case "subsuperscript":
            var superText = pointTextRecycler.request(cursor);
            superText.content = segment.super;
            var subText = pointTextRecycler.request(cursor);
            subText.content = segment.sub;
            formatSuperscript(superText, style);
            formatSubscript(subText, style);
            cursor.x += Math.max(superText.bounds.width, subText.bounds.width);
            return [subText, superText];
        case "newline":
            cursor.x = 0;
            cursor.y += style.fontSize * LINE_SPACING;
            return [];
    }
}
function formatSubscript(text, style) {
    text.style = style;
    text.fontSize = style.fontSize * 0.75;
    text.position.y += style.fontSize * 0.27;
}
function formatSuperscript(text, style) {
    text.style = style;
    text.fontSize = style.fontSize * 0.75;
    text.position.y -= style.fontSize * 0.42;
}


/***/ }),

/***/ "wOKs":
/*!***************************************************!*\
  !*** ./src/apparatus/library/accessories/wool.ts ***!
  \***************************************************/
/*! exports provided: CottonWool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CottonWool", function() { return CottonWool; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var CottonWool = /** @class */ (function () {
    function CottonWool() {
    }
    CottonWool.prototype.render = function (appearance) {
        var path = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-15, -20], [-10, -1], [7, -9]], [[11, -23], [0, -5], [10, 4]], [[21, 3], [6, -7], [4, 11]], [[8, 28], [20, 3], [-13, 8]], [[-17, 7], [-1, 14], [-13, -5]]));
        path.closePath();
        var stroke = appearance.wet ? "#8596ad" : "#aaaaaa";
        var outside = appearance.wet ? "#b1c2d8" : "#eeeeee";
        var inside = appearance.wet ? "#dde2e9" : "#ffffff";
        var outline = path.clone();
        outline.withStroke(Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["strokeWidth"])("thin"), stroke);
        path.setRadialGradientFill([[inside, 0.6], [outside, 1.0]]);
        path.scale(appearance.scale / 2);
        outline.scale(appearance.scale / 2);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([path, outline]);
        path.applyMatrix = false;
        graphic.scale(appearance.squish, 1.0);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape()
        };
    };
    CottonWool.properties = {
        label: "Cotton Wool",
        canContainLiquids: false,
        defaultAppearance: {
            scale: 1.0,
            squish: 1.0,
            wet: false
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.5, max: 2.0, step: 0.01, unit: "%"
            },
            {
                spec: "slider", key: "squish", label: "Squish",
                min: 0.4, max: 1.0, step: 0.01
            },
            {
                spec: "checkbox", key: "wet", label: "Wet"
            }
        ],
    };
    return CottonWool;
}());



/***/ }),

/***/ "wXI6":
/*!************************************************!*\
  !*** ./src/apparatus/library/shapes/sphere.ts ***!
  \************************************************/
/*! exports provided: Sphere */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sphere", function() { return Sphere; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Sphere = /** @class */ (function () {
    function Sphere() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 5, maxX: 400,
                minY: 0, maxY: 0,
                toAppearance: function (p) { return ({
                    radius: p.x
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.radius, 0); },
                scale: 1.0,
            }
        ];
    }
    Sphere.prototype.render = function (appearance) {
        var radius = appearance.radius, shading = appearance.shading;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Circle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0), radius);
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyCustom(appearance, function (fill) {
            graphic.fillColor = new paper__WEBPACK_IMPORTED_MODULE_2__["Color"](new paper__WEBPACK_IMPORTED_MODULE_2__["Gradient"](shadingGradient(shading, fill), true), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(-radius / 2, -radius / 2), Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 1.5 * radius).rotate(45));
        }, function (width, stroke) {
            graphic.withStroke(width, stroke);
        });
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic),
        };
    };
    Sphere.properties = {
        label: "Sphere",
        canContainLiquids: false,
        defaultAppearance: __assign(__assign({}, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance), { shading: "smooth", radius: 50 }),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "radio", key: "shading", label: "Shading",
                options: [
                    { value: "smooth", label: "Smooth" },
                    { value: "hard", label: "Hard" },
                ],
            }
        ]),
    };
    return Sphere;
}());

function shadingGradient(shading, fill) {
    switch (shading) {
        case "smooth":
            return [
                [fill.color().ladd(35).hex(), 0.0],
                [fill, 0.9],
                [fill.color().ladd(-10).hex(), 1.0],
            ];
        case "hard":
            return [
                [fill.color().ladd(35).hex(), 0.3],
                [fill, 0.7],
                [fill.color().ladd(-10).hex(), 0.8],
            ];
    }
}


/***/ }),

/***/ "wt1j":
/*!*******************************!*\
  !*** ./src/api/auth/types.ts ***!
  \*******************************/
/*! exports provided: LOGGED_OUT_STATE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOGGED_OUT_STATE", function() { return LOGGED_OUT_STATE; });
var LOGGED_OUT_STATE = {
    state: "logged_out"
};


/***/ }),

/***/ "wwKz":
/*!************************************!*\
  !*** ./src/apparatus/component.ts ***!
  \************************************/
/*! exports provided: ApparatusComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApparatusComponent", function() { return ApparatusComponent; });
/* harmony import */ var apparatus_debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/debug */ "/2cN");
/* harmony import */ var apparatus_driver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/driver */ "ScPQ");
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! apparatus/svg */ "5L+D");
/* harmony import */ var editing_interaction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! editing/interaction */ "hXn/");
/* harmony import */ var editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! editing/multilayerliquids */ "BpvS");
/* harmony import */ var editing_snapping_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! editing/snapping/type */ "p/3Y");
/* harmony import */ var editing_snapping_visualise__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! editing/snapping/visualise */ "pHOY");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var vars__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! vars */ "nHh6");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./common */ "rTtD");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};














var DEBUG_REDRAWS = false;
/**
 * React component for placing and rendering an apparatus. Every
 * apparatus that is displayed on screen is wrapped by this component.
 * It handles properties common to all apparatus such as
 * rotation, hit targets, liquids etc.
 *
 * Rendering is delegated to a specific sublcass of Apparatus, based on
 * the type of apparatus.
 */
var ApparatusComponent = /** @class */ (function (_super) {
    __extends(ApparatusComponent, _super);
    function ApparatusComponent(props) {
        var _this = _super.call(this, props) || this;
        /** Interactable klass, to wrap hit shapes. */
        _this.hitShapeWrapperKlass = Object(editing_interaction__WEBPACK_IMPORTED_MODULE_5__["Interactable"])(paper.Group, Object(editing_interaction__WEBPACK_IMPORTED_MODULE_5__["SelectAndMove"])(_this));
        _this.id = props.id;
        _this.item = new paper.Group();
        _this.vizLayer = new paper.Group();
        _this.hitShapeLayer = new paper__WEBPACK_IMPORTED_MODULE_10__["Group"]();
        _this.apparatusType = props.type;
        // Instantiate apparatus instance.
        var apparatusKlass = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_2__["apparatusClass"])(_this.apparatusType);
        _this.apparatus = new apparatusKlass();
        // Add layers together.
        _this.item.addChild(_this.hitShapeLayer);
        // Set up initial state. Since this is the first time the
        // item is drawn, we also need to re-render the apparatus.
        _this.needsGraphicsRerender = true;
        _this.needsLiquidUpdate = true;
        _this.state = {
            position: { x: _this.props.x, y: _this.props.y },
            rotation: _this.props.rotation,
            liquid: _this.props.liquid,
            appearance: _this.props.appearance,
        };
        // Set up item.
        _this.item.applyMatrix = false;
        _this.vizLayer.applyMatrix = false;
        // Set up layer for storing drivers.
        var drivers = _this.apparatus.drivers;
        _this.setUpDriversLayer(drivers);
        if (DEBUG_REDRAWS)
            Object(log__WEBPACK_IMPORTED_MODULE_9__["clog"])("Constructed: ", _this.item);
        return _this;
    }
    ApparatusComponent.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {
        // Reset state.
        // Note how redrawNeeded is computed: we want to redraw when
        // the apparatus appearance attributes have changed. We compare
        // the upcoming props with the current state (not props!) because
        // the currently drawn image is based on the state.
        // Note that we first compare if it's the exact same instance, then
        // we do deep equals using JSON.stringify() because I am lazy.
        // Comparison by "==" does not work: {a:1} == {a:1} is false.
        var sameAppearance = this.state.appearance === nextProps.appearance ||
            JSON.stringify(this.state.appearance) == JSON.stringify(nextProps.appearance);
        this.needsGraphicsRerender = !sameAppearance;
        var sameLiquid = sameAppearance &&
            (this.state.liquid === nextProps.liquid ||
                JSON.stringify(this.state.liquid) == JSON.stringify(nextProps.liquid));
        this.needsLiquidUpdate = !sameLiquid;
        // Update driver handles.
        this.driverHandles.forEach(function (h) { return h.onPropsChanged(nextProps.appearance); });
        this.setState({
            position: { x: nextProps.x, y: nextProps.y },
            rotation: nextProps.rotation,
            liquid: nextProps.liquid,
            appearance: nextProps.appearance,
        });
    };
    ApparatusComponent.prototype.componentWillUnmount = function () {
        this.item.remove();
        this.vizLayer.remove();
        this.hitShapeLayer.remove();
        if (this.liquidLayer != null) {
            this.liquidLayer.remove();
        }
    };
    ApparatusComponent.prototype.ensureSnappingLayer = function () {
        if (this.snappingLayer === undefined) {
            var snappingLayer = new paper.Group();
            this.vizLayer.addChild(snappingLayer);
            this.snappingLayer = snappingLayer;
        }
    };
    Object.defineProperty(ApparatusComponent.prototype, "currentPosition", {
        /** Returns the current position, based on app props. */
        get: function () {
            return new paper.Point(this.props.x, this.props.y);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "visiblePosition", {
        /** Returns actual position, based on drawn graphic. */
        get: function () {
            return new paper.Point(this.item.position.x, this.item.position.y);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "currentRotation", {
        /** Returns the current rotation, based on app state, in degrees. */
        get: function () {
            return this.props.rotation;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "visibleRotation", {
        /** Returns the actual rotation, based on drawn graphic, in degrees. */
        get: function () {
            return this.item.rotation;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "bounds", {
        get: function () {
            return this.item.strokeBounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "alignmentBounds", {
        get: function () {
            return this.bounds;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "isSelected", {
        get: function () {
            return this.props.selected;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ApparatusComponent.prototype, "parentGroup", {
        get: function () {
            return this.props.parentGroup;
        },
        enumerable: false,
        configurable: true
    });
    ApparatusComponent.prototype.forceCompleteRerender = function () {
        this.needsGraphicsRerender = true;
        this.needsLiquidUpdate = true;
    };
    ApparatusComponent.prototype.setPositionDelta = function (delta) {
        this.setState({
            position: {
                x: this.props.x + delta.x,
                y: this.props.y + delta.y,
            }
        });
    };
    ApparatusComponent.prototype.setRotationDelta = function (delta, pivot) {
        var position = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["Pp"])(this.props);
        var newPosition = position.rotate(delta, pivot);
        this.setState({
            position: newPosition,
            rotation: this.props.rotation + delta,
        });
    };
    /** Updates current apparatus appearance state. */
    ApparatusComponent.prototype.updateAppearanceAttributes = function (key, value) {
        // Make a copy of the current appearance state, overlay passed
        // attributes and then set it as the new state.
        // Appearance changes will always need a redraw.
        var newAppearance = __assign({}, this.state.appearance);
        newAppearance[key] = value;
        this.needsGraphicsRerender = true;
        this.needsLiquidUpdate = true;
        this.setState({
            appearance: newAppearance
        });
    };
    /** Updates current apparatus appearance state. */
    ApparatusComponent.prototype.updateMultipleAppearanceAttributes = function (partialAppearance) {
        var newAppearance = __assign(__assign({}, this.state.appearance), partialAppearance);
        this.needsGraphicsRerender = true;
        this.needsLiquidUpdate = true;
        this.setState({
            appearance: newAppearance
        });
    };
    /** Helper for updating liquid state */
    ApparatusComponent.prototype.updateLiquidData = function (liquidData) {
        this.needsLiquidUpdate = true;
        this.setState({
            liquid: liquidData
        });
    };
    /** Converts a point in local coordinate to global. */
    ApparatusComponent.prototype.localToGlobal = function (p) {
        return p
            .subtract(this.item.pivot)
            .multiply([this.props.flipped ? -1 : 1, 1])
            .rotate(this.props.rotation)
            .add(this.item.position);
    };
    // Possibly do this only once!
    ApparatusComponent.prototype.recalculateGlobalSnapping = function () {
        var _this = this;
        if (this.snapping.length === 0) {
            return [];
        }
        return this.snapping.map(function (s) {
            return Object(editing_snapping_type__WEBPACK_IMPORTED_MODULE_7__["transform"])(s, _this.props.flipped, function (p) { return _this.localToGlobal(p); });
        });
    };
    ApparatusComponent.prototype.setUpSnappingVisualisationLayer = function () {
        var _a, _b, _c;
        var hasSnappingData = this.snapping.length > 0;
        if (hasSnappingData) {
            this.ensureSnappingLayer();
            (_a = this.snappingLayer) === null || _a === void 0 ? void 0 : _a.removeChildren();
        }
        else {
            // Remove layer containing the snap points.
            (_b = this.snappingLayer) === null || _b === void 0 ? void 0 : _b.removeChildren();
            (_c = this.snappingLayer) === null || _c === void 0 ? void 0 : _c.remove();
            this.snappingLayer = undefined;
        }
    };
    /** Note this is an expensive operation! */
    ApparatusComponent.prototype.setUpDriversLayer = function (drivers) {
        var _a;
        if (!drivers || drivers.length == 0) {
            // Clear all drivers.
            (_a = this.driversLayer) === null || _a === void 0 ? void 0 : _a.remove();
            this.driversLayer = undefined;
            this.driverHandles = [];
            return;
        }
        if (!this.driversLayer) {
            var driversLayer = new paper.Group();
            this.vizLayer.addChild(driversLayer);
            this.driverHandles = [];
            this.driversLayer = driversLayer;
        }
        for (var _i = 0, drivers_1 = drivers; _i < drivers_1.length; _i++) {
            var driver = drivers_1[_i];
            switch (driver.type) {
                case "rectangle":
                    var driverHandle = Object(apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["createRectangleDriver"])(driver, this);
                    this.driverHandles.push(driverHandle);
                    this.driversLayer.addChild(driverHandle.handle);
            }
        }
    };
    ApparatusComponent.prototype.render = function () {
        var _this = this;
        var _a, _b, _c, _d;
        var watermarkPosition;
        // Render apparatus.
        if (this.needsGraphicsRerender) {
            if (DEBUG_REDRAWS)
                Object(log__WEBPACK_IMPORTED_MODULE_9__["clog"])("Redraw: ", this.item);
            this.needsGraphicsRerender = false;
            var _e = this.apparatus.render(this.state.appearance), graphic = _e.graphic, pivot = _e.pivot, xray = _e.xray, hitShape = _e.hitShape, liquidMask = _e.liquidMask, snapping = _e.snapping, watermark = _e.watermark;
            // Watermark position is used later.
            watermarkPosition = watermark;
            if (this.graphicLayer != null) {
                this.graphicLayer.replaceWith(graphic);
            }
            else {
                this.item.insertChild(0, graphic);
            }
            this.graphicLayer = graphic;
            // Set up Pivot if specified, otherwise take center.
            var mainPivot = pivot ? pivot : graphic.bounds.center;
            this.item.pivot = mainPivot;
            this.vizLayer.pivot = this.item.pivot;
            Object(apparatus_debug__WEBPACK_IMPORTED_MODULE_0__["drawPivotAndCenter"])(this.item, "orange");
            // Update Xray.
            if (xray) {
                if (!this.xrayLayer) {
                    this.xrayLayer = new paper__WEBPACK_IMPORTED_MODULE_10__["Group"]();
                    this.vizLayer.insertChild(0, this.xrayLayer);
                }
                this.xrayLayer.removeChildren();
                this.xrayLayer.addChild(xray);
                this.xrayLayer.withStroke(2.0, apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["UIColors"].hintFill);
            }
            else {
                (_a = this.xrayLayer) === null || _a === void 0 ? void 0 : _a.remove();
                this.xrayLayer = undefined;
            }
            // Update Hit shape.
            this.hitShapeLayer.removeChildren();
            if (hitShape instanceof paper.Shape || hitShape instanceof paper.Path) {
                if (hitShape instanceof paper.Path && !hitShape.closed) {
                    hitShape.closePath();
                }
                this.hitShapeLayer.addChild(new (Object(editing_interaction__WEBPACK_IMPORTED_MODULE_5__["Interactable"])(paper.Group, Object(editing_interaction__WEBPACK_IMPORTED_MODULE_5__["SelectAndMove"])(this)))([hitShape]));
            }
            else {
                this.hitShapeLayer.addChildren(hitShape.map(function (h) { return new _this.hitShapeWrapperKlass([h]); }));
            }
            // Update liquid layer.
            if (liquidMask != null) {
                // Initialise the liquid layer.
                var liquidLayer = new paper.Group();
                liquidLayer.applyMatrix = false;
                liquidLayer.clipped = vars__WEBPACK_IMPORTED_MODULE_12__["Debug"].LIQUID_MASK ? false : true;
                // Insert layer into hierarchy.
                if (this.liquidLayer != null) {
                    this.liquidLayer.replaceWith(liquidLayer);
                }
                else {
                    this.item.insertChild(0, liquidLayer);
                }
                this.liquidLayer = liquidLayer;
                // Add liquid mask.
                liquidLayer.addChild(liquidMask);
                liquidMask.applyMatrix = false;
                liquidMask.clipMask = vars__WEBPACK_IMPORTED_MODULE_12__["Debug"].LIQUID_MASK ? false : true;
                liquidMask.fillColor = "red";
                // Set up positions of items.
                liquidLayer.pivot = mainPivot;
                liquidMask.pivot = mainPivot;
                // Create liquid.
                var liquid = paper.Shape.Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["R"])(0, 0, 100.0, 100.0));
                liquid.fillColor = new paper.Color(0.5, 0.8, 0.9, 0.3);
                liquid.strokeWidth = Object(_common__WEBPACK_IMPORTED_MODULE_13__["strokeWidth"])("liquid");
                // WEIRD!!! If strokeScaling is disabled, then somehow gradients
                // also stop being relative to the item and are instead relative
                // to global coordinates! WTF?
                // liquid.strokeScaling = false
                liquid.applyMatrix = false;
                liquid.position = mainPivot;
                liquid.pivot = new paper.Point(0, 0);
                liquidLayer.addChild(liquid);
                Object(apparatus_debug__WEBPACK_IMPORTED_MODULE_0__["drawPivotAndCenter"])(liquidLayer, "blue", 8.0);
            }
            else {
                // Remove the liquid layer.
                (_b = this.liquidLayer) === null || _b === void 0 ? void 0 : _b.removeChildren();
                (_c = this.liquidLayer) === null || _c === void 0 ? void 0 : _c.remove();
                this.liquidLayer = undefined;
            }
            // Snap points.
            this.snapping = snapping ? ((snapping instanceof Array) ? snapping : [snapping]) : [];
            // Create a layer containing snap points.
            this.setUpSnappingVisualisationLayer();
            // Set other flags.
            this.updateSnapVisualisationNeeded = true;
            // Update drivers.
            this.driverHandles.forEach(function (h) { return h.onStateChanged(_this.state.appearance); });
        }
        // Set position
        this.item.position.x = this.state.position.x;
        this.item.position.y = this.state.position.y;
        this.vizLayer.position.x = this.state.position.x;
        this.vizLayer.position.y = this.state.position.y;
        // Flip.
        this.item.scaling = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["P"])(this.props.flipped ? -1 : 1, 1);
        this.vizLayer.scaling = this.item.scaling;
        // Set rotation
        this.item.rotation = this.state.rotation;
        this.vizLayer.rotation = this.state.rotation;
        // Update position of snap points.
        this.globalSnapping = this.recalculateGlobalSnapping();
        // Change selection state.
        if (vars__WEBPACK_IMPORTED_MODULE_12__["Debug"].SHAPES) {
            this.graphicLayer.fullySelected = this.props.selected;
        }
        // Show hit shape if selected.
        this.hitShapeLayer.fillColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].selectionGreen + '80';
        this.hitShapeLayer.strokeColor = apparatus_library_common__WEBPACK_IMPORTED_MODULE_3__["SharedColors"].selectionGreen;
        if (this.props.selected) {
            this.hitShapeLayer.strokeWidth = 2.0;
            this.hitShapeLayer.opacity = 0.5;
            this.hitShapeLayer.blendMode = "normal";
            if (this.props.liquid) {
                this.hitShapeLayer.fillColor = "#00000001";
            }
        }
        else {
            this.hitShapeLayer.strokeWidth = 0.0;
            this.hitShapeLayer.opacity = 0.000001;
            this.hitShapeLayer.blendMode = "normal";
        }
        if (this.driversLayer) {
            this.driversLayer.visible = this.props.selected;
        }
        if (this.xrayLayer) {
            this.xrayLayer.visible = this.props.selected;
        }
        // if (this.props.selected) {
        //     this.item.strokeColor = SharedColors.selectionGreen
        // } else {
        //     this.item.strokeColor = null
        // }
        // Update liquid.
        if (this.state.liquid && this.liquidLayer) {
            var liquidMaskItem = this.liquidLayer.children[0];
            var liquidShape = this.liquidLayer.children[1];
            var rotation = this.state.rotation * (this.props.flipped ? -1 : 1);
            var isRotationChanged = this.lastLiquidRotation != rotation;
            this.lastLiquidRotation = rotation;
            // Rotate the liquid layer back and then rotate the mask.
            this.liquidLayer.rotation = -rotation;
            liquidMaskItem.rotation = rotation;
            if (this.needsLiquidUpdate || isRotationChanged) {
                this.needsLiquidUpdate = false;
                // Update amount.
                var liquidAmount = this.state.liquid.amountRatio;
                if (liquidAmount > 0.001) {
                    var liquidBounds = liquidMaskItem.bounds;
                    // Calculate the height of the liquid.
                    var liquidHeight = Math.max(1, liquidAmount * liquidBounds.height - 2.0);
                    // // Adjustments to hide the stroke on all sides except top.
                    // liquidShape.bounds.width += 4
                    // liquidShape.bounds.x -= 2
                    // liquidShape.bounds.height += 2
                    liquidShape.size.height = liquidHeight;
                    liquidShape.size.width = liquidBounds.width;
                    liquidShape.bounds.bottom = liquidBounds.bottom;
                    liquidShape.bounds.left = liquidBounds.left;
                    liquidShape.visible = true;
                }
                else {
                    liquidShape.visible = false;
                }
                // Update color. Thist must be done after the liquid's
                // bounds have been updated, otherwise the colour "jumps".
                var mainLiquidColour = this.state.liquid.color.color().alpha(this.state.liquid.alpha).toString();
                if (this.state.liquid.layers.length > 0) {
                    liquidShape.setGradientFill("up", editing_multilayerliquids__WEBPACK_IMPORTED_MODULE_6__["MultiLiquid"].toGradientStops(this.state.liquid.layers, mainLiquidColour));
                }
                else {
                    liquidShape.fillColor = mainLiquidColour;
                }
                liquidShape.strokeColor = this.state.liquid.color;
            }
        }
        // Watermarking.
        if (this.props.isWatermarkEnabled) {
            this.graphicLayer.opacity = 0.5;
            if (!this.watermarkLayer) {
                this.watermarkLayer = apparatus_svg__WEBPACK_IMPORTED_MODULE_4__["SVG"].boostBadge();
                this.vizLayer.addChild(this.watermarkLayer);
            }
            if (watermarkPosition) {
                this.watermarkLayer.position = watermarkPosition;
            }
        }
        else {
            this.graphicLayer.opacity = 1.0;
            (_d = this.watermarkLayer) === null || _d === void 0 ? void 0 : _d.remove();
            this.watermarkLayer = undefined;
        }
        // Hit shape debugging.
        if (vars__WEBPACK_IMPORTED_MODULE_12__["Debug"].HIT_SHAPES) {
            this.hitShapeLayer.fillColor = "red";
            this.hitShapeLayer.opacity = 0.8;
        }
        return null;
    };
    ApparatusComponent.prototype.componentDidUpdate = function (prevProps, prevState) {
        if (prevState.visualiseSnapping != this.state.visualiseSnapping) {
            this.updateSnapVisualisationNeeded = true;
        }
        // Display snap points.
        this.maybeRenderSnappings();
    };
    ApparatusComponent.prototype.maybeRenderSnappings = function () {
        if (!this.snappingLayer)
            return;
        if (!this.updateSnapVisualisationNeeded)
            return;
        this.updateSnapVisualisationNeeded = false;
        this.snappingLayer.removeChildren();
        if (this.state.visualiseSnapping) {
            Object(editing_snapping_visualise__WEBPACK_IMPORTED_MODULE_8__["visualiseSnappings"])(this.snappingLayer, this.snapping, this.state.visualiseSnapping);
        }
    };
    return ApparatusComponent;
}(react__WEBPACK_IMPORTED_MODULE_11__["Component"]));



/***/ }),

/***/ "x9fu":
/*!********************************************************!*\
  !*** ./src/apparatus/library/measurement/manometer.ts ***!
  \********************************************************/
/*! exports provided: Manometer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Manometer", function() { return Manometer; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};




var Manometer = /** @class */ (function () {
    function Manometer() {
    }
    Manometer.prototype.render = function (appearance) {
        // Length above the bend.
        var length = appearance.size * 4;
        var diameter = 20;
        var innerRadius = appearance.size;
        var outerRadius = innerRadius + diameter;
        var outerShell = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-outerRadius, -length]], [[-outerRadius, 0], undefined, [0, outerRadius * 1.4]], [[outerRadius, 0], [0, outerRadius * 1.4]], [[outerRadius, -length]]));
        var innerShell = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-innerRadius, -length]], [[-innerRadius, 0], undefined, [0, innerRadius * 1.4]], [[innerRadius, 0], [0, innerRadius * 1.4]], [[innerRadius, -length]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(outerShell, innerShell);
        innerShell.reverse();
        var fluid = new (paper__WEBPACK_IMPORTED_MODULE_2__["Path"].bind.apply(paper__WEBPACK_IMPORTED_MODULE_2__["Path"], __spreadArrays([void 0], outerShell.segments.map(function (s) { return s.clone(); }), innerShell.segments.map(function (s) { return s.clone(); }))))();
        fluid.closePath();
        // Choose levels on either side. Keep it below length.
        var rightLevel = (appearance.balance + 1) / 2 * length;
        var leftLevel = (1 - (appearance.balance + 1) / 2) * length;
        fluid.segments[0].point.y = -leftLevel;
        fluid.segments[7].point.y = -leftLevel;
        fluid.segments[3].point.y = -rightLevel;
        fluid.segments[4].point.y = -rightLevel;
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setLiquidStyle"])(fluid, appearance.color);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([fluid, innerShell, outerShell]);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            watermark: graphic.bounds.bottomCenter,
        };
    };
    Manometer.properties = {
        label: "Manometer",
        canContainLiquids: false,
        defaultAppearance: {
            size: 40,
            color: apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["DEFAULT_LIQUID_DATA"].color,
            balance: 0.2,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 25, max: 60,
            },
            {
                spec: "slider", key: "balance", label: "Liquid balance",
                min: -1, max: 1, step: 0.01,
            },
            {
                spec: "color", key: "color", label: "Colour",
            }
        ],
    };
    return Manometer;
}());



/***/ }),

/***/ "xAtF":
/*!*****************************************************!*\
  !*** ./src/apparatus/library/devices/centrifuge.ts ***!
  \*****************************************************/
/*! exports provided: Centrifuge */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Centrifuge", function() { return Centrifuge; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/shapes/curve */ "t5XS");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);





var Centrifuge = /** @class */ (function () {
    function Centrifuge() {
    }
    Centrifuge.prototype.render = function (appearance) {
        var wall = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-87, 0], , [-73, 89]], [[-114, 160], [-59, -26], [50, 22]])).withStroke("thick").withFill("#ffffffe2");
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(wall);
        var lid = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, 0, 87 * 2, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].lightMetal.color()))
            .withStroke("thin");
        var lid2 = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(0, -20, 40, 15, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].BOTTOM_CENTER))
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].lightMetal.color()))
            .withStroke("thin");
        var motor = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[12, 0]], [[22, 59]], [[62, 100], , [-17, 2]], [[18, 104]], [[31, 123], , [24, 0]], [[79, 151], [0, -30]])).close()
            .withStroke("default", apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["SharedColors"].mediumMetal)
            .withGradientFill("right", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#cccccc".color(), 2));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(motor);
        motor.position.y += 72;
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([motor, wall, lid, lid2]);
        if (appearance.showArrow) {
            var arrowPath = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[116, 170], , [-39, 55]]));
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(arrowPath);
            var head = Object(apparatus_library_shapes_curve__WEBPACK_IMPORTED_MODULE_3__["drawArrowHead"])(arrowPath.segments[arrowPath.segments.length - 1], "handleIn", 16, { adjustAngle: -4 });
            var arrow = new paper__WEBPACK_IMPORTED_MODULE_4__["Group"]([arrowPath, head]).withStroke("thicker", "#407af3");
            graphic.addChild(arrow);
        }
        return {
            graphic: graphic,
            hitShape: graphic.bounds.toShape(),
            snapping: graphic.placeable(),
        };
    };
    Centrifuge.properties = {
        label: "Centrifuge",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: {
            showArrow: false
        },
        appearanceSpecs: [
            { spec: "checkbox", key: "showArrow", label: "Show", subLabel: "Arrow" },
        ],
    };
    return Centrifuge;
}());



/***/ }),

/***/ "xI9I":
/*!************************************************!*\
  !*** ./src/apparatus/library/shapes/cuboid.ts ***!
  \************************************************/
/*! exports provided: Cuboid */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cuboid", function() { return Cuboid; });
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};



var Cuboid = /** @class */ (function () {
    function Cuboid() {
        this.drivers = [
            {
                type: "rectangle",
                minX: 6, maxX: 600,
                minY: 8, maxY: 600,
                toAppearance: function (p) { return ({
                    height: p.y,
                    width: p.x
                }); },
                fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(a.width, a.height); },
                scale: 2.0,
            }
        ];
    }
    Cuboid.isBoostRequiredForAppearance = function (appearance) {
        // return appearance.shading === "3d"
        return false;
    };
    /**
            P6               P5
            +----------------+
            |                |
      P3+---+-----------+P2  |
        |               |    |
        |               |    |
        |               +----+ P4
        |               |
        |               |
        +---------------+
      PO                 P1

     */
    Cuboid.prototype.render = function (appearance) {
        var width = appearance.width, height = appearance.height, depth = appearance.depth;
        var depthVector = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(depth, -depth / 2);
        var p3 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, 0);
        var p0 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(0, height);
        var p1 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(width, height);
        var p2 = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(width, 0);
        var p6 = p3.add(depthVector);
        var p5 = p2.add(depthVector);
        var p4 = p1.add(depthVector);
        var frontWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p0),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p1),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p2),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p3),
        ]).close();
        var topWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p3),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p2),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p5),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p6),
        ]).close();
        var sideWall = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p1),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p4),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p5),
            new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p2),
        ]).close();
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_2__["Group"]([frontWall, topWall, sideWall]);
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].applyCustom(appearance, function (fill) {
            frontWall.fillColor = fill;
            topWall.fillColor = fill.color().ladd(5).string();
            sideWall.fillColor = fill.color().ladd(-5).string();
        }, function (width, stroke) {
            var outline = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"]([p0, p1, p4, p5, p6, p3].map(function (p) { return new paper__WEBPACK_IMPORTED_MODULE_2__["Segment"](p); }))
                .close()
                .withStroke(width, stroke);
            graphic.addChild(outline);
        });
        return {
            graphic: graphic,
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].bounds(graphic),
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_0__["P"])(width / 2, height / 2)
        };
    };
    Cuboid.properties = {
        label: "Cuboid",
        canContainLiquids: false,
        flippable: true,
        defaultAppearance: __assign(__assign({}, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].defaultAppearance), { width: 120, height: 100, depth: 50 }),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_1__["BasicShapes"].header,
            {
                spec: "slider", key: "depth", label: "Depth",
                min: 0, max: 200
            }
        ]),
    };
    return Cuboid;
}());



/***/ }),

/***/ "xSC3":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/distillation/oil_bubbler.ts ***!
  \***********************************************************/
/*! exports provided: OilBubbler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OilBubbler", function() { return OilBubbler; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_2__);



var OilBubbler = /** @class */ (function () {
    function OilBubbler() {
    }
    OilBubbler.prototype.render = function (appearance) {
        var body = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 60, 180, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER), 30);
        var inlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[-8, 10]], [[-8, -20], , [0, -8]], [[-20, -32], [8, 0]], [[-50, -32]], [[-50, -47]], [[-20, -47], , [18, 0]], [[8, -20], [0, -18]], [[8, 10]]));
        inlet.closePath();
        var outlet = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 60, 60, 12, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].CENTER_LEFT));
        var liquidMaskSubtract = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["R"])(0, 0, 100, 70, apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Pivot"].TOP_CENTER));
        var liquidMask = body.subtract(liquidMaskSubtract);
        var graphic = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["breakPathClosed"])(inlet.unite(body).unite(outlet), 3, 10);
        // Inner funnel
        var funnelR = new paper__WEBPACK_IMPORTED_MODULE_2__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["Segments"])([[30, 40], , [0, 15]], [[5, 70], [0, -15]], [[5, 145]]));
        var funnelL = funnelR.clone();
        funnelL.scale(-1, 1, Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(0, 0));
        graphic.addChildren([funnelR, funnelL]);
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["setDefaultStyle"])(graphic);
        return {
            graphic: graphic,
            liquidMask: liquidMask,
            hitShape: graphic.bounds.toShape(),
            snapping: [
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(-50, -39.5), facing: -90 },
                { type: "connectable", at: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_1__["P"])(60, 60), facing: 90 },
            ]
        };
    };
    OilBubbler.properties = {
        label: "Oil Bubbler",
        canContainLiquids: true,
        flippable: true,
        defaultAppearance: {},
        appearanceSpecs: [],
    };
    return OilBubbler;
}());



/***/ }),

/***/ "xa7k":
/*!**********************************!*\
  !*** ./src/editing/selection.ts ***!
  \**********************************/
/*! exports provided: Selected */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Selected", function() { return Selected; });
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var command_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! command/basic */ "WgaI");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var editing_grouping_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! editing/grouping/commands */ "lY6V");
/* harmony import */ var editing_grouping_operations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! editing/grouping/operations */ "VqZE");
/* harmony import */ var ext_array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ext/array */ "3pNw");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils */ "fdqv");
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};








/**
 * Stores data about currently selected items and decisions about
 * the behaviour of the app based on those items.
 */
var Selected = /** @class */ (function () {
    function Selected(items, arrows) {
        var _a, _b;
        this.items = items;
        this.arrows = arrows;
        // Join all items.
        var allItems = __spreadArrays(items, arrows);
        // Check for consistent type.
        this.sameApparatusType = (_a = items[0]) === null || _a === void 0 ? void 0 : _a.type;
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            if (item.type != items[0].type) {
                this.sameApparatusType = undefined;
                break;
            }
        }
        this.sameApparatusKind = ((_b = items[0]) === null || _b === void 0 ? void 0 : _b.type) ? Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(items[0].type).properties.kind : undefined;
        for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {
            var item = items_2[_c];
            if (Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(item.type).properties.kind !== Object(apparatus_library__WEBPACK_IMPORTED_MODULE_0__["apparatusClass"])(items[0].type).properties.kind) {
                this.sameApparatusKind = undefined;
                break;
            }
        }
        this.isItemsWithLiquidOnly = this.arrows.length == 0 && this.items.every(function (i) { return i.liquid !== undefined; });
        var itemsNotInGroups = [];
        var arrowsNotInGroups = [];
        var rootGroupIds = [];
        var rootGroups = [];
        for (var _d = 0, allItems_1 = allItems; _d < allItems_1.length; _d++) {
            var item = allItems_1[_d];
            if (item.parentGroup) {
                var rootGroup = Object(editing_grouping_operations__WEBPACK_IMPORTED_MODULE_4__["getRootGroup"])(item.parentGroup);
                if (!ext_array__WEBPACK_IMPORTED_MODULE_5__["Arrays"].includes(rootGroupIds, rootGroup.id)) {
                    rootGroupIds.push(rootGroup.id);
                    rootGroups.push(rootGroup);
                }
            }
            else {
                switch (item.id.type) {
                    case "apparatus":
                        itemsNotInGroups.push(item);
                        break;
                    case "arrow":
                        arrowsNotInGroups.push(item);
                        break;
                    case "group":
                        continue;
                }
            }
        }
        this.rootGroups = rootGroups;
        this.standaloneItems = itemsNotInGroups;
        this.standaloneArrows = arrowsNotInGroups;
    }
    Selected.prototype.getConsistentItemsLiquidColor = function () {
        var _a, _b, _c;
        var color = (_b = (_a = this.items[0].liquid) === null || _a === void 0 ? void 0 : _a.color) !== null && _b !== void 0 ? _b : "";
        if (this.items.length == 1)
            return color;
        for (var _i = 0, _d = this.items; _i < _d.length; _i++) {
            var item = _d[_i];
            if (((_c = item.liquid) === null || _c === void 0 ? void 0 : _c.color) !== color)
                return;
        }
        return color;
    };
    Object.defineProperty(Selected.prototype, "isEmpty", {
        get: function () {
            return this.items.length == 0 && this.arrows.length == 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "standaloneObjectsCount", {
        get: function () {
            return this.standaloneArrows.length + this.standaloneItems.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "groupsCount", {
        get: function () {
            return this.rootGroups.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "displayString", {
        /** Returns the display string, e.g. "2 groups & 1 item selected" */
        get: function () {
            if (this.groupsCount == 0) {
                return Object(utils__WEBPACK_IMPORTED_MODULE_7__["pluralize"])(this.standaloneObjectsCount, "item") + " selected";
            }
            if (this.standaloneObjectsCount == 0) {
                return Object(utils__WEBPACK_IMPORTED_MODULE_7__["pluralize"])(this.groupsCount, "group") + " selected";
            }
            return Object(utils__WEBPACK_IMPORTED_MODULE_7__["pluralize"])(this.groupsCount, "group") + " & " + Object(utils__WEBPACK_IMPORTED_MODULE_7__["pluralize"])(this.standaloneObjectsCount, "item") + " selected";
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "shouldAllowGrouping", {
        get: function () { return this.standaloneObjectsCount + this.groupsCount >= 2; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "shouldAllowUngrouping", {
        get: function () { return this.groupsCount == 1 && this.standaloneObjectsCount == 0; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Selected.prototype, "shouldAllowRegrouping", {
        get: function () {
            return (this.items.length == 1)
                && Selected.lastRegroupData.ids.length > 0
                && ext_array__WEBPACK_IMPORTED_MODULE_5__["Arrays"].includes(Selected.lastRegroupData.ids, this.items[0].id);
        },
        enumerable: false,
        configurable: true
    });
    /** Returns a command to group selected objects. Returns undefined on no-op. */
    Selected.prototype.createGroupObjectsCommand = function () {
        if (!this.shouldAllowGrouping)
            return;
        Selected.lastRegroupData.ids = [];
        var ids = __spreadArrays(this.rootGroups, this.standaloneArrows, this.standaloneItems).map(function (i) { return i.id; });
        return new editing_grouping_commands__WEBPACK_IMPORTED_MODULE_3__["GroupObjects"](ids);
    };
    /** Returns a command to ungroup selected objects. Returns undefined on no-op. */
    Selected.prototype.createUngroupObjectsCommand = function () {
        if (!this.shouldAllowUngrouping)
            return;
        Selected.lastRegroupData.ids = this.rootGroups[0].items;
        return new editing_grouping_commands__WEBPACK_IMPORTED_MODULE_3__["BreakGroup"](this.rootGroups[0]);
    };
    /** Returns a command to re-group selected item. Returns undefined on no-op. */
    Selected.prototype.createRegroupObjectsCommand = function () {
        if (!this.shouldAllowRegrouping)
            return;
        var existingIds = store_store__WEBPACK_IMPORTED_MODULE_6__["default"].filterExisting(Selected.lastRegroupData.ids);
        // Remove Ids of objects that have already been selected.
        var selecteIds = __spreadArrays(this.items, this.arrows).map(function (i) { return i.id; });
        var toSelectIds = existingIds.filter(function (id) { return !ext_array__WEBPACK_IMPORTED_MODULE_5__["Arrays"].includes(selecteIds, id); });
        Selected.lastRegroupData.ids = [];
        // Select unselected items and then regroup items.
        return new command_command__WEBPACK_IMPORTED_MODULE_2__["Sequence"]([
            new command_basic__WEBPACK_IMPORTED_MODULE_1__["Select"](toSelectIds),
            new editing_grouping_commands__WEBPACK_IMPORTED_MODULE_3__["GroupObjects"](existingIds)
        ]);
    };
    Selected.lastRegroupData = { ids: [] };
    return Selected;
}());



/***/ }),

/***/ "xhqc":
/*!*************************!*\
  !*** ./src/tutorial.ts ***!
  \*************************/
/*! exports provided: runTutorial */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "runTutorial", function() { return runTutorial; });
/* harmony import */ var _analytics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./analytics */ "s8ZI");
/* harmony import */ var _shim_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shim-types */ "c1LU");
// Tutorial


function runTutorial() {
    var stepsCompleted = 0;
    introJs()
        .setOptions({
        showStepNumbers: false,
        tooltipPosition: true,
        overlayOpacity: 0.5,
        nextLabel: "Next <i class='fa fa-arrow-right'></i>",
        prevLabel: "&nbsp;<i class='fa fa-arrow-left'></i>&nbsp;",
        hidePrev: true,
        hideNext: true,
        steps: [
            {
                element: "#sidebar",
                intro: "Start by adding apparatus here.",
                position: _shim_types__WEBPACK_IMPORTED_MODULE_1__["IntroJs"].Position.RIGHT
            },
            {
                element: "#apparatus-search",
                intro: "You can also search them by name."
            },
            {
                element: "#property-panel .content-container",
                intro: "You can modify properties of selected items from here."
            },
            {
                element: "#toolbox",
                intro: "Use tools to <br>- <b>select, move, rotate</b> items<br>- <b>pan</b> the workspace and <br>- <b>add arrows and labels</b>."
            },
            {
                element: "#history-toolbox",
                intro: "Undo/Redo from here."
            },
            {
                element: "#menu-export",
                intro: "Once done, download your diagram as an image.",
            },
            {
                element: "#cloud-menu",
                intro: "Save your diagram to the cloud, so you can come back to them later.",
            },
            {
                element: ".BeaconFabButtonFrame",
                intro: "That's it! If you run into problems or want to ask questions, send us feedback!",
                position: _shim_types__WEBPACK_IMPORTED_MODULE_1__["IntroJs"].Position.LEFT,
            }
        ]
    })
        .onchange(function () {
        stepsCompleted++;
    })
        .onexit(function () {
        Object(_analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Intro2", "Exit", stepsCompleted);
    })
        .oncomplete(function () {
        Object(_analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("Intro2", "Complete", 1);
    })
        .start();
    Object(_analytics__WEBPACK_IMPORTED_MODULE_0__["g"])("IntroClicked");
}


/***/ }),

/***/ "xx+b":
/*!***********************************************************!*\
  !*** ./src/apparatus/library/accessories/felt_tip_pen.ts ***!
  \***********************************************************/
/*! exports provided: FeltTipPen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeltTipPen", function() { return FeltTipPen; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/gradients */ "jf2x");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_3__);





var DEMO_SWATCHES = {
    'Black': "#555555",
    'Blue': '#307ed1',
    'Red': '#e33d4d',
    'Green': '#3ac433',
};
var FeltTipPen = /** @class */ (function () {
    function FeltTipPen() {
    }
    FeltTipPen.prototype.render = function (appearance) {
        var color = appearance.color, scale = appearance.scale;
        var body = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"].Rectangle(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["R"])(4, 0, 130, 20, apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Pivot"].CENTER_RIGHT), 4.0)
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder("#dddddd".color())).close();
        var top = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-1, 10]], [[6, 10]], [[10, 6]], [[18, 6]]));
        Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorY"])(top);
        top.close()
            .withGradientFill("down", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].cylinder(color.color().ladd(0.1)));
        var tip = new paper__WEBPACK_IMPORTED_MODULE_3__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[17, -5], , [6, 0]], [[28, 0]], [[17, 5], [6, 0]])).withGradientFill("up", apparatus_gradients__WEBPACK_IMPORTED_MODULE_1__["Gradients"].simple(color.color(), 15));
        var outline = Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["uniteAll"])(body, top, tip).withStroke("thinner");
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_3__["Group"]([body, top, tip, outline]);
        graphic.scale(scale);
        return {
            graphic: graphic,
            hitShape: graphic.bounds.expand(5).toShape()
        };
    };
    FeltTipPen.properties = {
        label: "Felt Tip Pen",
        canContainLiquids: false,
        defaultAppearance: {
            color: DEMO_SWATCHES['Red'],
            scale: 1.0
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "scale", label: "Scale",
                min: 0.8, max: 2.0, step: 0.1, unit: "%"
            },
            {
                spec: "color", key: "color", label: "Colour",
                swatches: DEMO_SWATCHES,
                demoSwatches: DEMO_SWATCHES,
                tier: "boost",
            }
        ],
    };
    return FeltTipPen;
}());



/***/ }),

/***/ "zFxe":
/*!****************************************************!*\
  !*** ./src/apparatus/library/decorative/powder.ts ***!
  \****************************************************/
/*! exports provided: Powder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Powder", function() { return Powder; });
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var random_random__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! random/random */ "PJ3I");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common */ "UCWy");



var Powder = /** @class */ (function () {
    function Powder() {
    }
    Powder.prototype.render = function (appearance) {
        var fillColor = appearance.color;
        var strokeColor = fillColor.color().darken(0.3).hex();
        var outline = createOutline(appearance);
        outline.closePath();
        if (appearance.shape != "round" && appearance.bottom == "round") {
            // Smooth the bottom by adding handles
            // on the first and last segment.
            outline.firstSegment.handleIn.set(0, 5);
            outline.lastSegment.handleOut.set(0, 5);
        }
        outline.withGradientFill("right-down", [
            [fillColor, 0.0],
            [fillColor.color().darken(0.1).hex(), 1.0]
        ]).withStroke("thinner", strokeColor);
        outline.scale(appearance.size / 1.5);
        var graphic;
        if (appearance.particles) {
            // Add particles by creating dots randomly within
            // the bounds of the graphic.
            graphic = new paper__WEBPACK_IMPORTED_MODULE_0__["Group"]([outline]);
            // Particle color: If the fill color is dark enough,
            // choose a light colour, otherwise choose the same
            // color as the stroke colour.
            var particleColor = fillColor.color().luminosity() > 0.1
                ? strokeColor
                : fillColor.color().lighten(0.2).hex();
            var r = new random_random__WEBPACK_IMPORTED_MODULE_1__["Random"]();
            var bounds = outline.bounds;
            for (var y = bounds.top; y <= bounds.bottom; y += 5) {
                for (var x = bounds.left; x <= bounds.right; x += 5) {
                    var position = Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(x, y).add(r.randomUnitValue(1.5));
                    if (!outline.contains(position))
                        continue;
                    var particle = paper__WEBPACK_IMPORTED_MODULE_0__["Shape"].Circle(position, 1.0);
                    particle.fillColor = particleColor;
                    graphic.addChild(particle);
                }
            }
        }
        else {
            graphic = outline;
        }
        return { graphic: graphic, hitShape: graphic.bounds.expand(10).toShape() };
    };
    Powder.properties = {
        label: "Powder pile",
        canContainLiquids: false,
        defaultAppearance: {
            size: 1.5,
            color: "#90cc89",
            shape: "smooth",
            bottom: "round",
            particles: true,
        },
        appearanceSpecs: [
            {
                spec: "slider", key: "size", label: "Size",
                min: 1.0, max: 5.0, step: 0.1,
            },
            {
                spec: "color", key: "color", label: "Colour",
            },
            {
                spec: "radio", key: "shape", label: "Shape",
                options: [
                    { value: "smooth", label: "Smooth" },
                    { value: "flat", label: "Flat" },
                    { value: "lumpy", label: "Lumpy" },
                    { value: "round", label: "Round" },
                ],
            },
            {
                spec: "radio", key: "bottom", label: "Bottom shape",
                options: [
                    { value: "round", label: "Round" },
                    { value: "flat", label: "Flat" },
                ],
                visible: function (a) { return a.shape === "lumpy" || a.shape === "smooth" || a.shape === "flat"; }
            },
            {
                spec: "checkbox", key: "particles", label: "Add particles"
            },
        ],
    };
    return Powder;
}());

function createOutline(apperance) {
    switch (apperance.shape) {
        case "lumpy":
            return createLumpyOutline();
        case "smooth":
            return createSimplePileOutline(10);
        case "flat":
            return createSimplePileOutline(5);
        case "round":
            return new paper__WEBPACK_IMPORTED_MODULE_0__["Path"].Circle(Object(_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, -10), 10);
    }
}
function createSimplePileOutline(height) {
    var outline = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0], undefined, [0, -height / 2]], [[10, -height], [-5, 0], [5, 0]], [[20, 0], [0, -height / 2]]));
    return outline;
}
function createLumpyOutline() {
    var outline = new paper__WEBPACK_IMPORTED_MODULE_0__["Path"](Object(_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[0, 0], undefined, [-5, -3]], [[3, -8], [-4, -2], [1, -7]], [[10, -10], [-2, -3], [2, -3]], [[17, -8], [-1, -7], [4, -2]], [[20, 0], [5, -3]]));
    return outline;
}


/***/ }),

/***/ "zJJ1":
/*!*********************************************!*\
  !*** ./src/layout/top_bar/button_group.tsx ***!
  \*********************************************/
/*! exports provided: ButtonGroup, Button */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ButtonGroup", function() { return ButtonGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Button", function() { return Button; });
/* harmony import */ var components_icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/icon */ "oh6M");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _view_tooltips__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../view/tooltips */ "6T3+");



/**
 * Group of buttons that are displayed together.
 */
var ButtonGroup = function (props) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "toolboxGroup", id: props.id },
    " ",
    props.children)); };
var Button = function (item) { return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onClick: function () { return item.onClick(); }, title: Object(_view_tooltips__WEBPACK_IMPORTED_MODULE_2__["formatTooltip"])(item.hint, item.shortcuts) },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](components_icon__WEBPACK_IMPORTED_MODULE_0__["Icon"], { name: item.icon, fullWidth: true }))); };


/***/ }),

/***/ "zTgj":
/*!***********************************************!*\
  !*** ./src/apparatus/library/shapes/arrow.ts ***!
  \***********************************************/
/*! exports provided: Arrow */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Arrow", function() { return Arrow; });
/* harmony import */ var apparatus_draw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apparatus/draw */ "hHoh");
/* harmony import */ var apparatus_driver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/driver */ "ScPQ");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! apparatus/library/shapes/common */ "JK3v");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! paper */ "uWrk");
/* harmony import */ var paper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(paper__WEBPACK_IMPORTED_MODULE_4__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





/** Minimum gap in paper pixels, between the two arrow heads or head and an end. */
var MINIMUM_GAP = 10;
function isV1(a) {
    return a.length !== undefined;
}
var Arrow = /** @class */ (function () {
    function Arrow() {
        this.drivers = [
            __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end1x: p.x, end1y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.end1x, a.end1y); }, scale: 1.0 }),
            __assign(__assign({ type: "rectangle" }, apparatus_driver__WEBPACK_IMPORTED_MODULE_1__["INFINITE_BOUNDS"]), { toAppearance: function (p) { return ({ end2x: p.x, end2y: p.y }); }, fromAppearance: function (a) { return Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(a.end2x, a.end2y); }, scale: 1.0 }),
        ];
        this.shouldUseBoundsCenter = true;
    }
    Arrow.isBoostRequiredForAppearance = function (a) {
        return a.arrow === "sharp";
    };
    Arrow.convertToLatest = function (input) {
        if (isV1(input)) {
            var length_1 = input.length, rest = __rest(input, ["length"]);
            return __assign(__assign({}, rest), { end1x: -length_1 / 2, end1y: 0, end2x: length_1 / 2, end2y: 0 });
        }
        return input;
    };
    Arrow.prototype.render = function (appearance) {
        // The arrow is drawn vertically, centered at (0, 0).
        // Hence, compute the transformation required, then draw the
        // arrow, then apply the transform.
        var startVector = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.end1x, appearance.end1y);
        var endVector = Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(appearance.end2x, appearance.end2y);
        var deltaVector = endVector.subtract(startVector);
        var length = deltaVector.length;
        var rotation = deltaVector.angle;
        var midPoint = startVector.add(endVector).divide(2);
        var width = appearance.width, headScale = appearance.headScale, headThickness = appearance.headThickness, bothEnds = appearance.bothEnds;
        var halfLength = length / 2;
        var maxHeadSize = Math.max(4, length - MINIMUM_GAP) / (bothEnds ? 2 : 1);
        var headSize = width * headScale * 2;
        var headFlare = headSize * headThickness;
        var effectiveHeadSize = Math.min(maxHeadSize, headSize);
        var sharpShift = effectiveHeadSize * (appearance.arrow === "sharp" ? 0.15 : 0.0);
        var graphic = new paper__WEBPACK_IMPORTED_MODULE_4__["Path"](Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[halfLength - effectiveHeadSize + sharpShift, -width / 2]], [[halfLength - effectiveHeadSize, -headFlare]], [[halfLength, 0]], // Tip
        [[halfLength - effectiveHeadSize, headFlare]], [[halfLength - effectiveHeadSize + sharpShift, width / 2]]));
        if (bothEnds) {
            Object(apparatus_draw__WEBPACK_IMPORTED_MODULE_0__["mirrorX"])(graphic);
        }
        else {
            graphic.addSegments(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["Segments"])([[-halfLength, width / 2]], [[-halfLength, -width / 2]]));
        }
        graphic.closePath();
        graphic.rotate(rotation);
        graphic.position.x += midPoint.x;
        graphic.position.y += midPoint.y;
        apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].applyStyle(graphic, appearance);
        return {
            graphic: graphic,
            pivot: Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 0),
            hitShape: apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].bounds(graphic)
        };
    };
    Arrow.properties = {
        label: "Arrow",
        canContainLiquids: false,
        defaultAppearance: __assign({ end1x: -75, end1y: 0, end2x: 75, end2y: 0, width: 30, bothEnds: false, headScale: 1.0, headThickness: 0.5, arrow: "flat" }, apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].defaultAppearance),
        appearanceSpecs: __spreadArrays(apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].specs, [
            apparatus_library_shapes_common__WEBPACK_IMPORTED_MODULE_3__["BasicShapes"].header,
            {
                spec: "slider", key: "width", label: "Width",
                min: 4, max: 50,
            },
            {
                spec: "radio", key: "arrow", label: "Arrow style",
                options: [
                    { value: "flat", label: "Flat" },
                    { value: "sharp", label: "Sharp", tier: "boost" },
                ],
                allowSelectingTierLockedOptions: true,
            },
            {
                spec: "slider", key: "headScale", label: "Arrow scale",
                min: 1.0, max: 2, step: 0.01, unit: "%"
            },
            {
                spec: "slider", key: "headThickness", label: "Arrow thickness",
                min: 0.25, max: 1.0, step: 0.01, unit: "%"
            },
            {
                spec: "checkbox", key: "bothEnds", label: "Arrows on both ends"
            },
        ]),
    };
    return Arrow;
}());



/***/ }),

/***/ "zUnb":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @szhsin/react-menu/dist/index.css */ "CGbe");
/* harmony import */ var _szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_szhsin_react_menu_dist_index_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var apparatus_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apparatus/library */ "gXS/");
/* harmony import */ var apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! apparatus/library/common */ "UCWy");
/* harmony import */ var arrows_command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! arrows/command */ "Y6iX");
/* harmony import */ var arrows_type__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! arrows/type */ "fXqh");
/* harmony import */ var bootstrap_colorpicker_extensions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap_colorpicker_extensions */ "JTYd");
/* harmony import */ var command_command__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! command/command */ "bs/A");
/* harmony import */ var flags__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! flags */ "so9M");
/* harmony import */ var layout_app__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! layout/app */ "+pHq");
/* harmony import */ var log__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! log */ "3Tcl");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "q1tI");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-dom */ "i8i4");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-redux */ "/MKj");
/* harmony import */ var store_actions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! store/actions */ "/GBr");
/* harmony import */ var store_id__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! store/id */ "GOgO");
/* harmony import */ var store_store__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! store/store */ "uFCc");
/* harmony import */ var _less_styles_less__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../less/styles.less */ "cNNV");
/* harmony import */ var _less_styles_less__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_less_styles_less__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _components_colorpicker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/colorpicker */ "0J4H");
/* harmony import */ var _setup__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./setup */ "b2Yu");
/* harmony import */ var _vars__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./vars */ "nHh6");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
// Application entry point.















// Redux components.

// Import styles


// Set up libraries and frameworks




/** App entry point. */
function main() {
    // Set up Toastr options.
    Object(_setup__WEBPACK_IMPORTED_MODULE_18__["setUpToastr"])();
    // Polyfill fetch for IE11.
    if (window.fetch === undefined) {
        Object(log__WEBPACK_IMPORTED_MODULE_9__["clog"])("Polyfilling fetch...");
        window.fetch = window['unfetch'];
    }
    // Initialise app.
    // Put the Provider on the outside and then place the connected app inside it.
    var app = react__WEBPACK_IMPORTED_MODULE_10__["createElement"](layout_app__WEBPACK_IMPORTED_MODULE_8__["ConnectedApp"]);
    var provider = react__WEBPACK_IMPORTED_MODULE_10__["createElement"](react_redux__WEBPACK_IMPORTED_MODULE_12__["Provider"], { store: store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"] }, app);
    react_dom__WEBPACK_IMPORTED_MODULE_11__["render"](provider, document.getElementById("app"));
    // TODO: Handle case where the store is empty to begin with
    // Add items to start with.
    if (!_vars__WEBPACK_IMPORTED_MODULE_19__["Consts"].isDev) {
        // Place first items slightly off center so that new items
        // added by the user are visible.
        var center = paper.project.view.center.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(-50, -30));
        var beaker = Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])("beaker", center);
        beaker.selected = true;
        store_store__WEBPACK_IMPORTED_MODULE_15__["default"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["addItems"])([
            Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])("table", center.add(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(0, 72))),
            beaker
        ]));
        store_store__WEBPACK_IMPORTED_MODULE_15__["default"].dispatchFn("addArrow", Object(arrows_command__WEBPACK_IMPORTED_MODULE_3__["addArrowMutator"])([__assign(__assign({}, arrows_type__WEBPACK_IMPORTED_MODULE_4__["Arrow"].defaultArrow), { id: store_id__WEBPACK_IMPORTED_MODULE_14__["ID"].mint("arrow"), start: center.subtract(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(120, 90)).toPlain(), end: center.subtract(Object(apparatus_library_common__WEBPACK_IMPORTED_MODULE_2__["P"])(60, 20)).toPlain(), isChemMarkEnabled: true, label: "H2O" })]));
        registerUnloadListener();
    }
    else {
        var toAdd = [
            "__live edit__",
            "__raster image__",
            "powerpack",
            "spring",
            "mirror",
            "magnet",
            "voltmeter-s",
            "ammeter-s",
            "pulley",
            "cable",
            "glass block",
            "slotted weight",
            "raybox",
            "choice chamber",
            "vernier",
            "digital voltmeter",
            "digital ammeter",
            "solenoid",
            "centrifuge",
            "weight boat",
            "paperclip",
            "trolley",
            "ramp",
            "light gate",
            "tlc chamber",
        ];
        store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["addItems"])(toAdd.map(function (item, i) { return Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])(item, { x: (i % 4) * 150 + 100, y: Math.floor(i / 4) * 150 + 150 }); })));
    }
    Object(bootstrap_colorpicker_extensions__WEBPACK_IMPORTED_MODULE_5__["registerBootstrapColorpickerExtensions"])();
    // Fix mouse up outside bootstrap colorpicker not ending slider drag.
    $("body").on("mouseup", function () {
        $("" + _components_colorpicker__WEBPACK_IMPORTED_MODULE_17__["BOOTSTRAP_COLORPICKER_CSS_SELECTOR"]).each(function (i, el) {
            var data = $(el).data();
            if (!data)
                return;
            if (!data.colorpicker)
                return;
            data.colorpicker.sliderHandler.released();
        });
    });
}
// function printNumberOfCustomisations() {
//     let optionsCount = 0
//     for (const spec of apparatusSpecListWithNames) {
//         const klass = apparatusClass(spec.type)
//         optionsCount += klass.properties.appearanceSpecs.filter(s => s.tier === "boost").length
//     }
//     console.log(optionsCount)
// }
/** Registers an event listener to ask user before closing Chemix. */
function registerUnloadListener() {
    window.addEventListener('beforeunload', function (e) {
        if (command_command__WEBPACK_IMPORTED_MODULE_6__["commandProcessor"].hasDirtyChanges()) {
            // Ask user to confirm before exiting.
            e.preventDefault();
            e.returnValue = '';
        }
        else {
            // Exit freely.
            // The absence of a returnValue property on the event will guarantee the browser unload happens
            delete e['returnValue'];
        }
    });
}
// Bind to on Ready
function ready(fn) {
    if (document.readyState != 'loading') {
        fn();
    }
    else {
        document.addEventListener('DOMContentLoaded', fn);
    }
}
ready(main);
// Allow hacking!
if (_vars__WEBPACK_IMPORTED_MODULE_19__["Consts"].isDev) {
    var fakeLogin = function (firstTimeLogin) {
        store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["logIn"])({
            jwtToken: "f", provider: "google", firstTimeLogin: firstTimeLogin, tier: "boost",
            user: { id: "0", name: "Chemix User", handle: "fake.user@Example.com", email: "fake.user@example.com", avatarUrl: "./images/200.png" }
        }));
    };
    window["__FLAGS__"] = flags__WEBPACK_IMPORTED_MODULE_7__["default"];
    window["__addApparatus__"] = function (type) {
        store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["addItems"])([Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])(type, { x: 250, y: 300 })]));
    };
    window["__fakeLogin__"] = fakeLogin;
    window["__fakeLogout__"] = function () {
        store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["logOut"])());
    };
    window["__enableSuperZoom__"] = function () { return $('#zoom-slider').slider({ max: 6 }); };
    window["__store__"] = function () { return store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"]; };
}
// For crash testing.
;
window["__tonngokhong__"] = function () { store_store__WEBPACK_IMPORTED_MODULE_15__["appStore"].dispatch(Object(store_actions__WEBPACK_IMPORTED_MODULE_13__["addItems"])([Object(apparatus_library__WEBPACK_IMPORTED_MODULE_1__["createApparatus"])("__brk", { x: 250, y: 300 })])); };


/***/ }),

/***/ "zyMn":
/*!**************************!*\
  !*** ./src/ext/color.ts ***!
  \**************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color */ "aSns");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__);

String.prototype.color = function () {
    // Have to cast to any, since casting to color & Color does not work.
    return color__WEBPACK_IMPORTED_MODULE_0__(this);
};
color__WEBPACK_IMPORTED_MODULE_0___default.a.prototype.ladd = function (delta) {
    return this.l(this.l() + delta);
};
color__WEBPACK_IMPORTED_MODULE_0___default.a.prototype.sadd = function (delta) {
    return this.saturationl(this.saturationl() + delta);
};


/***/ })

/******/ });
//# sourceMappingURL=app.main.js.map